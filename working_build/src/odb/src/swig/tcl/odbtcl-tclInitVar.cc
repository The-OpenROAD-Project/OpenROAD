namespace odb {
const char* odbtcl_tcl_inits[] = {
"IyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlCiMgQ29weXJpZ2h0IChjKSAyMDE5LTIwMjUsIFRoZSBPcGVuUk9BRCBBdXRob3JzCgpzdGE6OmRlZmluZV9jbWRfYXJncyAiY3JlYXRlX3BoeXNpY2FsX2NsdXN0ZXIiIHtjbHVzdGVyX25hbWV9Cgpwcm9jIGNyZWF0ZV9waHlzaWNhbF9jbHVzdGVyIHsgYXJncyB9IHsKICBzdGE6OnBhcnNlX2tleV9hcmdzICJjcmVhdGVfcGh5c2ljYWxfY2x1c3RlciIgYXJncyBrZXlzIHt9IGZsYWdzIHt9CiAgc3RhOjpjaGVja19hcmdjX2VxMSAiY3JlYXRlX3BoeXNpY2FsX2NsdXN0ZXIiICRhcmdzCiAgc2V0IGNsdXN0ZXJfbmFtZSAkYXJncwogIHNldCBkYiBbb3JkOjpnZXRfZGJdCiAgc2V0IGNoaXAgWyRkYiBnZXRDaGlwXQogIGlmIHsgJGNoaXAgPT0gIk5VTEwiIH0gewogICAgdXRsOjplcnJvciBPREIgMzA4ICJwbGVhc2UgbG9hZCB0aGUgZGVzaWduIGJlZm9yZSB0cnlpbmcgdG8gdXNlIHRoaXMgY29tbWFuZCIKICB9CiAgc2V0IGJsb2NrIFskY2hpcCBnZXRCbG9ja10KICBzZXQgZ3JvdXAgW29kYjo6ZGJHcm91cF9jcmVhdGUgJGJsb2NrICRjbHVzdGVyX25hbWVdCiAgaWYgeyAkZ3JvdXAgPT0gIk5VTEwiIH0gewogICAgdXRsOjplcnJvciBPREIgMzA5ICJkdXBsaWNhdGUgZ3JvdXAgbmFtZSIKICB9Cn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJjcmVhdGVfY2hpbGRfcGh5c2ljYWxfY2x1c3RlcnMiIHtbLXRvcF9tb2R1bGUgfCAtbW9kaW5zdCBwYXRoXX0KCnByb2MgY3JlYXRlX2NoaWxkX3BoeXNpY2FsX2NsdXN0ZXJzIHsgYXJncyB9IHsKICBzdGE6OnBhcnNlX2tleV9hcmdzICJjcmVhdGVfY2hpbGRfcGh5c2ljYWxfY2x1c3RlcnMiIGFyZ3Mga2V5cyB7LW1vZGluc3R9IGZsYWdzIHstdG9wX21vZHVsZX0KICBzZXQgY2x1c3Rlcl9uYW1lICRhcmdzCiAgc2V0IGRiIFtvcmQ6OmdldF9kYl0KICBzZXQgY2hpcCBbJGRiIGdldENoaXBdCiAgaWYgeyAkY2hpcCA9PSAiTlVMTCIgfSB7CiAgICB1dGw6OmVycm9yIE9EQiAzMTAgInBsZWFzZSBsb2FkIHRoZSBkZXNpZ24gYmVmb3JlIHRyeWluZyB0byB1c2UgdGhpcyBjb21tYW5kIgogIH0KICBzZXQgYmxvY2sgWyRjaGlwIGdldEJsb2NrXQogIGlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC10b3BfbW9kdWxlKV0gfSB7CiAgICBzZXQgbW9kdWxlIFskYmxvY2sgZ2V0VG9wTW9kdWxlXQogIH0gZWxzZWlmIHsgW2luZm8gZXhpc3RzIGtleXMoLW1vZGluc3QpXSB9IHsKICAgIHNldCBtb2R1bGUgW1skYmxvY2sgZmluZE1vZEluc3QgJGtleXMoLW1vZGluc3QpXSBnZXRNYXN0ZXJdCiAgfSBlbHNlIHsKICAgIHV0bDo6ZXJyb3IgT0RCIDMxMSAicGxlYXNlIGRlZmluZSBlaXRoZXIgdG9wIG1vZHVsZSBvciB0aGUgbW9kaW5zdCBwYXRoIgogIH0KICBpZiB7ICRtb2R1bGUgPT0gIk5VTEwiIH0gewogICAgdXRsOjplcnJvciBPREIgMzEyICJtb2R1bGUgZG9lcyBub3QgZXhpc3QiCiAgfQogIHNldCBtb2R1bGVfaW5zdGFuY2UgWyRtb2R1bGUgZ2V0TW9kSW5zdF0KICBzZXQgbW9kaW5zdHMgWyRtb2R1bGUgZ2V0Q2hpbGRyZW5dCiAgc2V0IGluc3RzIFskbW9kdWxlIGdldEluc3RzXQogIGZvcmVhY2ggbW9kaW5zdCAkbW9kaW5zdHMgewogICAgc2V0IGNsdXN0ZXJfbmFtZSAiWyRtb2R1bGUgZ2V0TmFtZV1fWyRtb2RpbnN0IGdldE5hbWVdIgogICAgc2V0IGdyb3VwIFtvZGI6OmRiR3JvdXBfY3JlYXRlICRibG9jayAkY2x1c3Rlcl9uYW1lXQogICAgaWYgeyAkZ3JvdXAgPT0gIk5VTEwiIH0gewogICAgICB1dGw6OmVycm9yIE9EQiAzMTMgImR1cGxpY2F0ZSBncm91cCBuYW1lIgogICAgfQogICAgJGdyb3VwIGFkZE1vZEluc3QgJG1vZGluc3QKICB9CiAgaWYgeyBbbGxlbmd0aCAkaW5zdHNdID4gMCB9IHsKICAgIGlmIHsgJG1vZHVsZV9pbnN0YW5jZSA9PSAiTlVMTCIgfSB7CiAgICAgIHNldCBncm91cCBbb2RiOjpkYkdyb3VwX2NyZWF0ZSAkYmxvY2sgIlskbW9kdWxlIGdldE5hbWVdX2dsdWUiXQogICAgfSBlbHNlIHsKICAgICAgc2V0IHBhcmVudCBbJG1vZHVsZV9pbnN0YW5jZSBnZXRQYXJlbnRdCiAgICAgIHNldCBncm91cCBbb2RiOjpkYkdyb3VwX2NyZWF0ZSAkYmxvY2sgIlskcGFyZW50IGdldE5hbWVdX1skbW9kdWxlX2luc3RhbmNlIGdldE5hbWVdX2dsdWUiXQogICAgfQogICAgaWYgeyAkZ3JvdXAgPT0gIk5VTEwiIH0gewogICAgICB1dGw6OmVycm9yIE9EQiAzMTQgImR1cGxpY2F0ZSBncm91cCBuYW1lIgogICAgfQogICAgZm9yZWFjaCBpbnN0ICRpbnN0cyB7CiAgICAgICRncm91cCBhZGRJbnN0ICRpbnN0CiAgICB9CiAgfQp9CgpzdGE6OmRlZmluZV9jbWRfYXJncyAic2V0X25kcl9sYXllcl9ydWxlIiB7dGVjaCBuZHIgbGF5ZXJOYW1lIGlucHV0IGlzU3BhY2luZ30gOyMgY2hlY2tlciBvZmYKCnByb2Mgc2V0X25kcl9sYXllcl9ydWxlIHsgdGVjaCBuZHIgbGF5ZXJOYW1lIGlucHV0IGlzU3BhY2luZyB9IHsKICBzZXQgbGF5ZXIgWyR0ZWNoIGZpbmRMYXllciAkbGF5ZXJOYW1lXQogIGlmIHsgJGxheWVyID09ICJOVUxMIiB9IHsKICAgIHV0bDo6d2FybiBPREIgMTAwMCAiTGF5ZXIgJHtsYXllck5hbWV9IG5vdCBmb3VuZCwgc2tpcHBpbmcgTkRSIGZvciB0aGlzIGxheWVyIgogICAgcmV0dXJuCiAgfQogIGlmIHsgWyRsYXllciBnZXRUeXBlXSAhPSAiUk9VVElORyIgfSB7CiAgICByZXR1cm4KICB9CiAgc2V0IHJ1bGUgWyRuZHIgZ2V0TGF5ZXJSdWxlICRsYXllcl0KICBpZiB7ICRydWxlID09ICJOVUxMIiB9IHsKICAgIHNldCBydWxlIFtvZGI6OmRiVGVjaExheWVyUnVsZV9jcmVhdGUgJG5kciAkbGF5ZXJdCiAgfQogIHNldCBpbnB1dCBbc3RyaW5nIHRyaW0gJGlucHV0XQogIGlmIHsgW3N0cmluZyBpcyBkb3VibGUgJGlucHV0XSB9IHsKICAgIHNldCB2YWx1ZSBbb3JkOjptaWNyb25zX3RvX2RidSAkaW5wdXRdCiAgfSBlbHNlaWYgeyBbc3RyaW5nIGZpcnN0ICIqIiAkaW5wdXRdID09IDAgfSB7CiAgICBpZiB7ICRpc1NwYWNpbmcgfSB7CiAgICAgIHNldCB2YWx1ZSBbZXhwciBbc3RyaW5nIHRyaW0gJGlucHV0ICIqIl0gKiBbJGxheWVyIGdldFNwYWNpbmddXQogICAgfSBlbHNlIHsKICAgICAgc2V0IHZhbHVlIFtleHByIFtzdHJpbmcgdHJpbSAkaW5wdXQgIioiXSAqIFskbGF5ZXIgZ2V0V2lkdGhdXQogICAgfQogIH0gZWxzZSB7CiAgICB1dGw6Ondhcm4gT0RCIDEwMDkgIkludmFsaWQgaW5wdXQgaW4gY3JlYXRlX25kciBjbWQiCiAgICByZXR1cm4KICB9CiAgaWYgeyAkaXNTcGFjaW5nIH0gewogICAgJHJ1bGUgc2V0U3BhY2luZyAkdmFsdWUKICB9IGVsc2UgewogICAgJHJ1bGUgc2V0V2lkdGggJHZhbHVlCiAgfQp9CgpzdGE6OmRlZmluZV9jbWRfYXJncyAic2V0X25kcl9ydWxlcyIge3RlY2ggbmRyIHZhbHVlcyBpc1NwYWNpbmd9IDsjY2hlY2tlciBvZmYKCnByb2Mgc2V0X25kcl9ydWxlcyB7IHRlY2ggbmRyIHZhbHVlcyBpc1NwYWNpbmcgfSB7CiAgaWYgeyBbbGxlbmd0aCAkdmFsdWVzXSA9PSAxIH0gewogICAgIyBPbWl0dGluZyBsYXllcnMKICAgIHNldCB2YWx1ZSBbbGluZGV4ICR2YWx1ZXMgMF0KICAgIGZvcmVhY2ggbGF5ZXIgWyR0ZWNoIGdldExheWVyc10gewogICAgICBpZiB7IFskbGF5ZXIgZ2V0VHlwZV0gIT0gIlJPVVRJTkciIH0gewogICAgICAgIGNvbnRpbnVlCiAgICAgIH0KICAgICAgc2V0X25kcl9sYXllcl9ydWxlICR0ZWNoICRuZHIgWyRsYXllciBnZXROYW1lXSAkdmFsdWUgJGlzU3BhY2luZwogICAgfQogICAgcmV0dXJuCiAgfQogIGZvciB7IHNldCBpIDAgfSB7ICRpIDwgW2xsZW5ndGggJHZhbHVlc10gfSB7IGluY3IgaSAyIH0gewogICAgc2V0IGxheWVycyBbbGluZGV4ICR2YWx1ZXMgJGldCiAgICBzZXQgdmFsdWUgW2xpbmRleCAkdmFsdWVzIFtleHByICRpICsgMV1dCiAgICBpZiB7IFtzdHJpbmcgZmlyc3QgIjoiICRsYXllcnNdID09IC0xIH0gewogICAgICBzZXRfbmRyX2xheWVyX3J1bGUgJHRlY2ggJG5kciAkbGF5ZXJzICR2YWx1ZSAkaXNTcGFjaW5nCiAgICB9IGVsc2UgewogICAgICBsYXNzaWduIFtzcGxpdCAkbGF5ZXJzICI6Il0gZmlyc3RMYXllciBsYXN0TGF5ZXIKICAgICAgc2V0IGZvdW5kRmlyc3QgMAogICAgICBzZXQgZm91bmRMYXN0IDAKICAgICAgZm9yZWFjaCBsYXllciBbJHRlY2ggZ2V0TGF5ZXJzXSB7CiAgICAgICAgaWYgeyBbJGxheWVyIGdldFR5cGVdICE9ICJST1VUSU5HIiB9IHsKICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgfQogICAgICAgIGlmIHsgJGZvdW5kRmlyc3QgPT0gMCB9IHsKICAgICAgICAgIGlmIHsgWyRsYXllciBnZXROYW1lXSA9PSAkZmlyc3RMYXllciB9IHsKICAgICAgICAgICAgc2V0IGZvdW5kRmlyc3QgMQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29udGludWUKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2V0X25kcl9sYXllcl9ydWxlICR0ZWNoICRuZHIgWyRsYXllciBnZXROYW1lXSAkdmFsdWUgJGlzU3BhY2luZwogICAgICAgIGlmIHsgWyRsYXllciBnZXROYW1lXSA9PSAkbGFzdExheWVyIH0gewogICAgICAgICAgc2V0IGZvdW5kTGFzdCAxCiAgICAgICAgICBicmVhawogICAgICAgIH0KICAgICAgfQogICAgICBpZiB7ICRmb3VuZEZpcnN0ID09IDAgfSB7CiAgICAgICAgdXRsOjp3YXJuIE9EQiAxMDAxICJMYXllciAke2ZpcnN0TGF5ZXJ9IG5vdCBmb3VuZCIKICAgICAgfQogICAgICBpZiB7ICRmb3VuZExhc3QgPT0gMCB9IHsKICAgICAgICB1dGw6Ondhcm4gT0RCIDEwMDIgIkxheWVyICR7bGFzdExheWVyfSBub3QgZm91bmQiCiAgICAgIH0KICAgIH0KICB9Cn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJjcmVhdGVfbmRyIiB7IC1uYW1lIG5hbWUgXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1zcGFjaW5nIHZhbF0gXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy13aWR0aCB2YWxdIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstdmlhIHZhbF19Cgpwcm9jIGNyZWF0ZV9uZHIgeyBhcmdzIH0gewogIHN0YTo6cGFyc2Vfa2V5X2FyZ3MgImNyZWF0ZV9uZHIiIGFyZ3Mga2V5cyB7LW5hbWUgLXNwYWNpbmcgLXdpZHRoIC12aWF9IGZsYWdzIHt9CiAgaWYgeyAhW2luZm8gZXhpc3RzIGtleXMoLW5hbWUpXSB9IHsKICAgIHV0bDo6ZXJyb3IgT0RCIDEwMDQgIi1uYW1lIGlzIG1pc3NpbmciCiAgfQogIHNldCBuYW1lICRrZXlzKC1uYW1lKQogIHNldCBibG9jayBbW1tvcmQ6OmdldF9kYl0gZ2V0Q2hpcF0gZ2V0QmxvY2tdCiAgc2V0IHRlY2ggW1tvcmQ6OmdldF9kYl0gZ2V0VGVjaF0KICBzZXQgbmRyIFtvZGI6OmRiVGVjaE5vbkRlZmF1bHRSdWxlX2NyZWF0ZSAkYmxvY2sgJG5hbWVdCiAgaWYgeyAkbmRyID09ICJOVUxMIiB9IHsKICAgIHV0bDo6ZXJyb3IgT0RCIDEwMDUgIk5vbkRlZmF1bHRSdWxlICR7bmFtZX0gYWxyZWFkeSBleGlzdHMiCiAgfQogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLXNwYWNpbmcpXSB9IHsKICAgIHNldCBzcGFjaW5ncyAka2V5cygtc3BhY2luZykKICAgIGlmIHsgW2xsZW5ndGggJHNwYWNpbmdzXSAhPSAxICYmIFtsbGVuZ3RoICRzcGFjaW5nc10gJSAyID09IDEgfSB7CiAgICAgIHV0bDo6ZXJyb3IgT0RCIDEwMDYgIlNwYWNpbmcgdmFsdWVzIFxbJHNwYWNpbmdzXF0gYXJlIG1hbGZvcm1lZCIKICAgIH0KICAgIHNldF9uZHJfcnVsZXMgJHRlY2ggJG5kciAkc3BhY2luZ3MgMQogIH0KICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC13aWR0aCldIH0gewogICAgc2V0IHdpZHRocyAka2V5cygtd2lkdGgpCiAgICBpZiB7IFtsbGVuZ3RoICR3aWR0aHNdICE9IDEgJiYgW2xsZW5ndGggJHdpZHRoc10gJSAyID09IDEgfSB7CiAgICAgIHV0bDo6ZXJyb3IgT0RCIDEwMDcgIldpZHRoIHZhbHVlcyBcWyR3aWR0aHNcXSBhcmUgbWFsZm9ybWVkIgogICAgfQogICAgc2V0X25kcl9ydWxlcyAkdGVjaCAkbmRyICR3aWR0aHMgMAogIH0KICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC12aWEpXSB9IHsKICAgIGZvcmVhY2ggdmlhTmFtZSAka2V5cygtdmlhKSB7CiAgICAgIHNldCB2aWEgWyR0ZWNoIGZpbmRWaWEgJHZpYU5hbWVdCiAgICAgIGlmIHsgJHZpYSA9PSAiTlVMTCIgfSB7CiAgICAgICAgdXRsOjplcnJvciBPREIgMTAwOCAiVmlhICR7dmlhTmFtZX0gbm90IGZvdW5kLCBza2lwcGluZyBORFIgZm9yIHRoaXMgdmlhIgogICAgICAgIGNvbnRpbnVlCiAgICAgIH0KICAgICAgJG5kciBhZGRVc2VWaWEgJHZpYQogICAgfQogIH0KICAjIGluaW50aWFsaXplIGxheWVycwogIGZvcmVhY2ggbGF5ZXIgWyR0ZWNoIGdldExheWVyc10gewogICAgaWYgeyBbJGxheWVyIGdldFR5cGVdICE9ICJST1VUSU5HIiB9IHsKICAgICAgY29udGludWUKICAgIH0KICAgIHNldCBydWxlIFskbmRyIGdldExheWVyUnVsZSAkbGF5ZXJdCiAgICBpZiB7ICRydWxlICE9ICJOVUxMIiB9IHsKICAgICAgaWYgeyBbJHJ1bGUgZ2V0V2lkdGhdICE9IDAgfSB7CiAgICAgICAgY29udGludWUKICAgICAgfQogICAgfQogICAgdXRsOjp3YXJuIE9EQiAxMDAzICIoWyRsYXllciBnZXROYW1lXSkgbGF5ZXIncyB3aWR0aCBmcm9tICgke25hbWV9KSBORFIgaXMgbm90IGRlZmluZWQuXAogICAgICBVc2luZyB0aGUgZGVmYXVsdCB2YWx1ZSBbb3JkOjpkYnVfdG9fbWljcm9ucyBbJGxheWVyIGdldFdpZHRoXV0iCiAgICBzZXRfbmRyX2xheWVyX3J1bGUgJHRlY2ggJG5kciBbJGxheWVyIGdldE5hbWVdICIqMSIgMAogIH0KfQoKc3RhOjpkZWZpbmVfY21kX2FyZ3MgImNyZWF0ZV92b2x0YWdlX2RvbWFpbiIge2RvbWFpbl9uYW1lIC1hcmVhIHtsbHggbGx5IHVyeCB1cnl9fQoKcHJvYyBjcmVhdGVfdm9sdGFnZV9kb21haW4geyBhcmdzIH0gewogIHN0YTo6cGFyc2Vfa2V5X2FyZ3MgImNyZWF0ZV92b2x0YWdlX2RvbWFpbiIgYXJncyBrZXlzIHstYXJlYX0gZmxhZ3Mge30KICBzZXQgZG9tYWluX25hbWUgW2xpbmRleCAkYXJncyAwXQogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLWFyZWEpXSB9IHsKICAgIHNldCBhcmVhICRrZXlzKC1hcmVhKQogICAgaWYgeyBbbGxlbmd0aCAkYXJlYV0gIT0gNCB9IHsKICAgICAgdXRsOjplcnJvciBPREIgMzE1ICItYXJlYSBpcyBhIGxpc3Qgb2YgNCBjb29yZGluYXRlcyIKICAgIH0KICAgIGxhc3NpZ24gJGFyZWEgbGx4IGxseSB1cnggdXJ5CiAgICBzdGE6OmNoZWNrX3Bvc2l0aXZlX2Zsb2F0ICItYXJlYSIgJGxseAogICAgc3RhOjpjaGVja19wb3NpdGl2ZV9mbG9hdCAiLWFyZWEiICRsbHkKICAgIHN0YTo6Y2hlY2tfcG9zaXRpdmVfZmxvYXQgIi1hcmVhIiAkdXJ4CiAgICBzdGE6OmNoZWNrX3Bvc2l0aXZlX2Zsb2F0ICItYXJlYSIgJHVyeQogIH0gZWxzZSB7CiAgICB1dGw6OmVycm9yIE9EQiAzMTYgInBsZWFzZSBkZWZpbmUgYXJlYSIKICB9CiAgc3RhOjpjaGVja19hcmdjX2VxMSAiY3JlYXRlX3ZvbHRhZ2VfZG9tYWluIiAkYXJncwogIHNldCBkb21haW5fbmFtZSAkYXJncwogIHNldCBkYiBbb3JkOjpnZXRfZGJdCiAgc2V0IGNoaXAgWyRkYiBnZXRDaGlwXQogIGlmIHsgJGNoaXAgPT0gIk5VTEwiIH0gewogICAgdXRsOjplcnJvciBPREIgMzE3ICJwbGVhc2UgbG9hZCB0aGUgZGVzaWduIGJlZm9yZSB0cnlpbmcgdG8gdXNlIHRoaXMgY29tbWFuZCIKICB9CiAgc2V0IGJsb2NrIFskY2hpcCBnZXRCbG9ja10KICBzZXQgcmVnaW9uIFtvZGI6OmRiUmVnaW9uX2NyZWF0ZSAkYmxvY2sgJGRvbWFpbl9uYW1lXQogIGlmIHsgJHJlZ2lvbiA9PSAiTlVMTCIgfSB7CiAgICB1dGw6OmVycm9yIE9EQiAzMTggImR1cGxpY2F0ZSByZWdpb24gbmFtZSIKICB9CiAgc2V0IGJveCBbb2RiOjpkYkJveF9jcmVhdGUgJHJlZ2lvbiBcCiAgICBbb3JkOjptaWNyb25zX3RvX2RidSAkbGx4XSBbb3JkOjptaWNyb25zX3RvX2RidSAkbGx5XSBcCiAgICBbb3JkOjptaWNyb25zX3RvX2RidSAkdXJ4XSBbb3JkOjptaWNyb25zX3RvX2RidSAkdXJ5XV0KICBzZXQgZ3JvdXAgW29kYjo6ZGJHcm91cF9jcmVhdGUgJHJlZ2lvbiAkZG9tYWluX25hbWVdCiAgaWYgeyAkZ3JvdXAgPT0gIk5VTEwiIH0gewogICAgdXRsOjplcnJvciBPREIgMzE5ICJkdXBsaWNhdGUgZ3JvdXAgbmFtZSIKICB9CiAgJGdyb3VwIHNldFR5cGUgVk9MVEFHRV9ET01BSU4KfQoKc3RhOjpkZWZpbmVfY21kX2FyZ3MgImRlbGV0ZV9waHlzaWNhbF9jbHVzdGVyIiB7Y2x1c3Rlcl9uYW1lfSA7IyBjaGVja2VyIG9mZgoKcHJvYyBkZWxldGVfcGh5c2ljYWxfY2x1c3RlciB7IGFyZ3MgfSB7CiAgc3RhOjpjaGVja19hcmdjX2VxMSAiZGVsZXRlX3BoeXNpY2FsX2NsdXN0ZXIiICRhcmdzCiAgc2V0IGNsdXN0ZXJfbmFtZSAkYXJncwogIHNldCBkYiBbb3JkOjpnZXRfZGJdCiAgc2V0IGNoaXAgWyRkYiBnZXRDaGlwXQogIGlmIHsgJGNoaXAgPT0gIk5VTEwiIH0gewogICAgdXRsOjplcnJvciBPREIgMzIwICJwbGVhc2UgbG9hZCB0aGUgZGVzaWduIGJlZm9yZSB0cnlpbmcgdG8gdXNlIHRoaXMgY29tbWFuZCIKICB9CiAgc2V0IGJsb2NrIFskY2hpcCBnZXRCbG9ja10KICBzZXQgZ3JvdXAgWyRibG9jayBmaW5kR3JvdXAgJGNsdXN0ZXJfbmFtZV0KICBpZiB7ICRncm91cCA9PSAiTlVMTCIgfSB7CiAgICB1dGw6OmVycm9yIE9EQiAzMjEgImdyb3VwIGRvZXMgbm90IGV4aXN0IgogIH0KICBpZiB7IFskZ3JvdXAgZ2V0VHlwZV0gPT0gIlZPTFRBR0VfRE9NQUlOIiB9IHsKICAgIHV0bDo6ZXJyb3IgT0RCIDMyMiAiZ3JvdXAgaXMgbm90IG9mIHBoeXNpY2FsIGNsdXN0ZXIgdHlwZSIKICB9CiAgb2RiOjpkYkdyb3VwX2Rlc3Ryb3kgJGdyb3VwCn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJkZWxldGVfdm9sdGFnZV9kb21haW4iIHtkb21haW5fbmFtZX0KCnByb2MgZGVsZXRlX3ZvbHRhZ2VfZG9tYWluIHsgYXJncyB9IHsKICBzdGE6OnBhcnNlX2tleV9hcmdzICJkZWxldGVfdm9sdGFnZV9kb21haW4iIGFyZ3Mga2V5cyB7fSBmbGFncyB7fQogIHN0YTo6Y2hlY2tfYXJnY19lcTEgImRlbGV0ZV92b2x0YWdlX2RvbWFpbiIgJGFyZ3MKICBzZXQgZG9tYWluX25hbWUgJGFyZ3MKICBzZXQgZGIgW29yZDo6Z2V0X2RiXQogIHNldCBjaGlwIFskZGIgZ2V0Q2hpcF0KICBpZiB7ICRjaGlwID09ICJOVUxMIiB9IHsKICAgIHV0bDo6ZXJyb3IgT0RCIDMyMyAicGxlYXNlIGxvYWQgdGhlIGRlc2lnbiBiZWZvcmUgdHJ5aW5nIHRvIHVzZSB0aGlzIGNvbW1hbmQiCiAgfQogIHNldCBibG9jayBbJGNoaXAgZ2V0QmxvY2tdCiAgc2V0IGdyb3VwIFskYmxvY2sgZmluZEdyb3VwICRkb21haW5fbmFtZV0KICBpZiB7ICRncm91cCA9PSAiTlVMTCIgfSB7CiAgICB1dGw6OmVycm9yIE9EQiAzMjQgImdyb3VwIGRvZXMgbm90IGV4aXN0IgogIH0KICBpZiB7IFskZ3JvdXAgZ2V0VHlwZV0gPT0gIlBIWVNJQ0FMX0NMVVNURVIiIH0gewogICAgdXRsOjplcnJvciBPREIgMzI1ICJncm91cCBpcyBub3Qgb2Ygdm9sdGFnZSBkb21haW4gdHlwZSIKICB9CiAgb2RiOjpkYkdyb3VwX2Rlc3Ryb3kgJGdyb3VwCn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJhc3NpZ25fcG93ZXJfbmV0IiB7LWRvbWFpbiBkb21haW5fbmFtZSAtbmV0IHNuZXRfbmFtZX0KCnByb2MgYXNzaWduX3Bvd2VyX25ldCB7IGFyZ3MgfSB7CiAgc3RhOjpwYXJzZV9rZXlfYXJncyAiYXNzaWduX3Bvd2VyX25ldCIgYXJncyBrZXlzIHstZG9tYWluIC1uZXR9IGZsYWdzIHt9CiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtZG9tYWluKV0gfSB7CiAgICBzZXQgZG9tYWluX25hbWUgJGtleXMoLWRvbWFpbikKICB9IGVsc2UgewogICAgdXRsOjplcnJvciBPREIgMzI2ICJkZWZpbmUgZG9tYWluIG5hbWUiCiAgfQogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLW5ldCldIH0gewogICAgc2V0IG5ldF9uYW1lICRrZXlzKC1uZXQpCiAgfSBlbHNlIHsKICAgIHV0bDo6ZXJyb3IgT0RCIDMyNyAiZGVmaW5lIG5ldCBuYW1lIgogIH0KICBzZXQgZGIgW29yZDo6Z2V0X2RiXQogIHNldCBjaGlwIFskZGIgZ2V0Q2hpcF0KICBpZiB7ICRjaGlwID09ICJOVUxMIiB9IHsKICAgIHV0bDo6ZXJyb3IgT0RCIDMyOCAicGxlYXNlIGxvYWQgdGhlIGRlc2lnbiBiZWZvcmUgdHJ5aW5nIHRvIHVzZSB0aGlzIGNvbW1hbmQiCiAgfQogIHNldCBibG9jayBbJGNoaXAgZ2V0QmxvY2tdCiAgc2V0IGdyb3VwIFskYmxvY2sgZmluZEdyb3VwICRkb21haW5fbmFtZV0KICBzZXQgbmV0IFskYmxvY2sgZmluZE5ldCAkbmV0X25hbWVdCiAgaWYgeyAkZ3JvdXAgPT0gIk5VTEwiIH0gewogICAgdXRsOjplcnJvciBPREIgMzI5ICJncm91cCBkb2VzIG5vdCBleGlzdCIKICB9CiAgaWYgeyBbJGdyb3VwIGdldFR5cGVdID09ICJQSFlTSUNBTF9DTFVTVEVSIiB9IHsKICAgIHV0bDo6ZXJyb3IgT0RCIDMzMCAiZ3JvdXAgaXMgbm90IG9mIHZvbHRhZ2UgZG9tYWluIHR5cGUiCiAgfQogIGlmIHsgJG5ldCA9PSAiTlVMTCIgfSB7CiAgICB1dGw6OmVycm9yIE9EQiAzMzEgIm5ldCBkb2VzIG5vdCBleGlzdCIKICB9CiAgJGdyb3VwIGFkZFBvd2VyTmV0ICRuZXQKfQoKc3RhOjpkZWZpbmVfY21kX2FyZ3MgImFzc2lnbl9ncm91bmRfbmV0IiB7LWRvbWFpbiBkb21haW5fbmFtZSAtbmV0IHNuZXRfbmFtZX0KCnByb2MgYXNzaWduX2dyb3VuZF9uZXQgeyBhcmdzIH0gewogIHN0YTo6cGFyc2Vfa2V5X2FyZ3MgImFzc2lnbl9ncm91bmRfbmV0IiBhcmdzIGtleXMgey1kb21haW4gLW5ldH0gZmxhZ3Mge30KICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1kb21haW4pXSB9IHsKICAgIHNldCBkb21haW5fbmFtZSAka2V5cygtZG9tYWluKQogIH0gZWxzZSB7CiAgICB1dGw6OmVycm9yIE9EQiAzMzIgImRlZmluZSBkb21haW4gbmFtZSIKICB9CiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtbmV0KV0gfSB7CiAgICBzZXQgbmV0X25hbWUgJGtleXMoLW5ldCkKICB9IGVsc2UgewogICAgdXRsOjplcnJvciBPREIgMzMzICJkZWZpbmUgbmV0IG5hbWUiCiAgfQogIHNldCBkYiBbb3JkOjpnZXRfZGJdCiAgc2V0IGNoaXAgWyRkYiBnZXRDaGlwXQogIGlmIHsgJGNoaXAgPT0gIk5VTEwiIH0gewogICAgdXRsOjplcnJvciBPREIgMzM0ICJwbGVhc2UgbG9hZCB0aGUgZGVzaWduIGJlZm9yZSB0cnlpbmcgdG8gdXNlIHRoaXMgY29tbWFuZCIKICB9CiAgc2V0IGJsb2NrIFskY2hpcCBnZXRCbG9ja10KICBzZXQgZ3JvdXAgWyRibG9jayBmaW5kR3JvdXAgJGRvbWFpbl9uYW1lXQogIHNldCBuZXQgWyRibG9jayBmaW5kTmV0ICRuZXRfbmFtZV0KICBpZiB7ICRncm91cCA9PSAiTlVMTCIgfSB7CiAgICB1dGw6OmVycm9yIE9EQiAzMzUgImdyb3VwIGRvZXMgbm90IGV4aXN0IgogIH0KICBpZiB7IFskZ3JvdXAgZ2V0VHlwZV0gPT0gIlBIWVNJQ0FMX0NMVVNURVIiIH0gewogICAgdXRsOjplcnJvciBPREIgMzM2ICJncm91cCBpcyBub3Qgb2Ygdm9sdGFnZSBkb21haW4gdHlwZSIKICB9CiAgaWYgeyAkbmV0ID09ICJOVUxMIiB9IHsKICAgIHV0bDo6ZXJyb3IgT0RCIDMzNyAibmV0IGRvZXMgbm90IGV4aXN0IgogIH0KICAkZ3JvdXAgYWRkR3JvdW5kTmV0ICRuZXQKfQoKc3RhOjpkZWZpbmVfY21kX2FyZ3MgImFkZF90b19waHlzaWNhbF9jbHVzdGVyIiB7CiAgWy1tb2RpbnN0IHBhdGggfCAtaW5zdCBpbnN0X25hbWUgfCAtcGh5c2ljYWxfY2x1c3RlciBjbHVzdGVyX25hbWVdICBjbHVzdGVyX25hbWUKfQoKcHJvYyBhZGRfdG9fcGh5c2ljYWxfY2x1c3RlciB7IGFyZ3MgfSB7CiAgc3RhOjpwYXJzZV9rZXlfYXJncyAiYWRkX3RvX3BoeXNpY2FsX2NsdXN0ZXIiIGFyZ3MgXAogICAga2V5cyB7LW1vZGluc3QgLWluc3QgLXBoeXNpY2FsX2NsdXN0ZXJ9IGZsYWdzIHt9CiAgc3RhOjpjaGVja19hcmdjX2VxMSAiYWRkX3RvX3BoeXNpY2FsX2NsdXN0ZXIiICRhcmdzCiAgc2V0IGNsdXN0ZXJfbmFtZSAkYXJncwogIHNldCBkYiBbb3JkOjpnZXRfZGJdCiAgc2V0IGNoaXAgWyRkYiBnZXRDaGlwXQogIGlmIHsgJGNoaXAgPT0gIk5VTEwiIH0gewogICAgdXRsOjplcnJvciBPREIgMzM4ICJwbGVhc2UgbG9hZCB0aGUgZGVzaWduIGJlZm9yZSB0cnlpbmcgdG8gdXNlIHRoaXMgY29tbWFuZCIKICB9CiAgc2V0IGJsb2NrIFskY2hpcCBnZXRCbG9ja10KICBzZXQgZ3JvdXAgWyRibG9jayBmaW5kR3JvdXAgJGNsdXN0ZXJfbmFtZV0KICBpZiB7ICRncm91cCA9PSAiTlVMTCIgfSB7CiAgICB1dGw6OmVycm9yIE9EQiAzMzkgImNsdXN0ZXIgZG9lcyBub3QgZXhpc3QiCiAgfQogIGlmIHsgWyRncm91cCBnZXRUeXBlXSA9PSAiVk9MVEFHRV9ET01BSU4iIH0gewogICAgdXRsOjplcnJvciBPREIgMzQwICJncm91cCBpcyBub3Qgb2YgcGh5c2ljYWwgY2x1c3RlciB0eXBlIgogIH0KICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1tb2RpbnN0KV0gfSB7CiAgICBzZXQgbW9kaW5zdCBbJGJsb2NrIGZpbmRNb2RJbnN0ICRrZXlzKC1tb2RpbnN0KV0KICAgIGlmIHsgJG1vZGluc3QgPT0gIk5VTEwiIH0gewogICAgICB1dGw6OmVycm9yIE9EQiAzNDEgIm1vZGluc3QgZG9lcyBub3QgZXhpc3QiCiAgICB9CiAgICAkZ3JvdXAgYWRkTW9kSW5zdCAkbW9kaW5zdAogIH0KICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1pbnN0KV0gfSB7CiAgICBzZXQgaW5zdCBbJGJsb2NrIGZpbmRJbnN0ICRrZXlzKC1pbnN0KV0KICAgIGlmIHsgJGluc3QgPT0gIk5VTEwiIH0gewogICAgICB1dGw6OmVycm9yIE9EQiAzNDIgImluc3QgZG9lcyBub3QgZXhpc3QiCiAgICB9CiAgICAkZ3JvdXAgYWRkSW5zdCAkaW5zdAogIH0KICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1waHlzaWNhbF9jbHVzdGVyKV0gfSB7CiAgICBzZXQgY2hpbGQgWyRibG9jayBmaW5kR3JvdXAgJGtleXMoLXBoeXNpY2FsX2NsdXN0ZXIpXQogICAgaWYgeyAkY2hpbGQgPT0gIk5VTEwiIH0gewogICAgICB1dGw6OmVycm9yIE9EQiAzNDMgImNoaWxkIHBoeXNpY2FsIGNsdXN0ZXIgZG9lcyBub3QgZXhpc3QiCiAgICB9CiAgICBpZiB7IFskY2hpbGQgZ2V0VHlwZV0gPT0gIlZPTFRBR0UgRE9NQUlOIiB9IHsKICAgICAgdXRsOjplcnJvciBPREIgMzQ0ICJjaGlsZCBncm91cCBpcyBub3Qgb2YgcGh5c2ljYWwgY2x1c3RlciB0eXBlIgogICAgfQogICAgJGdyb3VwIGFkZEdyb3VwICRjaGlsZAogIH0KfQoKc3RhOjpkZWZpbmVfY21kX2FyZ3MgInJlbW92ZV9mcm9tX3BoeXNpY2FsX2NsdXN0ZXIiIHsKICBbLXBhcmVudF9tb2R1bGUgbW9kdWxlX25hbWUgLW1vZGluc3QgbW9kaW5zdF9uYW1lIHxcCiAgIC1pbnN0IGluc3RfbmFtZSB8IC1waHlzaWNhbF9jbHVzdGVyIGNsdXN0ZXJfbmFtZV0gIGNsdXN0ZXJfbmFtZQp9Cgpwcm9jIHJlbW92ZV9mcm9tX3BoeXNpY2FsX2NsdXN0ZXIgeyBhcmdzIH0gewogIHN0YTo6cGFyc2Vfa2V5X2FyZ3MgInJlbW92ZV9mcm9tX3BoeXNpY2FsX2NsdXN0ZXIiIGFyZ3MgXAogICAga2V5cyB7LXBhcmVudF9tb2R1bGUgLW1vZGluc3QgLWluc3QgLXBoeXNpY2FsX2NsdXN0ZXJ9IGZsYWdzIHt9CiAgc3RhOjpjaGVja19hcmdjX2VxMSAicmVtb3ZlX2Zyb21fcGh5c2ljYWxfY2x1c3RlciIgJGFyZ3MKICBzZXQgY2x1c3Rlcl9uYW1lICRhcmdzCiAgc2V0IGRiIFtvcmQ6OmdldF9kYl0KICBzZXQgY2hpcCBbJGRiIGdldENoaXBdCiAgaWYgeyAkY2hpcCA9PSAiTlVMTCIgfSB7CiAgICB1dGw6OmVycm9yIE9EQiAzNDUgInBsZWFzZSBsb2FkIHRoZSBkZXNpZ24gYmVmb3JlIHRyeWluZyB0byB1c2UgdGhpcyBjb21tYW5kIgogIH0KICBzZXQgYmxvY2sgWyRjaGlwIGdldEJsb2NrXQogIHNldCBncm91cCBbJGJsb2NrIGZpbmRHcm91cCAkY2x1c3Rlcl9uYW1lXQogIGlmIHsgJGdyb3VwID09ICJOVUxMIiB9IHsKICAgIHV0bDo6ZXJyb3IgT0RCIDM0NiAiY2x1c3RlciBkb2VzIG5vdCBleGlzdCIKICB9CiAgaWYgeyBbJGdyb3VwIGdldFR5cGVdID09ICJWT0xUQUdFX0RPTUFJTiIgfSB7CiAgICB1dGw6OmVycm9yIE9EQiAzNDcgImdyb3VwIGlzIG5vdCBvZiBwaHlzaWNhbCBjbHVzdGVyIHR5cGUiCiAgfQogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLXBhcmVudF9tb2R1bGUpXSB9IHsKICAgIHNldCBtb2R1bGUgWyRibG9jayBmaW5kTW9kdWxlICRrZXlzKC1wYXJlbnRfbW9kdWxlKV0KICAgIGlmIHsgJG1vZHVsZSA9PSAiTlVMTCIgfSB7CiAgICAgIHV0bDo6ZXJyb3IgT0RCIDM0OCAicGFyZW50IG1vZHVsZSBkb2VzIG5vdCBleGlzdCIKICAgIH0KICAgIHNldCBtb2RpbnN0IFskbW9kdWxlIGZpbmRNb2RJbnN0ICRrZXlzKC1tb2RpbnN0KV0KICAgIGlmIHsgJG1vZGluc3QgPT0gIk5VTEwiIH0gewogICAgICB1dGw6OmVycm9yIE9EQiAzNDkgIm1vZGluc3QgZG9lcyBub3QgZXhpc3QiCiAgICB9CiAgICAkZ3JvdXAgcmVtb3ZlTW9kSW5zdCAkbW9kaW5zdAogIH0KICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1pbnN0KV0gfSB7CiAgICBzZXQgaW5zdCBbJGJsb2NrIGZpbmRJbnN0ICRrZXlzKC1pbnN0KV0KICAgIGlmIHsgJGluc3QgPT0gIk5VTEwiIH0gewogICAgICB1dGw6OmVycm9yIE9EQiAzNTAgImluc3QgZG9lcyBub3QgZXhpc3QiCiAgICB9CiAgICAkZ3JvdXAgcmVtb3ZlSW5zdCAkaW5zdAogIH0KICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1waHlzaWNhbF9jbHVzdGVyKV0gfSB7CiAgICBzZXQgY2hpbGQgWyRibG9jayBmaW5kR3JvdXAgJGtleXMoLXBoeXNpY2FsX2NsdXN0ZXIpXQogICAgaWYgeyAkY2hpbGQgPT0gIk5VTEwiIH0gewogICAgICB1dGw6OmVycm9yIE9EQiAzNTEgImNoaWxkIHBoeXNpY2FsIGNsdXN0ZXIgZG9lcyBub3QgZXhpc3QiCiAgICB9CiAgICBpZiB7IFskY2hpbGQgZ2V0VHlwZV0gPT0gIlZPTFRBR0VfRE9NQUlOIiB9IHsKICAgICAgdXRsOjplcnJvciBPREIgMzUyICJjaGlsZCBncm91cCBpcyBub3Qgb2YgcGh5c2ljYWwgY2x1c3RlciB0eXBlIgogICAgfQogICAgJGdyb3VwIHJlbW92ZUdyb3VwICRjaGlsZAogIH0KfQoKc3RhOjpkZWZpbmVfY21kX2FyZ3MgInJlcG9ydF9waHlzaWNhbF9jbHVzdGVycyIge30KCnByb2MgcmVwb3J0X3BoeXNpY2FsX2NsdXN0ZXJzIHsgYXJncyB9IHsKICBzdGE6OnBhcnNlX2tleV9hcmdzICJyZXBvcnRfcGh5c2ljYWxfY2x1c3RlcnMiIGFyZ3Mga2V5cyB7fSBmbGFncyB7fQogIHNldCBkYiBbb3JkOjpnZXRfZGJdCiAgc2V0IGNoaXAgWyRkYiBnZXRDaGlwXQogIGlmIHsgJGNoaXAgPT0gIk5VTEwiIH0gewogICAgdXRsOjplcnJvciBPREIgMzUzICJwbGVhc2UgbG9hZCB0aGUgZGVzaWduIGJlZm9yZSB0cnlpbmcgdG8gdXNlIHRoaXMgY29tbWFuZCIKICB9CiAgc2V0IGJsb2NrIFskY2hpcCBnZXRCbG9ja10KICBzZXQgZ3JvdXBzIFskYmxvY2sgZ2V0R3JvdXBzXQogIHV0bDo6cmVwb3J0ICJcblJlcG9ydGluZyBQaHlzaWNhbCBDbHVzdGVycyIKICBmb3JlYWNoIGdyb3VwICRncm91cHMgewogICAgaWYgeyBbJGdyb3VwIGdldFR5cGVdID09ICJQSFlTSUNBTF9DTFVTVEVSIiB9IHsKICAgICAgcmVwb3J0X2dyb3VwICRncm91cAogICAgfQogIH0KfQoKc3RhOjpkZWZpbmVfY21kX2FyZ3MgInJlcG9ydF92b2x0YWdlX2RvbWFpbnMiIHt9Cgpwcm9jIHJlcG9ydF92b2x0YWdlX2RvbWFpbnMgeyBhcmdzIH0gewogIHN0YTo6cGFyc2Vfa2V5X2FyZ3MgInJlcG9ydF92b2x0YWdlX2RvbWFpbnMiIGFyZ3Mga2V5cyB7fSBmbGFncyB7fQogIHNldCBkYiBbb3JkOjpnZXRfZGJdCiAgc2V0IGNoaXAgWyRkYiBnZXRDaGlwXQogIGlmIHsgJGNoaXAgPT0gIk5VTEwiIH0gewogICAgdXRsOjplcnJvciBPREIgMzU0ICJwbGVhc2UgbG9hZCB0aGUgZGVzaWduIGJlZm9yZSB0cnlpbmcgdG8gdXNlIHRoaXMgY29tbWFuZCIKICB9CiAgc2V0IGJsb2NrIFskY2hpcCBnZXRCbG9ja10KICBzZXQgZ3JvdXBzIFskYmxvY2sgZ2V0R3JvdXBzXQogIHV0bDo6cmVwb3J0ICJcblJlcG9ydGluZyBWb2x0YWdlIERvbWFpbnMiCiAgZm9yZWFjaCBncm91cCAkZ3JvdXBzIHsKICAgIGlmIHsgWyRncm91cCBnZXRUeXBlXSA9PSAiVk9MVEFHRV9ET01BSU4iIH0gewogICAgICByZXBvcnRfZ3JvdXAgJGdyb3VwCiAgICB9CiAgfQp9CgpzdGE6OmRlZmluZV9jbWRfYXJncyAicmVwb3J0X2dyb3VwIiB7Z3JvdXB9IDsjIGNoZWNrZXIgb2ZmCnByb2MgcmVwb3J0X2dyb3VwIHsgZ3JvdXAgfSB7CiAgdXRsOjpyZXBvcnQgIltleHByIFwiWyRncm91cCBnZXRUeXBlXVwiID09IFwiUEhZU0lDQUxfQ0xVU1RFUlwiID8gXAogIFwiUGh5c2ljYWwgQ2x1c3RlclwiOiBcIlZvbHRhZ2UgRG9tYWluXCJdOiBbJGdyb3VwIGdldE5hbWVdIgogIGlmIHsgWyRncm91cCBoYXNCb3hdIH0gewogICAgc2V0IHJlY3QgWyRncm91cCBnZXRCb3hdCiAgICB1dGw6OnJlcG9ydCAiICAqIEJveCA6IChbJHJlY3QgeE1pbl0sWyRyZWN0IHlNaW5dKSAoWyRyZWN0IHhNYXhdLFskcmVjdCB5TWF4XSkiCiAgfQogIHNldCBtb2RpbnN0cyBbJGdyb3VwIGdldE1vZEluc3RzXQogIHNldCBpbnN0cyBbJGdyb3VwIGdldEluc3RzXQogIHNldCBjaGlsZHJlbiBbJGdyb3VwIGdldEdyb3Vwc10KICBzZXQgcG93ZXJOZXRzIFskZ3JvdXAgZ2V0UG93ZXJOZXRzXQogIHNldCBncm91bmROZXRzIFskZ3JvdXAgZ2V0R3JvdW5kTmV0c10KICBpZiB7IFtsbGVuZ3RoICRtb2RpbnN0c10gPiAwIH0gewogICAgdXRsOjpyZXBvcnQgIiAgKiBNb2RJbnN0czogIgogICAgZm9yZWFjaCBtb2RpbnN0ICRtb2RpbnN0cyB7CiAgICAgIHV0bDo6cmVwb3J0ICIgICAgKiBbJG1vZGluc3QgZ2V0SGllcmFyY2hhbE5hbWVdIgogICAgfQogIH0KICBpZiB7IFtsbGVuZ3RoICRpbnN0c10gPiAwIH0gewogICAgdXRsOjpyZXBvcnQgIiAgKiBJbnN0czogIgogICAgZm9yZWFjaCBpbnN0ICRpbnN0cyB7CiAgICAgIHV0bDo6cmVwb3J0ICIgICAgKiBbJGluc3QgZ2V0TmFtZV0iCiAgICB9CiAgfQogIGlmIHsgW2xsZW5ndGggJGNoaWxkcmVuXSA+IDAgfSB7CiAgICB1dGw6OnJlcG9ydCAiICAqIENoaWxkcmVuOiAiCiAgICBmb3JlYWNoIGNoaWxkICRjaGlsZHJlbiB7CiAgICAgIHV0bDo6cmVwb3J0ICIgICAgKiBbJGNoaWxkIGdldE5hbWVdIgogICAgfQogIH0KICBpZiB7IFtsbGVuZ3RoICRwb3dlck5ldHNdID4gMCB9IHsKICAgIHV0bDo6cmVwb3J0ICIgICogUG93ZXIgTmV0czogIgogICAgZm9yZWFjaCBuZXQgJHBvd2VyTmV0cyB7CiAgICAgIHV0bDo6cmVwb3J0ICIgICAgKiBbJG5ldCBnZXROYW1lXSIKICAgIH0KICB9CiAgaWYgeyBbbGxlbmd0aCAkZ3JvdW5kTmV0c10gPiAwIH0gewogICAgdXRsOjpyZXBvcnQgIiAgKiBHcm91bmQgTmV0czogIgogICAgZm9yZWFjaCBuZXQgJGdyb3VuZE5ldHMgewogICAgICB1dGw6OnJlcG9ydCAiICAgICogWyRuZXQgZ2V0TmFtZV0iCiAgICB9CiAgfQp9CgpzdGE6OmRlZmluZV9jbWRfYXJncyAid3JpdGVfZ3VpZGVzIiB7IGZpbGVuYW1lIH0KCnByb2Mgd3JpdGVfZ3VpZGVzIHsgYXJncyB9IHsKICBzdGE6OnBhcnNlX2tleV9hcmdzICJ3cml0ZV9ndWlkZXMiIGFyZ3Mga2V5cyB7fSBmbGFncyB7fQogIHN0YTo6Y2hlY2tfYXJnY19lcTEgIndyaXRlX2d1aWRlcyIgJGFyZ3MKICBzZXQgZmlsZW5hbWUgJGFyZ3MKICBzZXQgZGIgW29yZDo6Z2V0X2RiXQogIHNldCBjaGlwIFskZGIgZ2V0Q2hpcF0KICBpZiB7ICRjaGlwID09ICJOVUxMIiB9IHsKICAgIHV0bDo6ZXJyb3IgT0RCIDM1NSAicGxlYXNlIGxvYWQgdGhlIGRlc2lnbiBiZWZvcmUgdHJ5aW5nIHRvIHVzZSB0aGlzIGNvbW1hbmQiCiAgfQogIHNldCBibG9jayBbJGNoaXAgZ2V0QmxvY2tdCiAgJGJsb2NrIHdyaXRlR3VpZGVzICRmaWxlbmFtZQp9CgpzdGE6OmRlZmluZV9jbWRfYXJncyAid3JpdGVfbWFjcm9fcGxhY2VtZW50IiB7IGZpbGVfbmFtZSB9Cgpwcm9jIHdyaXRlX21hY3JvX3BsYWNlbWVudCB7IGFyZ3MgfSB7CiAgc3RhOjpwYXJzZV9rZXlfYXJncyAid3JpdGVfbWFjcm9fcGxhY2VtZW50IiBhcmdzIGtleXMge30gZmxhZ3Mge30KICBzdGE6OmNoZWNrX2FyZ2NfZXExICJ3cml0ZV9tYWNyb19wbGFjZW1lbnQiICRhcmdzCiAgc2V0IGZpbGVfbmFtZSAkYXJncwogIHNldCBkYiBbb3JkOjpnZXRfZGJdCiAgc2V0IGNoaXAgWyRkYiBnZXRDaGlwXQogIGlmIHsgJGNoaXAgPT0gIk5VTEwiIH0gewogICAgdXRsOjplcnJvciBPREIgNDM5ICJObyBkZXNpZ24gbG9hZGVkLiBDYW5ub3Qgd3JpdGUgbWFjcm8gcGxhY2VtZW50LiIKICB9CiAgc2V0IGJsb2NrIFskY2hpcCBnZXRCbG9ja10KICBzZXQgbWFjcm9fcGxhY2VtZW50IFtvZGI6OmdlbmVyYXRlTWFjcm9QbGFjZW1lbnRTdHJpbmcgJGJsb2NrXQoKICBzZXQgZmlsZSBbb3BlbiAkZmlsZV9uYW1lIHddCiAgcHV0cyAkZmlsZSAkbWFjcm9fcGxhY2VtZW50CiAgY2xvc2UgJGZpbGUKfQoKc3RhOjpkZWZpbmVfY21kX2FyZ3MgImRlZmluZV9sYXllcl9yYW5nZSIgeyBsYXllcnMgfSA7IyBjaGVja2VyIG9mZgoKcHJvYyBkZWZpbmVfbGF5ZXJfcmFuZ2UgeyBsYXllcnMgfSB7CiAgc2V0IGxheWVyX3JhbmdlIFtncnQ6OnBhcnNlX2xheWVyX3JhbmdlICItbGF5ZXJzIiAkbGF5ZXJzXQogIGxhc3NpZ24gJGxheWVyX3JhbmdlIG1pbl9sYXllciBtYXhfbGF5ZXIKICBncnQ6OmNoZWNrX3JvdXRpbmdfbGF5ZXIgJG1pbl9sYXllcgogIGdydDo6Y2hlY2tfcm91dGluZ19sYXllciAkbWF4X2xheWVyCgogIHNldF9taW5fbGF5ZXIgJG1pbl9sYXllcgogIHNldF9tYXhfbGF5ZXIgJG1heF9sYXllcgoKICBzZXQgdGVjaCBbb3JkOjpnZXRfZGJfdGVjaF0KICBmb3IgeyBzZXQgbGF5ZXIgMSB9IHsgJGxheWVyIDw9ICRtYXhfbGF5ZXIgfSB7IHNldCBsYXllciBbZXhwciAkbGF5ZXIrMV0gfSB7CiAgICBzZXQgZGJfbGF5ZXIgWyR0ZWNoIGZpbmRSb3V0aW5nTGF5ZXIgJGxheWVyXQogICAgaWYgewogICAgICAhKFtvcmQ6OmRiX2xheWVyX2hhc19ob3JfdHJhY2tzICRkYl9sYXllcl0gJiYKICAgICAgICBbb3JkOjpkYl9sYXllcl9oYXNfdmVyX3RyYWNrcyAkZGJfbGF5ZXJdKQogICAgfSB7CiAgICAgIHNldCBsYXllcl9uYW1lIFskZGJfbGF5ZXIgZ2V0TmFtZV0KICAgICAgdXRsOjplcnJvciBPREIgMTM5ICJNaXNzaW5nIHRyYWNrIHN0cnVjdHVyZSBmb3IgbGF5ZXIgJGxheWVyX25hbWUuIgogICAgfQogIH0KfQoKc3RhOjpkZWZpbmVfY21kX2FyZ3MgImRlZmluZV9jbG9ja19sYXllcl9yYW5nZSIgeyBsYXllcnMgfSA7IyBjaGVja2VyIG9mZgoKcHJvYyBkZWZpbmVfY2xvY2tfbGF5ZXJfcmFuZ2UgeyBsYXllcnMgfSB7CiAgc2V0IGxheWVyX3JhbmdlIFtncnQ6OnBhcnNlX2xheWVyX3JhbmdlICItY2xvY2tfbGF5ZXJzIiAkbGF5ZXJzXQogIGxhc3NpZ24gJGxheWVyX3JhbmdlIG1pbl9jbG9ja19sYXllciBtYXhfY2xvY2tfbGF5ZXIKICBncnQ6OmNoZWNrX3JvdXRpbmdfbGF5ZXIgJG1pbl9jbG9ja19sYXllcgogIGdydDo6Y2hlY2tfcm91dGluZ19sYXllciAkbWF4X2Nsb2NrX2xheWVyCgogIGlmIHsgJG1pbl9jbG9ja19sYXllciA8ICRtYXhfY2xvY2tfbGF5ZXIgfSB7CiAgICBzZXQgZGIgW29yZDo6Z2V0X2RiXQogICAgc2V0IGNoaXAgWyRkYiBnZXRDaGlwXQogICAgaWYgeyAkY2hpcCA9PSAiTlVMTCIgfSB7CiAgICAgIHV0bDo6ZXJyb3IgT0RCIDM2MyAicGxlYXNlIGxvYWQgdGhlIGRlc2lnbiBiZWZvcmUgdHJ5aW5nIHRvIHVzZSB0aGlzIGNvbW1hbmQiCiAgICB9CiAgICBzZXQgYmxvY2sgWyRjaGlwIGdldEJsb2NrXQoKICAgICRibG9jayBzZXRNaW5MYXllckZvckNsb2NrICRtaW5fY2xvY2tfbGF5ZXIKICAgICRibG9jayBzZXRNYXhMYXllckZvckNsb2NrICRtYXhfY2xvY2tfbGF5ZXIKICB9IGVsc2UgewogICAgdXRsOjplcnJvciBPREIgMTM3ICJJbiBhcmd1bWVudCAtY2xvY2tfbGF5ZXJzLCBtaW4gcm91dGluZyBsYXllciBpc1wKICAgICAgZ3JlYXRlciB0aGFuIG1heCByb3V0aW5nIGxheWVyLiIKICB9Cn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJzZXRfcm91dGluZ19sYXllcnMiIHsgWy1zaWduYWwgbWluLW1heF0gXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstY2xvY2sgbWluLW1heF0gXAp9IDsjIGNoZWNrZXIgb2ZmCnByb2Mgc2V0X3JvdXRpbmdfbGF5ZXJzIHsgYXJncyB9IHsKICBzdGE6OnBhcnNlX2tleV9hcmdzICJzZXRfcm91dGluZ19sYXllcnMiIGFyZ3MgXAogICAga2V5cyB7LXNpZ25hbCAtY2xvY2t9IGZsYWdzIHt9IDsjIGNoZWNrZXIgb2ZmCgogIHN0YTo6Y2hlY2tfYXJnY19lcTAgInNldF9yb3V0aW5nX2xheWVycyIgJGFyZ3MKCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtc2lnbmFsKV0gfSB7CiAgICBkZWZpbmVfbGF5ZXJfcmFuZ2UgJGtleXMoLXNpZ25hbCkKICB9CgogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLWNsb2NrKV0gfSB7CiAgICBkZWZpbmVfY2xvY2tfbGF5ZXJfcmFuZ2UgJGtleXMoLWNsb2NrKQogIH0KfQoKc3RhOjpkZWZpbmVfY21kX2FyZ3MgInNldF9taW5fbGF5ZXIiIHsgbWluTGF5ZXIgfSA7IyBjaGVja2VyIG9mZgoKcHJvYyBzZXRfbWluX2xheWVyIHsgYXJncyB9IHsKICBzdGE6OnBhcnNlX2tleV9hcmdzICJzZXRfbWluX2xheWVyIiBhcmdzIGtleXMge30gZmxhZ3Mge30KICBzdGE6OmNoZWNrX2FyZ2NfZXExICJzZXRfbWluX2xheWVyIiAkYXJncwogIHNldCBtaW5MYXllciAkYXJncwogIHNldCBkYiBbb3JkOjpnZXRfZGJdCiAgc2V0IGNoaXAgWyRkYiBnZXRDaGlwXQogIGlmIHsgJGNoaXAgPT0gIk5VTEwiIH0gewogICAgdXRsOjplcnJvciBPREIgMzY1ICJwbGVhc2UgbG9hZCB0aGUgZGVzaWduIGJlZm9yZSB0cnlpbmcgdG8gdXNlIHRoaXMgY29tbWFuZCIKICB9CiAgc2V0IGJsb2NrIFskY2hpcCBnZXRCbG9ja10KICAkYmxvY2sgc2V0TWluUm91dGluZ0xheWVyICRtaW5MYXllcgp9CgpzdGE6OmRlZmluZV9jbWRfYXJncyAic2V0X21heF9sYXllciIgeyBtYXhMYXllciB9IDsjIGNoZWNrZXIgb2ZmCgpwcm9jIHNldF9tYXhfbGF5ZXIgeyBhcmdzIH0gewogIHN0YTo6cGFyc2Vfa2V5X2FyZ3MgInNldF9tYXhfbGF5ZXIiIGFyZ3Mga2V5cyB7fSBmbGFncyB7fQogIHN0YTo6Y2hlY2tfYXJnY19lcTEgInNldF9tYXhfbGF5ZXIiICRhcmdzCiAgc2V0IG1heExheWVyICRhcmdzCiAgc2V0IGRiIFtvcmQ6OmdldF9kYl0KICBzZXQgY2hpcCBbJGRiIGdldENoaXBdCiAgaWYgeyAkY2hpcCA9PSAiTlVMTCIgfSB7CiAgICB1dGw6OmVycm9yIE9EQiAzNjYgInBsZWFzZSBsb2FkIHRoZSBkZXNpZ24gYmVmb3JlIHRyeWluZyB0byB1c2UgdGhpcyBjb21tYW5kIgogIH0KICBzZXQgYmxvY2sgWyRjaGlwIGdldEJsb2NrXQogICRibG9jayBzZXRNYXhSb3V0aW5nTGF5ZXIgJG1heExheWVyCn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJkZXNpZ25faXNfcm91dGVkIiB7IFstdmVyYm9zZV0gfQoKcHJvYyBkZXNpZ25faXNfcm91dGVkIHsgYXJncyB9IHsKICBzdGE6OnBhcnNlX2tleV9hcmdzICJkZXNpZ25faXNfcm91dGVkIiBhcmdzIGtleXMge30gZmxhZ3Mgey12ZXJib3NlfQoKICBzZXQgZGIgW29yZDo6Z2V0X2RiXQogIHNldCBjaGlwIFskZGIgZ2V0Q2hpcF0KICBpZiB7ICRjaGlwID09ICJOVUxMIiB9IHsKICAgIHV0bDo6ZXJyb3IgT0RCIDIyMyAicGxlYXNlIGxvYWQgdGhlIGRlc2lnbiBiZWZvcmUgdHJ5aW5nIHRvIHVzZSB0aGlzIGNvbW1hbmQuIgogIH0KICBzZXQgYmxvY2sgWyRjaGlwIGdldEJsb2NrXQoKICByZXR1cm4gWyRibG9jayBkZXNpZ25Jc1JvdXRlZCBbaW5mbyBleGlzdHMgZmxhZ3MoLXZlcmJvc2UpXV0KfQoKc3RhOjpkZWZpbmVfY21kX2FyZ3MgInNldF9pb19waW5fY29uc3RyYWludCIge1stZGlyZWN0aW9uIGRpcmVjdGlvbl0gXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1waW5fbmFtZXMgbmFtZXNdIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstcmVnaW9uIHJlZ2lvbl0gXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1taXJyb3JlZF9waW5zIHBpbnNdIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstZ3JvdXBdIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstb3JkZXJdfQoKcHJvYyBzZXRfaW9fcGluX2NvbnN0cmFpbnQgeyBhcmdzIH0gewogIHN0YTo6cGFyc2Vfa2V5X2FyZ3MgInNldF9pb19waW5fY29uc3RyYWludCIgYXJncyBcCiAgICBrZXlzIHstZGlyZWN0aW9uIC1waW5fbmFtZXMgLXJlZ2lvbiAtbWlycm9yZWRfcGluc30gXAogICAgZmxhZ3Mgey1ncm91cCAtb3JkZXJ9CgogIHN0YTo6Y2hlY2tfYXJnY19lcTAgInNldF9pb19waW5fY29uc3RyYWludCIgJGFyZ3MKCiAgc2V0IHRlY2ggW29yZDo6Z2V0X2RiX3RlY2hdCiAgc2V0IGJsb2NrIFtvcmQ6OmdldF9kYl9ibG9ja10KICBzZXQgbGVmX3VuaXRzIFskdGVjaCBnZXRMZWZVbml0c10KCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtcmVnaW9uKV0gJiYgW2luZm8gZXhpc3RzIGtleXMoLW1pcnJvcmVkX3BpbnMpXSB9IHsKICAgIHV0bDo6ZXJyb3IgT0RCIDE0NCAiQm90aCAtcmVnaW9uIGFuZCAtbWlycm9yZWRfcGlucyBjb25zdHJhaW50cyBub3QgYWxsb3dlZC4iCiAgfQoKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1taXJyb3JlZF9waW5zKV0gJiYgW2luZm8gZXhpc3RzIGZsYWdzKC1ncm91cCldIH0gewogICAgdXRsOjplcnJvciBPREIgMTQ2ICJCb3RoIC1taXJyb3JlZF9waW5zIGFuZCAtZ3JvdXAgY29uc3RyYWludHMgbm90IGFsbG93ZWQuIgogIH0KCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtcmVnaW9uKV0gfSB7CiAgICBzZXQgcmVnaW9uICRrZXlzKC1yZWdpb24pCiAgICBpZiB7IFtyZWdleHAgLWFsbCB7KHRvcHxib3R0b218bGVmdHxyaWdodCk6KC4rKX0gJHJlZ2lvbiAtIGVkZ2UgaW50ZXJ2YWxdIH0gewogICAgICBpZiB7IFtyZWdleHAgLWFsbCB7KFswLTldK1suXSpbMC05XSp8WypdKyktKFswLTldK1suXSpbMC05XSp8WypdKyl9ICRpbnRlcnZhbCAtIGJlZ2luIGVuZF0gfSB7CiAgICAgICAgaWYgeyAkYmVnaW4gPT0gIioiIH0gewogICAgICAgICAgc2V0IGJlZ2luIFtwcGw6OmdldF9lZGdlX2V4dHJlbWUgIi1yZWdpb24iIDEgJGVkZ2VdCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNldCBiZWdpbiBbb3JkOjptaWNyb25zX3RvX2RidSAkYmVnaW5dCiAgICAgICAgfQoKICAgICAgICBpZiB7ICRlbmQgPT0gIioiIH0gewogICAgICAgICAgc2V0IGVuZCBbcHBsOjpnZXRfZWRnZV9leHRyZW1lICItcmVnaW9uIiAwICRlZGdlXQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZXQgZW5kIFtvcmQ6Om1pY3JvbnNfdG9fZGJ1ICRlbmRdCiAgICAgICAgfQogICAgICB9IGVsc2VpZiB7ICRpbnRlcnZhbCA9PSAiKiIgfSB7CiAgICAgICAgc2V0IGJlZ2luIFtwcGw6OmdldF9lZGdlX2V4dHJlbWUgIi1yZWdpb24iIDEgJGVkZ2VdCiAgICAgICAgc2V0IGVuZCBbcHBsOjpnZXRfZWRnZV9leHRyZW1lICItcmVnaW9uIiAwICRlZGdlXQogICAgICB9IGVsc2UgewogICAgICAgIHV0bDo6ZXJyb3IgT0RCIDI2MSAiSW52YWxpZCB2YWx1ZSBmb3IgXCctcmVnaW9uIGVkZ2U6aW50ZXJ2YWxcJy4gU2V0IHRoZSBpbnRlcnZhbCBhcyB0aGVcCiAgICAgICAgICAgICAgICB3aWxkY2FyZCBcJypcJyBvciBhcyBhIHJhbmdlIFwnYmVnaW4tZW5kXCcgaW4gbWljcm9ucy4iCiAgICAgIH0KCiAgICAgIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLWRpcmVjdGlvbildICYmIFtpbmZvIGV4aXN0cyBrZXlzKC1waW5fbmFtZXMpXSB9IHsKICAgICAgICB1dGw6OmVycm9yIE9EQiAxNyAiQm90aCAtZGlyZWN0aW9uIGFuZCAtcGluX25hbWVzIGNvbnN0cmFpbnRzIG5vdCBhbGxvd2VkLiIKICAgICAgfQoKICAgICAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtZGlyZWN0aW9uKV0gfSB7CiAgICAgICAgc2V0IGRpcmVjdGlvbiAka2V5cygtZGlyZWN0aW9uKQogICAgICAgIG9kYjo6YWRkX2RpcmVjdGlvbl9jb25zdHJhaW50ICRkaXJlY3Rpb24gJGVkZ2UgJGJlZ2luICRlbmQKICAgICAgfQoKICAgICAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtcGluX25hbWVzKV0gfSB7CiAgICAgICAgc2V0IG5hbWVzICRrZXlzKC1waW5fbmFtZXMpCiAgICAgICAgb2RiOjphZGRfbmFtZXNfY29uc3RyYWludCAkbmFtZXMgJGVkZ2UgJGJlZ2luICRlbmQKICAgICAgfQogICAgfSBlbHNlaWYgeyBbcmVnZXhwIC1hbGwgeyh1cCk6KC4qKX0gJHJlZ2lvbiAtIGVkZ2UgYm94XSB9IHsKICAgICAgaWYgeyAkYm94ID09ICIqIiB9IHsKICAgICAgICBzZXQgdG9wX2dyaWRfcmVnaW9uIFskYmxvY2sgZ2V0QlRlcm1Ub3BMYXllckdyaWRSZWdpb25dCiAgICAgICAgaWYgeyBbJHRvcF9ncmlkX3JlZ2lvbiBpc1JlY3RdIH0gewogICAgICAgICAgc2V0IHJlZ2lvbl9yZWN0IFskdG9wX2dyaWRfcmVnaW9uIGdldEVuY2xvc2luZ1JlY3RdCiAgICAgICAgICBzZXQgbGx4IFskcmVnaW9uX3JlY3QgeE1pbl0KICAgICAgICAgIHNldCBsbHkgWyRyZWdpb25fcmVjdCB5TWluXQogICAgICAgICAgc2V0IHVyeCBbJHJlZ2lvbl9yZWN0IHhNYXhdCiAgICAgICAgICBzZXQgdXJ5IFskcmVnaW9uX3JlY3QgeU1heF0KICAgICAgICB9CiAgICAgIH0gZWxzZWlmIHsKICAgICAgICBbcmVnZXhwIC1hbGwgXAogICAgICAgICAgeyhbMC05XStbLl0qWzAtOV0qKSAoWzAtOV0rWy5dKlswLTldKikgKFswLTldK1suXSpbMC05XSopIChbMC05XStbLl0qWzAtOV0qKX0gXAogICAgICAgICAgJGJveCAtIGxseCBsbHkgdXJ4IHVyeV0KICAgICAgfSB7CiAgICAgICAgc2V0IGxseCBbb3JkOjptaWNyb25zX3RvX2RidSAkbGx4XQogICAgICAgIHNldCBsbHkgW29yZDo6bWljcm9uc190b19kYnUgJGxseV0KICAgICAgICBzZXQgdXJ4IFtvcmQ6Om1pY3JvbnNfdG9fZGJ1ICR1cnhdCiAgICAgICAgc2V0IHVyeSBbb3JkOjptaWNyb25zX3RvX2RidSAkdXJ5XQogICAgICB9IGVsc2UgewogICAgICAgIHV0bDo6ZXJyb3IgT0RCIDE0NSAiQm94IGF0IHRvcCBsYXllciBtdXN0IGhhdmUgNCB2YWx1ZXMgKGxseCBsbHkgdXJ4IHVyeSkuIgogICAgICB9CgogICAgICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1waW5fbmFtZXMpXSB9IHsKICAgICAgICBzZXQgbmFtZXMgJGtleXMoLXBpbl9uYW1lcykKICAgICAgICBvZGI6OmFkZF9waW5zX3RvX3RvcF9sYXllciAkbmFtZXMgJGxseCAkbGx5ICR1cnggJHVyeQogICAgICB9CiAgICB9IGVsc2UgewogICAgICB1dGw6Ondhcm4gT0RCIDE0MiAiQ29uc3RyYWludCB3aXRoIHJlZ2lvbiAkcmVnaW9uIGhhcyBhbiBpbnZhbGlkIGVkZ2UuIgogICAgfQogIH0KCiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLWdyb3VwKV0gfSB7CiAgICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1waW5fbmFtZXMpXSB9IHsKICAgICAgc2V0IGdyb3VwICRrZXlzKC1waW5fbmFtZXMpCiAgICB9IGVsc2UgewogICAgICB1dGw6OmVycm9yIE9EQiAxNDAgIlRoZSAtcGluX25hbWVzIGFyZ3VtZW50IGlzIHJlcXVpcmVkIHdoZW4gdXNpbmcgLWdyb3VwIGZsYWcuIgogICAgfQoKICAgIHNldCBwaW5fbGlzdCBbcHBsOjpwYXJzZV9waW5fbmFtZXMgInBsYWNlX3BpbnMgLWdyb3VwX3BpbnMiICRncm91cF0KICAgIGlmIHsgW2xsZW5ndGggJHBpbl9saXN0XSAhPSAwIH0gewogICAgICBvZGI6OmFkZF9waW5fZ3JvdXAgJHBpbl9saXN0IFtpbmZvIGV4aXN0cyBmbGFncygtb3JkZXIpXQogICAgfQogIH0gZWxzZWlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1vcmRlcildIH0gewogICAgdXRsOjplcnJvciBPREIgMTQ3ICItb3JkZXIgY2Fubm90IGJlIHVzZWQgd2l0aG91dCAtZ3JvdXAuIgogIH0KCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtbWlycm9yZWRfcGlucyldIH0gewogICAgc2V0IG1pcnJvcmVkX3BpbnMgJGtleXMoLW1pcnJvcmVkX3BpbnMpCiAgICBpZiB7IFtsbGVuZ3RoICRtaXJyb3JlZF9waW5zXSAlIDIgIT0gMCB9IHsKICAgICAgdXRsOjplcnJvciBPREIgMTQzICJMaXN0IG9mIHBpbnMgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mIHBpbnMuIgogICAgfQoKICAgIGZvcmVhY2gge3BpbjEgcGluMn0gJG1pcnJvcmVkX3BpbnMgewogICAgICBzZXQgYnRlcm0xIFtwcGw6OnBhcnNlX3Bpbl9uYW1lcyAic2V0X2lvX3Bpbl9jb25zdHJhaW50IC1taXJyb3JlZF9waW5zIiAkcGluMV0KICAgICAgc2V0IGJ0ZXJtMiBbcHBsOjpwYXJzZV9waW5fbmFtZXMgInNldF9pb19waW5fY29uc3RyYWludCAtbWlycm9yZWRfcGlucyIgJHBpbjJdCiAgICAgIG9kYjo6YWRkX21pcnJvcmVkX3BpbnMgJGJ0ZXJtMSAkYnRlcm0yCiAgICB9CiAgfQp9CgpzdGE6OmRlZmluZV9jbWRfYXJncyAiZXhjbHVkZV9pb19waW5fcmVnaW9uIiB7IC1yZWdpb24gcmVnaW9uIH0KCnByb2MgZXhjbHVkZV9pb19waW5fcmVnaW9uIHsgYXJncyB9IHsKICBvcmQ6OnBhcnNlX2xpc3RfYXJncyAiZXhjbHVkZV9pb19waW5fcmVnaW9uIiBhcmdzIGxpc3Qgey1yZWdpb259CiAgc3RhOjpwYXJzZV9rZXlfYXJncyAiZXhjbHVkZV9pb19waW5fcmVnaW9uIiBhcmdzIGtleXMgey1yZWdpb259IGZsYWdzIHt9CgogIHN0YTo6Y2hlY2tfYXJnY19lcTAgImV4Y2x1ZGVfaW9fcGluX3JlZ2lvbiIgJGFyZ3MKCiAgc2V0IHJlZ2lvbnMgJGxpc3QoLXJlZ2lvbikKCiAgaWYgeyBbbGxlbmd0aCAkcmVnaW9uc10gIT0gMCB9IHsKICAgIHNldCBibG9jayBbb2RiOjpnZXRfYmxvY2tdCiAgICBzZXQgZGJfdGVjaCBbb3JkOjpnZXRfZGJfdGVjaF0KICAgIHNldCBsZWZfdW5pdHMgWyRkYl90ZWNoIGdldExlZlVuaXRzXQoKICAgIGZvcmVhY2ggcmVnaW9uICRyZWdpb25zIHsKICAgICAgaWYgeyBbcmVnZXhwIC1hbGwgeyh0b3B8Ym90dG9tfGxlZnR8cmlnaHQpOiguKyl9ICRyZWdpb24gLSBlZGdlIGludGVydmFsXSB9IHsKICAgICAgICBpZiB7CiAgICAgICAgICBbcmVnZXhwIC1hbGwgeyhbMC05XStbLl0qWzAtOV0qfFsqXSspLShbMC05XStbLl0qWzAtOV0qfFsqXSspfSAkaW50ZXJ2YWwgLSBiZWdpbiBlbmRdCiAgICAgICAgfSB7CiAgICAgICAgICBpZiB7ICRiZWdpbiA9PSAiKiIgfSB7CiAgICAgICAgICAgIHNldCBiZWdpbiBbcHBsOjpnZXRfZWRnZV9leHRyZW1lICItZXhjbHVkZSIgMSAkZWRnZV0KICAgICAgICAgIH0KICAgICAgICAgIGlmIHsgJGVuZCA9PSAiKiIgfSB7CiAgICAgICAgICAgIHNldCBlbmQgW3BwbDo6Z2V0X2VkZ2VfZXh0cmVtZSAiLWV4Y2x1ZGUiIDAgJGVkZ2VdCiAgICAgICAgICB9CiAgICAgICAgICBzZXQgYmVnaW4gW2V4cHIgeyBpbnQoJGJlZ2luICogJGxlZl91bml0cykgfV0KICAgICAgICAgIHNldCBlbmQgW2V4cHIgeyBpbnQoJGVuZCAqICRsZWZfdW5pdHMpIH1dCgogICAgICAgICAgc2V0IGV4Y2x1ZGVkX3JlZ2lvbiBbJGJsb2NrIGZpbmRDb25zdHJhaW50UmVnaW9uICRlZGdlICRiZWdpbiAkZW5kXQogICAgICAgICAgJGJsb2NrIGFkZEJsb2NrZWRSZWdpb25Gb3JQaW5zICRleGNsdWRlZF9yZWdpb24KICAgICAgICB9IGVsc2VpZiB7ICRpbnRlcnZhbCA9PSAiKiIgfSB7CiAgICAgICAgICBzZXQgYmVnaW4gW3BwbDo6Z2V0X2VkZ2VfZXh0cmVtZSAiLWV4Y2x1ZGUiIDEgJGVkZ2VdCiAgICAgICAgICBzZXQgZW5kIFtwcGw6OmdldF9lZGdlX2V4dHJlbWUgIi1leGNsdWRlIiAwICRlZGdlXQoKICAgICAgICAgIHNldCBleGNsdWRlZF9yZWdpb24gWyRibG9jayBmaW5kQ29uc3RyYWludFJlZ2lvbiAkZWRnZSAkYmVnaW4gJGVuZF0KICAgICAgICAgICRibG9jayBhZGRCbG9ja2VkUmVnaW9uRm9yUGlucyAkZXhjbHVkZWRfcmVnaW9uCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHV0bDo6ZXJyb3IgT0RCIDI3ICItZXhjbHVkZTogJGludGVydmFsIGlzIGFuIGludmFsaWQgcmVnaW9uLiIKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdXRsOjplcnJvciBPREIgMjggIi1leGNsdWRlOiBpbnZhbGlkIHN5bnRheCBpbiAkcmVnaW9uLlwKICAgICAgICAgIFVzZSAodG9wfGJvdHRvbXxsZWZ0fHJpZ2h0KTppbnRlcnZhbC4iCiAgICAgIH0KICAgIH0KICB9IGVsc2UgewogICAgdXRsOjplcnJvciBPREIgMTIgIlRoZSAtcmVnaW9uIGtleXdvcmQgaXMgcmVxdWlyZWQgZm9yIGV4Y2x1ZGVfaW9fcGluX3JlZ2lvbiBjb21tYW5kLiIKICB9Cn0KCiMgRGVmaW5lIGNvbW1hbmQgYXJndW1lbnRzIGZvciBjcmVhdGVfYmxvY2thZ2UgKHJlZ2lvbiBpbiBtaWNyb25zLCBkZW5zaXR5IDAtMTAwKQpzdGE6OmRlZmluZV9jbWRfYXJncyAiY3JlYXRlX2Jsb2NrYWdlIiB7IFwKICAgICAgICAgICAgICAgIFstcmVnaW9uIHt4MSB5MSB4MiB5Mn1dXAogICAgICAgICAgICAgICAgWy1pbnN0IGluc3RhbmNlXVwKICAgICAgICAgICAgICAgIFstbWF4X2RlbnNpdHkgZGVuc2l0eV1cCiAgICAgICAgICAgICAgICBbLXNvZnRdfQoKIyBQbGFjZW1lbnQgYmxvY2thZ2VzIHdpdGggdmFyaW91cyBvcHRpb25zCnByb2MgY3JlYXRlX2Jsb2NrYWdlIHsgYXJncyB9IHsKICAjIFBhcnNlIGNvbW1hbmQgbGluZSBhcmd1bWVudHMgdXNpbmcgT3BlblJPQUQgc3RhbmRhcmQgcGFyc2luZwogIHN0YTo6cGFyc2Vfa2V5X2FyZ3MgImNyZWF0ZV9ibG9ja2FnZSIgYXJncyBrZXlzIHstcmVnaW9uIC1pbnN0IC1tYXhfZGVuc2l0eX0gZmxhZ3Mgey1zb2Z0fQoKICAjIENoZWNrIHRoYXQgbm8gZXh0cmEgYXJndW1lbnRzIHJlbWFpbgogIHN0YTo6Y2hlY2tfYXJnY19lcTAgImNyZWF0ZV9ibG9ja2FnZSIgJGFyZ3MKCiAgIyBDaGVjayBpZiBjb29yZGluYXRlcyBhcmUgdmFsaWQKICBpZiB7ICFbaW5mbyBleGlzdHMga2V5cygtcmVnaW9uKV0gfHwgW2xsZW5ndGggJGtleXMoLXJlZ2lvbildICE9IDQgfSB7CiAgICB1dGw6OmVycm9yIE9EQiAxMDEwICJJbnZhbGlkIGNvb3JkaW5hdGVzLiAtcmVnaW9uIG11c3QgYmUgYSBsaXN0IG9mIDQgdmFsdWVzIHt4MSB5MSB4MiB5Mn0iCiAgfQoKICBzZXQgcmVnaW9uICRrZXlzKC1yZWdpb24pCiAgc2V0IHgxIFtvcmQ6Om1pY3JvbnNfdG9fZGJ1IFtsaW5kZXggJHJlZ2lvbiAwXV0KICBzZXQgeTEgW29yZDo6bWljcm9uc190b19kYnUgW2xpbmRleCAkcmVnaW9uIDFdXQogIHNldCB4MiBbb3JkOjptaWNyb25zX3RvX2RidSBbbGluZGV4ICRyZWdpb24gMl1dCiAgc2V0IHkyIFtvcmQ6Om1pY3JvbnNfdG9fZGJ1IFtsaW5kZXggJHJlZ2lvbiAzXV0KCiAgIyBWYWxpZGF0ZSBjb29yZGluYXRlIG9yZGVyaW5nCiAgaWYgeyAkeDEgPj0gJHgyIHx8ICR5MSA+PSAkeTIgfSB7CiAgICB1dGw6OmVycm9yIE9EQiAxMDExICJJbnZhbGlkIGNvb3JkaW5hdGVzOiBcCiAgICAgICAgICAgIHgxIChbb3JkOjpkYnVfdG9fbWljcm9ucyAkeDFdKSBtdXN0IGJlIDwgeDIgKFtvcmQ6OmRidV90b19taWNyb25zICR4Ml0pIGFuZCBcCiAgICAgICAgICAgIHkxIChbb3JkOjpkYnVfdG9fbWljcm9ucyAkeTFdKSBtdXN0IGJlIDwgeTIgKFtvcmQ6OmRidV90b19taWNyb25zICR5Ml0pIgogIH0KCiAgIyBHZXQgZGF0YWJhc2Ugb2JqZWN0cwogIHNldCBibG9jayBbb3JkOjpnZXRfZGJfYmxvY2tdCgogICMgRXh0cmFjdCBvcHRpb25hbCBhcmd1bWVudHMKICBzZXQgaW5zdF9uYW1lICIiCiAgc2V0IGluc3Rfb2JqICIiCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtaW5zdCldIH0gewogICAgc2V0IGluc3RfbmFtZSAka2V5cygtaW5zdCkKICAgIHNldCBpbnN0X29iaiBbJGJsb2NrIGZpbmRJbnN0ICRpbnN0X25hbWVdCiAgICBpZiB7ICRpbnN0X29iaiA9PSAiTlVMTCIgfSB7CiAgICAgIHV0bDo6ZXJyb3IgT0RCIDEwMTIgIkluc3RhbmNlICckaW5zdF9uYW1lJyBub3QgZm91bmQgaW4gZGVzaWduIgogICAgfQogIH0KCiAgc2V0IG1heF9kZW5zaXR5IDAuMAogIHNldCBpc19zb2Z0IFtpbmZvIGV4aXN0cyBmbGFncygtc29mdCldCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtbWF4X2RlbnNpdHkpXSB9IHsKICAgIHNldCBtYXhfZGVuc2l0eSAka2V5cygtbWF4X2RlbnNpdHkpCgogICAgaWYgeyAkaXNfc29mdCB9IHsKICAgICAgdXRsOjp3YXJuIE9EQiAxMDE2ICJTb2Z0IGZsYWcgaWdub3JlZCBhcyBkZW5zaXR5IHdhcyBwYXNzZWQgYXMgYXJndW1lbnQuIgogICAgfQogIH0KCiAgIyBWYWxpZGF0ZSBtYXhfZGVuc2l0eSBpZiBzcGVjaWZpZWQKICBpZiB7ICRtYXhfZGVuc2l0eSAhPSAwLjAgJiYgKCRtYXhfZGVuc2l0eSA8IDAuMCB8fCAkbWF4X2RlbnNpdHkgPiAxMDApIH0gewogICAgdXRsOjplcnJvciBPREIgMTAxMyAiTWF4IGRlbnNpdHkgbXVzdCBiZSBiZXR3ZWVuIDAuMCBhbmQgMTAwLCBnb3Q6ICRtYXhfZGVuc2l0eSIKICB9CgogICMgR2V0IGRpZSBhcmVhIGZvciB2YWxpZGF0aW9uCiAgc2V0IGRpZSBbJGJsb2NrIGdldERpZUFyZWFdCiAgc2V0IGRpZV94MSBbJGRpZSB4TWluXQogIHNldCBkaWVfeTEgWyRkaWUgeU1pbl0KICBzZXQgZGllX3gyIFskZGllIHhNYXhdCiAgc2V0IGRpZV95MiBbJGRpZSB5TWF4XQoKICAjIENoZWNrIGlmIGNvb3JkaW5hdGVzIGFyZSB3aXRoaW4gZGllIGFyZWEKICBpZiB7ICR4MSA8ICRkaWVfeDEgfHwgJHkxIDwgJGRpZV95MSB8fCAkeDIgPiAkZGllX3gyIHx8ICR5MiA+ICRkaWVfeTIgfSB7CiAgICB1dGw6OmVycm9yIE9EQiAxMDE0ICJCbG9ja2FnZSBjb29yZGluYXRlc1wKICAgICAgICAgICAgICAoW29yZDo6ZGJ1X3RvX21pY3JvbnMgJHgxXSwgW29yZDo6ZGJ1X3RvX21pY3JvbnMgJHkxXSxcCiAgICAgICAgICAgICAgIFtvcmQ6OmRidV90b19taWNyb25zICR4Ml0sIFtvcmQ6OmRidV90b19taWNyb25zICR5Ml0pXAogICAgICAgICAgICAgIGFyZSBvdXRzaWRlIGRpZSBhcmVhXAogICAgICAgICAgICAgIChbb3JkOjpkYnVfdG9fbWljcm9ucyAkZGllX3gxXSwgW29yZDo6ZGJ1X3RvX21pY3JvbnMgJGRpZV95MV0sXAogICAgICAgICAgICAgICBbb3JkOjpkYnVfdG9fbWljcm9ucyAkZGllX3gyXSwgW29yZDo6ZGJ1X3RvX21pY3JvbnMgJGRpZV95Ml0pIgogIH0KCiAgIyBDcmVhdGUgdGhlIGJsb2NrYWdlCiAgaWYgeyAkaW5zdF9vYmogbmUgIiIgfSB7CiAgICBzZXQgYmxvY2thZ2UgW29kYjo6ZGJCbG9ja2FnZV9jcmVhdGUgJGJsb2NrICR4MSAkeTEgJHgyICR5MiAkaW5zdF9vYmpdCiAgfSBlbHNlIHsKICAgIHNldCBibG9ja2FnZSBbb2RiOjpkYkJsb2NrYWdlX2NyZWF0ZSAkYmxvY2sgJHgxICR5MSAkeDIgJHkyXQogIH0KCiAgaWYgeyAkYmxvY2thZ2UgZXEgIiIgfSB7CiAgICB1dGw6OmVycm9yIE9EQiAxMDE1ICJGYWlsZWQgdG8gY3JlYXRlIGJsb2NrYWdlIgogIH0KCiAgIyBTZXQgbWF4IGRlbnNpdHkgaWYgc3BlY2lmaWVkCiAgaWYgeyAkbWF4X2RlbnNpdHkgPiAwLjAgfSB7CiAgICAkYmxvY2thZ2Ugc2V0TWF4RGVuc2l0eSAkbWF4X2RlbnNpdHkKICB9IGVsc2UgewogICAgIyBTZXQgc29mdCBibG9ja2FnZSBpZiByZXF1ZXN0ZWQKICAgIGlmIHsgJGlzX3NvZnQgfSB7CiAgICAgICRibG9ja2FnZSBzZXRTb2Z0CiAgICB9CiAgfQoKICByZXR1cm4gJGJsb2NrYWdlCn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJjbGVhcl9pb19waW5fY29uc3RyYWludHMiIHt9Cgpwcm9jIGNsZWFyX2lvX3Bpbl9jb25zdHJhaW50cyB7IGFyZ3MgfSB7CiAgc3RhOjpwYXJzZV9rZXlfYXJncyAiY2xlYXJfaW9fcGluX2NvbnN0cmFpbnRzIiBhcmdzIGtleXMge30gZmxhZ3Mge30KICBwcGw6OmNsZWFyX2NvbnN0cmFpbnRzCn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJkZWZpbmVfcGluX3NoYXBlX3BhdHRlcm4iIHtbLWxheWVyIGxheWVyXSBcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLXhfc3RlcCB4X3N0ZXBdIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsteV9zdGVwIHlfc3RlcF0gXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1yZWdpb24gcmVnaW9uXSBcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLXNpemUgc2l6ZV0gXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1waW5fa2VlcG91dCBkaXN0XX0KCnByb2MgZGVmaW5lX3Bpbl9zaGFwZV9wYXR0ZXJuIHsgYXJncyB9IHsKICBzdGE6OnBhcnNlX2tleV9hcmdzICJkZWZpbmVfcGluX3NoYXBlX3BhdHRlcm4iIGFyZ3MgXAogICAga2V5cyB7LWxheWVyIC14X3N0ZXAgLXlfc3RlcCAtcmVnaW9uIC1zaXplIC1waW5fa2VlcG91dH0gZmxhZ3Mge30KCiAgc3RhOjpjaGVja19hcmdjX2VxMCAiZGVmaW5lX3Bpbl9zaGFwZV9wYXR0ZXJuIiAkYXJncwoKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1sYXllcildIH0gewogICAgc2V0IGxheWVyX25hbWUgJGtleXMoLWxheWVyKQogICAgc2V0IGxheWVyIFtwcGw6OnBhcnNlX2xheWVyX25hbWUgJGxheWVyX25hbWVdCgogICAgaWYgeyAkbGF5ZXIgPT0gMCB9IHsKICAgICAgdXRsOjplcnJvciBPREIgOTYgIlJvdXRpbmcgbGF5ZXIgbm90IGZvdW5kIGZvciBuYW1lICRsYXllcl9uYW1lLiIKICAgIH0KICB9IGVsc2UgewogICAgdXRsOjplcnJvciBPREIgMTUwICItbGF5ZXIgaXMgcmVxdWlyZWQuIgogIH0KCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygteF9zdGVwKV0gJiYgW2luZm8gZXhpc3RzIGtleXMoLXlfc3RlcCldIH0gewogICAgc2V0IHhfc3RlcCBbb3JkOjptaWNyb25zX3RvX2RidSAka2V5cygteF9zdGVwKV0KICAgIHNldCB5X3N0ZXAgW29yZDo6bWljcm9uc190b19kYnUgJGtleXMoLXlfc3RlcCldCiAgfSBlbHNlIHsKICAgIHV0bDo6ZXJyb3IgT0RCIDEwMiAiLXhfc3RlcCBhbmQgLXlfc3RlcCBhcmUgcmVxdWlyZWQuIgogIH0KCiAgc2V0IGJsb2NrIFtvcmQ6OmdldF9kYl9ibG9ja10KICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1yZWdpb24pXSB9IHsKICAgIHNldCByZWdpb24gJGtleXMoLXJlZ2lvbikKICAgIGlmIHsKICAgICAgW3JlZ2V4cCAtYWxsIFwKICAgICAgICB7KFswLTldK1suXSpbMC05XSopIChbMC05XStbLl0qWzAtOV0qKSAoWzAtOV0rWy5dKlswLTldKikgKFswLTldK1suXSpbMC05XSopfSBcCiAgICAgICAgJHJlZ2lvbiAtIGxseCBsbHkgdXJ4IHVyeV0KICAgIH0gewogICAgICBzZXQgbGx4IFtvcmQ6Om1pY3JvbnNfdG9fZGJ1ICRsbHhdCiAgICAgIHNldCBsbHkgW29yZDo6bWljcm9uc190b19kYnUgJGxseV0KICAgICAgc2V0IHVyeCBbb3JkOjptaWNyb25zX3RvX2RidSAkdXJ4XQogICAgICBzZXQgdXJ5IFtvcmQ6Om1pY3JvbnNfdG9fZGJ1ICR1cnldCiAgICB9IGVsc2VpZiB7ICRyZWdpb24gPT0gIioiIH0gewogICAgICBzZXQgZGllX2FyZWEgWyRibG9jayBnZXREaWVBcmVhXQogICAgICBzZXQgbGx4IFskZGllX2FyZWEgeE1pbl0KICAgICAgc2V0IGxseSBbJGRpZV9hcmVhIHlNaW5dCiAgICAgIHNldCB1cnggWyRkaWVfYXJlYSB4TWF4XQogICAgICBzZXQgdXJ5IFskZGllX2FyZWEgeU1heF0KICAgIH0gZWxzZSB7CiAgICAgIHV0bDo6ZXJyb3IgT0RCIDE0MSAiLXJlZ2lvbiBpcyBub3QgYSBsaXN0IG9mIDQgdmFsdWVzIHtsbHggbGx5IHVyeCB1cnl9LiIKICAgIH0KICAgIG9kYjo6UmVjdCByZWdpb24gJGxseCAkbGx5ICR1cnggJHVyeQogIH0gZWxzZSB7CiAgICB1dGw6OmVycm9yIE9EQiAxMzUgIi1yZWdpb24gaXMgcmVxdWlyZWQuIgogIH0KCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtc2l6ZSldIH0gewogICAgc2V0IHNpemUgJGtleXMoLXNpemUpCiAgICBpZiB7IFtsbGVuZ3RoICRzaXplXSAhPSAyIH0gewogICAgICB1dGw6OmVycm9yIE9EQiAxMzYgIi1zaXplIGlzIG5vdCBhIGxpc3Qgb2YgMiB2YWx1ZXMuIgogICAgfQogICAgbGFzc2lnbiAkc2l6ZSB3aWR0aCBoZWlnaHQKICAgIHNldCB3aWR0aCBbb3JkOjptaWNyb25zX3RvX2RidSAkd2lkdGhdCiAgICBzZXQgaGVpZ2h0IFtvcmQ6Om1pY3JvbnNfdG9fZGJ1ICRoZWlnaHRdCiAgfSBlbHNlIHsKICAgIHV0bDo6ZXJyb3IgT0RCIDEzOCAiLXNpemUgaXMgcmVxdWlyZWQuIgogIH0KCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtcGluX2tlZXBvdXQpXSB9IHsKICAgIHN0YTo6Y2hlY2tfcG9zaXRpdmVfZmxvYXQgInBpbl9rZWVwb3V0IiAka2V5cygtcGluX2tlZXBvdXQpCiAgICBzZXQga2VlcG91dCBbb3JkOjptaWNyb25zX3RvX2RidSAka2V5cygtcGluX2tlZXBvdXQpXQogIH0gZWxzZSB7CiAgICBzZXQgbWF4X2RpbSAkd2lkdGgKICAgIGlmIHsgJG1heF9kaW0gPCAkaGVpZ2h0IH0gewogICAgICBzZXQgbWF4X2RpbSAkaGVpZ2h0CiAgICB9CiAgICBzZXQga2VlcG91dCBbW1tvcmQ6OmdldF9kYl90ZWNoXSBmaW5kTGF5ZXIgJGtleXMoLWxheWVyKV0gZ2V0U3BhY2luZyAkbWF4X2RpbV0KICB9CgogIG9kYjo6c2V0X2J0ZXJtX3RvcF9sYXllcl9ncmlkICRibG9jayAkbGF5ZXIgJHhfc3RlcCAkeV9zdGVwIHJlZ2lvbiAkd2lkdGggJGhlaWdodCAka2VlcG91dAp9CgpzdGE6OmRlZmluZV9jbWRfYXJncyAiYWxsX3BpbnNfcGxhY2VkIiB7fQoKcHJvYyBhbGxfcGluc19wbGFjZWQgeyBhcmdzIH0gewogIHN0YTo6cGFyc2Vfa2V5X2FyZ3MgImFsbF9waW5zX3BsYWNlZCIgYXJncyBcCiAgICBrZXlzIHt9IGZsYWdzIHt9CgogIHNldCBibG9jayBbb2RiOjpnZXRfYmxvY2tdCgogIGZvcmVhY2ggYnRlcm0gWyRibG9jayBnZXRCVGVybXNdIHsKICAgIHNldCBwbGFjZW1lbnRfc3RhdHVzIFskYnRlcm0gZ2V0Rmlyc3RQaW5QbGFjZW1lbnRTdGF0dXNdCiAgICBpZiB7IFtsc2VhcmNoIC1leGFjdCB7UExBQ0VEIExPQ0tFRCBGSVJNIENPVkVSfSAkcGxhY2VtZW50X3N0YXR1c10gPT0gLTEgfSB7CiAgICAgIHJldHVybiAwCiAgICB9CiAgfQoKICByZXR1cm4gMQp9CgpuYW1lc3BhY2UgZXZhbCBvZGIgewpwcm9jIGFkZF9kaXJlY3Rpb25fY29uc3RyYWludCB7IGRpciBlZGdlIGJlZ2luIGVuZCB9IHsKICBzZXQgYmxvY2sgW2dldF9ibG9ja10KCiAgc2V0IGNvbnN0cmFpbnRfcmVnaW9uIFskYmxvY2sgZmluZENvbnN0cmFpbnRSZWdpb24gJGVkZ2UgJGJlZ2luICRlbmRdCgogICRibG9jayBhZGRCVGVybUNvbnN0cmFpbnRCeURpcmVjdGlvbiAkZGlyICRjb25zdHJhaW50X3JlZ2lvbgp9Cgpwcm9jIGFkZF9uYW1lc19jb25zdHJhaW50IHsgbmFtZXMgZWRnZSBiZWdpbiBlbmQgfSB7CiAgc2V0IGJsb2NrIFtnZXRfYmxvY2tdCgogIHNldCBwaW5fbGlzdCBbcHBsOjpwYXJzZV9waW5fbmFtZXMgInNldF9pb19waW5fY29uc3RyYWludCIgJG5hbWVzXQogIHNldCBjb25zdHJhaW50X3JlZ2lvbiBbJGJsb2NrIGZpbmRDb25zdHJhaW50UmVnaW9uICRlZGdlICRiZWdpbiAkZW5kXQoKICAkYmxvY2sgYWRkQlRlcm1zVG9Db25zdHJhaW50ICRwaW5fbGlzdCAkY29uc3RyYWludF9yZWdpb24KfQoKcHJvYyBhZGRfcGluc190b190b3BfbGF5ZXIgeyBuYW1lcyBsbHggbGx5IHVyeCB1cnkgfSB7CiAgc2V0IGJsb2NrIFtnZXRfYmxvY2tdCiAgc2V0IHJlZ2lvbiBbb2RiOjpSZWN0XQogICRyZWdpb24gaW5pdCAkbGx4ICRsbHkgJHVyeCAkdXJ5CgogIHNldCBwaW5fbGlzdCBbcHBsOjpwYXJzZV9waW5fbmFtZXMgInNldF9pb19waW5fY29uc3RyYWludCIgJG5hbWVzXQoKICAkYmxvY2sgYWRkQlRlcm1zVG9Db25zdHJhaW50ICRwaW5fbGlzdCAkcmVnaW9uCn0KCnByb2MgYWRkX3Bpbl9ncm91cCB7IHBpbl9saXN0IG9yZGVyIH0gewogIHNldCBibG9jayBbZ2V0X2Jsb2NrXQoKICAkYmxvY2sgYWRkQlRlcm1Hcm91cCAkcGluX2xpc3QgJG9yZGVyCn0KCnByb2MgYWRkX21pcnJvcmVkX3BpbnMgeyBidGVybTEgYnRlcm0yIH0gewogIGlmIHsgJGJ0ZXJtMSAhPSAiTlVMTCIgJiYgJGJ0ZXJtMiAhPSAiTlVMTCIgfSB7CiAgICAkYnRlcm0xIHNldE1pcnJvcmVkQlRlcm0gJGJ0ZXJtMgogIH0KfQoKcHJvYyBnZXRfYmxvY2sgeyB9IHsKICBzZXQgZGIgW29yZDo6Z2V0X2RiXQogIHNldCBjaGlwIFskZGIgZ2V0Q2hpcF0KICByZXR1cm4gWyRjaGlwIGdldEJsb2NrXQp9Cgpwcm9jIGRlc3Ryb3lfcm91dGVzIHsgfSB7CiAgc2V0IGJsb2NrIFtvcmQ6OmdldF9kYl9ibG9ja10KICAkYmxvY2sgZGVzdHJveVJvdXRlcwp9Cn0K",
nullptr};
} // end namespace odb
