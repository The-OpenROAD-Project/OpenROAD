namespace sta {
const char* dbSta_tcl_inits[] = {
"IyBPcGVuU1RBLCBTdGF0aWMgVGltaW5nIEFuYWx5emVyCiMgQ29weXJpZ2h0IChjKSAyMDI1LCBQYXJhbGxheCBTb2Z0d2FyZSwgSW5jLgojIAojIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5CiMgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkKIyB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvcgojIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCiMgCiMgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiMgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKIyBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGUKIyBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgojIAojIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCiMgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCiMgCiMgVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QKIyBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiMgCiMgQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUKIyBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiMgCiMgVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIwojIENvbW1hbmQgaGVscGVyIGZ1bmN0aW9ucy4KIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpuYW1lc3BhY2UgZXZhbCBzdGEgewoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIwojIEFyZ3VtZW50IHBhcnNpbmcgZnVuY3Rpb25zLgojCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiMgUGFyc2UgbXVsdGlwbGUgb2JqZWN0IHR5cGUgYXJncy4KIyBGb3Igb2JqZWN0IG5hbWUgYXJncyB0aGUgc2VhcmNoIG9yZGVyIGlzIGFzIGZvbGxvd3M6CiMgIGNsawojICBsaWJlcnR5X2NlbGwKIyAgbGliZXJ0eV9wb3J0CiMgIGNlbGwKIyAgaW5zdAojICBwb3J0CiMgIHBpbgojICBuZXQKCnByb2MgZ2V0X29iamVjdF9hcmdzIHsgb2JqZWN0cyBjbGtzX3ZhciBsaWJjZWxsc192YXIgbGlicG9ydHNfdmFyIFwKCQkJIGNlbGxzX3ZhciBpbnN0c192YXIgcG9ydHNfdmFyIHBpbnNfdmFyIG5ldHNfdmFyIFwKCQkJIGVkZ2VzX3ZhciB0aW1pbmdfYXJjX3NldHNfdmFyIH0gewogIGlmIHsgJGNsa3NfdmFyICE9IHt9IH0gewogICAgdXB2YXIgMSAkY2xrc192YXIgY2xrcwogIH0KICBpZiB7ICRsaWJjZWxsc192YXIgIT0ge30gfSB7CiAgICB1cHZhciAxICRsaWJjZWxsc192YXIgbGliY2VsbHMKICB9CiAgaWYgeyAkbGlicG9ydHNfdmFyICE9IHt9IH0gewogICAgdXB2YXIgMSAkbGlicG9ydHNfdmFyIGxpYnBvcnRzCiAgfQogIGlmIHsgJGNlbGxzX3ZhciAhPSB7fSB9IHsKICAgIHVwdmFyIDEgJGNlbGxzX3ZhciBjZWxscwogIH0KICBpZiB7ICRpbnN0c192YXIgIT0ge30gfSB7CiAgICB1cHZhciAxICRpbnN0c192YXIgaW5zdHMKICB9CiAgaWYgeyAkcG9ydHNfdmFyICE9IHt9IH0gewogICAgdXB2YXIgMSAkcG9ydHNfdmFyIHBvcnRzCiAgfQogIGlmIHsgJHBpbnNfdmFyICE9IHt9IH0gewogICAgdXB2YXIgMSAkcGluc192YXIgcGlucwogIH0KICBpZiB7ICRuZXRzX3ZhciAhPSB7fSB9IHsKICAgIHVwdmFyIDEgJG5ldHNfdmFyIG5ldHMKICB9CiAgaWYgeyAkZWRnZXNfdmFyICE9IHt9IH0gewogICAgdXB2YXIgMSAkZWRnZXNfdmFyIGVkZ2VzCiAgfQogIGlmIHsgJHRpbWluZ19hcmNfc2V0c192YXIgIT0ge30gfSB7CiAgICB1cHZhciAxICR0aW1pbmdfYXJjX3NldHNfdmFyIHRpbWluZ19hcmNfc2V0cwogIH0KCiAgIyBDb3B5IGJhY2tzbGFzaGVzIHRoYXQgd2lsbCBiZSByZW1vdmVkIGJ5IGZvcmVhY2guCiAgc2V0IG9iamVjdHMgW3N0cmluZyBtYXAge1xcIFxcXFx9ICRvYmplY3RzXQogIGZvcmVhY2ggb2JqICRvYmplY3RzIHsKICAgIGlmIHsgW2xsZW5ndGggJG9ial0gPiAxIH0gewogICAgICAjIExpc3QgYXJnLiBSZWN1cnNpdmUgY2FsbCB3aXRob3V0IGluaXRpbmcgb2JqZWN0cy4KICAgICAgZ2V0X29iamVjdF9hcmdzICRvYmogJGNsa3NfdmFyICRsaWJjZWxsc192YXIgJGxpYnBvcnRzX3ZhciAkY2VsbHNfdmFyICRpbnN0c192YXIgXAoJJHBvcnRzX3ZhciAkcGluc192YXIgJG5ldHNfdmFyICRlZGdlc192YXIgJHRpbWluZ19hcmNfc2V0c192YXIKICAgIH0gZWxzZWlmIHsgW2lzX29iamVjdCAkb2JqXSB9IHsKICAgICAgIyBFeHBsaWNpdCBvYmplY3QgYXJnLgogICAgICBzZXQgb2JqZWN0X3R5cGUgW29iamVjdF90eXBlICRvYmpdCiAgICAgIGlmIHsgJHBpbnNfdmFyICE9IHt9ICYmICRvYmplY3RfdHlwZSA9PSAiUGluIiB9IHsKCWxhcHBlbmQgcGlucyAkb2JqCiAgICAgIH0gZWxzZWlmIHsgJGluc3RzX3ZhciAhPSB7fSAmJiAkb2JqZWN0X3R5cGUgPT0gIkluc3RhbmNlIiB9IHsKCWxhcHBlbmQgaW5zdHMgJG9iagogICAgICB9IGVsc2VpZiB7ICRuZXRzX3ZhciAhPSB7fSAmJiAkb2JqZWN0X3R5cGUgPT0gIk5ldCIgfSB7CglsYXBwZW5kIG5ldHMgJG9iagogICAgICB9IGVsc2VpZiB7ICRwb3J0c192YXIgIT0ge30gJiYgJG9iamVjdF90eXBlID09ICJQb3J0IiB9IHsKCWxhcHBlbmQgcG9ydHMgJG9iagogICAgICB9IGVsc2VpZiB7ICRlZGdlc192YXIgIT0ge30gJiYgJG9iamVjdF90eXBlID09ICJFZGdlIiB9IHsKCWxhcHBlbmQgZWRnZXMgJG9iagogICAgICB9IGVsc2VpZiB7ICRjbGtzX3ZhciAhPSB7fSAmJiAkb2JqZWN0X3R5cGUgPT0gIkNsb2NrIiB9IHsKCWxhcHBlbmQgY2xrcyAkb2JqCiAgICAgIH0gZWxzZWlmIHsgJGxpYmNlbGxzX3ZhciAhPSB7fSAmJiAkb2JqZWN0X3R5cGUgPT0gIkxpYmVydHlDZWxsIiB9IHsKCWxhcHBlbmQgbGliY2VsbHMgJG9iagogICAgICB9IGVsc2VpZiB7ICRsaWJwb3J0c192YXIgIT0ge30gJiYgJG9iamVjdF90eXBlID09ICJMaWJlcnR5UG9ydCIgfSB7CglsYXBwZW5kIGxpYnBvcnRzICRvYmoKICAgICAgfSBlbHNlaWYgeyAkY2VsbHNfdmFyICE9IHt9ICYmICRvYmplY3RfdHlwZSA9PSAiQ2VsbCIgfSB7CglsYXBwZW5kIGNlbGxzICRvYmoKICAgICAgfSBlbHNlaWYgeyAkdGltaW5nX2FyY19zZXRzX3ZhciAhPSB7fSBcCgkJICAgJiYgJG9iamVjdF90eXBlID09ICJUaW1pbmdBcmNTZXQiIH0gewoJbGFwcGVuZCB0aW1pbmdfYXJjX3NldHMgJG9iagogICAgICB9IGVsc2UgewoJc3RhX2Vycm9yIDEwMCAidW5zdXBwb3J0ZWQgb2JqZWN0IHR5cGUgJG9iamVjdF90eXBlLiIKICAgICAgfQogICAgfSBlbHNlaWYgeyAkb2JqICE9IHt9IH0gewogICAgICAjIENoZWNrIGZvciBpbXBsaWNpdCBhcmcuCiAgICAgICMgU2VhcmNoIGZvciBtb3N0IGdlbmVyYWwgb2JqZWN0IHR5cGUgZmlyc3QuCiAgICAgIHNldCBtYXRjaGVzIHt9CiAgICAgIGlmIHsgJGNsa3NfdmFyICE9IHt9IH0gewoJc2V0IG1hdGNoZXMgW2dldF9jbG9ja3MgLXF1aWV0ICRvYmpdCiAgICAgIH0KICAgICAgaWYgeyAkbWF0Y2hlcyAhPSB7fSB9IHsKCXNldCBjbGtzIFtjb25jYXQgJGNsa3MgJG1hdGNoZXNdCiAgICAgIH0gZWxzZSB7CglpZiB7ICRsaWJjZWxsc192YXIgIT0ge30gfSB7CgkgIHNldCBtYXRjaGVzIFtnZXRfbGliX2NlbGxzIC1xdWlldCAkb2JqXQoJfQoJaWYgeyAkbWF0Y2hlcyAhPSB7fSB9IHsKCSAgc2V0IGxpYmNlbGxzIFtjb25jYXQgJGxpYmNlbGxzICRtYXRjaGVzXQoJfSBlbHNlIHsKCSAgCgkgIGlmIHsgJGxpYnBvcnRzX3ZhciAhPSB7fSB9IHsKCSAgICBzZXQgbWF0Y2hlcyBbZ2V0X2xpYl9waW5zIC1xdWlldCAkb2JqXQoJICB9CgkgIGlmIHsgJG1hdGNoZXMgIT0ge30gfSB7CgkgICAgc2V0IGxpYnBvcnRzIFtjb25jYXQgJGxpYnBvcnRzICRtYXRjaGVzXQoJICB9IGVsc2UgewoJICAgIAoJICAgIGlmIHsgJGNlbGxzX3ZhciAhPSB7fSB9IHsKCSAgICAgIHNldCBtYXRjaGVzIFtmaW5kX2NlbGxzX21hdGNoaW5nICRvYmogMCAwXQoJICAgIH0KCSAgICBpZiB7ICRtYXRjaGVzICE9IHt9IH0gewoJICAgICAgc2V0IGNlbGxzIFtjb25jYXQgJGNlbGxzICRtYXRjaGVzXQoJICAgIH0gZWxzZSB7CgkgICAgICAKCSAgICAgIGlmIHsgJGluc3RzX3ZhciAhPSB7fSB9IHsKCQlzZXQgbWF0Y2hlcyBbZ2V0X2NlbGxzIC1xdWlldCAkb2JqXQoJICAgICAgfQoJICAgICAgaWYgeyAkbWF0Y2hlcyAhPSB7fSB9IHsKCQlzZXQgaW5zdHMgW2NvbmNhdCAkaW5zdHMgJG1hdGNoZXNdCgkgICAgICB9IGVsc2UgewoJCWlmIHsgJHBvcnRzX3ZhciAhPSB7fSB9IHsKCQkgIHNldCBtYXRjaGVzIFtnZXRfcG9ydHMgLXF1aWV0ICRvYmpdCgkJfQoJCWlmIHsgJG1hdGNoZXMgIT0ge30gfSAgewoJCSAgc2V0IHBvcnRzIFtjb25jYXQgJHBvcnRzICRtYXRjaGVzXQoJCX0gZWxzZSB7CgkJICBpZiB7ICRwaW5zX3ZhciAhPSB7fSB9IHsKCQkgICAgc2V0IG1hdGNoZXMgW2dldF9waW5zIC1xdWlldCAkb2JqXQoJCSAgfQoJCSAgaWYgeyAkbWF0Y2hlcyAhPSB7fSB9IHsKCQkgICAgc2V0IHBpbnMgW2NvbmNhdCAkcGlucyAkbWF0Y2hlc10KCQkgIH0gZWxzZSB7CgkJICAgIGlmIHsgJG5ldHNfdmFyICE9IHt9IH0gewoJCSAgICAgIHNldCBtYXRjaGVzIFtnZXRfbmV0cyAtcXVpZXQgJG9ial0KCQkgICAgfQoJCSAgICBpZiB7ICRtYXRjaGVzICE9IHt9IH0gewoJCSAgICAgIHNldCBuZXRzIFtjb25jYXQgJG5ldHMgJG1hdGNoZXNdCgkJICAgIH0gZWxzZSB7CgkJICAgICAgc3RhX3dhcm4gMTAxICJvYmplY3QgJyRvYmonIG5vdCBmb3VuZC4iCgkJICAgIH0KCQkgIH0KCQl9CgkgICAgICB9CgkgICAgfQoJICB9Cgl9CiAgICAgIH0KICAgIH0KICB9Cn0KCnByb2MgcGFyc2VfY2xrX2NlbGxfcG9ydF9hcmdzIHsgb2JqZWN0cyBjbGtzX3ZhciBjZWxsc192YXIgcG9ydHNfdmFyIH0gewogIHVwdmFyIDEgJGNsa3NfdmFyIGNsa3MKICB1cHZhciAxICRjZWxsc192YXIgY2VsbHMKICB1cHZhciAxICRwb3J0c192YXIgcG9ydHMKICBzZXQgY2xrcyB7fQogIHNldCBjZWxscyB7fQogIHNldCBwb3J0cyB7fQogIGdldF9vYmplY3RfYXJncyAkb2JqZWN0cyBjbGtzIHt9IHt9IGNlbGxzIHt9IHBvcnRzIHt9IHt9IHt9IHt9Cn0KCnByb2MgcGFyc2VfY2xrX2NlbGxfcG9ydF9waW5fYXJncyB7IG9iamVjdHMgY2xrc192YXIgY2VsbHNfdmFyIHBvcnRzX3ZhciBcCgkJCQkgICAgICBwaW5zX2FyZyB9IHsKICB1cHZhciAxICRjbGtzX3ZhciBjbGtzCiAgdXB2YXIgMSAkY2VsbHNfdmFyIGNlbGxzCiAgdXB2YXIgMSAkcG9ydHNfdmFyIHBvcnRzCiAgdXB2YXIgMSAkcGluc19hcmcgcGlucwogIHNldCBjbGtzIHt9CiAgc2V0IGNlbGxzIHt9CiAgc2V0IHBvcnRzIHt9CiAgc2V0IHBpbnMge30KICBnZXRfb2JqZWN0X2FyZ3MgJG9iamVjdHMgY2xrcyB7fSB7fSBjZWxscyB7fSBwb3J0cyBwaW5zIHt9IHt9IHt9Cn0KCnByb2MgcGFyc2VfY2xrX2luc3RfcGluX2FyZyB7IG9iamVjdHMgY2xrc192YXIgaW5zdHNfdmFyIHBpbnNfdmFyIH0gewogIHVwdmFyIDEgJGNsa3NfdmFyIGNsa3MKICB1cHZhciAxICRpbnN0c192YXIgaW5zdHMKICB1cHZhciAxICRwaW5zX3ZhciBwaW5zCiAgc2V0IGNsa3Mge30KICBzZXQgaW5zdHMge30KICBzZXQgcGlucyB7fQogIGdldF9vYmplY3RfYXJncyAkb2JqZWN0cyBjbGtzIHt9IHt9IHt9IGluc3RzIHt9IHBpbnMge30ge30ge30KfQoKcHJvYyBwYXJzZV9jbGtfaW5zdF9wb3J0X3Bpbl9hcmcgeyBvYmplY3RzIGNsa3NfdmFyIGluc3RzX3ZhciBwaW5zX3ZhciB9IHsKICB1cHZhciAxICRjbGtzX3ZhciBjbGtzCiAgdXB2YXIgMSAkaW5zdHNfdmFyIGluc3RzCiAgdXB2YXIgMSAkcGluc192YXIgcGlucwogIHNldCBjbGtzIHt9CiAgc2V0IGluc3RzIHt9CiAgc2V0IHBpbnMge30KICBzZXQgcG9ydHMge30KICBnZXRfb2JqZWN0X2FyZ3MgJG9iamVjdHMgY2xrcyB7fSB7fSB7fSBpbnN0cyBwb3J0cyBwaW5zIHt9IHt9IHt9CiAgZm9yZWFjaCBwb3J0ICRwb3J0cyB7CiAgICBsYXBwZW5kIHBpbnMgW1t0b3BfaW5zdGFuY2VdIGZpbmRfcGluIFtnZXRfbmFtZSAkcG9ydF1dCiAgfQp9Cgpwcm9jIHBhcnNlX2Nsa19wb3J0X3Bpbl9hcmcgeyBvYmplY3RzIGNsa3NfdmFyIHBpbnNfdmFyIH0gewogIHVwdmFyIDEgJGNsa3NfdmFyIGNsa3MKICB1cHZhciAxICRwaW5zX3ZhciBwaW5zCiAgc2V0IGNsa3Mge30KICBzZXQgcGlucyB7fQogIHNldCBwb3J0cyB7fQogIGdldF9vYmplY3RfYXJncyAkb2JqZWN0cyBjbGtzIHt9IHt9IHt9IHt9IHBvcnRzIHBpbnMge30ge30ge30KICBmb3JlYWNoIHBvcnQgJHBvcnRzIHsKICAgIGxhcHBlbmQgcGlucyBbW3RvcF9pbnN0YW5jZV0gZmluZF9waW4gW2dldF9uYW1lICRwb3J0XV0KICB9Cn0KCnByb2MgcGFyc2VfbGliY2VsbF9saWJwb3J0X2luc3RfcG9ydF9waW5fZWRnZV90aW1pbmdfYXJjX3NldF9hcmcgeyBvYmplY3RzIFwKCQkJCQkJCQkgICAgIGxpYmNlbGxzX3ZhciBcCgkJCQkJCQkJICAgICBsaWJwb3J0c192YXIgXAoJCQkJCQkJCSAgICAgaW5zdHNfdmFyIFwKCQkJCQkJCQkgICAgIHBvcnRzX3ZhciBcCgkJCQkJCQkJICAgICBwaW5zX3ZhciBcCgkJCQkJCQkJICAgICBlZGdlc192YXIgXAoJCQkJCQkJCSAgICAgdGltaW5nX2FyY19zZXRzX3ZhciB9IHsKICB1cHZhciAxICRsaWJjZWxsc192YXIgbGliY2VsbHMKICB1cHZhciAxICRsaWJwb3J0c192YXIgbGlicG9ydHMKICB1cHZhciAxICRpbnN0c192YXIgaW5zdHMKICB1cHZhciAxICRwb3J0c192YXIgcG9ydHMKICB1cHZhciAxICRwaW5zX3ZhciBwaW5zCiAgdXB2YXIgMSAkZWRnZXNfdmFyIGVkZ2VzCiAgdXB2YXIgMSAkdGltaW5nX2FyY19zZXRzX3ZhciB0aW1pbmdfYXJjX3NldHMKCiAgc2V0IGxpYmNlbGxzIHt9CiAgc2V0IGxpYnBvcnRzIHt9CiAgc2V0IGluc3RzIHt9CiAgc2V0IHBvcnRzIHt9CiAgc2V0IHBpbnMge30KICBzZXQgZWRnZXMge30KICBzZXQgdGltaW5nX2FyY19zZXRzIHt9CiAgZ2V0X29iamVjdF9hcmdzICRvYmplY3RzIHt9IGxpYmNlbGxzIGxpYnBvcnRzIHt9IGluc3RzIHBvcnRzIHBpbnMge30gXAogICAgZWRnZXMgdGltaW5nX2FyY19zZXRzCn0KCnByb2MgcGFyc2VfbGliY2VsbF9hcmcgeyBvYmplY3RzIH0gewogIHNldCBsaWJjZWxscyB7fQogIGdldF9vYmplY3RfYXJncyAkb2JqZWN0cyB7fSBsaWJjZWxscyB7fSB7fSB7fSB7fSB7fSB7fSB7fSB7fQogIHJldHVybiAkbGliY2VsbHMKfQoKcHJvYyBwYXJzZV9saWJjZWxsX2luc3RfYXJnIHsgb2JqZWN0cyBsaWJjZWxsc192YXIgaW5zdHNfdmFyIH0gewogIHVwdmFyIDEgJGxpYmNlbGxzX3ZhciBsaWJjZWxscwogIHVwdmFyIDEgJGluc3RzX3ZhciBpbnN0cwogIHNldCBsaWJjZWxscyB7fQogIHNldCBpbnN0cyB7fQogIGdldF9vYmplY3RfYXJncyAkb2JqZWN0cyB7fSBsaWJjZWxscyB7fSB7fSBpbnN0cyB7fSB7fSB7fSB7fSB7fQp9Cgpwcm9jIHBhcnNlX2xpYmNlbGxfaW5zdF9uZXRfYXJnIHsgb2JqZWN0cyBsaWJjZWxsc192YXIgaW5zdHNfdmFyIG5ldHNfdmFyIH0gewogIHVwdmFyIDEgJGxpYmNlbGxzX3ZhciBsaWJjZWxscwogIHVwdmFyIDEgJGluc3RzX3ZhciBpbnN0cwogIHVwdmFyIDEgJG5ldHNfdmFyIG5ldHMKICBzZXQgbGliY2VsbHMge30KICBzZXQgaW5zdHMge30KICBzZXQgbmV0cyB7fQogIGdldF9vYmplY3RfYXJncyAkb2JqZWN0cyB7fSBsaWJjZWxscyB7fSB7fSBpbnN0cyB7fSB7fSBuZXRzIHt9IHt9Cn0KCnByb2MgcGFyc2VfY2VsbF9hcmcgeyBvYmplY3RzIH0gewogIHNldCBjZWxscyB7fQogIGdldF9vYmplY3RfYXJncyAkb2JqZWN0cyB7fSB7fSB7fSBjZWxscyB7fSB7fSB7fSB7fSB7fSB7fQogIHJldHVybiAkY2VsbHMKfQoKcHJvYyBwYXJzZV9jZWxsX3BvcnRfYXJncyB7IG9iamVjdHMgY2VsbHNfdmFyIHBvcnRzX3ZhciB9IHsKICB1cHZhciAxICRjZWxsc192YXIgY2VsbHMKICB1cHZhciAxICRwb3J0c192YXIgcG9ydHMKICBzZXQgY2VsbHMge30KICBzZXQgcG9ydHMge30KICBnZXRfb2JqZWN0X2FyZ3MgJG9iamVjdHMge30ge30ge30gY2VsbHMge30gcG9ydHMge30ge30ge30ge30KfQoKcHJvYyBwYXJzZV9jZWxsX3BvcnRfcGluX2FyZ3MgeyBvYmplY3RzIGNlbGxzX3ZhciBwb3J0c192YXIgcGluc192YXIgfSB7CiAgdXB2YXIgMSAkY2VsbHNfdmFyIGNlbGxzCiAgdXB2YXIgMSAkcG9ydHNfdmFyIHBvcnRzCiAgdXB2YXIgMSAkcGluc192YXIgcGlucwogIHNldCBjZWxscyB7fQogIHNldCBwb3J0cyB7fQogIHNldCBwaW5zIHt9CiAgZ2V0X29iamVjdF9hcmdzICRvYmplY3RzIHt9IHt9IHt9IGNlbGxzIHt9IHBvcnRzIHBpbnMge30ge30ge30KfQoKcHJvYyBwYXJzZV9pbnN0X3BvcnRfcGluX2FyZyB7IG9iamVjdHMgaW5zdHNfdmFyIHBpbnNfdmFyIH0gewogIHVwdmFyIDEgJGluc3RzX3ZhciBpbnN0cwogIHVwdmFyIDEgJHBpbnNfdmFyIHBpbnMKICBzZXQgaW5zdHMge30KICBzZXQgcGlucyB7fQogIHNldCBwb3J0cyB7fQogIGdldF9vYmplY3RfYXJncyAkb2JqZWN0cyB7fSB7fSB7fSB7fSBpbnN0cyBwb3J0cyBwaW5zIHt9IHt9IHt9CiAgZm9yZWFjaCBwb3J0ICRwb3J0cyB7CiAgICBsYXBwZW5kIHBpbnMgW1t0b3BfaW5zdGFuY2VdIGZpbmRfcGluIFtnZXRfbmFtZSAkcG9ydF1dCiAgfQp9Cgpwcm9jIHBhcnNlX2luc3RfcGluX2FyZyB7IG9iamVjdHMgaW5zdHNfdmFyIHBpbnNfdmFyIH0gewogIHVwdmFyIDEgJGluc3RzX3ZhciBpbnN0cwogIHVwdmFyIDEgJHBpbnNfdmFyIHBpbnMKICBzZXQgaW5zdHMge30KICBzZXQgcGlucyB7fQogIGdldF9vYmplY3RfYXJncyAkb2JqZWN0cyB7fSB7fSB7fSB7fSBpbnN0cyB7fSBwaW5zIHt9IHt9IHt9Cn0KCnByb2MgcGFyc2VfaW5zdF9wb3J0X3Bpbl9uZXRfYXJnIHsgb2JqZWN0cyBpbnN0c192YXIgcGluc192YXIgbmV0c192YXIgfSB7CiAgdXB2YXIgMSAkaW5zdHNfdmFyIGluc3RzCiAgdXB2YXIgMSAkcGluc192YXIgcGlucwogIHVwdmFyIDEgJG5ldHNfdmFyIG5ldHMKICBzZXQgaW5zdHMge30KICBzZXQgcG9ydHMge30KICBzZXQgcGlucyB7fQogIHNldCBuZXRzIHt9CiAgZ2V0X29iamVjdF9hcmdzICRvYmplY3RzIHt9IHt9IHt9IHt9IGluc3RzIHBvcnRzIHBpbnMgbmV0cyB7fSB7fQogIGZvcmVhY2ggcG9ydCAkcG9ydHMgewogICAgbGFwcGVuZCBwaW5zIFtbdG9wX2luc3RhbmNlXSBmaW5kX3BpbiBbZ2V0X25hbWUgJHBvcnRdXQogIH0KfQoKcHJvYyBwYXJzZV9pbnN0X25ldF9hcmcgeyBvYmplY3RzIGluc3RzX3ZhciBuZXRzX3ZhciB9IHsKICB1cHZhciAxICRpbnN0c192YXIgaW5zdHMKICB1cHZhciAxICRuZXRzX3ZhciBuZXRzCiAgc2V0IGluc3RzIHt9CiAgc2V0IG5ldHMge30KICBnZXRfb2JqZWN0X2FyZ3MgJG9iamVjdHMge30ge30ge30ge30gaW5zdHMge30ge30gbmV0cyB7fSB7fQp9Cgpwcm9jIHBhcnNlX3BvcnRfcGluX25ldF9hcmcgeyBvYmplY3RzIHBpbnNfdmFyIG5ldHNfdmFyIH0gewogIHVwdmFyIDEgJHBpbnNfdmFyIHBpbnMKICB1cHZhciAxICRuZXRzX3ZhciBuZXRzCiAgc2V0IHBvcnRzIHt9CiAgc2V0IHBpbnMge30KICBzZXQgbmV0cyB7fQogIGdldF9vYmplY3RfYXJncyAkb2JqZWN0cyB7fSB7fSB7fSB7fSB7fSBwb3J0cyBwaW5zIG5ldHMge30ge30KCiAgZm9yZWFjaCBwb3J0ICRwb3J0cyB7CiAgICBsYXBwZW5kIHBpbnMgW1t0b3BfaW5zdGFuY2VdIGZpbmRfcGluIFtnZXRfbmFtZSAkcG9ydF1dCiAgfQp9Cgpwcm9jIHBhcnNlX3BvcnRfbmV0X2FyZ3MgeyBvYmplY3RzIHBvcnRzX3ZhciBuZXRzX3ZhciB9IHsKICB1cHZhciAxICRwb3J0c192YXIgcG9ydHMKICB1cHZhciAxICRuZXRzX3ZhciBuZXRzCiAgc2V0IHBvcnRzIHt9CiAgc2V0IG5ldHMge30KICBnZXRfb2JqZWN0X2FyZ3MgJG9iamVjdHMge30ge30ge30ge30ge30gcG9ydHMge30gbmV0cyB7fSB7fQp9Cgpwcm9jIHBhcnNlX3Bpbl9uZXRfYXJncyB7IG9iamVjdHMgcGluc192YXIgbmV0c192YXIgfSB7CiAgdXB2YXIgMSAkcGluc192YXIgcGlucwogIHVwdmFyIDEgJG5ldHNfdmFyIG5ldHMKICBzZXQgcGlucyB7fQogIHNldCBuZXRzIHt9CiAgZ2V0X29iamVjdF9hcmdzICRvYmplY3RzIHt9IHt9IHt9IHt9IHt9IHt9IHBpbnMgbmV0cyB7fSB7fQp9Cgpwcm9jIGdldF9wb3J0c19vcl9waW5zIHsgcGF0dGVybiB9IHsKICBzZXQgbWF0Y2hlcyBbZmluZF9wb3J0X3BpbnNfbWF0Y2hpbmcgJHBhdHRlcm4gMCAwXQogIGlmIHsgJG1hdGNoZXMgIT0ge30gfSB7CiAgICByZXR1cm4gJG1hdGNoZXMKICB9IGVsc2UgewogICAgcmV0dXJuIFtmaW5kX3BpbnNfbWF0Y2hpbmcgJHBhdHRlcm4gMCAwXQogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKIyAtY29ybmVyIGtleXdvcmQgaXMgb3B0aW9uYWwuCiMgSWYgLWNvcm5lciBrZXl3b3JkIGlzIG1pc3Npbmc6CiMgIG9uZSBjb3JuZXI6IHJldHVybiBkZWZhdWx0CiMgIG11bHRpcGxlIGNvcm5lcnM6IGVycm9yCnByb2MgcGFyc2VfY29ybmVyIHsga2V5c192YXIgfSB7CiAgdXB2YXIgMSAka2V5c192YXIga2V5cwoKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1jb3JuZXIpXSB9IHsKICAgIHNldCBjb3JuZXJfYXJnICRrZXlzKC1jb3JuZXIpCiAgICBpZiB7IFtpc19vYmplY3QgJGNvcm5lcl9hcmddIH0gewogICAgICBzZXQgb2JqZWN0X3R5cGUgW29iamVjdF90eXBlICRjb3JuZXJfYXJnXQogICAgICBpZiB7ICRvYmplY3RfdHlwZSA9PSAiQ29ybmVyIiB9IHsKICAgICAgICByZXR1cm4gJGNvcm5lcl9hcmcKICAgICAgfSBlbHNlIHsKICAgICAgICBzdGFfZXJyb3IgMTQ0ICJjb3JuZXIgb2JqZWN0IHR5cGUgJyRvYmplY3RfdHlwZScgaXMgbm90IGEgY29ybmVyLiIKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgc2V0IGNvcm5lciBbZmluZF9jb3JuZXIgJGNvcm5lcl9hcmddCiAgICAgIGlmIHsgJGNvcm5lciA9PSAiTlVMTCIgfSB7CiAgICAgICAgc3RhX2Vycm9yIDEwMiAiJGNvcm5lcl9hcmcgaXMgbm90IHRoZSBuYW1lIG9mIHByb2Nlc3MgY29ybmVyLiIKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gJGNvcm5lcgogICAgICB9CiAgICB9CiAgfSBlbHNlaWYgeyBbbXVsdGlfY29ybmVyXSB9IHsKICAgIHN0YV9lcnJvciAxMDMgIi1jb3JuZXIga2V5d29yZCByZXF1aXJlZCB3aXRoIG11bHRpLWNvcm5lciBhbmFseXNpcy4iCiAgfSBlbHNlIHsKICAgIHJldHVybiBbY21kX2Nvcm5lcl0KICB9Cn0KCiMgLWNvcm5lciBrZXl3b3JkIGlzIHJlcXVpcmVkLgpwcm9jIHBhcnNlX2Nvcm5lcl9yZXF1aXJlZCB7IGtleXNfdmFyIH0gewogIHVwdmFyIDEgJGtleXNfdmFyIGtleXMKCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtY29ybmVyKV0gfSB7CiAgICBzZXQgY29ybmVyX25hbWUgJGtleXMoLWNvcm5lcikKICAgIHNldCBjb3JuZXIgW2ZpbmRfY29ybmVyICRjb3JuZXJfbmFtZV0KICAgIGlmIHsgJGNvcm5lciA9PSAiTlVMTCIgfSB7CiAgICAgIHN0YV9lcnJvciAxMDQgIiRjb3JuZXJfbmFtZSBpcyBub3QgdGhlIG5hbWUgb2YgcHJvY2VzcyBjb3JuZXIuIgogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICRjb3JuZXIKICAgIH0KICB9IGVsc2UgewogICAgc3RhX2Vycm9yIDEwNSAibWlzc2luZyAtY29ybmVyIGFyZy4iCiAgfQp9Cgpwcm9jIHBhcnNlX2Nvcm5lcl9vcl9kZWZhdWx0IHsga2V5c192YXIgfSB7CiAgdXB2YXIgMSAka2V5c192YXIga2V5cwoKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1jb3JuZXIpXSB9IHsKICAgIHNldCBjb3JuZXJfbmFtZSAka2V5cygtY29ybmVyKQogICAgc2V0IGNvcm5lciBbZmluZF9jb3JuZXIgJGNvcm5lcl9uYW1lXQogICAgaWYgeyAkY29ybmVyID09ICJOVUxMIiB9IHsKICAgICAgc3RhX2Vycm9yIDEwNiAiJGNvcm5lcl9uYW1lIGlzIG5vdCB0aGUgbmFtZSBvZiBwcm9jZXNzIGNvcm5lci4iCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gJGNvcm5lcgogICAgfQogIH0gZWxzZSB7CiAgICByZXR1cm4gW2NtZF9jb3JuZXJdCiAgfQp9CgojIFJldHVybiBOVUxMIGZvciBhbGwuCnByb2MgcGFyc2VfY29ybmVyX29yX2FsbCB7IGtleXNfdmFyIH0gewogIHVwdmFyIDEgJGtleXNfdmFyIGtleXMKCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtY29ybmVyKV0gfSB7CiAgICBzZXQgY29ybmVyX25hbWUgJGtleXMoLWNvcm5lcikKICAgIHNldCBjb3JuZXIgW2ZpbmRfY29ybmVyICRjb3JuZXJfbmFtZV0KICAgIGlmIHsgJGNvcm5lciA9PSAiTlVMTCIgfSB7CiAgICAgIHN0YV9lcnJvciAxMDcgIiRjb3JuZXJfbmFtZSBpcyBub3QgdGhlIG5hbWUgb2YgcHJvY2VzcyBjb3JuZXIuIgogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICRjb3JuZXIKICAgIH0KICB9IGVsc2UgewogICAgcmV0dXJuICJOVUxMIgogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKcHJvYyBwYXJzZV9yaXNlX2ZhbGxfZmxhZ3MgeyBmbGFnc192YXIgfSB7CiAgdXB2YXIgMSAkZmxhZ3NfdmFyIGZsYWdzCiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLXJpc2UpXSAmJiAhW2luZm8gZXhpc3RzIGZsYWdzKC1mYWxsKV0gfSB7CiAgICByZXR1cm4gInJpc2UiCiAgfSBlbHNlaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLWZhbGwpXSAmJiAhW2luZm8gZXhpc3RzIGZsYWdzKC1yaXNlKV0gfSB7CiAgICByZXR1cm4gImZhbGwiCiAgfSBlbHNlIHsKICAgIHJldHVybiAicmlzZV9mYWxsIgogIH0KfQoKcHJvYyBwYXJzZV9yaXNlX2ZhbGxfYXJnIHsgYXJnIH0gewogIGlmIHsgJGFyZyBlcSAiciIgfHwgJGFyZyBlcSAiXiIgfHwgJGFyZyBlcSAicmlzZSIgfSB7CiAgICByZXR1cm4gInJpc2UiCiAgfSBlbHNlaWYgeyAkYXJnIGVxICJmIiB8fCAkYXJnIGVxICJ2IiB8fCAkYXJnIGVxICJmYWxsIiB9IHsKICAgIHJldHVybiAiZmFsbCIKICB9IGVsc2UgewogICAgZXJyb3IgInVua25vd24gcmlzZS9mYWxsIHRyYW5zaXRpb24gbmFtZS4iCiAgfQp9Cgpwcm9jIHBhcnNlX21pbl9tYXhfZmxhZ3MgeyBmbGFnc192YXIgfSB7CiAgdXB2YXIgMSAkZmxhZ3NfdmFyIGZsYWdzCiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLW1pbildICYmIFtpbmZvIGV4aXN0cyBmbGFncygtbWF4KV0gfSB7CiAgICBzdGFfZXJyb3IgMTA4ICJib3RoIC1taW4gYW5kIC1tYXggc3BlY2lmaWVkLiIKICB9IGVsc2VpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtbWluKV0gJiYgIVtpbmZvIGV4aXN0cyBmbGFncygtbWF4KV0gfSB7CiAgICByZXR1cm4gIm1pbiIKICB9IGVsc2VpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtbWF4KV0gJiYgIVtpbmZvIGV4aXN0cyBmbGFncygtbWluKV0gfSB7CiAgICByZXR1cm4gIm1heCIKICB9IGVsc2UgewogICAgIyBEZWZhdWx0LgogICAgcmV0dXJuICJtYXgiCiAgfQp9Cgpwcm9jIHBhcnNlX21pbl9tYXhfYWxsX2ZsYWdzIHsgZmxhZ3NfdmFyIH0gewogIHVwdmFyIDEgJGZsYWdzX3ZhciBmbGFncwogIGlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1taW4pXSAmJiBbaW5mbyBleGlzdHMgZmxhZ3MoLW1heCldIH0gewogICAgc3RhX2Vycm9yIDEwOSAiYm90aCAtbWluIGFuZCAtbWF4IHNwZWNpZmllZC4iCiAgfSBlbHNlaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLW1pbildICYmICFbaW5mbyBleGlzdHMgZmxhZ3MoLW1heCldIH0gewogICAgcmV0dXJuICJtaW4iCiAgfSBlbHNlaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLW1heCldICYmICFbaW5mbyBleGlzdHMgZmxhZ3MoLW1pbildIH0gewogICAgcmV0dXJuICJtYXgiCiAgfSBlbHNlIHsKICAgIHJldHVybiAibWluX21heCIKICB9Cn0KCiMgcGFyc2VfbWluX21heF9hbGxfZmxhZ3MgYW5kIHJlcXVpcmUgYW5hbHlzaXMgdHlwZSB0byBiZSBtaW4vbWF4Lgpwcm9jIHBhcnNlX21pbl9tYXhfYWxsX2NoZWNrX2ZsYWdzIHsgZmxhZ3NfdmFyIH0gewogIHVwdmFyIDEgJGZsYWdzX3ZhciBmbGFncwogIGlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1taW4pXSAmJiBbaW5mbyBleGlzdHMgZmxhZ3MoLW1heCldIH0gewogICAgcmV0dXJuICJtaW5fbWF4IgogIH0gZWxzZWlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1taW4pXSAmJiAhW2luZm8gZXhpc3RzIGZsYWdzKC1tYXgpXSB9IHsKICAgIHJldHVybiAibWluIgogIH0gZWxzZWlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1tYXgpXSAmJiAhW2luZm8gZXhpc3RzIGZsYWdzKC1taW4pXSB9IHsKICAgIHJldHVybiAibWF4IgogIH0gZWxzZSB7CiAgICByZXR1cm4gIm1pbl9tYXgiCiAgfQp9Cgpwcm9jIHBhcnNlX2Vhcmx5X2xhdGVfZmxhZ3MgeyBmbGFnc192YXIgfSB7CiAgdXB2YXIgMSAkZmxhZ3NfdmFyIGZsYWdzCiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLWVhcmx5KV0gJiYgW2luZm8gZXhpc3RzIGZsYWdzKC1sYXRlKV0gfSB7CiAgICBzdGFfZXJyb3IgMTEwICJvbmx5IG9uZSBvZiAtZWFybHkgYW5kIC1sYXRlIGNhbiBiZSBzcGVjaWZpZWQuIgogIH0gZWxzZWlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1lYXJseSldIH0gewogICAgcmV0dXJuICJtaW4iCiAgfSBlbHNlaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLWxhdGUpXSB9IHsKICAgIHJldHVybiAibWF4IgogIH0gZWxzZSB7CiAgICBzdGFfZXJyb3IgMTExICItZWFybHkgb3IgLWxhdGUgbXVzdCBiZSBzcGVjaWZpZWQuIgogIH0KfQoKcHJvYyBwYXJzZV9lYXJseV9sYXRlX2FsbF9mbGFncyB7IGZsYWdzX3ZhciB9IHsKICB1cHZhciAxICRmbGFnc192YXIgZmxhZ3MKICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtZWFybHkpXSAmJiBbaW5mbyBleGlzdHMgZmxhZ3MoLWxhdGUpXSB9IHsKICAgIHN0YV9lcnJvciAxMTIgImJvdGggLWVhcmx5IGFuZCAtbGF0ZSBzcGVjaWZpZWQuIgogIH0gZWxzZWlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1lYXJseSldICYmICFbaW5mbyBleGlzdHMgZmxhZ3MoLWxhdGUpXSB9IHsKICAgIHJldHVybiAibWluIgogIH0gZWxzZWlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1sYXRlKV0gJiYgIVtpbmZvIGV4aXN0cyBmbGFncygtZWFybHkpXSB9IHsKICAgIHJldHVybiAibWF4IgogIH0gZWxzZSB7CiAgICByZXR1cm4gIm1pbl9tYXgiCiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpwcm9jIGdldF9saWJlcnR5X2Vycm9yIHsgYXJnX25hbWUgYXJnIH0gewogIHNldCBsaWIgIk5VTEwiCiAgaWYge1tsbGVuZ3RoICRhcmddID4gMX0gewogICAgc3RhX2Vycm9yIDExMyAiJGFyZ19uYW1lIG11c3QgYmUgYSBzaW5nbGUgbGlicmFyeS4iCiAgfSBlbHNlaWYgeyBbaXNfb2JqZWN0ICRhcmddIH0gewogICAgc2V0IG9iamVjdF90eXBlIFtvYmplY3RfdHlwZSAkYXJnXQogICAgaWYgeyAkb2JqZWN0X3R5cGUgPT0gIkxpYmVydHlMaWJyYXJ5IiB9IHsKICAgICAgc2V0IGxpYiAkYXJnCiAgICB9IGVsc2UgewogICAgICBzdGFfZXJyb3IgMTE0ICIkYXJnX25hbWUgdHlwZSAnJG9iamVjdF90eXBlJyBpcyBub3QgYSBsaWJyYXJ5LiIKICAgIH0KICB9IGVsc2UgewogICAgc2V0IGxpYiBbZmluZF9saWJlcnR5ICRhcmddCiAgICBpZiB7ICRsaWIgPT0gIk5VTEwiIH0gewogICAgICBzdGFfZXJyb3IgMTE1ICJsaWJyYXJ5ICckYXJnJyBub3QgZm91bmQuIgogICAgfQogIH0KICByZXR1cm4gJGxpYgp9Cgpwcm9jIGdldF9saWJfY2VsbF93YXJuIHsgYXJnX25hbWUgYXJnIH0gewogIHJldHVybiBbZ2V0X2xpYl9jZWxsX2FyZyAkYXJnX25hbWUgJGFyZyBzdGFfd2Fybl0KfQoKcHJvYyBnZXRfbGliX2NlbGxfZXJyb3IgeyBhcmdfbmFtZSBhcmcgfSB7CiAgcmV0dXJuIFtnZXRfbGliX2NlbGxfYXJnICRhcmdfbmFtZSAkYXJnIHN0YV9lcnJvcl0KfQoKcHJvYyBnZXRfbGliX2NlbGxfYXJnIHsgYXJnX25hbWUgYXJnIGVycm9yX3Byb2MgfSB7CiAgc2V0IGxpYl9jZWxsICJOVUxMIgogIGlmIHsgW2xsZW5ndGggJGFyZ10gPiAxIH0gewogICAgc3RhX2Vycm9yIDExNiAiJGFyZ19uYW1lIG11c3QgYmUgYSBzaW5nbGUgbGliIGNlbGwuIgogIH0gZWxzZWlmIHsgW2lzX29iamVjdCAkYXJnXSB9IHsKICAgIHNldCBvYmplY3RfdHlwZSBbb2JqZWN0X3R5cGUgJGFyZ10KICAgIGlmIHsgJG9iamVjdF90eXBlID09ICJMaWJlcnR5Q2VsbCIgfSB7CiAgICAgIHNldCBsaWJfY2VsbCAkYXJnCiAgICB9IGVsc2UgewogICAgICAkZXJyb3JfcHJvYyAxMTYgIiRhcmdfbmFtZSB0eXBlICckb2JqZWN0X3R5cGUnIGlzIG5vdCBhIGxpYmVydHkgY2VsbC4iCiAgICB9CiAgICAjIFBhcnNlIGxpYnJhcnlfbmFtZS9jZWxsX25hbWUuCiAgfSBlbHNlaWYge1tyZWdleHAgW2NlbGxfcmVnZXhwXSAkYXJnIGlnbm9yZSBsaWJfbmFtZSBjZWxsX25hbWVdfSB7CiAgICBzZXQgbGlicmFyeSBbZmluZF9saWJlcnR5ICRsaWJfbmFtZV0KICAgIGlmIHsgJGxpYnJhcnkgIT0gIk5VTEwiIH0gewogICAgICBzZXQgbGliX2NlbGwgWyRsaWJyYXJ5IGZpbmRfbGliZXJ0eV9jZWxsICRjZWxsX25hbWVdCiAgICAgIGlmIHsgJGxpYl9jZWxsID09ICJOVUxMIiB9IHsKCSRlcnJvcl9wcm9jIDExNyAibGliZXJ0eSBjZWxsICckYXJnJyBub3QgZm91bmQuIgogICAgICB9CiAgICB9IGVsc2UgewogICAgICAkZXJyb3JfcHJvYyAxMTggICJsaWJyYXJ5ICckbGliX25hbWUnIG5vdCBmb3VuZC4iCiAgICB9CiAgfSBlbHNlIHsKICAgIHNldCBsaWJfY2VsbCBbZmluZF9saWJlcnR5X2NlbGwgJGFyZ10KICAgIGlmIHsgJGxpYl9jZWxsID09ICJOVUxMIiB9IHsKICAgICAgJGVycm9yX3Byb2MgMTE5ICJsaWJlcnR5IGNlbGwgJyRhcmcnIG5vdCBmb3VuZC4iCiAgICB9CiAgfQogIHJldHVybiAkbGliX2NlbGwKfQoKIyBOb3QgdXNlZCBieSBPcGVuU1RBCnByb2MgZ2V0X2xpYl9jZWxsc19hcmcgeyBhcmdfbmFtZSBhcmdsaXN0IGVycm9yX3Byb2MgfSB7CiAgc2V0IGxpYl9jZWxscyB7fQogICMgQ29weSBiYWNrc2xhc2hlcyB0aGF0IHdpbGwgYmUgcmVtb3ZlZCBieSBmb3JlYWNoLgogIHNldCBhcmdsaXN0IFtzdHJpbmcgbWFwIHtcXCBcXFxcfSAkYXJnbGlzdF0KICBmb3JlYWNoIGFyZyAkYXJnbGlzdCB7CiAgICBpZiB7W2xsZW5ndGggJGFyZ10gPiAxfSB7CiAgICAgICMgRW1iZWRkZWQgbGlzdC4KICAgICAgc2V0IGxpYl9jZWxscyBbY29uY2F0ICRsaWJfY2VsbHMgW2dldF9saWJfY2VsbHNfYXJnICRhcmdfbmFtZSAkYXJnICRlcnJvcl9wcm9jXV0KICAgIH0gZWxzZWlmIHsgW2lzX29iamVjdCAkYXJnXSB9IHsKICAgICAgc2V0IG9iamVjdF90eXBlIFtvYmplY3RfdHlwZSAkYXJnXQogICAgICBpZiB7ICRvYmplY3RfdHlwZSA9PSAiTGliZXJ0eUNlbGwiIH0gewoJbGFwcGVuZCBsaWJfY2VsbHMgJGFyZwogICAgICB9IGVsc2UgewoJJGVycm9yX3Byb2MgMTIwICJ1bnN1cHBvcnRlZCBvYmplY3QgdHlwZSAkb2JqZWN0X3R5cGUuIgogICAgICB9CiAgICB9IGVsc2VpZiB7ICRhcmcgIT0ge30gfSB7CiAgICAgIHNldCBhcmdfbGliX2NlbGxzIFtnZXRfbGliX2NlbGxzMSAkYXJnICRlcnJvcl9wcm9jXQogICAgICBpZiB7ICRhcmdfbGliX2NlbGxzICE9IHt9IH0gewoJc2V0IGxpYl9jZWxscyBbY29uY2F0ICRsaWJfY2VsbHMgJGFyZ19saWJfY2VsbHNdCiAgICAgIH0KICAgIH0KICB9CiAgcmV0dXJuICRsaWJfY2VsbHMKfQoKIyBCYXNlZCBvbiBnZXRfbGliX2NlbGxzCnByb2MgZ2V0X2xpYl9jZWxsczEgeyBwYXR0ZXJucyBlcnJvcl9wcm9jIH0gewogIGdsb2JhbCBoaWVyYXJjaHlfc2VwYXJhdG9yCgogIHNldCBjZWxscyB7fQogIHNldCBjZWxsX3JlZ2V4cCBbY2VsbF9yZWdleHBfaHNjICRoaWVyYXJjaHlfc2VwYXJhdG9yXQogIGZvcmVhY2ggcGF0dGVybiAkcGF0dGVybnMgewogICAgaWYgeyAhW3JlZ2V4cCAkY2VsbF9yZWdleHAgJHBhdHRlcm4gaWdub3JlIGxpYl9uYW1lIGNlbGxfcGF0dGVybl19IHsKICAgICAgc2V0IGxpYl9uYW1lICIqIgogICAgICBzZXQgY2VsbF9wYXR0ZXJuICRwYXR0ZXJuCiAgICB9CiAgICAjIEFsbG93IHdpbGRjYXJkcyBpbiB0aGUgbGlicmFyeSBuYW1lIChpbmNvbXBhdGlibGUpLgogICAgc2V0IGxpYnMgW2dldF9saWJzIC1xdWlldCAkbGliX25hbWVdCiAgICBpZiB7ICRsaWJzID09IHt9IH0gewogICAgICAkZXJyb3JfcHJvYyAxMjEgImxpYnJhcnkgJyRsaWJfbmFtZScgbm90IGZvdW5kLiIKICAgIH0gZWxzZSB7CiAgICAgIGZvcmVhY2ggbGliICRsaWJzIHsKICAgICAgICBzZXQgbWF0Y2hlcyBbJGxpYiBmaW5kX2xpYmVydHlfY2VsbHNfbWF0Y2hpbmcgJGNlbGxfcGF0dGVybiAwIDBdCiAgICAgICAgaWYgeyRtYXRjaGVzICE9IHt9fSB7CiAgICAgICAgICBzZXQgY2VsbHMgW2NvbmNhdCAkY2VsbHMgJG1hdGNoZXNdCiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIHsgJGNlbGxzID09IHt9IH0gewogICAgICAgICRlcnJvcl9wcm9jIDEyMiAiY2VsbCAnJGNlbGxfcGF0dGVybicgbm90IGZvdW5kLiIKICAgICAgfQogICAgfQogIH0KICByZXR1cm4gJGNlbGxzCn0KCnByb2MgZ2V0X2luc3RhbmNlX2Vycm9yIHsgYXJnX25hbWUgYXJnIH0gewogIHNldCBpbnN0ICJOVUxMIgogIGlmIHtbbGxlbmd0aCAkYXJnXSA+IDF9IHsKICAgIHN0YV9lcnJvciAxMjMgIiRhcmdfbmFtZSBtdXN0IGJlIGEgc2luZ2xlIGluc3RhbmNlLiIKICB9IGVsc2VpZiB7IFtpc19vYmplY3QgJGFyZ10gfSB7CiAgICBzZXQgb2JqZWN0X3R5cGUgW29iamVjdF90eXBlICRhcmddCiAgICBpZiB7ICRvYmplY3RfdHlwZSA9PSAiSW5zdGFuY2UiIH0gewogICAgICBzZXQgaW5zdCAkYXJnCiAgICB9IGVsc2UgewogICAgICBzdGFfZXJyb3IgMTI0ICIkYXJnX25hbWUgdHlwZSAnJG9iamVjdF90eXBlJyBpcyBub3QgYW4gaW5zdGFuY2UuIgogICAgfQogIH0gZWxzZSB7CiAgICBzZXQgaW5zdCBbZmluZF9pbnN0YW5jZSAkYXJnXQogICAgaWYgeyAkaW5zdCA9PSAiTlVMTCIgfSB7CiAgICAgIHN0YV9lcnJvciAxMjUgImluc3RhbmNlICckYXJnJyBub3QgZm91bmQuIgogICAgfQogIH0KICByZXR1cm4gJGluc3QKfQoKcHJvYyBnZXRfaW5zdGFuY2VzX2Vycm9yIHsgYXJnX25hbWUgYXJnbGlzdCB9IHsKICBzZXQgaW5zdHMge30KICAjIENvcHkgYmFja3NsYXNoZXMgdGhhdCB3aWxsIGJlIHJlbW92ZWQgYnkgZm9yZWFjaC4KICBzZXQgYXJnbGlzdCBbc3RyaW5nIG1hcCB7XFwgXFxcXH0gJGFyZ2xpc3RdCiAgZm9yZWFjaCBhcmcgJGFyZ2xpc3QgewogICAgaWYge1tsbGVuZ3RoICRhcmddID4gMX0gewogICAgICAjIEVtYmVkZGVkIGxpc3QuCiAgICAgIHNldCBpbnN0cyBbY29uY2F0ICRpbnN0cyBbZ2V0X2luc3RhbmNlc19lcnJvciAkYXJnX25hbWUgJGFyZ11dCiAgICB9IGVsc2VpZiB7IFtpc19vYmplY3QgJGFyZ10gfSB7CiAgICAgIHNldCBvYmplY3RfdHlwZSBbb2JqZWN0X3R5cGUgJGFyZ10KICAgICAgaWYgeyAkb2JqZWN0X3R5cGUgPT0gIkluc3RhbmNlIiB9IHsKICAgICAgICBsYXBwZW5kIGluc3RzICRhcmcKICAgICAgfSBlbHNlIHsKICAgICAgICBzdGFfZXJyb3IgMTI2ICIkYXJnX25hbWUgdHlwZSAnJG9iamVjdF90eXBlJyBpcyBub3QgYW4gaW5zdGFuY2UuIgogICAgICB9CiAgICB9IGVsc2VpZiB7ICRhcmcgIT0ge30gfSB7CiAgICAgIHNldCBhcmdfaW5zdHMgW2dldF9jZWxscyAtcXVpZXQgJGFyZ10KICAgICAgaWYgeyAkYXJnX2luc3RzICE9IHt9IH0gewogICAgICAgIHNldCBpbnN0cyBbY29uY2F0ICRpbnN0cyAkYXJnX2luc3RzXQogICAgICB9IGVsc2UgewogICAgICAgIHN0YV9lcnJvciAxMjcgImluc3RhbmNlICckYXJnJyBub3QgZm91bmQuIgogICAgICB9CiAgICB9CiAgfQogIHJldHVybiAkaW5zdHMKfQoKcHJvYyBnZXRfbGliY2VsbHNfZXJyb3IgeyBhcmdfbmFtZSBhcmdsaXN0IH0gewogIHNldCBsaWJjZWxscyB7fQogICMgQ29weSBiYWNrc2xhc2hlcyB0aGF0IHdpbGwgYmUgcmVtb3ZlZCBieSBmb3JlYWNoLgogIHNldCBhcmdsaXN0IFtzdHJpbmcgbWFwIHtcXCBcXFxcfSAkYXJnbGlzdF0KICBmb3JlYWNoIGFyZyAkYXJnbGlzdCB7CiAgICBpZiB7W2xsZW5ndGggJGFyZ10gPiAxfSB7CiAgICAgICMgRW1iZWRkZWQgbGlzdC4KICAgICAgc2V0IGxpYmNlbGxzIFtjb25jYXQgJGxpYmNlbGxzIFtnZXRfbGliY2VsbHNfZXJyb3IgJGFyZ19uYW1lICRhcmddXQogICAgfSBlbHNlaWYgeyBbaXNfb2JqZWN0ICRhcmddIH0gewogICAgICBzZXQgb2JqZWN0X3R5cGUgW29iamVjdF90eXBlICRhcmddCiAgICAgIGlmIHsgJG9iamVjdF90eXBlID09ICJMaWJlcnR5Q2VsbCIgfSB7CiAgICAgICAgbGFwcGVuZCBsaWJjZWxscyAkYXJnCiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhX2Vycm9yIDEyOCAiJGFyZ19uYW1lIHR5cGUgJyRvYmplY3RfdHlwZScgaXMgbm90IGEgbGliZXJ0eSBjZWxsLiIKICAgICAgfQogICAgfSBlbHNlaWYgeyAkYXJnICE9IHt9IH0gewogICAgICBzZXQgYXJnX2xpYmNlbGxzIFtnZXRfbGliX2NlbGxzIC1xdWlldCAkYXJnXQogICAgICBpZiB7ICRhcmdfbGliY2VsbHMgIT0ge30gfSB7CiAgICAgICAgc2V0IGxpYmNlbGxzIFtjb25jYXQgJGxpYmNlbGxzICRhcmdfbGliY2VsbHNdCiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhX2Vycm9yIDEyOSAibGliZXJ0eSBjZWxsICckYXJnJyBub3QgZm91bmQuIgogICAgICB9CiAgICB9CiAgfQogIHJldHVybiAkbGliY2VsbHMKfQoKcHJvYyBnZXRfcG9ydF9waW5fd2FybiB7IGFyZ19uYW1lIGFyZyB9IHsKICByZXR1cm4gW2dldF9wb3J0X3Bpbl9hcmcgJGFyZ19uYW1lICRhcmcgIndhcm4iXQp9Cgpwcm9jIGdldF9wb3J0X3Bpbl9lcnJvciB7IGFyZ19uYW1lIGFyZyB9IHsKICByZXR1cm4gW2dldF9wb3J0X3Bpbl9hcmcgJGFyZ19uYW1lICRhcmcgImVycm9yIl0KfQoKcHJvYyBnZXRfcG9ydF9waW5fYXJnIHsgYXJnX25hbWUgYXJnIHdhcm5fZXJyb3IgfSB7CiAgc2V0IHBpbiAiTlVMTCIKICBpZiB7W2xsZW5ndGggJGFyZ10gPiAxfSB7CiAgICBzdGFfd2Fybl9lcnJvciAxMjggJHdhcm5fZXJyb3IgIiRhcmdfbmFtZSBtdXN0IGJlIGEgc2luZ2xlIHBvcnQgb3IgcGluLiIKICB9IGVsc2VpZiB7IFtpc19vYmplY3QgJGFyZ10gfSB7CiAgICBzZXQgb2JqZWN0X3R5cGUgW29iamVjdF90eXBlICRhcmddCiAgICBpZiB7ICRvYmplY3RfdHlwZSA9PSAiUGluIiB9IHsKICAgICAgc2V0IHBpbiAkYXJnCiAgICB9IGVsc2VpZiB7ICRvYmplY3RfdHlwZSA9PSAiUG9ydCIgfSB7CiAgICAgICMgRXhwbGljaXQgcG9ydCBhcmcgLSBjb252ZXJ0IHRvIHBpbi4KICAgICAgc2V0IHBpbiBbZmluZF9waW4gW2dldF9uYW1lICRhcmddXQogICAgfSBlbHNlIHsKICAgICAgc3RhX3dhcm5fZXJyb3IgMTI5ICR3YXJuX2Vycm9yICIkYXJnX25hbWUgdHlwZSAnJG9iamVjdF90eXBlJyBpcyBub3QgYSBwaW4gb3IgcG9ydC4iCiAgICB9CiAgfSBlbHNlIHsKICAgIHNldCB0b3BfaW5zdGFuY2UgW3RvcF9pbnN0YW5jZV0KICAgIHNldCB0b3BfY2VsbCBbJHRvcF9pbnN0YW5jZSBjZWxsXQogICAgc2V0IHBvcnQgWyR0b3BfY2VsbCBmaW5kX3BvcnQgJGFyZ10KICAgIGlmIHsgJHBvcnQgPT0gIk5VTEwiIH0gewogICAgICBzZXQgcGluIFtmaW5kX3BpbiAkYXJnXQogICAgfSBlbHNlIHsKICAgICAgc2V0IHBpbiBbJHRvcF9pbnN0YW5jZSBmaW5kX3BpbiBbZ2V0X25hbWUgJHBvcnRdXQogICAgfQogICAgaWYgeyAkcGluID09ICJOVUxMIiB9IHsKICAgICAgc3RhX3dhcm5fZXJyb3IgMTMwICR3YXJuX2Vycm9yICJwaW4gJGFyZyBub3QgZm91bmQuIgogICAgfQogIH0KICByZXR1cm4gJHBpbgp9Cgpwcm9jIGdldF9wb3J0X3BpbnNfZXJyb3IgeyBhcmdfbmFtZSBhcmdsaXN0IH0gewogIHNldCBwaW5zIHt9CiAgIyBDb3B5IGJhY2tzbGFzaGVzIHRoYXQgd2lsbCBiZSByZW1vdmVkIGJ5IGZvcmVhY2guCiAgc2V0IGFyZ2xpbHN0IFtzdHJpbmcgbWFwIHtcXCBcXFxcfSAkYXJnbGlzdF0KICBmb3JlYWNoIGFyZyAkYXJnbGlzdCB7CiAgICBpZiB7W2xsZW5ndGggJGFyZ10gPiAxfSB7CiAgICAgICMgRW1iZWRkZWQgbGlzdC4KICAgICAgc2V0IHBpbnMgW2NvbmNhdCAkcGlucyBbZ2V0X3BvcnRfcGluc19lcnJvciAkYXJnX25hbWUgJGFyZ11dCiAgICB9IGVsc2VpZiB7IFtpc19vYmplY3QgJGFyZ10gfSB7CiAgICAgIHNldCBvYmplY3RfdHlwZSBbb2JqZWN0X3R5cGUgJGFyZ10KICAgICAgaWYgeyAkb2JqZWN0X3R5cGUgPT0gIlBpbiIgfSB7CiAgICAgICAgbGFwcGVuZCBwaW5zICRhcmcKICAgICAgfSBlbHNlaWYgeyAkb2JqZWN0X3R5cGUgPT0gIlBvcnQiIH0gewogICAgICAgICMgQ29udmVydCBwb3J0IHRvIHBpbi4KICAgICAgICBsYXBwZW5kIHBpbnMgW2ZpbmRfcGluIFtnZXRfbmFtZSAkYXJnXV0KICAgICAgfSBlbHNlIHsKICAgICAgICBzdGFfZXJyb3IgMTMxICIkYXJnX25hbWUgdHlwZSAnJG9iamVjdF90eXBlJyBpcyBub3QgYSBwaW4gb3IgcG9ydC4iCiAgICAgIH0KICAgIH0gZWxzZWlmIHsgJGFyZyAhPSB7fSB9IHsKICAgICAgc2V0IGFyZ19waW5zIFtnZXRfcG9ydHNfb3JfcGlucyAkYXJnXQogICAgICBpZiB7ICRhcmdfcGlucyAhPSB7fSB9IHsKICAgICAgICBzZXQgcGlucyBbY29uY2F0ICRwaW5zICRhcmdfcGluc10KICAgICAgfSBlbHNlIHsKICAgICAgICBzdGFfZXJyb3IgMTMyICJwaW4gJyRhcmcnIG5vdCBmb3VuZC4iCiAgICAgIH0KICAgIH0KICB9CiAgcmV0dXJuICRwaW5zCn0KCnByb2MgZ2V0X3BvcnRzX2Vycm9yIHsgYXJnX25hbWUgYXJnbGlzdCB9IHsKICBzZXQgcG9ydHMge30KICAjIENvcHkgYmFja3NsYXNoZXMgdGhhdCB3aWxsIGJlIHJlbW92ZWQgYnkgZm9yZWFjaC4KICBzZXQgYXJnbGlzdCBbc3RyaW5nIG1hcCB7XFwgXFxcXH0gJGFyZ2xpc3RdCiAgZm9yZWFjaCBhcmcgJGFyZ2xpc3QgewogICAgaWYge1tsbGVuZ3RoICRhcmddID4gMX0gewogICAgICAjIEVtYmVkZGVkIGxpc3QuCiAgICAgIHNldCBwb3J0cyBbY29uY2F0ICRwb3J0cyBbZ2V0X3BvcnRzX2Vycm9yICRhcmdfbmFtZSAkYXJnXV0KICAgIH0gZWxzZWlmIHsgW2lzX29iamVjdCAkYXJnXSB9IHsKICAgICAgc2V0IG9iamVjdF90eXBlIFtvYmplY3RfdHlwZSAkYXJnXQogICAgICBpZiB7ICRvYmplY3RfdHlwZSA9PSAiUG9ydCIgfSB7CiAgICAgICAgbGFwcGVuZCBwb3J0cyAkYXJnCiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhX2Vycm9yIDEzMyAiJGFyZ19uYW1lIHR5cGUgJyRvYmplY3RfdHlwZScgaXMgbm90IGEgcG9ydC4iCiAgICAgIH0KICAgIH0gZWxzZWlmIHsgJGFyZyAhPSB7fSB9IHsKICAgICAgc2V0IGFyZ19wb3J0cyBbZ2V0X3BvcnRzICRhcmddCiAgICAgIGlmIHsgJGFyZ19wb3J0cyAhPSB7fSB9IHsKICAgICAgICBzZXQgcG9ydHMgW2NvbmNhdCAkcG9ydHMgJGFyZ19wb3J0c10KICAgICAgfQogICAgfQogIH0KICByZXR1cm4gJHBvcnRzCn0KCnByb2MgZ2V0X3Bpbl9lcnJvciB7IGFyZ19uYW1lIGFyZyB9IHsKICByZXR1cm4gW2dldF9waW5fYXJnICRhcmdfbmFtZSAkYXJnICJlcnJvciJdCn0KCnByb2MgZ2V0X3Bpbl93YXJuIHsgYXJnX25hbWUgYXJnIH0gewogIHJldHVybiBbZ2V0X3Bpbl9hcmcgJGFyZ19uYW1lICRhcmcgIndhcm4iXQp9Cgpwcm9jIGdldF9waW5fYXJnIHsgYXJnX25hbWUgYXJnIHdhcm5fZXJyb3IgfSB7CiAgc2V0IHBpbiAiTlVMTCIKICBpZiB7W2xsZW5ndGggJGFyZ10gPiAxfSB7CiAgICBzdGFfd2Fybl9lcnJvciAxMzQgJHdhcm5fZXJyb3IgIiRhcmdfbmFtZSBtdXN0IGJlIGEgc2luZ2xlIHBpbi4iCiAgfSBlbHNlaWYgeyBbaXNfb2JqZWN0ICRhcmddIH0gewogICAgc2V0IG9iamVjdF90eXBlIFtvYmplY3RfdHlwZSAkYXJnXQogICAgaWYgeyAkb2JqZWN0X3R5cGUgPT0gIlBpbiIgfSB7CiAgICAgIHNldCBwaW4gJGFyZwogICAgfSBlbHNlIHsKICAgICAgc3RhX3dhcm5fZXJyb3IgMTM1ICR3YXJuX2Vycm9yICIkYXJnX25hbWUgdHlwZSAnJG9iamVjdF90eXBlJyBpcyBub3QgYSBwaW4uIgogICAgfQogIH0gZWxzZSB7CiAgICBzZXQgcGluIFtmaW5kX3BpbiAkYXJnXQogICAgaWYgeyAkcGluID09ICJOVUxMIiB9IHsKICAgICAgc3RhX3dhcm5fZXJyb3IgMTM2ICR3YXJuX2Vycm9yICIkYXJnX25hbWUgcGluICRhcmcgbm90IGZvdW5kLiIKICAgIH0KICB9CiAgcmV0dXJuICRwaW4KfQoKcHJvYyBnZXRfY2xvY2tfd2FybiB7IGFyZ19uYW1lIGFyZyB9IHsKICByZXR1cm4gW2dldF9jbG9ja19hcmcgJGFyZ19uYW1lICRhcmcgc3RhX3dhcm5dCn0KCnByb2MgZ2V0X2Nsb2NrX2Vycm9yIHsgYXJnX25hbWUgYXJnIH0gewogIHJldHVybiBbZ2V0X2Nsb2NrX2FyZyAkYXJnX25hbWUgJGFyZyBzdGFfZXJyb3JdCn0KCnByb2MgZ2V0X2Nsb2NrX2FyZyB7IGFyZ19uYW1lIGFyZyBlcnJvcl9wcm9jIH0gewogIHNldCBjbGsgIk5VTEwiCiAgaWYge1tsbGVuZ3RoICRhcmddID4gMX0gewogICAgJGVycm9yX3Byb2MgMTM3ICIkYXJnX25hbWUgYXJnIG11c3QgYmUgYSBzaW5nbGUgY2xvY2ssIG5vdCBhIGxpc3QuIgogIH0gZWxzZWlmIHsgW2lzX29iamVjdCAkYXJnXSB9IHsKICAgIHNldCBvYmplY3RfdHlwZSBbb2JqZWN0X3R5cGUgJGFyZ10KICAgIGlmIHsgJG9iamVjdF90eXBlID09ICJDbG9jayIgfSB7CiAgICAgIHNldCBjbGsgJGFyZwogICAgfSBlbHNlIHsKICAgICAgJGVycm9yX3Byb2MgMTM4ICIkYXJnX25hbWUgYXJnIHZhbHVlIGlzIGEgJG9iamVjdF90eXBlLCBub3QgYSBjbG9jay4iCiAgICB9CiAgfSBlbHNlaWYgeyAkYXJnICE9IHt9IH0gewogICAgc2V0IGNsayBbZmluZF9jbG9jayAkYXJnXQogICAgaWYgeyAkY2xrID09ICJOVUxMIiB9IHsKICAgICAgJGVycm9yX3Byb2MgMTM4ICIkYXJnX25hbWUgYXJnICckYXJnJyBjbG9jayBub3QgZm91bmQuIgogICAgfQogIH0KICByZXR1cm4gJGNsawp9Cgpwcm9jIGdldF9jbG9ja3Nfd2FybiB7IGFyZ19uYW1lIGFyZ2xpc3QgfSB7CiAgc2V0IGNsa3Mge30KICAjIENvcHkgYmFja3NsYXNoZXMgdGhhdCB3aWxsIGJlIHJlbW92ZWQgYnkgZm9yZWFjaC4KICBzZXQgYXJnbGlzdCBbc3RyaW5nIG1hcCB7XFwgXFxcXH0gJGFyZ2xpc3RdCiAgZm9yZWFjaCBhcmcgJGFyZ2xpc3QgewogICAgaWYge1tsbGVuZ3RoICRhcmddID4gMX0gewogICAgICAjIEVtYmVkZGVkIGxpc3QuCiAgICAgIHNldCBjbGtzIFtjb25jYXQgJGNsa3MgW2dldF9jbG9ja3Nfd2FybiAkYXJnX25hbWUgJGFyZ11dCiAgICB9IGVsc2VpZiB7IFtpc19vYmplY3QgJGFyZ10gfSB7CiAgICAgIHNldCBvYmplY3RfdHlwZSBbb2JqZWN0X3R5cGUgJGFyZ10KICAgICAgaWYgeyAkb2JqZWN0X3R5cGUgPT0gIkNsb2NrIiB9IHsKICAgICAgICBsYXBwZW5kIGNsa3MgJGFyZwogICAgICB9IGVsc2UgewogICAgICAgIHN0YV93YXJuIDEzOSAidW5zdXBwb3J0ZWQgb2JqZWN0IHR5cGUgJG9iamVjdF90eXBlLiIKICAgICAgfQogICAgfSBlbHNlaWYgeyAkYXJnICE9IHt9IH0gewogICAgICBzZXQgYXJnX2Nsb2NrcyBbZ2V0X2Nsb2NrcyAkYXJnXQogICAgICBpZiB7ICRhcmdfY2xvY2tzICE9IHt9IH0gewogICAgICAgIHNldCBjbGtzIFtjb25jYXQgJGNsa3MgJGFyZ19jbG9ja3NdCiAgICAgIH0KICAgIH0KICB9CiAgcmV0dXJuICRjbGtzCn0KCnByb2MgZ2V0X25ldF9hcmcgeyBhcmdfbmFtZSBhcmcgfSB7CiAgc2V0IG5ldCAiTlVMTCIKICBpZiB7W2xsZW5ndGggJGFyZ10gPiAxfSB7CiAgICBzdGFfd2FybiAgMTQwICIkYXJnX25hbWUgbXVzdCBiZSBhIHNpbmdsZSBuZXQuIgogIH0gZWxzZWlmIHsgW2lzX29iamVjdCAkYXJnXSB9IHsKICAgIHNldCBvYmplY3RfdHlwZSBbb2JqZWN0X3R5cGUgJGFyZ10KICAgIGlmIHsgJG9iamVjdF90eXBlID09ICJOZXQiIH0gewogICAgICBzZXQgbmV0ICRhcmcKICAgIH0gZWxzZSB7CiAgICAgIHN0YV93YXJuIDE0MSAiJGFyZ19uYW1lICckb2JqZWN0X3R5cGUnIGlzIG5vdCBhIG5ldC4iCiAgICB9CiAgfSBlbHNlIHsKICAgIHNldCBuZXQgW2ZpbmRfbmV0ICRhcmddCiAgICBpZiB7ICRuZXQgPT0gIk5VTEwiIH0gewogICAgICBzdGFfd2FybiAxNDMgIiRhcmdfbmFtZSAnJGFyZycgbm90IGZvdW5kLiIKICAgIH0KICB9CiAgcmV0dXJuICRuZXQKfQoKcHJvYyBnZXRfbmV0c19hcmcgeyBhcmdfbmFtZSBhcmdsaXN0IH0gewogIHNldCBuZXRzIHt9CiAgIyBDb3B5IGJhY2tzbGFzaGVzIHRoYXQgd2lsbCBiZSByZW1vdmVkIGJ5IGZvcmVhY2guCiAgc2V0IGFyZ2xpc3QgW3N0cmluZyBtYXAge1xcIFxcXFx9ICRhcmdsaXN0XQogIGZvcmVhY2ggYXJnICRhcmdsaXN0IHsKICAgIGlmIHtbbGxlbmd0aCAkYXJnXSA+IDF9IHsKICAgICAgIyBFbWJlZGRlZCBsaXN0LgogICAgICBzZXQgbmV0cyBbY29uY2F0ICRuZXRzIFtnZXRfbmV0c19hcmcgJGFyZ19uYW1lICRhcmddXQogICAgfSBlbHNlaWYgeyBbaXNfb2JqZWN0ICRhcmddIH0gewogICAgICBzZXQgb2JqZWN0X3R5cGUgW29iamVjdF90eXBlICRhcmddCiAgICAgIGlmIHsgJG9iamVjdF90eXBlID09ICJOZXQiIH0gewogICAgICAgIGxhcHBlbmQgbmV0cyAkYXJnCiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhX3dhcm4gMTQyICJ1bnN1cHBvcnRlZCBvYmplY3QgdHlwZSAkb2JqZWN0X3R5cGUuIgogICAgICB9CiAgICB9IGVsc2VpZiB7ICRhcmcgIT0ge30gfSB7CiAgICAgIHNldCBhcmdfbmV0cyBbZ2V0X25ldHMgJGFyZ10KICAgICAgaWYgeyAkYXJnX25ldHMgIT0ge30gfSB7CiAgICAgICAgc2V0IG5ldHMgW2NvbmNhdCAkbmV0cyAkYXJnX25ldHNdCiAgICAgIH0KICAgIH0KICB9CiAgcmV0dXJuICRuZXRzCn0KCiMgc3RhIG5hbWVzcGFjZSBlbmQuCn0KIyBPcGVuU1RBLCBTdGF0aWMgVGltaW5nIEFuYWx5emVyCiMgQ29weXJpZ2h0IChjKSAyMDI1LCBQYXJhbGxheCBTb2Z0d2FyZSwgSW5jLgojIAojIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5CiMgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkKIyB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvcgojIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCiMgCiMgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiMgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKIyBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGUKIyBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgojIAojIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCiMgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCiMgCiMgVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QKIyBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiMgCiMgQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUKIyBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiMgCiMgVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4KCm5hbWVzcGFjZSBldmFsIHN0YSB7CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMgIAojIFV0aWxpdHkgY29tbWFuZHMKIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgImhlbHAiIHtbcGF0dGVybl19Cgpwcm9jX3JlZGlyZWN0IGhlbHAgewogIHZhcmlhYmxlIGNtZF9hcmdzCgogIHNldCBhcmdfY291bnQgW2xsZW5ndGggJGFyZ3NdCiAgaWYgeyAkYXJnX2NvdW50ID09IDAgfSB7CiAgICBzZXQgcGF0dGVybiAiKiIKICB9IGVsc2VpZiB7ICRhcmdfY291bnQgPT0gMSB9IHsKICAgIHNldCBwYXR0ZXJuIFtsaW5kZXggJGFyZ3MgMF0KICB9IGVsc2UgewogICAgY21kX3VzYWdlX2Vycm9yICJoZWxwIgogIH0KICBzZXQgbWF0Y2hlcyBbYXJyYXkgbmFtZXMgY21kX2FyZ3MgJHBhdHRlcm5dCiAgaWYgeyAkbWF0Y2hlcyAhPSB7fSB9IHsKICAgIGZvcmVhY2ggY21kIFtsc29ydCAkbWF0Y2hlc10gewogICAgICBzaG93X2NtZF9hcmdzICRjbWQKICAgIH0KICB9IGVsc2UgewogICAgc3RhX3dhcm4gMTYwICJubyBjb21tYW5kcyBtYXRjaCAnJHBhdHRlcm4nLiIKICB9Cn0KCnByb2Mgc2hvd19jbWRfYXJncyB7IGNtZCB9IHsKICB2YXJpYWJsZSBjbWRfYXJncwoKICBzZXQgbWF4X2NvbCA4MAogIHNldCBpbmRlbnQgMgogIHNldCBpbmRlbnRfc3RyICIgICIKICBzZXQgbGluZSAkY21kCiAgc2V0IGNvbCBbc3RyaW5nIGxlbmd0aCAkY21kXQogIHNldCBhcmdsaXN0ICRjbWRfYXJncygkY21kKQogICMgQnJlYWsgdGhlIGFyZ2xpc3QgdXAgaW50byBtYXhfY29sIGxlbmd0aCBsaW5lcy4KICB3aGlsZSB7MX0gewogICAgaWYge1tyZWdleHAgeyheW1xuIF0qKShbYS16QS1aMC05X1xcXHxcLV0rfFxbW15cW10rXF0pKC4qKX0gXAoJICAgJGFyZ2xpc3QgaWdub3JlIHNwYWNlIGFyZyByZXN0XX0gewogICAgICBzZXQgYXJnX2xlbmd0aCBbc3RyaW5nIGxlbmd0aCAkYXJnXQogICAgICBpZiB7ICRjb2wgKyAkYXJnX2xlbmd0aCA8ICRtYXhfY29sIH0gewoJc2V0IGxpbmUgIiRsaW5lICRhcmciCglzZXQgY29sIFtleHByICRjb2wgKyAkYXJnX2xlbmd0aCArIDFdCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVwb3J0X2xpbmUgJGxpbmUKCXNldCBsaW5lICIkaW5kZW50X3N0ciAkYXJnIgoJc2V0IGNvbCBbZXhwciAkaW5kZW50ICsgJGFyZ19sZW5ndGggKyAxXQogICAgICB9CiAgICAgIHNldCBhcmdsaXN0ICRyZXN0CiAgICB9IGVsc2UgewogICAgICByZXBvcnRfbGluZSAiJGxpbmUgJGFyZ2xpc3QiCiAgICAgIGJyZWFrCiAgICB9CiAgfQp9CgojIFRoaXMgaXMgdXNlZCBpbiBsaWV1IG9mIGNvbW1hbmQgY29tcGxldGlvbiB0byBtYWtlIHNkYyBjb21tYW5kcwojIGxpa2UgZ2V0X3BvcnRzIGJlIGFiYnJldmlhdGVkIGdldF9wb3J0Lgpwcm9jIGRlZmluZV9jbWRfYWxpYXMgeyBhbGlhcyBjbWQgfSB7CiAgZXZhbCAicHJvYyAkYWxpYXMgeyBhcmdzIH0geyBldmFsIFtjb25jYXQgJGNtZCBcJGFyZ3NdIH0iCiAgbmFtZXNwYWNlIGV4cG9ydCAkYWxpYXMKfQoKcHJvYyBjbWRfdXNhZ2VfZXJyb3IgeyBjbWQgfSB7CiAgdmFyaWFibGUgY21kX2FyZ3MKCiAgaWYgW2luZm8gZXhpc3RzIGNtZF9hcmdzKCRjbWQpXSB7CiAgICBzdGFfZXJyb3IgMTYxICJVc2FnZTogJGNtZCAkY21kX2FyZ3MoJGNtZCkiCiAgfSBlbHNlIHsKICAgIHN0YV9lcnJvciAxNjIgIlVzYWdlOiAkY21kIGFyZ3VtZW50IGVycm9yIgogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJ3aXRoX291dHB1dF90b192YXJpYWJsZSIgeyB2YXIgeyBjbWRzIH19CgojIHdpdGhfb3V0cHV0X3RvX3ZhcmlhYmxlIHZhcmlhYmxlIHsgY29tbWFuZCBhcmdzLi4uIH0KcHJvYyB3aXRoX291dHB1dF90b192YXJpYWJsZSB7IHZhcl9uYW1lIGFyZ3MgfSB7CiAgdXB2YXIgMSAkdmFyX25hbWUgdmFyCgogIHNldCBib2R5IFtsaW5kZXggJGFyZ3MgMF0KICBzdGE6OnJlZGlyZWN0X3N0cmluZ19iZWdpbjsKICBjYXRjaCAkYm9keSByZXQKICBzZXQgdmFyIFtzdGE6OnJlZGlyZWN0X3N0cmluZ19lbmRdCiAgcmV0dXJuICRyZXQKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJyZXBvcnRfdW5pdHMiIHt9Cgpwcm9jIHJlcG9ydF91bml0cyB7IGFyZ3MgfSB7CiAgY2hlY2tfYXJnY19lcTAgInJlcG9ydF91bml0cyIgJGFyZ3MKICBmb3JlYWNoIHVuaXQgeyJ0aW1lIiAiY2FwYWNpdGFuY2UiICJyZXNpc3RhbmNlIiAidm9sdGFnZSIgImN1cnJlbnQiICJwb3dlciIgImRpc3RhbmNlIn0gewogICAgcmVwb3J0X2xpbmUgIiAkdW5pdCAxW3VuaXRfc2NhbGVkX3N1ZmZpeCAkdW5pdF0iCiAgfQp9Cgpwcm9jIHdyaXRlX3VuaXRzX2pzb24geyBqc29uZmlsZSB9IHsKICBzZXQgZiBbb3BlbiAkanNvbmZpbGUgd10KICBwdXRzICRmICJ7IgogIGZvcmVhY2ggdW5pdCB7InRpbWUiICJjYXBhY2l0YW5jZSIgInJlc2lzdGFuY2UiICJ2b2x0YWdlIiAiY3VycmVudCIgInBvd2VyIn0gewogICAgcHV0cyAkZiAiICBcIiR1bml0XCI6IFwiW3VuaXRfc2NhbGVkX3N1ZmZpeCAkdW5pdF1cIiwiCiAgfQogIHB1dHMgJGYgIiAgXCJkaXN0YW5jZVwiOiBcIlt1bml0X3NjYWxlZF9zdWZmaXggZGlzdGFuY2VdXCIiCiAgcHV0cyAkZiAifSIKICBjbG9zZSAkZgp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF9jbWRfdW5pdHMiIFwKICB7Wy1jYXBhY2l0YW5jZSBjYXBfdW5pdF0gWy1yZXNpc3RhbmNlIHJlc191bml0XSBbLXRpbWUgdGltZV91bml0XVwKICAgICBbLXZvbHRhZ2Ugdm9sdGFnZV91bml0XSBbLWN1cnJlbnQgY3VycmVudF91bml0XSBbLXBvd2VyIHBvd2VyX3VuaXRdXAogICAgIFstZGlzdGFuY2UgZGlzdGFuY2VfdW5pdF19Cgpwcm9jIHNldF9jbWRfdW5pdHMgeyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJzZXRfY21kX3VuaXRzIiBhcmdzIFwKICAgIGtleXMgey1jYXBhY2l0YW5jZSAtcmVzaXN0YW5jZSAtdGltZSAtdm9sdGFnZSAtY3VycmVudCAtcG93ZXIgXAoJICAgIC1kaXN0YW5jZSAtZGlnaXRzIC1zdWZmaXh9IFwKICAgIGZsYWdzIHt9CgogIGNoZWNrX2FyZ2NfZXEwICJzZXRfY21kX3VuaXRzIiAkYXJncwogIHNldF91bml0X3ZhbHVlcyAiY2FwYWNpdGFuY2UiIC1jYXBhY2l0YW5jZSAiZiIga2V5cwogIHNldF91bml0X3ZhbHVlcyAidGltZSIgLXRpbWUgInMiIGtleXMKICBzZXRfdW5pdF92YWx1ZXMgInZvbHRhZ2UiIC12b2x0YWdlICJ2IiBrZXlzCiAgc2V0X3VuaXRfdmFsdWVzICJjdXJyZW50IiAtY3VycmVudCAiQSIga2V5cwogIHNldF91bml0X3ZhbHVlcyAicmVzaXN0YW5jZSIgLXJlc2lzdGFuY2UgIm9obSIga2V5cwogIHNldF91bml0X3ZhbHVlcyAiZGlzdGFuY2UiIC1kaXN0YW5jZSAibSIga2V5cwp9Cgpwcm9jIHNldF91bml0X3ZhbHVlcyB7IHVuaXQga2V5IHN1ZmZpeCBrZXlfdmFyIH0gewogIHVwdmFyIDEgJGtleV92YXIga2V5cwogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoJGtleSldIH0gewogICAgc2V0IHZhbHVlICRrZXlzKCRrZXkpCiAgICBzZXQgc3VmZml4X2xlbmd0aCBbc3RyaW5nIGxlbmd0aCAkc3VmZml4XQogICAgc2V0IGFyZ19zdWZmaXggW3N0cmluZyByYW5nZSAkdmFsdWUgZW5kLVtleHByICRzdWZmaXhfbGVuZ3RoIC0gMV0gZW5kXQogICAgaWYgeyBbc3RyaW5nIG1hdGNoIC1ub2Nhc2UgJGFyZ19zdWZmaXggJHN1ZmZpeF0gfSB7CiAgICAgIHNldCBhcmdfcHJlZml4IFtzdHJpbmcgcmFuZ2UgJHZhbHVlIDAgZW5kLSRzdWZmaXhfbGVuZ3RoXQogICAgICBpZiB7IFtyZWdleHAgIl4oMTAqKT8oXFtNa211bnBmXF0pPyQiICRhcmdfcHJlZml4IGlnbm9yZSBtdWx0IHByZWZpeF0gfSB7CiAgICAgICAgI3B1dHMgIiRhcmdfcHJlZml4ICckbXVsdCcgJyRwcmVmaXgnIgogICAgICAgIGlmIHsgJG11bHQgPT0gIiIgfSB7CiAgICAgICAgICBzZXQgbXVsdCAxCiAgICAgICAgfQogICAgICAgIHNldCBzY2FsZSBbdW5pdF9wcmVmaXhfc2NhbGUgJHVuaXQgJHByZWZpeCBdCiAgICAgICAgc2V0X2NtZF91bml0X3NjYWxlICR1bml0ICRzY2FsZQogICAgICB9IGVsc2UgewogICAgICAgIHN0YV9lcnJvciAxNjYgInVua25vd24gdW5pdCAkdW5pdCBwcmVmaXggJyR7YXJnX3ByZWZpeH0nLiIKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgc3RhX2Vycm9yIDE2NyAiaW5jb3JyZWN0IHVuaXQgc3VmZml4ICckYXJnX3N1ZmZpeCcuIgogICAgfQogICAgaWYgW2luZm8gZXhpc3RzIGtleXMoLWRpZ2l0cyldIHsKICAgICAgc2V0X2NtZF91bml0X2RpZ2l0cyAkdW5pdCAka2V5cygtZGlnaXRzKQogICAgfQogICAgaWYgW2luZm8gZXhpc3RzIGtleXMoLXN1ZmZpeCldIHsKICAgICAgc2V0X2NtZF91bml0X3N1ZmZpeCAkdW5pdCAka2V5cygtc3VmZml4KQogICAgfQogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJkZWxldGVfZnJvbV9saXN0IiB7bGlzdCBvYmpzfQoKcHJvYyBkZWxldGVfZnJvbV9saXN0IHsgbGlzdCBvYmplY3RzIH0gewogIGRlbGV0ZV9vYmplY3RzX2Zyb21fbGlzdF9jbWQgJGxpc3QgJG9iamVjdHMKfQoKcHJvYyBkZWxldGVfb2JqZWN0c19mcm9tX2xpc3RfY21kIHsgbGlzdCBvYmplY3RzIH0gewogIHNldCBsaXN0MCBbbGluZGV4ICRsaXN0IDBdCiAgc2V0IGxpc3RfaXNfb2JqZWN0IFtpc19vYmplY3QgJGxpc3QwXQogIHNldCBsaXN0X3R5cGUgW29iamVjdF90eXBlICRsaXN0MF0KICBmb3JlYWNoIG9iaiAkb2JqZWN0cyB7CiAgICAjIElmIHRoZSBsaXN0IGlzIGEgY29sbGVjdGlvbiBvZiB0Y2wgb2JqZWN0cyAocmV0dXJuZWQgYnkgZ2V0XyopLAogICAgIyBjb252ZXJ0IHRoZSBvYmogdG8gYmUgcmVtb3ZlZCBmcm9tIGEgbmFtZSB0byBhbiBvYmplY3Qgb2YgdGhlIHNhbWUKICAgICMgdHlwZS4KICAgIGlmIHskbGlzdF9pc19vYmplY3QgJiYgIVtpc19vYmplY3QgJG9ial19IHsKICAgICAgaWYgeyRsaXN0X3R5cGUgPT0gIkNsb2NrIn0gewoJc2V0IG9iaiBbZmluZF9jbG9jayAkb2JqXQogICAgICB9IGVsc2VpZiB7JGxpc3RfdHlwZSA9PSAiUG9ydCJ9IHsKCXNldCB0b3BfaW5zdGFuY2UgW3RvcF9pbnN0YW5jZV0KCXNldCB0b3BfY2VsbCBbJHRvcF9pbnN0YW5jZSBjZWxsXQoJc2V0IG9iaiBbJHRvcF9jZWxsIGZpbmRfcG9ydCAkb2JqXQogICAgICB9IGVsc2VpZiB7JGxpc3RfdHlwZSA9PSAiUGluIn0gewoJc2V0IG9iaiBbZmluZF9waW4gJG9ial0KICAgICAgfSBlbHNlaWYgeyRsaXN0X3R5cGUgPT0gIkluc3RhbmNlIn0gewoJc2V0IG9iaiBbZmluZF9pbnN0YW5jZSAkb2JqXQogICAgICB9IGVsc2VpZiB7JGxpc3RfdHlwZSA9PSAiTmV0In0gewoJc2V0IG9iaiBbZmluZF9uZXQgJG9ial0KICAgICAgfSBlbHNlaWYgeyRsaXN0X3R5cGUgPT0gIkxpYmVydHlMaWJyYXJ5In0gewoJc2V0IG9iaiBbZmluZF9saWJlcnR5ICRvYmpdCiAgICAgIH0gZWxzZWlmIHskbGlzdF90eXBlID09ICJMaWJlcnR5Q2VsbCJ9IHsKCXNldCBvYmogW2ZpbmRfbGliZXJ0eV9jZWxsICRvYmpdCiAgICAgIH0gZWxzZWlmIHskbGlzdF90eXBlID09ICJMaWJlcnR5UG9ydCJ9IHsKCXNldCBvYmogW2dldF9saWJfcGlucyAkb2JqXQogICAgICB9IGVsc2UgewoJc3RhX2Vycm9yIDE2NCAidW5zdXBwb3J0ZWQgb2JqZWN0IHR5cGUgJGxpc3RfdHlwZS4iCiAgICAgIH0KICAgIH0KICAgIHNldCBpbmRleCBbbHNlYXJjaCAkbGlzdCAkb2JqXQogICAgaWYgeyAkaW5kZXggIT0gLTEgfSB7CiAgICAgIHNldCBsaXN0IFtscmVwbGFjZSAkbGlzdCAkaW5kZXggJGluZGV4XQogICAgfQogIH0KICByZXR1cm4gJGxpc3QKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKcHJvYyBzZXRfY21kX25hbWVzcGFjZSB7IG5hbWVzcGMgfSB7CiAgaWYgeyAkbmFtZXNwYyA9PSAic2RjIiB8fCAkbmFtZXNwYyA9PSAic3RhIiB9IHsKICAgIHNldF9jbWRfbmFtZXNwYWNlX2NtZCAkbmFtZXNwYwogIH0gZWxzZSB7CiAgICBzdGFfZXJyb3IgMTY1ICJ1bmtub3duIG5hbWVzcGFjZSAkbmFtZXNwYy4iCiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInJlcG9ydF9vYmplY3RfZnVsbF9uYW1lcyIge29iamVjdHN9Cgpwcm9jIHJlcG9ydF9vYmplY3RfZnVsbF9uYW1lcyB7IG9iamVjdHMgfSB7CiAgZm9yZWFjaCBvYmogW3NvcnRfYnlfZnVsbF9uYW1lICRvYmplY3RzXSB7CiAgICByZXBvcnRfbGluZSBbZ2V0X2Z1bGxfbmFtZSAkb2JqXQogIH0KfQoKZGVmaW5lX2NtZF9hcmdzICJyZXBvcnRfb2JqZWN0X25hbWVzIiB7b2JqZWN0c30KCnByb2MgcmVwb3J0X29iamVjdF9uYW1lcyB7IG9iamVjdHMgfSB7CiAgZm9yZWFjaCBvYmogW3NvcnRfYnlfbmFtZSAkb2JqZWN0c10gewogICAgcmVwb3J0X2xpbmUgW2dldF9uYW1lICRvYmpdCiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgImdldF9uYW1lIiB7b2JqZWN0fQpkZWZpbmVfY21kX2FyZ3MgImdldF9mdWxsX25hbWUiIHtvYmplY3R9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpwcm9jIGdldF9uYW1lIHsgb2JqZWN0IH0gewogIHJldHVybiBbZ2V0X29iamVjdF9wcm9wZXJ0eSAkb2JqZWN0ICJuYW1lIl0KfQoKcHJvYyBnZXRfZnVsbF9uYW1lIHsgb2JqZWN0IH0gewogIHJldHVybiBbZ2V0X29iamVjdF9wcm9wZXJ0eSAkb2JqZWN0ICJmdWxsX25hbWUiXQp9Cgpwcm9jIHNvcnRfYnlfbmFtZSB7IG9iamVjdHMgfSB7CiAgcmV0dXJuIFtsc29ydCAtY29tbWFuZCBuYW1lX2NtcCAkb2JqZWN0c10KfQoKcHJvYyBuYW1lX2NtcCB7IG9iajEgb2JqMiB9IHsKICByZXR1cm4gW3N0cmluZyBjb21wYXJlIFtnZXRfbmFtZSAkb2JqMV0gW2dldF9uYW1lICRvYmoyXV0KfQoKcHJvYyBzb3J0X2J5X2Z1bGxfbmFtZSB7IG9iamVjdHMgfSB7CiAgcmV0dXJuIFtsc29ydCAtY29tbWFuZCBmdWxsX25hbWVfY21wICRvYmplY3RzXQp9Cgpwcm9jIGZ1bGxfbmFtZV9jbXAgeyBvYmoxIG9iajIgfSB7CiAgcmV0dXJuIFtzdHJpbmcgY29tcGFyZSBbZ2V0X2Z1bGxfbmFtZSAkb2JqMV0gW2dldF9mdWxsX25hbWUgJG9iajJdXQp9Cgpwcm9jIGdldF9vYmplY3RfdHlwZSB7IG9iaiB9IHsKICBzZXQgb2JqZWN0X3R5cGUgW29iamVjdF90eXBlICRvYmpdCiAgaWYgeyAkb2JqZWN0X3R5cGUgPT0gIkNsb2NrIiB9IHsKICAgIHJldHVybiAiY2xvY2siCiAgfSBlbHNlaWYgeyAkb2JqZWN0X3R5cGUgPT0gIkxpYmVydHlDZWxsIiB9IHsKICAgIHJldHVybiAibGliX2NlbGwiCiAgfSBlbHNlaWYgeyAkb2JqZWN0X3R5cGUgPT0gIkxpYmVydHlQb3J0IiB9IHsKICAgIHJldHVybiAibGliX3BpbiIKICB9IGVsc2VpZiB7ICRvYmplY3RfdHlwZSA9PSAiQ2VsbCIgfSB7CiAgICByZXR1cm4gImNlbGwiCiAgfSBlbHNlaWYgeyAkb2JqZWN0X3R5cGUgPT0gIkluc3RhbmNlIiB9IHsKICAgIHJldHVybiAiaW5zdGFuY2UiCiAgfSBlbHNlaWYgeyAkb2JqZWN0X3R5cGUgPT0gIlBvcnQiIH0gewogICAgcmV0dXJuICJwb3J0IgogIH0gZWxzZWlmIHsgJG9iamVjdF90eXBlID09ICJQaW4iIH0gewogICAgcmV0dXJuICJwaW4iCiAgfSBlbHNlaWYgeyAkb2JqZWN0X3R5cGUgPT0gIk5ldCIgfSB7CiAgICByZXR1cm4gIm5ldCIKICB9IGVsc2VpZiB7ICRvYmplY3RfdHlwZSA9PSAiRWRnZSIgfSB7CiAgICByZXR1cm4gInRpbWluZ19hcmMiCiAgfSBlbHNlaWYgeyAkb2JqZWN0X3R5cGUgPT0gIlRpbWluZ0FyY1NldCIgfSB7CiAgICByZXR1cm4gInRpbWluZ19hcmMiCiAgfSBlbHNlIHsKICAgIHJldHVybiAiPyIKICB9Cn0KCiMgc3RhIG5hbWVzcGFjZSBlbmQuCn0KIyBPcGVuU1RBLCBTdGF0aWMgVGltaW5nIEFuYWx5emVyCiMgQ29weXJpZ2h0IChjKSAyMDI1LCBQYXJhbGxheCBTb2Z0d2FyZSwgSW5jLgojIAojIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5CiMgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkKIyB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvcgojIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCiMgCiMgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiMgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKIyBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGUKIyBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgojIAojIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCiMgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCiMgCiMgVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QKIyBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiMgCiMgQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUKIyBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiMgCiMgVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4KCm5hbWVzcGFjZSBldmFsIHN0YSB7CgpkZWZpbmVfY21kX2FyZ3MgImdldF9wcm9wZXJ0eSIgXAogIHtbLW9iamVjdF90eXBlIGxpYnJhcnl8bGliZXJ0eV9saWJyYXJ5fGNlbGx8bGliZXJ0eV9jZWxsfGluc3RhbmNlfHBpbnxuZXR8cG9ydHxjbG9ja3x0aW1pbmdfYXJjXSBvYmplY3QgcHJvcGVydHl9Cgpwcm9jIGdldF9wcm9wZXJ0eSB7IGFyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgImdldF9wcm9wZXJ0eSIgYXJncyBrZXlzIHstb2JqZWN0X3R5cGV9IGZsYWdzIHstcXVpZXR9CiAgY2hlY2tfYXJnY19lcTIgImdldF9wcm9wZXJ0eSIgJGFyZ3MKICBzZXQgcXVpZXQgW2luZm8gZXhpc3RzIGZsYWdzKC1xdWlldCldCiAgc2V0IG9iamVjdCBbbGluZGV4ICRhcmdzIDBdCiAgaWYgeyAkb2JqZWN0ID09ICIiIH0gewogICAgc3RhX2Vycm9yIDIyMDAgImdldF9wcm9wZXJ0eSBvYmplY3QgaXMgbnVsbC4iCiAgfSBlbHNlaWYgeyAhW2lzX29iamVjdCAkb2JqZWN0XSB9IHsKICAgIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1vYmplY3RfdHlwZSldIHsKICAgICAgc2V0IG9iamVjdF90eXBlICRrZXlzKC1vYmplY3RfdHlwZSkKICAgIH0gZWxzZSB7CiAgICAgIHN0YV9lcnJvciAyMjAxICJnZXRfcHJvcGVydHkgLW9iamVjdF90eXBlIG11c3QgYmUgc3BlY2lmaWVkIHdpdGggb2JqZWN0IG5hbWUgYXJndW1lbnQuIgogICAgfQogICAgc2V0IG9iamVjdCBbZ2V0X3Byb3BlcnR5X29iamVjdF90eXBlICRvYmplY3RfdHlwZSAkb2JqZWN0ICRxdWlldF0KICB9CiAgc2V0IHByb3AgW2xpbmRleCAkYXJncyAxXQogIHJldHVybiBbZ2V0X29iamVjdF9wcm9wZXJ0eSAkb2JqZWN0ICRwcm9wXQp9Cgpwcm9jIGdldF9vYmplY3RfcHJvcGVydHkgeyBvYmplY3QgcHJvcCB9IHsKICBpZiB7IFtpc19vYmplY3QgJG9iamVjdF0gfSB7CiAgICBzZXQgb2JqZWN0X3R5cGUgW29iamVjdF90eXBlICRvYmplY3RdCiAgICBpZiB7ICRvYmplY3RfdHlwZSA9PSAiSW5zdGFuY2UiIH0gewogICAgICByZXR1cm4gW2luc3RhbmNlX3Byb3BlcnR5ICRvYmplY3QgJHByb3BdCiAgICB9IGVsc2VpZiB7ICRvYmplY3RfdHlwZSA9PSAiUGluIiB9IHsKICAgICAgcmV0dXJuIFtwaW5fcHJvcGVydHkgJG9iamVjdCAkcHJvcF0KICAgIH0gZWxzZWlmIHsgJG9iamVjdF90eXBlID09ICJOZXQiIH0gewogICAgICByZXR1cm4gW25ldF9wcm9wZXJ0eSAkb2JqZWN0ICRwcm9wXQogICAgfSBlbHNlaWYgeyAkb2JqZWN0X3R5cGUgPT0gIkNsb2NrIiB9IHsKICAgICAgcmV0dXJuIFtjbG9ja19wcm9wZXJ0eSAkb2JqZWN0ICRwcm9wXQogICAgfSBlbHNlaWYgeyAkb2JqZWN0X3R5cGUgPT0gIlBvcnQiIH0gewogICAgICByZXR1cm4gW3BvcnRfcHJvcGVydHkgJG9iamVjdCAkcHJvcF0KICAgIH0gZWxzZWlmIHsgJG9iamVjdF90eXBlID09ICJMaWJlcnR5UG9ydCIgfSB7CiAgICAgIHJldHVybiBbbGliZXJ0eV9wb3J0X3Byb3BlcnR5ICRvYmplY3QgJHByb3BdCiAgICB9IGVsc2VpZiB7ICRvYmplY3RfdHlwZSA9PSAiTGliZXJ0eUNlbGwiIH0gewogICAgICByZXR1cm4gW2xpYmVydHlfY2VsbF9wcm9wZXJ0eSAkb2JqZWN0ICRwcm9wXQogICAgfSBlbHNlaWYgeyAkb2JqZWN0X3R5cGUgPT0gIkNlbGwiIH0gewogICAgICByZXR1cm4gW2NlbGxfcHJvcGVydHkgJG9iamVjdCAkcHJvcF0KICAgIH0gZWxzZWlmIHsgJG9iamVjdF90eXBlID09ICJMaWJyYXJ5IiB9IHsKICAgICAgcmV0dXJuIFtsaWJyYXJ5X3Byb3BlcnR5ICRvYmplY3QgJHByb3BdCiAgICB9IGVsc2VpZiB7ICRvYmplY3RfdHlwZSA9PSAiTGliZXJ0eUxpYnJhcnkiIH0gewogICAgICByZXR1cm4gW2xpYmVydHlfbGlicmFyeV9wcm9wZXJ0eSAkb2JqZWN0ICRwcm9wXQogICAgfSBlbHNlaWYgeyAkb2JqZWN0X3R5cGUgPT0gIkVkZ2UiIH0gewogICAgICByZXR1cm4gW2VkZ2VfcHJvcGVydHkgJG9iamVjdCAkcHJvcF0KICAgIH0gZWxzZWlmIHsgJG9iamVjdF90eXBlID09ICJQYXRoRW5kIiB9IHsKICAgICAgcmV0dXJuIFtwYXRoX2VuZF9wcm9wZXJ0eSAkb2JqZWN0ICRwcm9wXQogICAgfSBlbHNlaWYgeyAkb2JqZWN0X3R5cGUgPT0gIlBhdGgiIH0gewogICAgICByZXR1cm4gW3BhdGhfcHJvcGVydHkgJG9iamVjdCAkcHJvcF0KICAgIH0gZWxzZWlmIHsgJG9iamVjdF90eXBlID09ICJUaW1pbmdBcmNTZXQiIH0gewogICAgICByZXR1cm4gW3RpbWluZ19hcmNfcHJvcGVydHkgJG9iamVjdCAkcHJvcF0KICAgIH0gZWxzZSB7CiAgICAgIHN0YV9lcnJvciAyMjAzICJnZXRfcHJvcGVydHkgdW5zdXBwb3J0ZWQgb2JqZWN0IHR5cGUgJG9iamVjdF90eXBlLiIKICAgIH0KICB9IGVsc2UgewogICAgc3RhX2Vycm9yIDIyMDQgImdldF9wcm9wZXJ0eSAkb2JqZWN0IGlzIG5vdCBhbiBvYmplY3QuIgogIH0KfQoKcHJvYyBnZXRfcHJvcGVydHlfb2JqZWN0X3R5cGUgeyBvYmplY3RfdHlwZSBvYmplY3RfbmFtZSBxdWlldCB9IHsKICBzZXQgb2JqZWN0ICJOVUxMIgogIGlmIHsgJG9iamVjdF90eXBlID09ICJpbnN0YW5jZSIgXAogICAgICAgfHwgJG9iamVjdF90eXBlID09ICJjZWxsIn0gewogICAgc2V0IG9iamVjdCBbZ2V0X2NlbGxzIC1xdWlldCAkb2JqZWN0X25hbWVdCiAgfSBlbHNlaWYgeyAkb2JqZWN0X3R5cGUgPT0gInBpbiIgfSB7CiAgICBzZXQgb2JqZWN0IFtnZXRfcGlucyAtcXVpZXQgJG9iamVjdF9uYW1lXQogIH0gZWxzZWlmIHsgJG9iamVjdF90eXBlID09ICJuZXQiIH0gewogICAgc2V0IG9iamVjdCBbZ2V0X25ldHMgLXF1aWV0ICRvYmplY3RfbmFtZV0KICB9IGVsc2VpZiB7ICRvYmplY3RfdHlwZSA9PSAicG9ydCIgfSB7CiAgICBzZXQgb2JqZWN0IFtnZXRfcG9ydHMgLXF1aWV0ICRvYmplY3RfbmFtZV0KICB9IGVsc2VpZiB7ICRvYmplY3RfdHlwZSA9PSAiY2xvY2siIH0gewogICAgc2V0IG9iamVjdCBbZ2V0X2Nsb2NrcyAtcXVpZXQgJG9iamVjdF9uYW1lXQogIH0gZWxzZWlmIHsgJG9iamVjdF90eXBlID09ICJsaWJlcnR5X2NlbGwiIFwKICAgICAgICAgICAgICAgfHwgJG9iamVjdF90eXBlID09ICJsaWJfY2VsbCJ9IHsKICAgIHNldCBvYmplY3QgW2dldF9saWJfY2VsbHMgLXF1aWV0ICRvYmplY3RfbmFtZV0KICB9IGVsc2VpZiB7ICRvYmplY3RfdHlwZSA9PSAibGliZXJ0eV9wb3J0IiBcCiAgICAgICAgICAgICAgIHx8ICRvYmplY3RfdHlwZSA9PSAibGliX3BpbiIgfSB7CiAgICBzZXQgb2JqZWN0IFtnZXRfbGliX3BpbnMgLXF1aWV0ICRvYmplY3RfbmFtZV0KICB9IGVsc2VpZiB7ICRvYmplY3RfdHlwZSA9PSAibGlicmFyeSIgXAogICAgICAgICAgICAgfHwgJG9iamVjdF90eXBlID09ICJsaWIifSB7CiAgICBzZXQgb2JqZWN0IFtnZXRfbGlicyAtcXVpZXQgJG9iamVjdF9uYW1lXQogIH0gZWxzZSB7CiAgICBzdGFfZXJyb3IgMjIwNSAiJG9iamVjdF90eXBlIG5vdCBzdXBwb3J0ZWQuIgogIH0KICBpZiB7ICRvYmplY3QgPT0gIk5VTEwiICYmICEkcXVpZXQgfSB7CiAgICBzdGFfZXJyb3IgMjIwNiAiJG9iamVjdF90eXBlICckb2JqZWN0X25hbWUnIG5vdCBmb3VuZC4iCiAgfQogIHJldHVybiBbbGluZGV4ICRvYmplY3QgMF0KfQoKIyBzdGEgbmFtZXNwYWNlIGVuZC4KfQojIE9wZW5TVEEsIFN0YXRpYyBUaW1pbmcgQW5hbHl6ZXIKIyBDb3B5cmlnaHQgKGMpIDIwMjUsIFBhcmFsbGF4IFNvZnR3YXJlLCBJbmMuCiMgCiMgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKIyBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQojIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yCiMgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KIyAKIyBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKIyBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgojIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZQojIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCiMgCiMgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UKIyBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KIyAKIyBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdAojIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4KIyAKIyBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQojIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4KIyAKIyBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLgoKbmFtZXNwYWNlIGV2YWwgc3RhIHsKCmRlZmluZV9jbWRfYXJncyAid3JpdGVfcGF0aF9zcGljZSIgeyAtcGF0aF9hcmdzIHBhdGhfYXJnc1wKCQkJCSAgICAgICAtc3BpY2VfZGlyZWN0b3J5IHNwaWNlX2RpcmVjdG9yeVwKCQkJCSAgICAgICAtbGliX3N1YmNrdF9maWxlIGxpYl9zdWJja3RzX2ZpbGVcCgkJCQkgICAgICAgLW1vZGVsX2ZpbGUgbW9kZWxfZmlsZVwKCQkJCSAgICAgICAtcG93ZXIgcG93ZXJcCgkJCQkgICAgICAgLWdyb3VuZCBncm91bmRcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstc2ltdWxhdG9yIGhzcGljZXxuZ3NwaWNlfHh5Y2VdfQoKcHJvYyB3cml0ZV9wYXRoX3NwaWNlIHsgYXJncyB9IHsKICBwYXJzZV9rZXlfYXJncyAid3JpdGVfcGF0aF9zcGljZSIgYXJncyBcCiAgICBrZXlzIHstc3BpY2VfZGlyZWN0b3J5IC1saWJfc3ViY2t0X2ZpbGUgLW1vZGVsX2ZpbGUgXAoJICAgIC1wb3dlciAtZ3JvdW5kIC1wYXRoX2FyZ3MgLXNpbXVsYXRvcn0gXAogICAgZmxhZ3Mge30KCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtc3BpY2VfZGlyZWN0b3J5KV0gfSB7CiAgICBzZXQgc3BpY2VfZGlyIFtmaWxlIG5hdGl2ZW5hbWUgJGtleXMoLXNwaWNlX2RpcmVjdG9yeSldCiAgICBpZiB7ICFbZmlsZSBleGlzdHMgJHNwaWNlX2Rpcl0gfSB7CiAgICAgIHN0YV9lcnJvciAxOTIwICJEaXJlY3RvcnkgJHNwaWNlX2RpciBub3QgZm91bmQuIgogICAgfQogICAgaWYgeyAhW2ZpbGUgaXNkaXJlY3RvcnkgJHNwaWNlX2Rpcl0gfSB7CiAgICAgIHN0YV9lcnJvciAxOTIxICIkc3BpY2VfZGlyIGlzIG5vdCBhIGRpcmVjdG9yeS4iCiAgICB9CiAgICBpZiB7ICFbZmlsZSB3cml0YWJsZSAkc3BpY2VfZGlyXSB9IHsKICAgICAgc3RhX2Vycm9yIDE5MjIgIkNhbm5vdCB3cml0ZSBpbiAkc3BpY2VfZGlyLiIKICAgIH0KICB9IGVsc2UgewogICAgc3RhX2Vycm9yIDE5MjMgIk5vIC1zcGljZV9kaXJlY3Rvcnkgc3BlY2lmaWVkLiIKICB9CgogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLWxpYl9zdWJja3RfZmlsZSldIH0gewogICAgc2V0IGxpYl9zdWJja3RfZmlsZSBbZmlsZSBuYXRpdmVuYW1lICRrZXlzKC1saWJfc3ViY2t0X2ZpbGUpXQogICAgaWYgeyAhW2ZpbGUgcmVhZGFibGUgJGxpYl9zdWJja3RfZmlsZV0gfSB7CiAgICAgIHN0YV9lcnJvciAxOTI0ICItbGliX3N1YmNrdF9maWxlICRsaWJfc3ViY2t0X2ZpbGUgaXMgbm90IHJlYWRhYmxlLiIKICAgIH0KICB9IGVsc2UgewogICAgc3RhX2Vycm9yIDE5MjUgIk5vIC1saWJfc3ViY2t0X2ZpbGUgc3BlY2lmaWVkLiIKICB9CgogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLW1vZGVsX2ZpbGUpXSB9IHsKICAgIHNldCBtb2RlbF9maWxlIFtmaWxlIG5hdGl2ZW5hbWUgJGtleXMoLW1vZGVsX2ZpbGUpXQogICAgaWYgeyAhW2ZpbGUgcmVhZGFibGUgJG1vZGVsX2ZpbGVdIH0gewogICAgICBzdGFfZXJyb3IgMTkyNiAiLW1vZGVsX2ZpbGUgJG1vZGVsX2ZpbGUgaXMgbm90IHJlYWRhYmxlLiIKICAgIH0KICB9IGVsc2UgewogICAgc3RhX2Vycm9yIDE5MjcgIk5vIC1tb2RlbF9maWxlIHNwZWNpZmllZC4iCiAgfQoKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1wb3dlcildIH0gewogICAgc2V0IHBvd2VyICRrZXlzKC1wb3dlcikKICB9IGVsc2UgewogICAgc3RhX2Vycm9yIDE5MjggIk5vIC1wb3dlciBzcGVjaWZpZWQuIgogIH0KCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtZ3JvdW5kKV0gfSB7CiAgICBzZXQgZ3JvdW5kICRrZXlzKC1ncm91bmQpCiAgfSBlbHNlIHsKICAgIHN0YV9lcnJvciAxOTI5ICJObyAtZ3JvdW5kIHNwZWNpZmllZC4iCiAgfQoKICBzZXQgY2t0X3NpbSBbcGFyc2VfY2t0X3NpbV9rZXkga2V5c10KCiAgaWYgeyAhW2luZm8gZXhpc3RzIGtleXMoLXBhdGhfYXJncyldIH0gewogICAgc3RhX2Vycm9yIDE5MzAgIk5vIC1wYXRoX2FyZ3Mgc3BlY2lmaWVkLiIKICB9CiAgc2V0IHBhdGhfYXJncyAka2V5cygtcGF0aF9hcmdzKQogIHNldCBwYXRoX2VuZHMgW2V2YWwgW2NvbmNhdCBmaW5kX3RpbWluZ19wYXRocyAkcGF0aF9hcmdzXV0KICBpZiB7ICRwYXRoX2VuZHMgPT0ge30gfSB7CiAgICBzdGFfZXJyb3IgMTkzMSAiTm8gcGF0aHMgZm91bmQgZm9yIC1wYXRoX2FyZ3MgJHBhdGhfYXJncy4iCiAgfSBlbHNlIHsKICAgIHNldCBwYXRoX2luZGV4IDEKICAgIGZvcmVhY2ggcGF0aF9lbmQgJHBhdGhfZW5kcyB7CiAgICAgIHNldCBwYXRoIFskcGF0aF9lbmQgcGF0aF0KICAgICAgc2V0IHBhdGhfbmFtZSAicGF0aF8kcGF0aF9pbmRleCIKICAgICAgc2V0IHNwaWNlX2ZpbGUgW2ZpbGUgam9pbiAkc3BpY2VfZGlyICIkcGF0aF9uYW1lLnNwIl0KICAgICAgc2V0IHN1YmNrdF9maWxlIFtmaWxlIGpvaW4gJHNwaWNlX2RpciAiJHBhdGhfbmFtZS5zdWJja3QiXQogICAgICB3cml0ZV9wYXRoX3NwaWNlX2NtZCAkcGF0aCAkc3BpY2VfZmlsZSAkc3ViY2t0X2ZpbGUgXAoJJGxpYl9zdWJja3RfZmlsZSAkbW9kZWxfZmlsZSAkcG93ZXIgJGdyb3VuZCAkY2t0X3NpbQogICAgICBpbmNyIHBhdGhfaW5kZXgKICAgIH0KICB9Cn0KCnNldCA6OmNrdF9zaW1zIHtoc3BpY2UgbmdzcGljZSB4eWNlfQoKcHJvYyBwYXJzZV9ja3Rfc2ltX2tleSB7IGtleXNfdmFyIH0gewogIHVwdmFyIDEgJGtleXNfdmFyIGtleXMKICBnbG9iYWwgY2t0X3NpbXMKCiAgc2V0IGNrdF9zaW0gIm5nc3BpY2UiCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtc2ltdWxhdG9yKV0gfSB7CiAgICBzZXQgY2t0X3NpbSBbZmlsZSBuYXRpdmVuYW1lICRrZXlzKC1zaW11bGF0b3IpXQogICAgaWYgeyBbbHNlYXJjaCAkY2t0X3NpbXMgJGNrdF9zaW1dID09IC0xIH0gewogICAgICBzdGFfZXJyb3IgMTkxMCAiVW5rbm93biBjaXJjdWl0IHNpbXVsYXRvciIKICAgIH0KICB9CiAgcmV0dXJuICRja3Rfc2ltCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAid3JpdGVfZ2F0ZV9zcGljZSIgXAogIHsgLWdhdGVzIHt7aW5zdGFuY2UgaW5wdXRfcG9ydCBkcml2ZXJfcG9ydCBlZGdlIFtkZWxheV19Li4ufVwKICAgICAgLXNwaWNlX2ZpbGVuYW1lIHNwaWNlX2ZpbGVuYW1lXAogICAgICAtbGliX3N1YmNrdF9maWxlIGxpYl9zdWJja3RzX2ZpbGVcCiAgICAgIC1tb2RlbF9maWxlIG1vZGVsX2ZpbGVcCiAgICAgIC1wb3dlciBwb3dlclwKICAgICAgLWdyb3VuZCBncm91bmRcCiAgICAgIFstc2ltdWxhdG9yIGhzcGljZXxuZ3NwaWNlfHh5Y2VdXAogICAgICBbLWNvcm5lciBjb3JuZXJdXAogICAgICBbLW1pbl0gWy1tYXhdfQoKcHJvYyB3cml0ZV9nYXRlX3NwaWNlIHsgYXJncyB9IHsKICBwYXJzZV9rZXlfYXJncyAid3JpdGVfZ2F0ZV9zcGljZSIgYXJncyBcCiAgICBrZXlzIHstZ2F0ZXMgLXNwaWNlX2ZpbGVuYW1lIC1saWJfc3ViY2t0X2ZpbGUgLW1vZGVsX2ZpbGUgXAogICAgICAgICAgICAtcG93ZXIgLWdyb3VuZCAtc2ltdWxhdG9yIC1jb3JuZXJ9XAogICAgZmxhZ3Mgey1tZWFzdXJlX3N0bXRzIC1taW4gLW1heH0KCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtZ2F0ZXMpXSB9IHsKICAgIHNldCBnYXRlcyAka2V5cygtZ2F0ZXMpCiAgfSBlbHNlIHsKICAgIHN0YV9lcnJvciAxOTMyICJNaXNzaW5nIC1nYXRlcyBhcmd1bWVudC4iCiAgfQogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLXNwaWNlX2ZpbGVuYW1lKV0gfSB7CiAgICBzZXQgc3BpY2VfZmlsZSBbZmlsZSBuYXRpdmVuYW1lICRrZXlzKC1zcGljZV9maWxlbmFtZSldCiAgICBzZXQgc3BpY2VfZGlyIFtmaWxlIGRpcm5hbWUgJHNwaWNlX2ZpbGVdCiAgICBpZiB7ICFbZmlsZSB3cml0YWJsZSAkc3BpY2VfZGlyXSB9IHsKICAgICAgc3RhX2Vycm9yIDE5MDMgIkNhbm5vdCB3cml0ZSAkc3BpY2VfZGlyLiIKICAgIH0KICB9IGVsc2UgewogICAgc3RhX2Vycm9yIDE5MDQgIk5vIC1zcGljZV9maWxlbmFtZSBzcGVjaWZpZWQuIgogIH0KCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtbGliX3N1YmNrdF9maWxlKV0gfSB7CiAgICBzZXQgbGliX3N1YmNrdF9maWxlIFtmaWxlIG5hdGl2ZW5hbWUgJGtleXMoLWxpYl9zdWJja3RfZmlsZSldCiAgICBpZiB7ICFbZmlsZSByZWFkYWJsZSAkbGliX3N1YmNrdF9maWxlXSB9IHsKICAgICAgc3RhX2Vycm9yIDE5MDUgIi1saWJfc3ViY2t0X2ZpbGUgJGxpYl9zdWJja3RfZmlsZSBpcyBub3QgcmVhZGFibGUuIgogICAgfQogIH0gZWxzZSB7CiAgICBzdGFfZXJyb3IgMTkwNiAiTm8gLWxpYl9zdWJja3RfZmlsZSBzcGVjaWZpZWQuIgogIH0KCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtbW9kZWxfZmlsZSldIH0gewogICAgc2V0IG1vZGVsX2ZpbGUgW2ZpbGUgbmF0aXZlbmFtZSAka2V5cygtbW9kZWxfZmlsZSldCiAgICBpZiB7ICFbZmlsZSByZWFkYWJsZSAkbW9kZWxfZmlsZV0gfSB7CiAgICAgIHN0YV9lcnJvciAxOTA3ICItbW9kZWxfZmlsZSAkbW9kZWxfZmlsZSBpcyBub3QgcmVhZGFibGUuIgogICAgfQogIH0gZWxzZSB7CiAgICBzdGFfZXJyb3IgMTkwOCAiTm8gLW1vZGVsX2ZpbGUgc3BlY2lmaWVkLiIKICB9CgogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLXBvd2VyKV0gfSB7CiAgICBzZXQgcG93ZXIgJGtleXMoLXBvd2VyKQogIH0gZWxzZSB7CiAgICBzdGFfZXJyb3IgMTkwOSAiTm8gLXBvd2VyIHNwZWNpZmllZC4iCiAgfQoKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1ncm91bmQpXSB9IHsKICAgIHNldCBncm91bmQgJGtleXMoLWdyb3VuZCkKICB9IGVsc2UgewogICAgc3RhX2Vycm9yIDE5MTUgIk5vIC1ncm91bmQgc3BlY2lmaWVkLiIKICB9CgogIHNldCBja3Rfc2ltIFtwYXJzZV9ja3Rfc2ltX2tleSBrZXlzXQoKICBzZXQgY29ybmVyIFtwYXJzZV9jb3JuZXIga2V5c10KICBzZXQgbWluX21heCBbcGFyc2VfbWluX21heF9mbGFncyBmbGFnc10KICBjaGVja19hcmdjX2VxMCAid3JpdGVfZ2F0ZV9zcGljZSIgJGFyZ3MKCiAgc2V0IHNwaWNlX2RpciBbZmlsZSBkaXJuYW1lICRzcGljZV9maWxlXQogIHNldCBzcGljZV9yb290IFtmaWxlIHJvb3RuYW1lIFtmaWxlIHRhaWwgJHNwaWNlX2ZpbGVdXQogIHNldCBzdWJja3RfZmlsZSBbZmlsZSBqb2luICRzcGljZV9kaXIgIiRzcGljZV9yb290LnN1YmNrdCJdCiAgd3JpdGVfZ2F0ZV9zcGljZV9jbWQgJGdhdGVzICRzcGljZV9maWxlICRzdWJja3RfZmlsZSBcCiAgICAkbGliX3N1YmNrdF9maWxlICRtb2RlbF9maWxlICRwb3dlciAkZ3JvdW5kICRja3Rfc2ltIFwKICAgICRjb3JuZXIgJG1pbl9tYXgKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKIyBwbG90X3BpbnMgZGVmYXVsdHMgdG8gaW5wdXRfcGluLCBkcml2ZXJfcGluYSBhbmQgbG9hZCBwaW5zIGZvciBlYWNoIGRyaXZlci4KZGVmaW5lX2NtZF9hcmdzICJ3cml0ZV9nYXRlX2dudXBsb3QiIFwKICB7IC1nYXRlcyB7e2luc3RhbmNlIGlucHV0X3BvcnQgZHJpdmVyX3BvcnQgZWRnZSBbZGVsYXldfS4uLn1cCiAgICAgIC1wbG90X3BpbnMgcGxvdF9waW5zXAogICAgICAtcGxvdF9iYXNlbmFtZSBwbG90X2Jhc2VuYW1lXAogICAgICBbLWNvcm5lciBjb3JuZXJdIFstbWluXSBbLW1heF19Cgpwcm9jIHdyaXRlX2dhdGVfZ251cGxvdCB7IGFyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgIndyaXRlX2dhdGVfZ251cGxvdCIgYXJncyBcCiAgICBrZXlzIHstZ2F0ZXMgLXBsb3RfcGlucyAtcGxvdF9iYXNlbmFtZSAtc3BpY2Vfd2F2ZWZvcm1zIC1jb3JuZXJ9IFwKICAgIGZsYWdzIHstbWluIC1tYXh9CgogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLWdhdGVzKV0gfSB7CiAgICBzZXQgZ2F0ZXMgJGtleXMoLWdhdGVzKQogIH0gZWxzZSB7CiAgICBzdGFfZXJyb3IgMTkzMyAiTWlzc2luZyAtZ2F0ZXMgYXJndW1lbnQuIgogIH0KICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1wbG90X3BpbnMpXSB9IHsKICAgIHNldCBwbG90X3BpbnMgW2dldF9wb3J0X3BpbnNfZXJyb3IgIi1wbG90X3BpbnMiICRrZXlzKC1wbG90X3BpbnMpXQogIH0gZWxzZSB7CiAgICBzZXQgcGxvdF9waW5zIHt9CiAgICBzZXQgcGxvdF9hbGxfbG9hZHMgMAogICAgc2V0IGdhdGVfaWR4IDAKICAgIGZvcmVhY2ggZ2F0ZSAkZ2F0ZXMgewogICAgICBzZXQgaW5fcGluIFtwYXJzZV9nYXRlX2luX3BpbiAkZ2F0ZV0KICAgICAgc2V0IGRydnJfcGluIFtwYXJzZV9nYXRlX2RydnJfcGluICRnYXRlXQogICAgICBsYXBwZW5kIHBsb3RfcGlucyAkaW5fcGluCiAgICAgIGxhcHBlbmQgcGxvdF9waW5zICRkcnZyX3BpbgogICAgICAjIE9ubHkgcGxvdCBkcml2ZXIgbG9hZHMuCiAgICAgIGlmIHsgJHBsb3RfYWxsX2xvYWRzIHx8ICRnYXRlX2lkeCA9PSAwIH0gewogICAgICAgIHNldCBwaW5faXRlciBbJGRydnJfcGluIGNvbm5lY3RlZF9waW5faXRlcmF0b3JdCiAgICAgICAgd2hpbGUgeyBbJHBpbl9pdGVyIGhhc19uZXh0XSB9IHsKICAgICAgICAgIHNldCBwaW4gWyRwaW5faXRlciBuZXh0XQogICAgICAgICAgaWYgeyBbJHBpbiBpc19sb2FkXSB9IHsKICAgICAgICAgICAgbGFwcGVuZCBwbG90X3BpbnMgJHBpbgogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAkcGluX2l0ZXIgZmluaXNoCiAgICAgIH0KICAgICAgaW5jciBnYXRlX2lkeAogICAgfQogIH0KCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtcGxvdF9iYXNlbmFtZSldIH0gewogICAgc2V0IHBsb3RfYmFzZSBbZmlsZSBuYXRpdmVuYW1lICRrZXlzKC1wbG90X2Jhc2VuYW1lKV0KICAgIHNldCBwbG90X2RpciBbZmlsZSBkaXJuYW1lICRwbG90X2Jhc2VdCiAgICBpZiB7ICFbZmlsZSB3cml0YWJsZSAk",
"cGxvdF9kaXJdIH0gewogICAgICBzdGFfZXJyb3IgMTkxMyAiQ2Fubm90IHdyaXRlICRwbG90X2Rpci4iCiAgICB9CiAgfSBlbHNlIHsKICAgIHN0YV9lcnJvciAxOTE0ICJObyAtcGxvdF9iYXNlbmFtZSBzcGVjaWZpZWQuIgogIH0KICBzZXQgZ251cGxvdF9maWxlbmFtZSAiJHtwbG90X2Jhc2V9LmdudXBsb3QiCiAgc2V0IGNzdl9maWxlbmFtZSAiJHtwbG90X2Jhc2V9LmNzdiIKCiAgc2V0IHNpbV93YXZlX2ZpbGVuYW1lICIiCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtc3BpY2Vfd2F2ZWZvcm1zKV0gfSB7CiAgICBzZXQgc2ltX3dhdmVfZmlsZW5hbWUgJGtleXMoLXNwaWNlX3dhdmVmb3JtcykKICB9CgogIHNldCBjb3JuZXIgW3BhcnNlX2Nvcm5lciBrZXlzXQogIHNldCBtaW5fbWF4IFtwYXJzZV9taW5fbWF4X2ZsYWdzIGZsYWdzXQoKICB3cml0ZV9nYXRlX2dudXBsb3RfY21kICRnYXRlcyAkcGxvdF9waW5zICRzaW1fd2F2ZV9maWxlbmFtZSBcCiAgICAkZ251cGxvdF9maWxlbmFtZSAkY3N2X2ZpbGVuYW1lICRjb3JuZXIgJG1pbl9tYXgKfQoKcHJvYyBwYXJzZV9nYXRlX2RydnJfcGluIHsgZ2F0ZV9hcmcgfSB7CiAgbGFzc2lnbiAkZ2F0ZV9hcmcgaW5zdF9uYW1lIGluX3BvcnRfbmFtZSBpbl9yZiBkcnZyX3BvcnRfbmFtZSBkcnZyX3JmCiAgc2V0IGluc3QgW2dldF9pbnN0YW5jZV9lcnJvciAiaW5zdGFuY2UiICRpbnN0X25hbWVdCiAgc2V0IGRydnJfcGluIFskaW5zdCBmaW5kX3BpbiAkZHJ2cl9wb3J0X25hbWVdCiAgcmV0dXJuICRkcnZyX3Bpbgp9Cgpwcm9jIHBhcnNlX2dhdGVfaW5fcGluIHsgZ2F0ZV9hcmcgfSB7CiAgbGFzc2lnbiAkZ2F0ZV9hcmcgaW5zdF9uYW1lIGluX3BvcnRfbmFtZSBpbl9yZiBkcnZyX3BvcnRfbmFtZSBkcnZyX3JmCiAgc2V0IGluc3QgW2dldF9pbnN0YW5jZV9lcnJvciAiaW5zdGFuY2UiICRpbnN0X25hbWVdCiAgc2V0IGluX3BpbiBbJGluc3QgZmluZF9waW4gJGluX3BvcnRfbmFtZV0KICByZXR1cm4gJGluX3Bpbgp9CgojIHN0YSBuYW1lc3BhY2UgZW5kLgp9CiMgT3BlblNUQSwgU3RhdGljIFRpbWluZyBBbmFseXplcgojIENvcHlyaWdodCAoYykgMjAyNSwgUGFyYWxsYXggU29mdHdhcmUsIEluYy4KIyAKIyBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeQojIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CiMgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3IKIyAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLgojIAojIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAojIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiMgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlCiMgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KIyAKIyBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQojIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LgojIAojIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90CiMgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgojIAojIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlCiMgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgojIAojIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uCgpuYW1lc3BhY2UgZXZhbCBzdGEgewoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojCiMgVmFyaWFibGVzCiMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKIyBEZWZhdWx0IGRpZ2l0cyB0byBwcmludCBhZnRlciBkZWNpbWFsIHBvaW50IGZvciByZXBvcnRpbmcgY29tbWFuZHMuCnNldCA6OnN0YV9yZXBvcnRfZGVmYXVsdF9kaWdpdHMgMgoKdHJhY2UgdmFyaWFibGUgOjpzdGFfcmVwb3J0X2RlZmF1bHRfZGlnaXRzICJydyIgXAogIHN0YTo6dHJhY2VfcmVwb3J0X2RlZmF1bHRfZGlnaXRzCgpwcm9jIHRyYWNlX3JlcG9ydF9kZWZhdWx0X2RpZ2l0cyB7IG5hbWUxIG5hbWUyIG9wIH0gewogIGdsb2JhbCBzdGFfcmVwb3J0X2RlZmF1bHRfZGlnaXRzCgogIGlmIHsgJG9wID09ICJ3IiB9IHsKICAgIGlmIHsgIShbc3RyaW5nIGlzIGludGVnZXIgJHN0YV9yZXBvcnRfZGVmYXVsdF9kaWdpdHNdIFwKCSAgICYmICRzdGFfcmVwb3J0X2RlZmF1bHRfZGlnaXRzID49IDApIH0gewogICAgICBzdGFfZXJyb3IgNTkwICJzdGFfcmVwb3J0X2RlZmF1bHRfZGlnaXRzIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLiIKICAgIH0KICB9Cn0KCnRyYWNlIHZhcmlhYmxlIDo6c3RhX2NycHJfZW5hYmxlZCAicnciIFwKICBzdGE6OnRyYWNlX2NycHJfZW5hYmxlZAoKcHJvYyB0cmFjZV9jcnByX2VuYWJsZWQgeyBuYW1lMSBuYW1lMiBvcCB9IHsKICB0cmFjZV9ib29sZWFuX3ZhciAkb3AgOjpzdGFfY3Jwcl9lbmFibGVkIFwKICAgIGNycHJfZW5hYmxlZCBzZXRfY3Jwcl9lbmFibGVkCn0KCnRyYWNlIHZhcmlhYmxlIDo6c3RhX2NycHJfbW9kZSAicnciIFwKICBzdGE6OnRyYWNlX2NycHJfbW9kZQoKcHJvYyB0cmFjZV9jcnByX21vZGUgeyBuYW1lMSBuYW1lMiBvcCB9IHsKICBnbG9iYWwgc3RhX2NycHJfbW9kZQoKICBpZiB7ICRvcCA9PSAiciIgfSB7CiAgICBzZXQgc3RhX2NycHJfbW9kZSBbY3Jwcl9tb2RlXQogIH0gZWxzZWlmIHsgJG9wID09ICJ3IiB9IHsKICAgIGlmIHsgJHN0YV9jcnByX21vZGUgPT0gInNhbWVfcGluIiB8fCAkc3RhX2NycHJfbW9kZSA9PSAic2FtZV90cmFuc2l0aW9uIiB9IHsKICAgICAgc2V0X2NycHJfbW9kZSAkc3RhX2NycHJfbW9kZQogICAgfSBlbHNlIHsKICAgICAgc3RhX2Vycm9yIDU5MSAic3RhX2NycHJfbW9kZSBtdXN0IGJlIHBpbiBvciB0cmFuc2l0aW9uLiIKICAgIH0KICB9Cn0KCnRyYWNlIHZhcmlhYmxlIDo6c3RhX2NvbmRfZGVmYXVsdF9hcmNzX2VuYWJsZWQgInJ3IiBcCiAgc3RhOjp0cmFjZV9jb25kX2RlZmF1bHRfYXJjc19lbmFibGVkCgpwcm9jIHRyYWNlX2NvbmRfZGVmYXVsdF9hcmNzX2VuYWJsZWQgeyBuYW1lMSBuYW1lMiBvcCB9IHsKICB0cmFjZV9ib29sZWFuX3ZhciAkb3AgOjpzdGFfY29uZF9kZWZhdWx0X2FyY3NfZW5hYmxlZCBcCiAgICBjb25kX2RlZmF1bHRfYXJjc19lbmFibGVkIHNldF9jb25kX2RlZmF1bHRfYXJjc19lbmFibGVkCn0KCnRyYWNlIHZhcmlhYmxlIDo6c3RhX2dhdGVkX2Nsb2NrX2NoZWNrc19lbmFibGVkICJydyIgXAogIHN0YTo6dHJhY2VfZ2F0ZWRfY2xrX2NoZWNrc19lbmFibGVkCgpwcm9jIHRyYWNlX2dhdGVkX2Nsa19jaGVja3NfZW5hYmxlZCB7IG5hbWUxIG5hbWUyIG9wIH0gewogIHRyYWNlX2Jvb2xlYW5fdmFyICRvcCA6OnN0YV9nYXRlZF9jbG9ja19jaGVja3NfZW5hYmxlZCBcCiAgICBnYXRlZF9jbGtfY2hlY2tzX2VuYWJsZWQgc2V0X2dhdGVkX2Nsa19jaGVja3NfZW5hYmxlZAp9Cgp0cmFjZSB2YXJpYWJsZSA6OnN0YV9pbnRlcm5hbF9iaWRpcmVjdF9pbnN0YW5jZV9wYXRoc19lbmFibGVkICJydyIgXAogIHN0YTo6dHJhY2VfaW50ZXJuYWxfYmlkaXJlY3RfaW5zdGFuY2VfcGF0aHNfZW5hYmxlZAoKcHJvYyB0cmFjZV9pbnRlcm5hbF9iaWRpcmVjdF9pbnN0YW5jZV9wYXRoc19lbmFibGVkIHsgbmFtZTEgbmFtZTIgb3AgfSB7CiAgdHJhY2VfYm9vbGVhbl92YXIgJG9wIDo6c3RhX2ludGVybmFsX2JpZGlyZWN0X2luc3RhbmNlX3BhdGhzX2VuYWJsZWQgXAogICAgYmlkaXJlY3RfaW5zdF9wYXRoc19lbmFibGVkIHNldF9iaWRpcmVjdF9pbnN0X3BhdGhzX2VuYWJsZWQKfQoKdHJhY2UgdmFyaWFibGUgOjpzdGFfYmlkaXJlY3RfbmV0X3BhdGhzX2VuYWJsZWQgInJ3IiBcCiAgc3RhOjp0cmFjZV9iaWRpcmVjdF9uZXRfcGF0aHNfZW5hYmxlZAoKcHJvYyB0cmFjZV9iaWRpcmVjdF9uZXRfcGF0aHNfZW5hYmxlZCB7IG5hbWUxIG5hbWUyIG9wIH0gewogIHRyYWNlX2Jvb2xlYW5fdmFyICRvcCA6OnN0YV9iaWRpcmVjdF9uZXRfcGF0aHNfZW5hYmxlZCBcCiAgICBiaWRpcmVjdF9uZXRfcGF0aHNfZW5hYmxlZCBzZXRfYmlkaXJlY3RfbmV0X3BhdGhzX2VuYWJsZWQKfQoKdHJhY2UgdmFyaWFibGUgOjpzdGFfY2xvY2tfdGhyb3VnaF90cmlzdGF0ZV9lbmFibGVkICJydyIgXAogIHN0YTo6dHJhY2VfY2xvY2tfdGhyb3VnaF90cmlzdGF0ZV9lbmFibGVkCgpwcm9jIHRyYWNlX2Nsb2NrX3Rocm91Z2hfdHJpc3RhdGVfZW5hYmxlZCB7IG5hbWUxIG5hbWUyIG9wIH0gewogIHRyYWNlX2Jvb2xlYW5fdmFyICRvcCA6OnN0YV9jbG9ja190aHJvdWdoX3RyaXN0YXRlX2VuYWJsZWQgXAogICAgY2xrX3RocnVfdHJpc3RhdGVfZW5hYmxlZCBzZXRfY2xrX3RocnVfdHJpc3RhdGVfZW5hYmxlZAp9Cgp0cmFjZSB2YXJpYWJsZSA6OnN0YV9wcmVzZXRfY2xlYXJfYXJjc19lbmFibGVkICJydyIgXAogIHN0YTo6dHJhY2VfcHJlc2V0X2Nscl9hcmNzX2VuYWJsZWQKCnByb2MgdHJhY2VfcHJlc2V0X2Nscl9hcmNzX2VuYWJsZWQgeyBuYW1lMSBuYW1lMiBvcCB9IHsKICB0cmFjZV9ib29sZWFuX3ZhciAkb3AgOjpzdGFfcHJlc2V0X2NsZWFyX2FyY3NfZW5hYmxlZCBcCiAgICBwcmVzZXRfY2xyX2FyY3NfZW5hYmxlZCBzZXRfcHJlc2V0X2Nscl9hcmNzX2VuYWJsZWQKfQoKdHJhY2UgdmFyaWFibGUgOjpzdGFfcmVjb3ZlcnlfcmVtb3ZhbF9jaGVja3NfZW5hYmxlZCAicnciIFwKICBzdGE6OnRyYWNlX3JlY292ZXJ5X3JlbW92YWxfY2hlY2tzX2VuYWJsZWQKCnByb2MgdHJhY2VfcmVjb3ZlcnlfcmVtb3ZhbF9jaGVja3NfZW5hYmxlZCB7IG5hbWUxIG5hbWUyIG9wIH0gewogIHRyYWNlX2Jvb2xlYW5fdmFyICRvcCA6OnN0YV9yZWNvdmVyeV9yZW1vdmFsX2NoZWNrc19lbmFibGVkIFwKICAgIHJlY292ZXJ5X3JlbW92YWxfY2hlY2tzX2VuYWJsZWQgc2V0X3JlY292ZXJ5X3JlbW92YWxfY2hlY2tzX2VuYWJsZWQKfQoKdHJhY2UgdmFyaWFibGUgOjpzdGFfZHluYW1pY19sb29wX2JyZWFraW5nICJydyIgXAogIHN0YTo6dHJhY2VfZHluYW1pY19sb29wX2JyZWFraW5nCgpwcm9jIHRyYWNlX2R5bmFtaWNfbG9vcF9icmVha2luZyB7IG5hbWUxIG5hbWUyIG9wIH0gewogIHRyYWNlX2Jvb2xlYW5fdmFyICRvcCA6OnN0YV9keW5hbWljX2xvb3BfYnJlYWtpbmcgXAogICAgZHluYW1pY19sb29wX2JyZWFraW5nIHNldF9keW5hbWljX2xvb3BfYnJlYWtpbmcKfQoKdHJhY2UgdmFyaWFibGUgOjpzdGFfaW5wdXRfcG9ydF9kZWZhdWx0X2Nsb2NrICJydyIgXAogIHN0YTo6dHJhY2VfaW5wdXRfcG9ydF9kZWZhdWx0X2Nsb2NrCgpwcm9jIHRyYWNlX2lucHV0X3BvcnRfZGVmYXVsdF9jbG9jayB7IG5hbWUxIG5hbWUyIG9wIH0gewogIHRyYWNlX2Jvb2xlYW5fdmFyICRvcCA6OnN0YV9pbnB1dF9wb3J0X2RlZmF1bHRfY2xvY2sgXAogICAgdXNlX2RlZmF1bHRfYXJyaXZhbF9jbG9jayBzZXRfdXNlX2RlZmF1bHRfYXJyaXZhbF9jbG9jawp9Cgp0cmFjZSB2YXJpYWJsZSA6OnN0YV9wcm9wYWdhdGVfYWxsX2Nsb2NrcyAicnciIFwKICBzdGE6OnRyYWNlX3Byb3BhZ2F0ZV9hbGxfY2xvY2tzCgpwcm9jIHRyYWNlX3Byb3BhZ2F0ZV9hbGxfY2xvY2tzIHsgbmFtZTEgbmFtZTIgb3AgfSB7CiAgdHJhY2VfYm9vbGVhbl92YXIgJG9wIDo6c3RhX3Byb3BhZ2F0ZV9hbGxfY2xvY2tzIFwKICAgIHByb3BhZ2F0ZV9hbGxfY2xvY2tzIHNldF9wcm9wYWdhdGVfYWxsX2Nsb2Nrcwp9Cgp0cmFjZSB2YXJpYWJsZSA6OnN0YV9wcm9wYWdhdGVfZ2F0ZWRfY2xvY2tfZW5hYmxlICJydyIgXAogIHN0YTo6dHJhY2VfcHJvcGFnYXRlX2dhdGVkX2Nsb2NrX2VuYWJsZQoKcHJvYyB0cmFjZV9wcm9wYWdhdGVfZ2F0ZWRfY2xvY2tfZW5hYmxlIHsgbmFtZTEgbmFtZTIgb3AgfSB7CiAgdHJhY2VfYm9vbGVhbl92YXIgJG9wIDo6c3RhX3Byb3BhZ2F0ZV9nYXRlZF9jbG9ja19lbmFibGUgXAogICAgcHJvcGFnYXRlX2dhdGVkX2Nsb2NrX2VuYWJsZSBzZXRfcHJvcGFnYXRlX2dhdGVkX2Nsb2NrX2VuYWJsZQp9Cgp0cmFjZSB2YXJpYWJsZSA6OnN0YV9wb2N2X2VuYWJsZWQgInJ3IiBcCiAgc3RhOjp0cmFjZV9wb2N2X2VuYWJsZWQKCnByb2MgdHJhY2VfcG9jdl9lbmFibGVkIHsgbmFtZTEgbmFtZTIgb3AgfSB7CiAgdHJhY2VfYm9vbGVhbl92YXIgJG9wIDo6c3RhX3BvY3ZfZW5hYmxlZCBcCiAgICBwb2N2X2VuYWJsZWQgc2V0X3BvY3ZfZW5hYmxlZAp9CgojIFJlcG9ydCBwYXRoIG51bWVyaWMgZmllbGQgd2lkdGggaXMgZGlnaXRzICsgZXh0cmEuCnNldCByZXBvcnRfcGF0aF9maWVsZF93aWR0aF9leHRyYSA1CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpwcm9jIHRyYWNlX2Jvb2xlYW5fdmFyIHsgb3AgdmFyX25hbWUgZ2V0X3Byb2Mgc2V0X3Byb2MgfSB7CiAgdXB2YXIgMSAkdmFyX25hbWUgdmFyCgogIGlmIHsgJG9wID09ICJyIiB9IHsKICAgIHNldCB2YXIgWyRnZXRfcHJvY10KICB9IGVsc2VpZiB7ICRvcCA9PSAidyIgfSB7CiAgICBpZiB7ICR2YXIgPT0gMCB9IHsKICAgICAgJHNldF9wcm9jIDAKICAgIH0gZWxzZWlmIHsgJHZhciA9PSAxIH0gewogICAgICAkc2V0X3Byb2MgMQogICAgfSBlbHNlIHsKICAgICAgc3RhX2Vycm9yIDU5MiAiJHZhcl9uYW1lIHZhbHVlIG11c3QgYmUgMCBvciAxLiIKICAgIH0KICB9Cn0KCiMgc3RhIG5hbWVzcGFjZSBlbmQuCn0KIyBPcGVuU1RBLCBTdGF0aWMgVGltaW5nIEFuYWx5emVyCiMgQ29weXJpZ2h0IChjKSAyMDI1LCBQYXJhbGxheCBTb2Z0d2FyZSwgSW5jLgojIAojIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5CiMgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkKIyB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvcgojIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCiMgCiMgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiMgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKIyBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGUKIyBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgojIAojIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCiMgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCiMgCiMgVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QKIyBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiMgCiMgQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUKIyBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiMgCiMgVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4KCm5hbWVzcGFjZSBldmFsIHN0YSB7CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMgIAojIE5vbi1TREMgY29tbWFuZHMKIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgImdldF9mYW5pbiIgXAogIHstdG8gc2lua19saXN0IFstZmxhdF0gWy1vbmx5X2NlbGxzXSBbLXN0YXJ0cG9pbnRzX29ubHldXAogICAgIFstbGV2ZWxzIGxldmVsX2NvdW50XSBbLXBpbl9sZXZlbHMgcGluX2NvdW50XVwKICAgICBbLXRyYWNlX2FyY3MgdGltaW5nfGVuYWJsZWR8YWxsXX0KCnByb2MgZ2V0X2ZhbmluIHsgYXJncyB9IHsKICBwYXJzZV9rZXlfYXJncyAiZ2V0X2ZhbmluIiBhcmdzIFwKICAgIGtleXMgey10byAtbGV2ZWxzIC1waW5fbGV2ZWxzIC10cmFjZV9hcmNzfSBcCiAgICBmbGFncyB7LWZsYXQgLW9ubHlfY2VsbHMgLXN0YXJ0cG9pbnRzX29ubHl9CiAgaWYgeyBbbGxlbmd0aCAkYXJnc10gIT0gMCB9IHsKICAgIGNtZF91c2FnZV9lcnJvciAiZ2V0X2ZhbmluIgogIH0KICBpZiB7ICFbaW5mbyBleGlzdHMga2V5cygtdG8pXSB9IHsKICAgIGNtZF91c2FnZV9lcnJvciAiZ2V0X2ZhbmluIgogIH0KICBwYXJzZV9wb3J0X3Bpbl9uZXRfYXJnICRrZXlzKC10bykgcGlucyBuZXRzCiAgZm9yZWFjaCBuZXQgJG5ldHMgewogICAgc2V0IG5ldF9waW5zIFtuZXRfcGlucyAkbmV0XQogICAgaWYgeyAkbmV0X3BpbnMgIT0ge30gfSB7CiAgICAgIGxhcHBlbmQgcGlucyAkbmV0X3BpbnMKICAgIH0gZWxzZSB7CiAgICAgIHN0YV93YXJuIDU0MSAiTm8gbG9hZCBwaW5zIGNvbm5lY3RlZCB0byBuZXQgW2dldF9mdWxsX25hbWUgJG5ldF0uIgogICAgfQogIH0KICBzZXQgZmxhdCBbaW5mbyBleGlzdHMgZmxhZ3MoLWZsYXQpXQogIHNldCBvbmx5X2luc3RzIFtpbmZvIGV4aXN0cyBmbGFncygtb25seV9jZWxscyldCiAgc2V0IHN0YXJ0cG9pbnRzX29ubHkgW2luZm8gZXhpc3RzIGZsYWdzKC1zdGFydHBvaW50c19vbmx5KV0KICBzZXQgaW5zdF9sZXZlbHMgMAogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLWxldmVscyldIH0gewogICAgc2V0IGluc3RfbGV2ZWxzICRrZXlzKC1sZXZlbHMpCiAgfQogIHNldCBwaW5fbGV2ZWxzIDAKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1waW5fbGV2ZWxzKV0gfSB7CiAgICBzZXQgcGluX2xldmVscyAka2V5cygtcGluX2xldmVscykKICB9CgogIHNldCB0aHJ1X2Rpc2FibGVkIDAKICBzZXQgdGhydV9jb25zdGFudHMgMAogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLXRyYWNlX2FyY3MpXSB9IHsKICAgIHNldCB0cmFjZV9hcmNzICRrZXlzKC10cmFjZV9hcmNzKQogICAgaWYgeyAkdHJhY2VfYXJjcyA9PSAidGltaW5nIiB9IHsKICAgICAgc2V0IHRocnVfZGlzYWJsZWQgMAogICAgICBzZXQgdGhydV9jb25zdGFudHMgMAogICAgfSBlbHNlaWYgeyAkdHJhY2VfYXJjcyA9PSAiZW5hYmxlZCIgfSB7CiAgICAgIHNldCB0aHJ1X2Rpc2FibGVkIDAKICAgICAgc2V0IHRocnVfY29uc3RhbnRzIDAKICAgIH0gZWxzZWlmIHsgJHRyYWNlX2FyY3MgPT0gImFsbCIgfSB7CiAgICAgIHNldCB0aHJ1X2Rpc2FibGVkIDEKICAgICAgc2V0IHRocnVfY29uc3RhbnRzIDEKICAgIH0gZWxzZSB7CiAgICAgIGNtZF91c2FnZV9lcnJvciAiZ2V0X2ZhbmluIgogICAgfQogIH0KICBpZiB7ICRvbmx5X2luc3RzIH0gewogICAgcmV0dXJuIFtmaW5kX2ZhbmluX2luc3RzICRwaW5zICRmbGF0ICRzdGFydHBvaW50c19vbmx5IFwKCSAgICAgICRpbnN0X2xldmVscyAkcGluX2xldmVscyAkdGhydV9kaXNhYmxlZCAkdGhydV9jb25zdGFudHNdCiB9IGVsc2UgewogICAgcmV0dXJuIFtmaW5kX2ZhbmluX3BpbnMgJHBpbnMgJGZsYXQgJHN0YXJ0cG9pbnRzX29ubHkgXAoJICAgICAgJGluc3RfbGV2ZWxzICRwaW5fbGV2ZWxzICR0aHJ1X2Rpc2FibGVkICR0aHJ1X2NvbnN0YW50c10KICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAiZ2V0X2Zhbm91dCIgXAogIHstZnJvbSBzb3VyY2VfbGlzdCBbLWZsYXRdIFstb25seV9jZWxsc10gWy1lbmRwb2ludHNfb25seV1cCiAgICAgWy1sZXZlbHMgbGV2ZWxfY291bnRdIFstcGluX2xldmVscyBwaW5fY291bnRdXAogICAgIFstdHJhY2VfYXJjcyB0aW1pbmd8ZW5hYmxlZHxhbGxdfQoKcHJvYyBnZXRfZmFub3V0IHsgYXJncyB9IHsKICBwYXJzZV9rZXlfYXJncyAiZ2V0X2Zhbm91dCIgYXJncyBcCiAgICBrZXlzIHstZnJvbSAtbGV2ZWxzIC1waW5fbGV2ZWxzIC10cmFjZV9hcmNzfSBcCiAgICBmbGFncyB7LWZsYXQgLW9ubHlfY2VsbHMgLWVuZHBvaW50c19vbmx5fQogIGlmIHsgW2xsZW5ndGggJGFyZ3NdICE9IDAgfSB7CiAgICBjbWRfdXNhZ2VfZXJyb3IgImdldF9mYW5vdXQiCiAgfQogIHBhcnNlX3BvcnRfcGluX25ldF9hcmcgJGtleXMoLWZyb20pIHBpbnMgbmV0cwogIGZvcmVhY2ggbmV0ICRuZXRzIHsKICAgIGxhcHBlbmQgcGlucyBbbmV0X2xvYWRfcGlucyAkbmV0XQogIH0KICBzZXQgZmxhdCBbaW5mbyBleGlzdHMgZmxhZ3MoLWZsYXQpXQogIHNldCBvbmx5X2luc3RzIFtpbmZvIGV4aXN0cyBmbGFncygtb25seV9jZWxscyldCiAgc2V0IGVuZHBvaW50c19vbmx5IFtpbmZvIGV4aXN0cyBmbGFncygtZW5kcG9pbnRzX29ubHkpXQoKICBzZXQgaW5zdF9sZXZlbHMgMAogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLWxldmVscyldIH0gewogICAgc2V0IGluc3RfbGV2ZWxzICRrZXlzKC1sZXZlbHMpCiAgfQoKICBzZXQgcGluX2xldmVscyAwCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtcGluX2xldmVscyldIH0gewogICAgc2V0IHBpbl9sZXZlbHMgJGtleXMoLXBpbl9sZXZlbHMpCiAgfQoKICBzZXQgdGhydV9kaXNhYmxlZCAwCiAgc2V0IHRocnVfY29uc3RhbnRzIDAKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC10cmFjZV9hcmNzKV0gfSB7CiAgICBzZXQgdHJhY2VfYXJjcyAka2V5cygtdHJhY2VfYXJjcykKICAgIGlmIHsgJHRyYWNlX2FyY3MgPT0gInRpbWluZyIgfSB7CiAgICAgIHNldCB0aHJ1X2Rpc2FibGVkIDAKICAgICAgc2V0IHRocnVfY29uc3RhbnRzIDAKICAgIH0gZWxzZWlmIHsgJHRyYWNlX2FyY3MgPT0gImVuYWJsZWQiIH0gewogICAgICBzZXQgdGhydV9kaXNhYmxlZCAwCiAgICAgIHNldCB0aHJ1X2NvbnN0YW50cyAwCiAgICB9IGVsc2VpZiB7ICR0cmFjZV9hcmNzID09ICJhbGwiIH0gewogICAgICBzZXQgdGhydV9kaXNhYmxlZCAxCiAgICAgIHNldCB0aHJ1X2NvbnN0YW50cyAxCiAgICB9IGVsc2UgewogICAgICBjbWRfdXNhZ2VfZXJyb3IgImdldF9mYW5vdXQiCiAgICB9CiAgfQogIGlmIHsgJG9ubHlfaW5zdHMgfSB7CiAgICByZXR1cm4gW2ZpbmRfZmFub3V0X2luc3RzICRwaW5zICRmbGF0ICRlbmRwb2ludHNfb25seSBcCgkgICAgICAkaW5zdF9sZXZlbHMgJHBpbl9sZXZlbHMgJHRocnVfZGlzYWJsZWQgJHRocnVfY29uc3RhbnRzXQogIH0gZWxzZSB7CiAgICByZXR1cm4gW2ZpbmRfZmFub3V0X3BpbnMgJHBpbnMgJGZsYXQgJGVuZHBvaW50c19vbmx5IFwKCSAgICAgICRpbnN0X2xldmVscyAkcGluX2xldmVscyAkdGhydV9kaXNhYmxlZCAkdGhydV9jb25zdGFudHNdCiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgImdldF90aW1pbmdfZWRnZXMiIFwKICB7Wy1mcm9tIGZyb21fcGluXSBbLXRvIHRvX3Bpbl0gWy1vZl9vYmplY3RzIG9iamVjdHNdIFstZmlsdGVyIGV4cHJdfQoKcHJvYyBnZXRfdGltaW5nX2VkZ2VzIHsgYXJncyB9IHsKICByZXR1cm4gW2dldF90aW1pbmdfZWRnZXNfY21kICJnZXRfdGltaW5nX2VkZ2VzIiAkYXJnc10KfQoKcHJvYyBnZXRfdGltaW5nX2VkZ2VzX2NtZCB7IGNtZCBjbWRfYXJncyB9IHsKICBwYXJzZV9rZXlfYXJncyAkY21kIGNtZF9hcmdzIFwKICAgIGtleXMgey1mcm9tIC10byAtb2Zfb2JqZWN0cyAtZmlsdGVyfSBmbGFncyB7fQogIGNoZWNrX2FyZ2NfZXEwICRjbWQgJGNtZF9hcmdzCgogIHNldCBhcmNzIHt9CiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtb2Zfb2JqZWN0cyldIH0gewogICAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtZnJvbSldIFwKCSAgIHx8IFtpbmZvIGV4aXN0cyBrZXlzKC1mcm9tKV0gfSB7CiAgICAgIHN0YV9lcnJvciA1NDAgIi1mcm9tLy10byBhcmd1bWVudHMgbm90IHN1cHBvcnRlZCB3aXRoIC1vZl9vYmplY3RzLiIKICAgIH0KICAgIHNldCBhcmNzIFtnZXRfdGltaW5nX2FyY3Nfb2JqZWN0cyAka2V5cygtb2Zfb2JqZWN0cyldCiAgfSBlbHNlaWYgeyBbaW5mbyBleGlzdHMga2V5cygtZnJvbSldIFwKCSAgICYmIFtpbmZvIGV4aXN0cyBrZXlzKC10byldIH0gewogICAgc2V0IGFyY3MgW2dldF90aW1pbmdfYXJjc19mcm9tX3RvIFwKCSAgICAgIFtnZXRfcG9ydF9waW5fZXJyb3IgImZyb20iICRrZXlzKC1mcm9tKV0gXAoJICAgICAgW2dldF9wb3J0X3Bpbl9lcnJvciAidG8iICRrZXlzKC10byldXQogIH0gZWxzZWlmIHsgW2luZm8gZXhpc3RzIGtleXMoLWZyb20pXSB9IHsKICAgIHNldCBhcmNzIFtnZXRfdGltaW5nX2FyY3NfZnJvbSAka2V5cygtZnJvbSldCiAgfSBlbHNlaWYgeyBbaW5mbyBleGlzdHMga2V5cygtdG8pXSB9IHsKICAgIHNldCBhcmNzIFtnZXRfdGltaW5nX2FyY3NfdG8gJGtleXMoLXRvKV0KICB9IGVsc2UgewogICAgY21kX3VzYWdlX2Vycm9yICRjbWQKICB9CiAgaWYgW2luZm8gZXhpc3RzIGtleXMoLWZpbHRlcildIHsKICAgIHNldCBhcmNzIFtmaWx0ZXJfb2JqcyAka2V5cygtZmlsdGVyKSAkYXJjcyBmaWx0ZXJfdGltaW5nX2FyY3MgInRpbWluZyBhcmMiXQogIH0KICByZXR1cm4gJGFyY3MKfQoKcHJvYyBnZXRfdGltaW5nX2FyY3Nfb2JqZWN0cyB7IG9iamVjdF9hcmcgfSB7CiAgcGFyc2VfbGliY2VsbF9pbnN0X2FyZyAkb2JqZWN0X2FyZyBsaWJjZWxscyBpbnN0cwogIGlmIHsgJGluc3RzICE9IHt9IH0gewogICAgc2V0IGVkZ2VzIHt9CiAgICBmb3JlYWNoIGluc3QgJGluc3RzIHsKICAgICAgbGFwcGVuZCBlZGdlcyBbaW5zdGFuY2VfZWRnZXMgJGluc3RdCiAgICB9CiAgICByZXR1cm4gJGVkZ2VzCiAgfSBlbHNlaWYgeyAkbGliY2VsbHMgIT0ge30gfSB7CiAgICBzZXQgYXJjX3NldHMge30KICAgIGZvcmVhY2ggbGliY2VsbCAkbGliY2VsbHMgewogICAgICBsYXBwZW5kIGFyY19zZXRzIFskbGliY2VsbCB0aW1pbmdfYXJjX3NldHNdCiAgICB9CiAgICByZXR1cm4gJGFyY19zZXRzCiAgfQp9Cgpwcm9jIGluc3RhbmNlX2VkZ2VzIHsgaW5zdCB9IHsKICBzZXQgZWRnZXMge30KICBzZXQgcGluX2l0ZXIgWyRpbnN0IHBpbl9pdGVyYXRvcl0KICB3aGlsZSB7WyRwaW5faXRlciBoYXNfbmV4dF19IHsKICAgIHNldCBwaW4gWyRwaW5faXRlciBuZXh0XQogICAgZm9yZWFjaCB2ZXJ0ZXggWyRwaW4gdmVydGljZXNdIHsKICAgICAgc2V0IGVkZ2VfaXRlciBbJHZlcnRleCBvdXRfZWRnZV9pdGVyYXRvcl0KICAgICAgd2hpbGUge1skZWRnZV9pdGVyIGhhc19uZXh0XX0gewoJc2V0IGVkZ2UgWyRlZGdlX2l0ZXIgbmV4dF0KCWlmIHsgWyRlZGdlIHJvbGVdICE9ICJ3aXJlIiB9IHsKCSAgbGFwcGVuZCBlZGdlcyAkZWRnZQoJfQogICAgICB9CiAgICAgICRlZGdlX2l0ZXIgZmluaXNoCiAgICB9CiAgfQogICRwaW5faXRlciBmaW5pc2gKICByZXR1cm4gJGVkZ2VzCn0KCnByb2MgZ2V0X3RpbWluZ19hcmNzX2Zyb21fdG8geyBmcm9tX3Bpbl9hcmcgdG9fcGluX2FyZyB9IHsKICBzZXQgZWRnZXMge30KICBzZXQgZnJvbV9waW4gW2dldF9wb3J0X3Bpbl9lcnJvciAiZnJvbSIgJGZyb21fcGluX2FyZ10KICBzZXQgdG9fcGluIFtnZXRfcG9ydF9waW5fZXJyb3IgInRvIiAkdG9fcGluX2FyZ10KICBmb3JlYWNoIGZyb21fdmVydGV4IFskZnJvbV9waW4gdmVydGljZXNdIHsKICAgIGZvcmVhY2ggdG9fdmVydGV4IFskdG9fcGluIHZlcnRpY2VzXSB7CiAgICAgIHNldCBlZGdlX2l0ZXIgWyRmcm9tX3ZlcnRleCBvdXRfZWRnZV9pdGVyYXRvcl0KICAgICAgd2hpbGUge1skZWRnZV9pdGVyIGhhc19uZXh0XX0gewoJc2V0IGVkZ2UgWyRlZGdlX2l0ZXIgbmV4dF0KCWlmIHsgWyRlZGdlIHRvXSA9PSAkdG9fdmVydGV4IH0gewoJICBsYXBwZW5kIGVkZ2VzICRlZGdlCgl9CiAgICAgIH0KICAgICAgJGVkZ2VfaXRlciBmaW5pc2gKICAgIH0KICB9CiAgcmV0dXJuICRlZGdlcwp9Cgpwcm9jIGdldF90aW1pbmdfYXJjc19mcm9tIHsgZnJvbV9waW5fYXJnIH0gewogIHNldCBmcm9tX3BpbiBbZ2V0X3BvcnRfcGluX2Vycm9yICJmcm9tIiAkZnJvbV9waW5fYXJnXQogIHNldCBlZGdlcyB7fQogIGZvcmVhY2ggZnJvbV92ZXJ0ZXggWyRmcm9tX3BpbiB2ZXJ0aWNlc10gewogICAgc2V0IGVkZ2VfaXRlciBbJGZyb21fdmVydGV4IG91dF9lZGdlX2l0ZXJhdG9yXQogICAgd2hpbGUge1skZWRnZV9pdGVyIGhhc19uZXh0XX0gewogICAgICBzZXQgZWRnZSBbJGVkZ2VfaXRlciBuZXh0XQogICAgICBsYXBwZW5kIGVkZ2VzICRlZGdlCiAgICB9CiAgICAkZWRnZV9pdGVyIGZpbmlzaAogIH0KICByZXR1cm4gJGVkZ2VzCn0KCnByb2MgZ2V0X3RpbWluZ19hcmNzX3RvIHsgdG9fcGluX2FyZyB9IHsKICBzZXQgdG9fcGluIFtnZXRfcG9ydF9waW5fZXJyb3IgInRvIiAkdG9fcGluX2FyZ10KICBzZXQgZWRnZXMge30KICBmb3JlYWNoIHRvX3ZlcnRleCBbJHRvX3BpbiB2ZXJ0aWNlc10gewogICAgc2V0IGVkZ2VfaXRlciBbJHRvX3ZlcnRleCBpbl9lZGdlX2l0ZXJhdG9yXQogICAgd2hpbGUge1skZWRnZV9pdGVyIGhhc19uZXh0XX0gewogICAgICBzZXQgZWRnZSBbJGVkZ2VfaXRlciBuZXh0XQogICAgICBsYXBwZW5kIGVkZ2VzICRlZGdlCiAgICB9CiAgICAkZWRnZV9pdGVyIGZpbmlzaAogIH0KICByZXR1cm4gJGVkZ2VzCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAicmVwb3J0X2Nsb2NrX3Byb3BlcnRpZXMiIHtbY2xvY2tzXX0KCnByb2NfcmVkaXJlY3QgcmVwb3J0X2Nsb2NrX3Byb3BlcnRpZXMgewogIGNoZWNrX2FyZ2NfZXEwb3IxICJyZXBvcnRfY2xvY2tfcHJvcGVydGllcyIgJGFyZ3MKICB1cGRhdGVfZ2VuZXJhdGVkX2Nsa3MKICByZXBvcnRfbGluZSAiQ2xvY2sgICAgICAgICAgICAgICAgICAgUGVyaW9kICAgICAgICAgIFdhdmVmb3JtIgogIHJlcG9ydF9saW5lICItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIgogIGlmIHsgW2xsZW5ndGggJGFyZ3NdID09IDAgfSB7CiAgICBmb3JlYWNoIGNsayBbYWxsX2Nsb2Nrc10gewogICAgICByZXBvcnRfY2xvY2sxICRjbGsKICAgIH0KICB9IGVsc2UgewogICAgZm9yZWFjaCBjbGsgW2dldF9jbG9ja3Nfd2FybiAiY2xvY2tfbmFtZSIgW2xpbmRleCAkYXJncyAwXV0gewogICAgICByZXBvcnRfY2xvY2sxICRjbGsKICAgIH0KICB9Cn0KCnByb2MgcmVwb3J0X2Nsb2NrMSB7IGNsayB9IHsKICBnbG9iYWwgc3RhX3JlcG9ydF9kZWZhdWx0X2RpZ2l0cwoKICBpZiB7IFskY2xrIHdhdmVmb3JtX3ZhbGlkXSB9IHsKICAgIHNldCBkaWdpdHMgJHN0YV9yZXBvcnRfZGVmYXVsdF9kaWdpdHMKICAgIHNldCB3YXZlZm9ybSBbJGNsayB3YXZlZm9ybV0KICAgIGlmIHsgJHdhdmVmb3JtID09IHt9IH0gewogICAgICBzZXQgd2F2ZSAiICAgICAgICAgICAgICAgICAgICAiCiAgICB9IGVsc2UgewogICAgICBzZXQgd2F2ZSAiIgogICAgICBmb3JlYWNoIGVkZ2UgJHdhdmVmb3JtIHsKCXNldCB3YXZlICIkd2F2ZVtmb3JtYXQgIiUxMHMiIFtmb3JtYXRfdGltZSAkZWRnZSAkZGlnaXRzXV0iCiAgICAgIH0KICAgIH0KICAgIGlmIHtbJGNsayBpc19nZW5lcmF0ZWRdfSB7CiAgICAgIHNldCBnZW5lcmF0ZWQgIiAoZ2VuZXJhdGVkKSIKICAgIH0gZWxzZSB7CiAgICAgIHNldCBnZW5lcmF0ZWQgIiIKICAgIH0KICAgIHJlcG9ydF9saW5lICJbZm9ybWF0ICUtMjBzIFtnZXRfbmFtZSAkY2xrXV1bZm9ybWF0ICUxMHMgW2Zvcm1hdF90aW1lIFskY2xrIHBlcmlvZF0gJGRpZ2l0c11dICAkd2F2ZSRnZW5lcmF0ZWQiCiAgfQp9CgojIHN0YSBuYW1lc3BhY2UgZW5kLgp9CiMgT3BlblNUQSwgU3RhdGljIFRpbWluZyBBbmFseXplcgojIENvcHlyaWdodCAoYykgMjAyNSwgUGFyYWxsYXggU29mdHdhcmUsIEluYy4KIyAKIyBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeQojIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CiMgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3IKIyAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLgojIAojIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAojIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiMgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlCiMgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KIyAKIyBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQojIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LgojIAojIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90CiMgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgojIAojIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlCiMgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgojIAojIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uCgpuYW1lc3BhY2UgZXZhbCBzdGEgewoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojCiMgU3RhcnR1cCBzcGxhc2ggbWVzc2FnZS4KIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3Mgc2hvd19zcGxhc2gge30KCnByb2Mgc2hvd19zcGxhc2gge30gewogIHJlcG9ydF9saW5lICJPcGVuU1RBIFtzdGE6OnZlcnNpb25dIFtzdHJpbmcgcmFuZ2UgW3N0YTo6Z2l0X3NoYTFdIDAgOV0gQ29weXJpZ2h0IChjKSAyMDI1LCBQYXJhbGxheCBTb2Z0d2FyZSwgSW5jLgpMaWNlbnNlIEdQTHYzOiBHTlUgR1BMIHZlcnNpb24gMyA8aHR0cDovL2dudS5vcmcvbGljZW5zZXMvZ3BsLmh0bWw+CgpUaGlzIGlzIGZyZWUgc29mdHdhcmUsIGFuZCB5b3UgYXJlIGZyZWUgdG8gY2hhbmdlIGFuZCByZWRpc3RyaWJ1dGUgaXQKdW5kZXIgY2VydGFpbiBjb25kaXRpb25zOyB0eXBlIGBzaG93X2NvcHlpbmcnIGZvciBkZXRhaWxzLiAKVGhpcyBwcm9ncmFtIGNvbWVzIHdpdGggQUJTT0xVVEVMWSBOTyBXQVJSQU5UWTsgZm9yIGRldGFpbHMgdHlwZSBgc2hvd193YXJyYW50eScuIgp9CgpkZWZpbmVfY21kX2FyZ3Mgc2hvd193YXJyYW50eSB7fQoKcHJvYyBzaG93X3dhcnJhbnR5IHt9IHsKICByZXBvcnRfbGluZSB7MTUuIERpc2NsYWltZXIgb2YgV2FycmFudHkuClRIRVJFIElTIE5PIFdBUlJBTlRZIEZPUiBUSEUgUFJPR1JBTSwgVE8gVEhFIEVYVEVOVCBQRVJNSVRURUQgQlkgQVBQTElDQUJMRSBMQVcuIEVYQ0VQVCBXSEVOIE9USEVSV0lTRSBTVEFURUQgSU4gV1JJVElORyBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EL09SIE9USEVSIFBBUlRJRVMgUFJPVklERSBUSEUgUFJPR1JBTSAiQVMgSVMiIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVJVEhFUiBFWFBSRVNTRUQgT1IgSU1QTElFRCwgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gVEhFIEVOVElSRSBSSVNLIEFTIFRPIFRIRSBRVUFMSVRZIEFORCBQRVJGT1JNQU5DRSBPRiBUSEUgUFJPR1JBTSBJUyBXSVRIIFlPVS4gU0hPVUxEIFRIRSBQUk9HUkFNIFBST1ZFIERFRkVDVElWRSwgWU9VIEFTU1VNRSBUSEUgQ09TVCBPRiBBTEwgTkVDRVNTQVJZIFNFUlZJQ0lORywgUkVQQUlSIE9SIENPUlJFQ1RJT04uCgoxNi4gTGltaXRhdGlvbiBvZiBMaWFiaWxpdHkuCklOIE5PIEVWRU5UIFVOTEVTUyBSRVFVSVJFRCBCWSBBUFBMSUNBQkxFIExBVyBPUiBBR1JFRUQgVE8gSU4gV1JJVElORyBXSUxMIEFOWSBDT1BZUklHSFQgSE9MREVSLCBPUiBBTlkgT1RIRVIgUEFSVFkgV0hPIE1PRElGSUVTIEFORC9PUiBDT05WRVlTIFRIRSBQUk9HUkFNIEFTIFBFUk1JVFRFRCBBQk9WRSwgQkUgTElBQkxFIFRPIFlPVSBGT1IgREFNQUdFUywgSU5DTFVESU5HIEFOWSBHRU5FUkFMLCBTUEVDSUFMLCBJTkNJREVOVEFMIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBBUklTSU5HIE9VVCBPRiBUSEUgVVNFIE9SIElOQUJJTElUWSBUTyBVU0UgVEhFIFBST0dSQU0gKElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gTE9TUyBPRiBEQVRBIE9SIERBVEEgQkVJTkcgUkVOREVSRUQgSU5BQ0NVUkFURSBPUiBMT1NTRVMgU1VTVEFJTkVEIEJZIFlPVSBPUiBUSElSRCBQQVJUSUVTIE9SIEEgRkFJTFVSRSBPRiBUSEUgUFJPR1JBTSBUTyBPUEVSQVRFIFdJVEggQU5ZIE9USEVSIFBST0dSQU1TKSwgRVZFTiBJRiBTVUNIIEhPTERFUiBPUiBPVEhFUiBQQVJUWSBIQVMgQkVFTiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRVMuCgoxNy4gSW50ZXJwcmV0YXRpb24gb2YgU2VjdGlvbnMgMTUgYW5kIDE2LgpJZiB0aGUgZGlzY2xhaW1lciBvZiB3YXJyYW50eSBhbmQgbGltaXRhdGlvbiBvZiBsaWFiaWxpdHkgcHJvdmlkZWQgYWJvdmUgY2Fubm90IGJlIGdpdmVuIGxvY2FsIGxlZ2FsIGVmZmVjdCBhY2NvcmRpbmcgdG8gdGhlaXIgdGVybXMsIHJldmlld2luZyBjb3VydHMgc2hhbGwgYXBwbHkgbG9jYWwgbGF3IHRoYXQgbW9zdCBjbG9zZWx5IGFwcHJveGltYXRlcyBhbiBhYnNvbHV0ZSB3YWl2ZXIgb2YgYWxsIGNpdmlsIGxpYWJpbGl0eSBpbiBjb25uZWN0aW9uIHdpdGggdGhlIFByb2dyYW0sIHVubGVzcyBhIHdhcnJhbnR5IG9yIGFzc3VtcHRpb24gb2YgbGlhYmlsaXR5IGFjY29tcGFuaWVzIGEgY29weSBvZiB0aGUgUHJvZ3JhbSBpbiByZXR1cm4gZm9yIGEgZmVlLn0KfQoKZGVmaW5lX2NtZF9hcmdzIHNob3dfY29weWluZyB7fQoKcHJvYyBzaG93X2NvcHlpbmcge30gewogIHJlcG9ydF9saW5lIHsgICAgICAgICAgICAgICAgICAgIEdOVSBHRU5FUkFMIFBVQkxJQyBMSUNFTlNFCiAgICAgICAgICAgICAgICAgICAgICAgVmVyc2lvbiAzLCAyOSBKdW5lIDIwMDcKCiBDb3B5cmlnaHQgKEMpIDIwMDcgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBJbmMuIDxodHRwOi8vZnNmLm9yZy8+CiBFdmVyeW9uZSBpcyBwZXJtaXR0ZWQgdG8gY29weSBhbmQgZGlzdHJpYnV0ZSB2ZXJiYXRpbSBjb3BpZXMKIG9mIHRoaXMgbGljZW5zZSBkb2N1bWVudCwgYnV0IGNoYW5naW5nIGl0IGlzIG5vdCBhbGxvd2VkLgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFByZWFtYmxlCgogIFRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBpcyBhIGZyZWUsIGNvcHlsZWZ0IGxpY2Vuc2UgZm9yCnNvZnR3YXJlIGFuZCBvdGhlciBraW5kcyBvZiB3b3Jrcy4KCiAgVGhlIGxpY2Vuc2VzIGZvciBtb3N0IHNvZnR3YXJlIGFuZCBvdGhlciBwcmFjdGljYWwgd29ya3MgYXJlIGRlc2lnbmVkCnRvIHRha2UgYXdheSB5b3VyIGZyZWVkb20gdG8gc2hhcmUgYW5kIGNoYW5nZSB0aGUgd29ya3MuICBCeSBjb250cmFzdCwKdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGlzIGludGVuZGVkIHRvIGd1YXJhbnRlZSB5b3VyIGZyZWVkb20gdG8Kc2hhcmUgYW5kIGNoYW5nZSBhbGwgdmVyc2lvbnMgb2YgYSBwcm9ncmFtLS10byBtYWtlIHN1cmUgaXQgcmVtYWlucyBmcmVlCnNvZnR3YXJlIGZvciBhbGwgaXRzIHVzZXJzLiAgV2UsIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIHVzZSB0aGUKR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vc3Qgb2Ygb3VyIHNvZnR3YXJlOyBpdCBhcHBsaWVzIGFsc28gdG8KYW55IG90aGVyIHdvcmsgcmVsZWFzZWQgdGhpcyB3YXkgYnkgaXRzIGF1dGhvcnMuICBZb3UgY2FuIGFwcGx5IGl0IHRvCnlvdXIgcHJvZ3JhbXMsIHRvby4KCiAgV2hlbiB3ZSBzcGVhayBvZiBmcmVlIHNvZnR3YXJlLCB3ZSBhcmUgcmVmZXJyaW5nIHRvIGZyZWVkb20sIG5vdApwcmljZS4gIE91ciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlcyBhcmUgZGVzaWduZWQgdG8gbWFrZSBzdXJlIHRoYXQgeW91CmhhdmUgdGhlIGZyZWVkb20gdG8gZGlzdHJpYnV0ZSBjb3BpZXMgb2YgZnJlZSBzb2Z0d2FyZSAoYW5kIGNoYXJnZSBmb3IKdGhlbSBpZiB5b3Ugd2lzaCksIHRoYXQgeW91IHJlY2VpdmUgc291cmNlIGNvZGUgb3IgY2FuIGdldCBpdCBpZiB5b3UKd2FudCBpdCwgdGhhdCB5b3UgY2FuIGNoYW5nZSB0aGUgc29mdHdhcmUgb3IgdXNlIHBpZWNlcyBvZiBpdCBpbiBuZXcKZnJlZSBwcm9ncmFtcywgYW5kIHRoYXQgeW91IGtub3cgeW91IGNhbiBkbyB0aGVzZSB0aGluZ3MuCgogIFRvIHByb3RlY3QgeW91ciByaWdodHMsIHdlIG5lZWQgdG8gcHJldmVudCBvdGhlcnMgZnJvbSBkZW55aW5nIHlvdQp0aGVzZSByaWdodHMgb3IgYXNraW5nIHlvdSB0byBzdXJyZW5kZXIgdGhlIHJpZ2h0cy4gIFRoZXJlZm9yZSwgeW91IGhhdmUKY2VydGFpbiByZXNwb25zaWJpbGl0aWVzIGlmIHlvdSBkaXN0cmlidXRlIGNvcGllcyBvZiB0aGUgc29mdHdhcmUsIG9yIGlmCnlvdSBtb2RpZnkgaXQ6IHJlc3BvbnNpYmlsaXRpZXMgdG8gcmVzcGVjdCB0aGUgZnJlZWRvbSBvZiBvdGhlcnMuCgogIEZvciBleGFtcGxlLCBpZiB5b3UgZGlzdHJpYnV0ZSBjb3BpZXMgb2Ygc3VjaCBhIHByb2dyYW0sIHdoZXRoZXIKZ3JhdGlzIG9yIGZvciBhIGZlZSwgeW91IG11c3QgcGFzcyBvbiB0byB0aGUgcmVjaXBpZW50cyB0aGUgc2FtZQpmcmVlZG9tcyB0aGF0IHlvdSByZWNlaXZlZC4gIFlvdSBtdXN0IG1ha2Ugc3VyZSB0aGF0IHRoZXksIHRvbywgcmVjZWl2ZQpvciBjYW4gZ2V0IHRoZSBzb3VyY2UgY29kZS4gIEFuZCB5b3UgbXVzdCBzaG93IHRoZW0gdGhlc2UgdGVybXMgc28gdGhleQprbm93IHRoZWlyIHJpZ2h0cy4KCiAgRGV2ZWxvcGVycyB0aGF0IHVzZSB0aGUgR05VIEdQTCBwcm90ZWN0IHlvdXIgcmlnaHRzIHdpdGggdHdvIHN0ZXBzOgooMSkgYXNzZXJ0IGNvcHlyaWdodCBvbiB0aGUgc29mdHdhcmUsIGFuZCAoMikgb2ZmZXIgeW91IHRoaXMgTGljZW5zZQpnaXZpbmcgeW91IGxlZ2FsIHBlcm1pc3Npb24gdG8gY29weSwgZGlzdHJpYnV0ZSBhbmQvb3IgbW9kaWZ5IGl0LgoKICBGb3IgdGhlIGRldmVsb3BlcnMnIGFuZCBhdXRob3JzJyBwcm90ZWN0aW9uLCB0aGUgR1BMIGNsZWFybHkgZXhwbGFpbnMKdGhhdCB0aGVyZSBpcyBubyB3YXJyYW50eSBmb3IgdGhpcyBmcmVlIHNvZnR3YXJlLiAgRm9yIGJvdGggdXNlcnMnIGFuZAphdXRob3JzJyBzYWtlLCB0aGUgR1BMIHJlcXVpcmVzIHRoYXQgbW9kaWZpZWQgdmVyc2lvbnMgYmUgbWFya2VkIGFzCmNoYW5nZWQsIHNvIHRoYXQgdGhlaXIgcHJvYmxlbXMgd2lsbCBub3QgYmUgYXR0cmlidXRlZCBlcnJvbmVvdXNseSB0bwphdXRob3JzIG9mIHByZXZpb3VzIHZlcnNpb25zLgoKICBTb21lIGRldmljZXMgYXJlIGRlc2lnbmVkIHRvIGRlbnkgdXNlcnMgYWNjZXNzIHRvIGluc3RhbGwgb3IgcnVuCm1vZGlmaWVkIHZlcnNpb25zIG9mIHRoZSBzb2Z0d2FyZSBpbnNpZGUgdGhlbSwgYWx0aG91Z2ggdGhlIG1hbnVmYWN0dXJlcgpjYW4gZG8gc28uICBUaGlzIGlzIGZ1bmRhbWVudGFsbHkgaW5jb21wYXRpYmxlIHdpdGggdGhlIGFpbSBvZgpwcm90ZWN0aW5nIHVzZXJzJyBmcmVlZG9tIHRvIGNoYW5nZSB0aGUgc29mdHdhcmUuICBUaGUgc3lzdGVtYXRpYwpwYXR0ZXJuIG9mIHN1Y2ggYWJ1c2Ugb2NjdXJzIGluIHRoZSBhcmVhIG9mIHByb2R1Y3RzIGZvciBpbmRpdmlkdWFscyB0bwp1c2UsIHdoaWNoIGlzIHByZWNpc2VseSB3aGVyZSBpdCBpcyBtb3N0IHVuYWNjZXB0YWJsZS4gIFRoZXJlZm9yZSwgd2UKaGF2ZSBkZXNpZ25lZCB0aGlzIHZlcnNpb24gb2YgdGhlIEdQTCB0byBwcm9oaWJpdCB0aGUgcHJhY3RpY2UgZm9yIHRob3NlCnByb2R1Y3RzLiAgSWYgc3VjaCBwcm9ibGVtcyBhcmlzZSBzdWJzdGFudGlhbGx5IGluIG90aGVyIGRvbWFpbnMsIHdlCnN0YW5kIHJlYWR5IHRvIGV4dGVuZCB0aGlzIHByb3Zpc2lvbiB0byB0aG9zZSBkb21haW5zIGluIGZ1dHVyZSB2ZXJzaW9ucwpvZiB0aGUgR1BMLCBhcyBuZWVkZWQgdG8gcHJvdGVjdCB0aGUgZnJlZWRvbSBvZiB1c2Vycy4KCiAgRmluYWxseSwgZXZlcnkgcHJvZ3JhbSBpcyB0aHJlYXRlbmVkIGNvbnN0YW50bHkgYnkgc29mdHdhcmUgcGF0ZW50cy4KU3RhdGVzIHNob3VsZCBub3QgYWxsb3cgcGF0ZW50cyB0byByZXN0cmljdCBkZXZlbG9wbWVudCBhbmQgdXNlIG9mCnNvZnR3YXJlIG9uIGdlbmVyYWwtcHVycG9zZSBjb21wdXRlcnMsIGJ1dCBpbiB0aG9zZSB0aGF0IGRvLCB3ZSB3aXNoIHRvCmF2b2lkIHRoZSBzcGVjaWFsIGRhbmdlciB0aGF0IHBhdGVudHMgYXBwbGllZCB0byBhIGZyZWUgcHJvZ3JhbSBjb3VsZAptYWtlIGl0IGVmZmVjdGl2ZWx5IHByb3ByaWV0YXJ5LiAgVG8gcHJldmVudCB0aGlzLCB0aGUgR1BMIGFzc3VyZXMgdGhhdApwYXRlbnRzIGNhbm5vdCBiZSB1c2VkIHRvIHJlbmRlciB0aGUgcHJvZ3JhbSBub24tZnJlZS4KCiAgVGhlIHByZWNpc2UgdGVybXMgYW5kIGNvbmRpdGlvbnMgZm9yIGNvcHlpbmcsIGRpc3RyaWJ1dGlvbiBhbmQKbW9kaWZpY2F0aW9uIGZvbGxvdy4KCiAgICAgICAgICAgICAgICAgICAgICAgVEVSTVMgQU5EIENPTkRJVElPTlMKCiAgMC4gRGVmaW5pdGlvbnMuCgogICJUaGlzIExpY2Vuc2UiIHJlZmVycyB0byB2ZXJzaW9uIDMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlLgoKICAiQ29weXJpZ2h0IiBhbHNvIG1lYW5zIGNvcHlyaWdodC1saWtlIGxhd3MgdGhhdCBhcHBseSB0byBvdGhlciBraW5kcyBvZgp3b3Jrcywgc3VjaCBhcyBzZW1pY29uZHVjdG9yIG1hc2tzLgoKICAiVGhlIFByb2dyYW0iIHJlZmVycyB0byBhbnkgY29weXJpZ2h0YWJsZSB3b3JrIGxpY2Vuc2VkIHVuZGVyIHRoaXMKTGljZW5zZS4gIEVhY2ggbGljZW5zZWUgaXMgYWRkcmVzc2VkIGFzICJ5b3UiLiAgIkxpY2Vuc2VlcyIgYW5kCiJyZWNpcGllbnRzIiBtYXkgYmUgaW5kaXZpZHVhbHMgb3Igb3JnYW5pemF0aW9ucy4KCiAgVG8gIm1vZGlmeSIgYSB3b3JrIG1lYW5zIHRvIGNvcHkgZnJvbSBvciBhZGFwdCBhbGwgb3IgcGFydCBvZiB0aGUgd29yawppbiBhIGZhc2hpb24gcmVxdWlyaW5nIGNvcHlyaWdodCBwZXJtaXNzaW9uLCBvdGhlciB0aGFuIHRoZSBtYWtpbmcgb2YgYW4KZXhhY3QgY29weS4gIFRoZSByZXN1bHRpbmcgd29yayBpcyBjYWxsZWQgYSAibW9kaWZpZWQgdmVyc2lvbiIgb2YgdGhlCmVhcmxpZXIgd29yayBvciBhIHdvcmsgImJhc2VkIG9uIiB0aGUgZWFybGllciB3b3JrLgoKICBBICJjb3ZlcmVkIHdvcmsiIG1lYW5zIGVpdGhlciB0aGUgdW5tb2RpZmllZCBQcm9ncmFtIG9yIGEgd29yayBiYXNlZApvbiB0aGUgUHJvZ3JhbS4KCiAgVG8gInByb3BhZ2F0ZSIgYSB3b3JrIG1lYW5zIHRvIGRvIGFueXRoaW5nIHdpdGggaXQgdGhhdCwgd2l0aG91dApwZXJtaXNzaW9uLCB3b3VsZCBtYWtlIHlvdSBkaXJlY3RseSBvciBzZWNvbmRhcmlseSBsaWFibGUgZm9yCmluZnJpbmdlbWVudCB1bmRlciBhcHBsaWNhYmxlIGNvcHlyaWdodCBsYXcsIGV4Y2VwdCBleGVjdXRpbmcgaXQgb24gYQpjb21wdXRlciBvciBtb2RpZnlpbmcgYSBwcml2YXRlIGNvcHkuICBQcm9wYWdhdGlvbiBpbmNsdWRlcyBjb3B5aW5nLApkaXN0cmlidXRpb24gKHdpdGggb3Igd2l0aG91dCBtb2RpZmljYXRpb24pLCBtYWtpbmcgYXZhaWxhYmxlIHRvIHRoZQpwdWJsaWMsIGFuZCBpbiBzb21lIGNvdW50cmllcyBvdGhlciBhY3Rpdml0aWVzIGFzIHdlbGwuCgogIFRvICJjb252ZXkiIGEgd29yayBtZWFucyBhbnkga2luZCBvZiBwcm9wYWdhdGlvbiB0aGF0IGVuYWJsZXMgb3RoZXIKcGFydGllcyB0byBtYWtlIG9yIHJlY2VpdmUgY29waWVzLiAgTWVyZSBpbnRlcmFjdGlvbiB3aXRoIGEgdXNlciB0aHJvdWdoCmEgY29tcHV0ZXIgbmV0d29yaywgd2l0aCBubyB0cmFuc2ZlciBvZiBhIGNvcHksIGlzIG5vdCBjb252ZXlpbmcuCgogIEFuIGludGVyYWN0aXZlIHVzZXIgaW50ZXJmYWNlIGRpc3BsYXlzICJBcHByb3ByaWF0ZSBMZWdhbCBOb3RpY2VzIgp0byB0aGUgZXh0ZW50IHRoYXQgaXQgaW5jbHVkZXMgYSBjb252ZW5pZW50IGFuZCBwcm9taW5lbnRseSB2aXNpYmxlCmZlYXR1cmUgdGhhdCAoMSkgZGlzcGxheXMgYW4gYXBwcm9wcmlhdGUgY29weXJpZ2h0IG5vdGljZSwgYW5kICgyKQp0ZWxscyB0aGUgdXNlciB0aGF0IHRoZXJlIGlzIG5vIHdhcnJhbnR5IGZvciB0aGUgd29yayAoZXhjZXB0IHRvIHRoZQpleHRlbnQgdGhhdCB3YXJyYW50aWVzIGFyZSBwcm92aWRlZCksIHRoYXQgbGljZW5zZWVzIG1heSBjb252ZXkgdGhlCndvcmsgdW5kZXIgdGhpcyBMaWNlbnNlLCBhbmQgaG93IHRvIHZpZXcgYSBjb3B5IG9mIHRoaXMgTGljZW5zZS4gIElmCnRoZSBpbnRlcmZhY2UgcHJlc2VudHMgYSBsaXN0IG9mIHVzZXIgY29tbWFuZHMgb3Igb3B0aW9ucywgc3VjaCBhcyBhCm1lbnUsIGEgcHJvbWluZW50IGl0ZW0gaW4gdGhlIGxpc3QgbWVldHMgdGhpcyBjcml0ZXJpb24uCgogIDEuIFNvdXJjZSBDb2RlLgoKICBUaGUgInNvdXJjZSBjb2RlIiBmb3IgYSB3b3JrIG1lYW5zIHRoZSBwcmVmZXJyZWQgZm9ybSBvZiB0aGUgd29yawpmb3IgbWFraW5nIG1vZGlmaWNhdGlvbnMgdG8gaXQuICAiT2JqZWN0IGNvZGUiIG1lYW5zIGFueSBub24tc291cmNlCmZvcm0gb2YgYSB3b3JrLgoKICBBICJTdGFuZGFyZCBJbnRlcmZhY2UiIG1lYW5zIGFuIGludGVyZmFjZSB0aGF0IGVpdGhlciBpcyBhbiBvZmZpY2lhbApzdGFuZGFyZCBkZWZpbmVkIGJ5IGEgcmVjb2duaXplZCBzdGFuZGFyZHMgYm9keSwgb3IsIGluIHRoZSBjYXNlIG9mCmludGVyZmFjZXMgc3BlY2lmaWVkIGZvciBhIHBhcnRpY3VsYXIgcHJvZ3JhbW1pbmcgbGFuZ3VhZ2UsIG9uZSB0aGF0CmlzIHdpZGVseSB1c2VkIGFtb25nIGRldmVsb3BlcnMgd29ya2luZyBpbiB0aGF0IGxhbmd1YWdlLgoKICBUaGUgIlN5c3RlbSBMaWJyYXJpZXMiIG9mIGFuIGV4ZWN1dGFibGUgd29yayBpbmNsdWRlIGFueXRoaW5nLCBvdGhlcgp0aGFuIHRoZSB3b3JrIGFzIGEgd2hvbGUsIHRoYXQgKGEpIGlzIGluY2x1ZGVkIGluIHRoZSBub3JtYWwgZm9ybSBvZgpwYWNrYWdpbmcgYSBNYWpvciBDb21wb25lbnQsIGJ1dCB3aGljaCBpcyBub3QgcGFydCBvZiB0aGF0IE1ham9yCkNvbXBvbmVudCwgYW5kIChiKSBzZXJ2ZXMgb25seSB0byBlbmFibGUgdXNlIG9mIHRoZSB3b3JrIHdpdGggdGhhdApNYWpvciBDb21wb25lbnQsIG9yIHRvIGltcGxlbWVudCBhIFN0YW5kYXJkIEludGVyZmFjZSBmb3Igd2hpY2ggYW4KaW1wbGVtZW50YXRpb24gaXMgYXZhaWxhYmxlIHRvIHRoZSBwdWJsaWMgaW4gc291cmNlIGNvZGUgZm9ybS4gIEEKIk1ham9yIENvbXBvbmVudCIsIGluIHRoaXMgY29udGV4dCwgbWVhbnMgYSBtYWpvciBlc3NlbnRpYWwgY29tcG9uZW50CihrZXJuZWwsIHdpbmRvdyBzeXN0ZW0sIGFuZCBzbyBvbikgb2YgdGhlIHNwZWNpZmljIG9wZXJhdGluZyBzeXN0ZW0KKGlmIGFueSkgb24gd2hpY2ggdGhlIGV4ZWN1dGFibGUgd29yayBydW5zLCBvciBhIGNvbXBpbGVyIHVzZWQgdG8KcHJvZHVjZSB0aGUgd29yaywgb3IgYW4gb2JqZWN0IGNvZGUgaW50ZXJwcmV0ZXIgdXNlZCB0byBydW4gaXQuCgogIFRoZSAiQ29ycmVzcG9uZGluZyBTb3VyY2UiIGZvciBhIHdvcmsgaW4gb2JqZWN0IGNvZGUgZm9ybSBtZWFucyBhbGwKdGhlIHNvdXJjZSBjb2RlIG5lZWRlZCB0byBnZW5lcmF0ZSwgaW5zdGFsbCwgYW5kIChmb3IgYW4gZXhlY3V0YWJsZQp3b3JrKSBydW4gdGhlIG9iamVjdCBjb2RlIGFuZCB0byBtb2RpZnkgdGhlIHdvcmssIGluY2x1ZGluZyBzY3JpcHRzIHRvCmNvbnRyb2wgdGhvc2UgYWN0aXZpdGllcy4gIEhvd2V2ZXIsIGl0IGRvZXMgbm90IGluY2x1ZGUgdGhlIHdvcmsncwpTeXN0ZW0gTGlicmFyaWVzLCBvciBnZW5lcmFsLXB1cnBvc2UgdG9vbHMgb3IgZ2VuZXJhbGx5IGF2YWlsYWJsZSBmcmVlCnByb2dyYW1zIHdoaWNoIGFyZSB1c2VkIHVubW9kaWZpZWQgaW4gcGVyZm9ybWluZyB0aG9zZSBhY3Rpdml0aWVzIGJ1dAp3aGljaCBhcmUgbm90IHBhcnQgb2YgdGhlIHdvcmsuICBGb3IgZXhhbXBsZSwgQ29ycmVzcG9uZGluZyBTb3VyY2UKaW5jbHVkZXMgaW50ZXJmYWNlIGRlZmluaXRpb24gZmlsZXMgYXNzb2NpYXRlZCB3aXRoIHNvdXJjZSBmaWxlcyBmb3IKdGhlIHdvcmssIGFuZCB0aGUgc291cmNlIGNvZGUgZm9yIHNoYXJlZCBsaWJyYXJpZXMgYW5kIGR5bmFtaWNhbGx5CmxpbmtlZCBzdWJwcm9ncmFtcyB0aGF0IHRoZSB3b3JrIGlzIHNwZWNpZmljYWxseSBkZXNpZ25lZCB0byByZXF1aXJlLApzdWNoIGFzIGJ5IGludGltYXRlIGRhdGEgY29tbXVuaWNhdGlvbiBvciBjb250cm9sIGZsb3cgYmV0d2VlbiB0aG9zZQpzdWJwcm9ncmFtcyBhbmQgb3RoZXIgcGFydHMgb2YgdGhlIHdvcmsuCgogIFRoZSBDb3JyZXNwb25kaW5nIFNvdXJjZSBuZWVkIG5vdCBpbmNsdWRlIGFueXRoaW5nIHRoYXQgdXNlcnMKY2FuIHJlZ2VuZXJhdGUgYXV0b21hdGljYWxseSBmcm9tIG90aGVyIHBhcnRzIG9mIHRoZSBDb3JyZXNwb25kaW5nClNvdXJjZS4KCiAgVGhlIENvcnJlc3BvbmRpbmcgU291cmNlIGZvciBhIHdvcmsgaW4gc291cmNlIGNvZGUgZm9ybSBpcyB0aGF0CnNhbWUgd29yay4KCiAgMi4gQmFzaWMgUGVybWlzc2lvbnMuCgogIEFsbCByaWdodHMgZ3JhbnRlZCB1bmRlciB0aGlzIExpY2Vuc2UgYXJlIGdyYW50ZWQgZm9yIHRoZSB0ZXJtIG9mCmNvcHlyaWdodCBvbiB0aGUgUHJvZ3JhbSwgYW5kIGFyZSBpcnJldm9jYWJsZSBwcm92aWRlZCB0aGUgc3RhdGVkCmNvbmRpdGlvbnMgYXJlIG1ldC4gIFRoaXMgTGljZW5zZSBleHBsaWNpdGx5IGFmZmlybXMgeW91ciB1bmxpbWl0ZWQKcGVybWlzc2lvbiB0byBydW4gdGhlIHVubW9kaWZpZWQgUHJvZ3JhbS4gIFRoZSBvdXRwdXQgZnJvbSBydW5uaW5nIGEKY292ZXJlZCB3b3JrIGlzIGNvdmVyZWQgYnkgdGhpcyBMaWNlbnNlIG9ubHkgaWYgdGhlIG91dHB1dCwgZ2l2ZW4gaXRzCmNvbnRlbnQsIGNvbnN0aXR1dGVzIGEgY292ZXJlZCB3b3JrLiAgVGhpcyBMaWNlbnNlIGFja25vd2xlZGdlcyB5b3VyCnJpZ2h0cyBvZiBmYWlyIHVzZSBvciBvdGhlciBlcXVpdmFsZW50LCBhcyBwcm92aWRlZCBieSBjb3B5cmlnaHQgbGF3LgoKICBZb3UgbWF5IG1ha2UsIHJ1biBhbmQgcHJvcGFnYXRlIGNvdmVyZWQgd29ya3MgdGhhdCB5b3UgZG8gbm90CmNvbnZleSwgd2l0aG91dCBjb25kaXRpb25zIHNvIGxvbmcgYXMgeW91ciBsaWNlbnNlIG90aGVyd2lzZSByZW1haW5zCmluIGZvcmNlLiAgWW91IG1heSBjb252ZXkgY292ZXJlZCB3b3JrcyB0byBvdGhlcnMgZm9yIHRoZSBzb2xlIHB1cnBvc2UKb2YgaGF2aW5nIHRoZW0gbWFrZSBtb2RpZmljYXRpb25zIGV4Y2x1c2l2ZWx5IGZvciB5b3UsIG9yIHByb3ZpZGUgeW91CndpdGggZmFjaWxpdGllcyBmb3IgcnVubmluZyB0aG9zZSB3b3JrcywgcHJvdmlkZWQgdGhhdCB5b3UgY29tcGx5IHdpdGgKdGhlIHRlcm1zIG9mIHRoaXMgTGljZW5zZSBpbiBjb252ZXlpbmcgYWxsIG1hdGVyaWFsIGZvciB3aGljaCB5b3UgZG8Kbm90IGNvbnRyb2wgY29weXJpZ2h0LiAgVGhvc2UgdGh1cyBtYWtpbmcgb3IgcnVubmluZyB0aGUgY292ZXJlZCB3b3Jrcwpmb3IgeW91IG11c3QgZG8gc28gZXhjbHVzaXZlbHkgb24geW91ciBiZWhhbGYsIHVuZGVyIHlvdXIgZGlyZWN0aW9uCmFuZCBjb250cm9sLCBvbiB0ZXJtcyB0aGF0IHByb2hpYml0IHRoZW0gZnJvbSBtYWtpbmcgYW55IGNvcGllcyBvZgp5b3VyIGNvcHlyaWdodGVkIG1hdGVyaWFsIG91dHNpZGUgdGhlaXIgcmVsYXRpb25zaGlwIHdpdGggeW91LgoKICBDb252ZXlpbmcgdW5kZXIgYW55IG90aGVyIGNpcmN1bXN0YW5jZXMgaXMgcGVybWl0dGVkIHNvbGVseSB1bmRlcgp0aGUgY29uZGl0aW9ucyBzdGF0ZWQgYmVsb3cuICBTdWJsaWNlbnNpbmcgaXMgbm90IGFsbG93ZWQ7IHNlY3Rpb24gMTAKbWFrZXMgaXQgdW5uZWNlc3NhcnkuCgogIDMuIFByb3RlY3RpbmcgVXNlcnMnIExlZ2FsIFJpZ2h0cyBGcm9tIEFudGktQ2lyY3VtdmVudGlvbiBMYXcuCgogIE5vIGNvdmVyZWQgd29yayBzaGFsbCBiZSBkZWVtZWQgcGFydCBvZiBhbiBlZmZlY3RpdmUgdGVjaG5vbG9naWNhbAptZWFzdXJlIHVuZGVyIGFueSBhcHBsaWNhYmxlIGxhdyBmdWxmaWxsaW5nIG9ibGlnYXRpb25zIHVuZGVyIGFydGljbGUKMTEgb2YgdGhlIFdJUE8gY29weXJpZ2h0IHRyZWF0eSBhZG9wdGVkIG9uIDIwIERlY2VtYmVyIDE5OTYsIG9yCnNpbWlsYXIgbGF3cyBwcm9oaWJpdGluZyBvciByZXN0cmljdGluZyBjaXJjdW12ZW50aW9uIG9mIHN1Y2gKbWVhc3VyZXMuCgogIFdoZW4geW91IGNvbnZleSBhIGNvdmVyZWQgd29yaywgeW91IHdhaXZlIGFueSBsZWdhbCBwb3dlciB0byBmb3JiaWQKY2lyY3VtdmVudGlvbiBvZiB0ZWNobm9sb2dpY2FsIG1lYXN1cmVzIHRvIHRoZSBleHRlbnQgc3VjaCBjaXJjdW12ZW50aW9uCmlzIGVmZmVjdGVkIGJ5IGV4ZXJjaXNpbmcgcmlnaHRzIHVuZGVyIHRoaXMgTGljZW5zZSB3aXRoIHJlc3BlY3QgdG8KdGhlIGNvdmVyZWQgd29yaywgYW5kIHlvdSBkaXNjbGFpbSBhbnkgaW50ZW50aW9uIHRvIGxpbWl0IG9wZXJhdGlvbiBvcgptb2RpZmljYXRpb24gb2YgdGhlIHdvcmsgYXMgYSBtZWFucyBvZiBlbmZvcmNpbmcsIGFnYWluc3QgdGhlIHdvcmsncwp1c2VycywgeW91ciBvciB0aGlyZCBwYXJ0aWVzJyBsZWdhbCByaWdodHMgdG8gZm9yYmlkIGNpcmN1bXZlbnRpb24gb2YKdGVjaG5vbG9naWNhbCBtZWFzdXJlcy4KCiAgNC4gQ29udmV5aW5nIFZlcmJhdGltIENvcGllcy4KCiAgWW91IG1heSBjb252ZXkgdmVyYmF0aW0gY29waWVzIG9mIHRoZSBQcm9ncmFtJ3Mgc291cmNlIGNvZGUgYXMgeW91CnJlY2VpdmUgaXQsIGluIGFueSBtZWRpdW0sIHByb3ZpZGVkIHRoYXQgeW91IGNvbnNwaWN1b3VzbHkgYW5kCmFwcHJvcHJpYXRlbHkgcHVibGlzaCBvbiBlYWNoIGNvcHkgYW4gYXBwcm9wcmlhdGUgY29weXJpZ2h0IG5vdGljZTsKa2VlcCBpbnRhY3QgYWxsIG5vdGljZXMgc3RhdGluZyB0aGF0IHRoaXMgTGljZW5zZSBhbmQgYW55Cm5vbi1wZXJtaXNzaXZlIHRlcm1zIGFkZGVkIGluIGFjY29yZCB3aXRoIHNlY3Rpb24gNyBhcHBseSB0byB0aGUgY29kZTsKa2VlcCBpbnRhY3QgYWxsIG5vdGljZXMgb2YgdGhlIGFic2VuY2Ugb2YgYW55IHdhcnJhbnR5OyBhbmQgZ2l2ZSBhbGwKcmVjaXBpZW50cyBhIGNvcHkgb2YgdGhpcyBMaWNlbnNlIGFsb25nIHdpdGggdGhlIFByb2dyYW0uCgogIFlvdSBtYXkgY2hhcmdlIGFueSBwcmljZSBvciBubyBwcmljZSBmb3IgZWFjaCBjb3B5IHRoYXQgeW91IGNvbnZleSwKYW5kIHlvdSBtYXkgb2ZmZXIgc3VwcG9ydCBvciB3YXJyYW50eSBwcm90ZWN0aW9uIGZvciBhIGZlZS4KCiAgNS4gQ29udmV5aW5nIE1vZGlmaWVkIFNvdXJjZSBWZXJzaW9ucy4KCiAgWW91IG1heSBjb252ZXkgYSB3b3JrIGJhc2VkIG9uIHRoZSBQcm9ncmFtLCBvciB0aGUgbW9kaWZpY2F0aW9ucyB0bwpwcm9kdWNlIGl0IGZyb20gdGhlIFByb2dyYW0sIGluIHRoZSBmb3JtIG9mIHNvdXJjZSBjb2RlIHVuZGVyIHRoZQp0ZXJtcyBvZiBzZWN0aW9uIDQsIHByb3ZpZGVkIHRoYXQgeW91IGFsc28gbWVldCBhbGwgb2YgdGhlc2UgY29uZGl0aW9uczoKCiAgICBhKSBUaGUgd29yayBtdXN0IGNhcnJ5IHByb21pbmVudCBub3RpY2VzIHN0YXRpbmcgdGhhdCB5b3UgbW9kaWZpZWQKICAgIGl0LCBhbmQgZ2l2aW5nIGEgcmVsZXZhbnQgZGF0ZS4KCiAgICBiKSBUaGUgd29yayBtdXN0IGNhcnJ5IHByb21pbmVudCBub3RpY2VzIHN0YXRpbmcgdGhhdCBpdCBpcwogICAgcmVsZWFzZWQgdW5kZXIgdGhpcyBMaWNlbnNlIGFuZCBhbnkgY29uZGl0aW9ucyBhZGRlZCB1bmRlciBzZWN0aW9uCiAgICA3LiAgVGhpcyByZXF1aXJlbWVudCBtb2RpZmllcyB0aGUgcmVxdWlyZW1lbnQgaW4gc2VjdGlvbiA0IHRvCiAgICAia2VlcCBpbnRhY3QgYWxsIG5vdGljZXMiLgoKICAgIGMpIFlvdSBtdXN0IGxpY2Vuc2UgdGhlIGVudGlyZSB3b3JrLCBhcyBhIHdob2xlLCB1bmRlciB0aGlzCiAgICBMaWNlbnNlIHRvIGFueW9uZSB3aG8gY29tZXMgaW50byBwb3NzZXNzaW9uIG9mIGEgY29weS4gIFRoaXMKICAgIExpY2Vuc2Ugd2lsbCB0aGVyZWZvcmUgYXBwbHksIGFsb25nIHdpdGggYW55IGFwcGxpY2FibGUgc2VjdGlvbiA3CiAgICBhZGRpdGlvbmFsIHRlcm1zLCB0byB0aGUgd2hvbGUgb2YgdGhlIHdvcmssIGFuZCBhbGwgaXRzIHBhcnRzLAogICAgcmVnYXJkbGVzcyBvZiBob3cgdGhleSBhcmUgcGFja2FnZWQuICBUaGlzIExpY2Vuc2UgZ2l2ZXMgbm8KICAgIHBlcm1pc3Npb24gdG8gbGljZW5zZSB0aGUgd29yayBpbiBhbnkgb3RoZXIgd2F5LCBidXQgaXQgZG9lcyBub3QKICAgIGludmFsaWRhdGUgc3VjaCBwZXJtaXNzaW9uIGlmIHlvdSBoYXZlIHNlcGFyYXRlbHkgcmVjZWl2ZWQgaXQuCgogICAgZCkgSWYgdGhlIHdvcmsgaGFzIGludGVyYWN0aXZlIHVzZXIgaW50ZXJmYWNlcywgZWFjaCBtdXN0IGRpc3BsYXkKICAgIEFwcHJvcHJpYXRlIExlZ2FsIE5vdGljZXM7IGhvd2V2ZXIsIGlmIHRoZSBQcm9ncmFtIGhhcyBpbnRlcmFjdGl2ZQogICAgaW50ZXJmYWNlcyB0aGF0IGRvIG5vdCBkaXNwbGF5IEFwcHJvcHJpYXRlIExlZ2FsIE5vdGljZXMsIHlvdXIKICAgIHdvcmsgbmVlZCBub3QgbWFrZSB0aGVtIGRvIHNvLgoKICBBIGNvbXBpbGF0aW9uIG9mIGEgY292ZXJlZCB3b3JrIHdpdGggb3RoZXIgc2VwYXJhdGUgYW5kIGluZGVwZW5kZW50CndvcmtzLCB3aGljaCBhcmUgbm90IGJ5IHRoZWlyIG5hdHVyZSBleHRlbnNpb25zIG9mIHRoZSBjb3ZlcmVkIHdvcmssCmFuZCB3aGljaCBhcmUgbm90IGNvbWJpbmVkIHdpdGggaXQgc3VjaCBhcyB0byBmb3JtIGEgbGFyZ2VyIHByb2dyYW0sCmluIG9yIG9uIGEgdm9sdW1lIG9mIGEgc3RvcmFnZSBvciBkaXN0cmlidXRpb24gbWVkaXVtLCBpcyBjYWxsZWQgYW4KImFnZ3JlZ2F0ZSIgaWYgdGhlIGNvbXBpbGF0aW9uIGFuZCBpdHMgcmVzdWx0aW5nIGNvcHlyaWdodCBhcmUgbm90CnVzZWQgdG8gbGltaXQgdGhlIGFjY2VzcyBvciBsZWdhbCByaWdodHMgb2YgdGhlIGNvbXBpbGF0aW9uJ3MgdXNlcnMKYmV5b25kIHdoYXQgdGhlIGluZGl2aWR1YWwgd29ya3MgcGVybWl0LiAgSW5jbHVzaW9uIG9mIGEgY292ZXJlZCB3b3JrCmluIGFuIGFnZ3JlZ2F0ZSBkb2VzIG5vdCBjYXVzZSB0aGlzIExpY2Vuc2UgdG8gYXBwbHkgdG8gdGhlIG90aGVyCnBhcnRzIG9mIHRoZSBhZ2dyZWdhdGUuCgogIDYuIENvbnZleWluZyBOb24tU291cmNlIEZvcm1zLgoKICBZb3UgbWF5IGNvbnZleSBhIGNvdmVyZWQgd29yayBpbiBvYmplY3QgY29kZSBmb3JtIHVuZGVyIHRoZSB0ZXJtcwpvZiBzZWN0aW9ucyA0IGFuZCA1LCBwcm92aWRlZCB0aGF0IHlvdSBhbHNvIGNvbnZleSB0aGUKbWFjaGluZS1yZWFkYWJsZSBDb3JyZXNwb25kaW5nIFNvdXJjZSB1bmRlciB0aGUgdGVybXMgb2YgdGhpcyBMaWNlbnNlLAppbiBvbmUgb2YgdGhlc2Ugd2F5czoKCiAgICBhKSBDb252ZXkgdGhlIG9iamVjdCBjb2RlIGluLCBvciBlbWJvZGllZCBpbiwgYSBwaHlzaWNhbCBwcm9kdWN0CiAgICAoaW5jbHVkaW5nIGEgcGh5c2ljYWwgZGlzdHJpYnV0aW9uIG1lZGl1bSksIGFjY29tcGFuaWVkIGJ5IHRoZQogICAgQ29ycmVzcG9uZGluZyBTb3VyY2UgZml4ZWQgb24gYSBkdXJhYmxlIHBoeXNpY2FsIG1lZGl1bQogICAgY3VzdG9tYXJpbHkgdXNlZCBmb3Igc29mdHdhcmUgaW50ZXJjaGFuZ2UuCgogICAgYikgQ29udmV5IHRoZSBvYmplY3QgY29kZSBpbiwgb3IgZW1ib2RpZWQgaW4sIGEgcGh5c2ljYWwgcHJvZHVjdAogICAgKGluY2x1ZGluZyBhIHBoeXNpY2FsIGRpc3RyaWJ1dGlvbiBtZWRpdW0pLCBhY2NvbXBhbmllZCBieSBhCiAgICB3cml0dGVuIG9mZmVyLCB2YWxpZCBmb3IgYXQgbGVhc3QgdGhyZWUgeWVhcnMgYW5kIHZhbGlkIGZvciBhcwogICAgbG9uZyBhcyB5b3Ugb2ZmZXIgc3BhcmUgcGFydHMgb3IgY3VzdG9tZXIgc3VwcG9ydCBmb3IgdGhhdCBwcm9kdWN0CiAgICBtb2RlbCwgdG8gZ2l2ZSBhbnlvbmUgd2hvIHBvc3Nlc3NlcyB0aGUgb2JqZWN0IGNvZGUgZWl0aGVyICgxKSBhCiAgICBjb3B5IG9mIHRoZSBDb3JyZXNwb25kaW5nIFNvdXJjZSBmb3IgYWxsIHRoZSBzb2Z0d2FyZSBpbiB0aGUKICAgIHByb2R1Y3QgdGhhdCBpcyBjb3ZlcmVkIGJ5IHRoaXMgTGljZW5zZSwgb24gYSBkdXJhYmxlIHBoeXNpY2FsCiAgICBtZWRpdW0gY3VzdG9tYXJpbHkgdXNlZCBmb3Igc29mdHdhcmUgaW50ZXJjaGFuZ2UsIGZvciBhIHByaWNlIG5vCiAgICBtb3JlIHRoYW4geW91ciByZWFzb25hYmxlIGNvc3Qgb2YgcGh5c2ljYWxseSBwZXJmb3JtaW5nIHRoaXMKICAgIGNvbnZleWluZyBvZiBzb3VyY2UsIG9yICgyKSBhY2Nlc3MgdG8gY29weSB0aGUKICAgIENvcnJlc3BvbmRpbmcgU291cmNlIGZyb20gYSBuZXR3b3JrIHNlcnZlciBhdCBubyBjaGFyZ2UuCgogICAgYykgQ29udmV5IGluZGl2aWR1YWwgY29waWVzIG9mIHRoZSBvYmplY3QgY29kZSB3aXRoIGEgY29weSBvZiB0aGUKICAgIHdyaXR0ZW4gb2ZmZXIgdG8gcHJvdmlkZSB0aGUgQ29ycmVzcG9uZGluZyBTb3VyY2UuICBUaGlzCiAgICBhbHRlcm5hdGl2ZSBpcyBhbGxvd2VkIG9ubHkgb2NjYXNpb25hbGx5IGFuZCBub25jb21tZXJjaWFsbHksIGFuZAogICAgb25seSBpZiB5b3UgcmVjZWl2ZWQgdGhlIG9iamVjdCBjb2RlIHdpdGggc3VjaCBhbiBvZmZlciwgaW4gYWNjb3JkCiAgICB3aXRoIHN1YnNlY3Rpb24gNmIuCgogICAgZCkgQ29udmV5IHRoZSBvYmplY3QgY29kZSBieSBvZmZlcmluZyBhY2Nlc3MgZnJvbSBhIGRlc2lnbmF0ZWQKICAgIHBsYWNlIChncmF0aXMgb3IgZm9yIGEgY2hhcmdlKSwgYW5kIG9mZmVyIGVxdWl2YWxlbnQgYWNjZXNzIHRvIHRoZQogICAgQ29ycmVzcG9uZGluZyBTb3VyY2UgaW4gdGhlIHNhbWUgd2F5IHRocm91Z2ggdGhlIHNhbWUgcGxhY2UgYXQgbm8KICAgIGZ1cnRoZXIgY2hhcmdlLiAgWW91IG5lZWQgbm90IHJlcXVpcmUgcmVjaXBpZW50cyB0byBjb3B5IHRoZQogICAgQ29ycmVzcG9uZGluZyBTb3VyY2UgYWxvbmcgd2l0aCB0aGUgb2JqZWN0IGNvZGUuICBJZiB0aGUgcGxhY2UgdG8KICAgIGNvcHkgdGhlIG9iamVjdCBjb2RlIGlzIGEgbmV0d29yayBzZXJ2ZXIsIHRoZSBDb3JyZXNwb25kaW5nIFNvdXJjZQogICAgbWF5IGJlIG9uIGEgZGlmZmVyZW50IHNlcnZlciAob3BlcmF0ZWQgYnkgeW91IG9yIGEgdGhpcmQgcGFydHkpCiAgICB0aGF0IHN1cHBvcnRzIGVxdWl2YWxlbnQgY29weWluZyBmYWNpbGl0aWVzLCBwcm92aWRlZCB5b3UgbWFpbnRhaW4KICAgIGNsZWFyIGRpcmVjdGlvbnMgbmV4dCB0byB0aGUgb2JqZWN0IGNvZGUgc2F5aW5nIHdoZXJlIHRvIGZpbmQgdGhlCiAgICBDb3JyZXNwb25kaW5nIFNvdXJjZS4gIFJlZ2FyZGxlc3Mgb2Ygd2hhdCBzZXJ2ZXIgaG9zdHMgdGhlCiAgICBDb3JyZXNwb25kaW5nIFNvdXJjZSwgeW91IHJlbWFpbiBvYmxpZ2F0ZWQgdG8gZW5zdXJlIHRoYXQgaXQgaXMKICAgIGF2YWlsYWJsZSBmb3IgYXMgbG9uZyBhcyBuZWVkZWQgdG8gc2F0aXNmeSB0aGVzZSByZXF1aXJlbWVudHMuCgogICAgZSkgQ29udmV5IHRoZSBvYmplY3QgY29kZSB1c2luZyBwZWVyLXRvLXBlZXIgdHJhbnNtaXNzaW9uLCBwcm92aWRlZAogICAgeW91IGluZm9ybSBvdGhlciBwZWVycyB3aGVyZSB0aGUgb2JqZWN0IGNvZGUgYW5kIENvcnJlc3BvbmRpbmcKICAgIFNvdXJjZSBvZiB0aGUgd29yayBhcmUgYmVpbmcgb2ZmZXJlZCB0byB0aGUgZ2VuZXJhbCBwdWJsaWMgYXQgbm8KICAgIGNoYXJnZSB1bmRlciBzdWJzZWN0aW9uIDZkLgoKICBBIHNlcGFyYWJsZSBwb3J0aW9uIG9mIHRoZSBvYmplY3QgY29kZSwgd2hvc2Ugc291cmNlIGNvZGUgaXMgZXhjbHVkZWQKZnJvbSB0aGUgQ29ycmVzcG9uZGluZyBTb3VyY2UgYXMgYSBTeXN0ZW0gTGlicmFyeSwgbmVlZCBub3QgYmUKaW5jbHVkZWQgaW4gY29udmV5aW5nIHRoZSBvYmplY3QgY29kZSB3b3JrLgoKICBBICJVc2VyIFByb2R1Y3QiIGlzIGVpdGhlciAoMSkgYSAiY29uc3VtZXIgcHJvZHVjdCIsIHdoaWNoIG1lYW5zIGFueQp0YW5naWJsZSBwZXJzb25hbCBwcm9wZXJ0eSB3aGljaCBpcyBub3JtYWxseSB1c2VkIGZvciBwZXJzb25hbCwgZmFtaWx5LApvciBob3VzZWhvbGQgcHVycG9zZXMsIG9yICgyKSBhbnl0aGluZyBkZXNpZ25lZCBvciBzb2xkIGZvciBpbmNvcnBvcmF0aW9uCmludG8gYSBkd2VsbGluZy4gIEluIGRldGVybWluaW5nIHdoZXRoZXIgYSBwcm9kdWN0IGlzIGEgY29uc3VtZXIgcHJvZHVjdCwKZG91YnRmdWwgY2FzZXMgc2hhbGwgYmUgcmVzb2x2ZWQgaW4gZmF2b3Igb2YgY292ZXJhZ2UuICBGb3IgYSBwYXJ0aWN1bGFyCnByb2R1Y3QgcmVjZWl2ZWQgYnkgYSBwYXJ0aWN1bGFyIHVzZXIsICJub3JtYWxseSB1c2VkIiByZWZlcnMgdG8gYQp0eXBpY2FsIG9yIGNvbW1vbiB1c2Ugb2YgdGhhdCBjbGFzcyBvZiBwcm9kdWN0LCByZWdhcmRsZXNzIG9mIHRoZSBzdGF0dXMKb2YgdGhlIHBhcnRpY3VsYXIgdXNlciBvciBvZiB0aGUgd2F5IGluIHdoaWNoIHRoZSBwYXJ0aWN1bGFyIHVzZXIKYWN0dWFsbHkgdXNlcywgb3IgZXhwZWN0cyBvciBpcyBleHBlY3RlZCB0byB1c2UsIHRoZSBwcm9kdWN0LiAgQSBwcm9kdWN0CmlzIGEgY29uc3VtZXIgcHJvZHVjdCByZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhlIHByb2R1Y3QgaGFzIHN1YnN0YW50aWFsCmNvbW1lcmNpYWwsIGluZHVzdHJpYWwgb3Igbm9uLWNvbnN1bWVyIHVzZXMsIHVubGVzcyBzdWNoIHVzZXMgcmVwcmVzZW50CnRoZSBvbmx5IHNpZ25pZmljYW50IG1vZGUgb2YgdXNlIG9mIHRoZSBwcm9kdWN0LgoKICAiSW5zdGFsbGF0aW9uIEluZm9ybWF0aW9uIiBmb3IgYSBVc2VyIFByb2R1Y3QgbWVhbnMgYW55IG1ldGhvZHMsCnByb2NlZHVyZXMsIGF1dGhvcml6YXRpb24ga2V5cywgb3Igb3RoZXIgaW5mb3JtYXRpb24gcmVxdWlyZWQgdG8gaW5zdGFsbAphbmQgZXhlY3V0ZSBtb2RpZmllZCB2ZXJzaW9ucyBvZiBhIGNvdmVyZWQgd29yayBpbiB0aGF0IFVzZXIgUHJvZHVjdCBmcm9tCmEgbW9kaWZpZWQgdmVyc2lvbiBvZiBpdHMgQ29ycmVzcG9uZGluZyBTb3VyY2UuICBUaGUgaW5mb3JtYXRpb24gbXVzdApzdWZmaWNlIHRvIGVuc3VyZSB0aGF0IHRoZSBjb250aW51ZWQgZnVuY3Rpb25pbmcgb2YgdGhlIG1vZGlmaWVkIG9iamVjdApjb2RlIGlzIGluIG5vIGNhc2UgcHJldmVudGVkIG9yIGludGVyZmVyZWQgd2l0aCBzb2xlbHkgYmVjYXVzZQptb2RpZmljYXRpb24gaGFzIGJlZW4gbWFkZS4KCiAgSWYgeW91IGNvbnZleSBhbiBvYmplY3QgY29kZSB3b3JrIHVuZGVyIHRoaXMgc2VjdGlvbiBpbiwgb3Igd2l0aCwgb3IKc3BlY2lmaWNhbGx5IGZvciB1c2UgaW4sIGEgVXNlciBQcm9kdWN0LCBhbmQgdGhlIGNvbnZleWluZyBvY2N1cnMgYXMKcGFydCBvZiBhIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRoZSByaWdodCBvZiBwb3NzZXNzaW9uIGFuZCB1c2Ugb2YgdGhlClVzZXIgUHJvZHVjdCBpcyB0cmFuc2ZlcnJlZCB0byB0aGUgcmVjaXBpZW50IGluIHBlcnBldHVpdHkgb3IgZm9yIGEKZml4ZWQgdGVybSAocmVnYXJkbGVzcyBvZiBob3cgdGhlIHRyYW5zYWN0aW9uIGlzIGNoYXJhY3Rlcml6ZWQpLCB0aGUKQ29ycmVzcG9uZGluZyBTb3VyY2UgY29udmV5ZWQgdW5kZXIgdGhpcyBzZWN0aW9uIG11c3QgYmUgYWNjb21wYW5pZWQKYnkgdGhlIEluc3RhbGxhdGlvbiBJbmZvcm1hdGlvbi4gIEJ1dCB0aGlzIHJlcXVpcmVtZW50IGRvZXMgbm90IGFwcGx5CmlmIG5laXRoZXIgeW91IG5vciBhbnkgdGhpcmQgcGFydHkgcmV0YWlucyB0aGUgYWJpbGl0eSB0byBpbnN0YWxsCm1vZGlmaWVkIG9iamVjdCBjb2RlIG9uIHRoZSBVc2VyIFByb2R1Y3QgKGZvciBleGFtcGxlLCB0aGUgd29yayBoYXMKYmVlbiBpbnN0YWxsZWQgaW4gUk9NKS4KCiAgVGhlIHJlcXVpcmVtZW50IHRvIHByb3ZpZGUgSW5zdGFsbGF0aW9uIEluZm9ybWF0aW9uIGRvZXMgbm90IGluY2x1ZGUgYQpyZXF1aXJlbWVudCB0byBjb250aW51ZSB0byBwcm92aWRlIHN1cHBvcnQgc2VydmljZSwgd2FycmFudHksIG9yIHVwZGF0ZXMKZm9yIGEgd29yayB0aGF0IGhhcyBiZWVuIG1vZGlmaWVkIG9yIGluc3RhbGxlZCBieSB0aGUgcmVjaXBpZW50LCBvciBmb3IKdGhlIFVzZXIgUHJvZHVjdCBpbiB3aGljaCBpdCBoYXMgYmVlbiBtb2RpZmllZCBvciBpbnN0YWxsZWQuICBBY2Nlc3MgdG8gYQpuZXR3b3JrIG1heSBiZSBkZW5pZWQgd2hlbiB0aGUgbW9kaWZpY2F0aW9uIGl0c2VsZiBtYXRlcmlhbGx5IGFuZAphZHZlcnNlbHkgYWZmZWN0cyB0aGUgb3BlcmF0aW9uIG9mIHRoZSBuZXR3b3JrIG9yIHZpb2xhdGVzIHRoZSBydWxlcyBhbmQKcHJvdG9jb2xzIGZvciBjb21tdW5pY2F0aW9uIGFjcm9zcyB0aGUgbmV0d29yay4KCiAgQ29ycmVzcG9uZGluZyBTb3VyY2UgY29udmV5ZWQsIGFuZCBJbnN0YWxsYXRpb24gSW5mb3JtYXRpb24gcHJvdmlkZWQsCmluIGFjY29yZCB3aXRoIHRoaXMgc2VjdGlvbiBtdXN0IGJlIGluIGEgZm9ybWF0IHRoYXQgaXMgcHVibGljbHkKZG9jdW1lbnRlZCAoYW5kIHdpdGggYW4gaW1wbGVtZW50YXRpb24gYXZhaWxhYmxlIHRvIHRoZSBwdWJsaWMgaW4Kc291cmNlIGNvZGUgZm9ybSksIGFuZCBtdXN0IHJlcXVpcmUgbm8gc3BlY2lhbCBwYXNzd29yZCBvciBrZXkgZm9yCnVucGFja2luZywgcmVhZGluZyBvciBjb3B5aW5nLgoKICA3LiBBZGRpdGlvbmFsIFRlcm1zLgoKICAiQWRkaXRpb25hbCBwZXJtaXNzaW9ucyIgYXJlIHRlcm1zIHRoYXQgc3VwcGxlbWVudCB0aGUgdGVybXMgb2YgdGhpcwpMaWNlbnNlIGJ5IG1ha2luZyBleGNlcHRpb25zIGZyb20gb25lIG9yIG1vcmUgb2YgaXRzIGNvbmRpdGlvbnMuCkFkZGl0aW9uYWwgcGVybWlzc2lvbnMgdGhhdCBhcmUgYXBwbGljYWJsZSB0byB0aGUgZW50aXJlIFByb2dyYW0gc2hhbGwKYmUgdHJlYXRlZCBhcyB0aG91Z2ggdGhleSB3ZXJlIGluY2x1ZGVkIGluIHRoaXMgTGljZW5zZSwgdG8gdGhlIGV4dGVudAp0aGF0IHRoZXkgYXJlIHZhbGlkIHVuZGVyIGFwcGxpY2FibGUgbGF3LiAgSWYgYWRkaXRpb25hbCBwZXJtaXNzaW9ucwphcHBseSBvbmx5IHRvIHBhcnQgb2YgdGhlIFByb2dyYW0sIHRoYXQgcGFydCBtYXkgYmUgdXNlZCBzZXBhcmF0ZWx5CnVuZGVyIHRob3NlIHBlcm1pc3Npb25zLCBidXQgdGhlIGVudGlyZSBQcm9ncmFtIHJlbWFpbnMgZ292ZXJuZWQgYnkKdGhpcyBMaWNlbnNlIHdpdGhvdXQgcmVnYXJkIHRvIHRoZSBhZGRpdGlvbmFsIHBlcm1pc3Npb25zLgoKICBXaGVuIHlvdSBjb252ZXkgYSBjb3B5IG9mIGEgY292ZXJlZCB3b3JrLCB5b3UgbWF5IGF0IHlvdXIgb3B0aW9uCnJlbW92ZSBhbnkgYWRkaXRpb25hbCBwZXJtaXNzaW9ucyBmcm9tIHRoYXQgY29weSwgb3IgZnJvbSBhbnkgcGFydCBvZgppdC4gIChBZGRpdGlvbmFsIHBlcm1pc3Npb25zIG1heSBiZSB3cml0dGVuIHRvIHJlcXVpcmUgdGhlaXIgb3duCnJlbW92YWwgaW4gY2VydGFpbiBjYXNlcyB3aGVuIHlvdSBtb2RpZnkgdGhlIHdvcmsuKSAgWW91IG1heSBwbGFjZQphZGRpdGlvbmFsIHBlcm1pc3Npb25zIG9uIG1hdGVyaWFsLCBhZGRlZCBieSB5b3UgdG8gYSBjb3ZlcmVkIHdvcmssCmZvciB3aGljaCB5b3UgaGF2ZSBvciBjYW4gZ2l2ZSBhcHByb3ByaWF0ZSBjb3B5cmlnaHQgcGVybWlzc2lvbi4KCiAgTm90d2l0aHN0YW5kaW5nIGFueSBvdGhlciBwcm92aXNpb24gb2YgdGhpcyBMaWNlbnNlLCBmb3IgbWF0ZXJpYWwgeW91CmFkZCB0byBhIGNvdmVyZWQgd29yaywgeW91IG1heSAoaWYgYXV0aG9yaXplZCBieSB0aGUgY29weXJpZ2h0IGhvbGRlcnMgb2YKdGhhdCBtYXRlcmlhbCkgc3VwcGxlbWVudCB0aGUgdGVybXMgb2YgdGhpcyBMaWNlbnNlIHdpdGggdGVybXM6CgogICAgYSkgRGlzY2xhaW1pbmcgd2FycmFudHkgb3IgbGltaXRpbmcgbGlhYmlsaXR5IGRpZmZlcmVudGx5IGZyb20gdGhlCiAgICB0ZXJtcyBvZiBzZWN0aW9ucyAxNSBhbmQgMTYgb2YgdGhpcyBMaWNlbnNlOyBvcgoKICAgIGIpIFJlcXVpcmluZyBwcmVzZXJ2YXRpb24gb2Ygc3BlY2lmaWVkIHJlYXNvbmFibGUgbGVnYWwgbm90aWNlcyBvcgogICAgYXV0aG9yIGF0dHJpYnV0aW9ucyBpbiB0aGF0IG1hdGVyaWFsIG9yIGluIHRoZSBBcHByb3ByaWF0ZSBMZWdhbAogICAgTm90aWNlcyBkaXNwbGF5ZWQgYnkgd29ya3MgY29udGFpbmluZyBpdDsgb3IKCiAgICBjKSBQcm9oaWJpdGluZyBtaXNyZXByZXNlbnRhdGlvbiBvZiB0aGUgb3JpZ2luIG9mIHRoYXQgbWF0ZXJpYWwsIG9yCiAgICByZXF1aXJpbmcgdGhhdCBtb2RpZmllZCB2ZXJzaW9ucyBvZiBzdWNoIG1hdGVyaWFsIGJlIG1hcmtlZCBpbgogICAgcmVhc29uYWJsZSB3YXlzIGFzIGRpZmZlcmVudCBmcm9tIHRoZSBvcmlnaW5hbCB2ZXJzaW9uOyBvcgoKICAgIGQpIExpbWl0aW5nIHRoZSB1c2UgZm9yIHB1YmxpY2l0eSBwdXJwb3NlcyBvZiBuYW1lcyBvZiBsaWNlbnNvcnMgb3IKICAgIGF1dGhvcnMgb2YgdGhlIG1hdGVyaWFsOyBvcgoKICAgIGUpIERlY2xpbmluZyB0byBncmFudCByaWdodHMgdW5kZXIgdHJhZGVtYXJrIGxhdyBmb3IgdXNlIG9mIHNvbWUKICAgIHRyYWRlIG5hbWVzLCB0cmFkZW1hcmtzLCBvciBzZXJ2aWNlIG1hcmtzOyBvcgoKICAgIGYpIFJlcXVpcmluZyBpbmRlbW5pZmljYXRpb24gb2YgbGljZW5zb3JzIGFuZCBhdXRob3JzIG9mIHRoYXQKICAgIG1hdGVyaWFsIGJ5IGFueW9uZSB3aG8gY29udmV5cyB0aGUgbWF0ZXJpYWwgKG9yIG1vZGlmaWVkIHZlcnNpb25zIG9mCiAgICBpdCkgd2l0aCBjb250cmFjdHVhbCBhc3N1bXB0aW9ucyBvZiBsaWFiaWxpdHkgdG8gdGhlIHJlY2lwaWVudCwgZm9yCiAgICBhbnkgbGlhYmlsaXR5IHRoYXQgdGhlc2UgY29udHJhY3R1YWwgYXNzdW1wdGlvbnMgZGlyZWN0bHkgaW1wb3NlIG9uCiAgICB0aG9zZSBsaWNlbnNvcnMgYW5kIGF1dGhvcnMuCgogIEFsbCBvdGhlciBub24tcGVybWlzc2l2ZSBhZGRpdGlvbmFsIHRlcm1zIGFyZSBjb25zaWRlcmVkICJmdXJ0aGVyCnJlc3RyaWN0aW9ucyIgd2l0aGluIHRoZSBtZWFuaW5nIG9mIHNlY3Rpb24gMTAuICBJZiB0aGUgUHJvZ3JhbSBhcyB5b3UKcmVjZWl2ZWQgaXQsIG9yIGFueSBwYXJ0IG9mIGl0LCBjb250YWlucyBhIG5vdGljZSBzdGF0aW5nIHRoYXQgaXQgaXMKZ292ZXJuZWQgYnkgdGhpcyBMaWNlbnNlIGFsb25nIHdpdGggYSB0ZXJtIHRoYXQgaXMgYSBmdXJ0aGVyCnJlc3RyaWN0aW9uLCB5b3UgbWF5IHJlbW92ZSB0aGF0IHRlcm0uICBJZiBhIGxpY2Vuc2UgZG9jdW1lbnQgY29udGFpbnMKYSBmdXJ0aGVyIHJlc3RyaWN0aW9uIGJ1dCBwZXJtaXRzIHJlbGljZW5zaW5nIG9yIGNvbnZleWluZyB1bmRlciB0aGlzCkxpY2Vuc2UsIHlvdSBtYXkgYWRkIHRvIGEgY292ZXJlZCB3b3JrIG1hdGVyaWFsIGdvdmVybmVkIGJ5IHRoZSB0ZXJtcwpvZiB0aGF0IGxpY2Vuc2UgZG9jdW1lbnQsIHByb3ZpZGVkIHRoYXQgdGhlIGZ1cnRoZXIgcmVzdHJpY3Rpb24gZG9lcwpub3Qgc3Vydml2ZSBzdWNoIHJlbGljZW5zaW5nIG9yIGNvbnZleWluZy4KCiAgSWYgeW91IGFkZCB0ZXJtcyB0byBhIGNvdmVyZWQgd29yayBpbiBhY2NvcmQgd2l0aCB0aGlzIHNlY3Rpb24sIHlvdQptdXN0IHBsYWNlLCBpbiB0aGUgcmVsZXZhbnQgc291cmNlIGZpbGVzLCBhIHN0YXRlbWVudCBvZiB0aGUKYWRkaXRpb25hbCB0ZXJtcyB0aGF0IGFwcGx5IHRvIHRob3NlIGZpbGVzLCBvciBhIG5vdGljZSBpbmRpY2F0aW5nCndoZXJlIHRvIGZpbmQgdGhlIGFwcGxpY2FibGUgdGVybXMuCgogIEFkZGl0aW9uYWwgdGVybXMsIHBlcm1pc3NpdmUgb3Igbm9uLXBlcm1pc3NpdmUsIG1heSBiZSBzdGF0ZWQgaW4gdGhlCmZvcm0gb2YgYSBzZXBhcmF0ZWx5IHdyaXR0ZW4gbGljZW5zZSwgb3Igc3RhdGVkIGFzIGV4Y2VwdGlvbnM7CnRoZSBhYm92ZSByZXF1aXJlbWVudHMgYXBwbHkgZWl0aGVyIHdheS4KCiAgOC4gVGVybWluYXRpb24uCgogIFlvdSBtYXkgbm90IHByb3BhZ2F0ZSBvciBtb2RpZnkgYSBjb3ZlcmVkIHdvcmsgZXhjZXB0IGFzIGV4cHJlc3NseQpwcm92aWRlZCB1bmRlciB0aGlzIExpY2Vuc2UuICBBbnkgYXR0ZW1wdCBvdGhlcndpc2UgdG8gcHJvcGFnYXRlIG9yCm1vZGlmeSBpdCBpcyB2b2lkLCBhbmQgd2lsbCBhdXRvbWF0aWNhbGx5IHRlcm1pbmF0ZSB5b3VyIHJpZ2h0cyB1bmRlcgp0aGlzIExpY2Vuc2UgKGluY2x1ZGluZyBhbnkgcGF0ZW50IGxpY2Vuc2VzIGdyYW50ZWQgdW5kZXIgdGhlIHRoaXJkCnBhcmFncmFwaCBvZiBzZWN0aW9uIDExKS4KCiAgSG93ZXZlciwgaWYgeW91IGNlYXNlIGFsbCB2aW9sYXRpb24gb2YgdGhpcyBMaWNlbnNlLCB0aGVuIHlvdXIKbGljZW5zZSBmcm9tIGEgcGFydGljdWxhciBjb3B5cmlnaHQgaG9sZGVyIGlzIHJlaW5zdGF0ZWQgKGEpCnByb3Zpc2lvbmFsbHksIHVubGVzcyBhbmQgdW50aWwgdGhlIGNvcHlyaWdodCBob2xkZXIgZXhwbGljaXRseSBhbmQKZmluYWxseSB0ZXJtaW5hdGVzIHlvdXIgbGljZW5zZSwgYW5kIChiKSBwZXJtYW5lbnRseSwgaWYgdGhlIGNvcHlyaWdodApob2xkZXIgZmFpbHMgdG8gbm90aWZ5IHlvdSBvZiB0aGUgdmlvbGF0aW9uIGJ5IHNvbWUgcmVhc29uYWJsZSBtZWFucwpwcmlvciB0byA2MCBkYXlzIGFmdGVyIHRoZSBjZXNzYXRpb24uCgogIE1vcmVvdmVyLCB5b3VyIGxpY2Vuc2UgZnJvbSBhIHBhcnRpY3VsYXIgY29weXJpZ2h0IGhvbGRlciBpcwpyZWluc3RhdGVkIHBlcm1hbmVudGx5IGlmIHRoZSBjb3B5cmlnaHQgaG9sZGVyIG5vdGlmaWVzIHlvdSBvZiB0aGUKdmlvbGF0aW9uIGJ5IHNvbWUgcmVhc29uYWJsZSBtZWFucywgdGhpcyBpcyB0aGUgZmlyc3QgdGltZSB5b3UgaGF2ZQpyZWNlaXZlZCBub3RpY2Ugb2YgdmlvbGF0aW9uIG9mIHRoaXMgTGljZW5zZSAoZm9yIGFueSB3b3JrKSBmcm9tIHRoYXQKY29weXJpZ2h0IGhvbGRlciwgYW5kIHlvdSBjdXJlIHRoZSB2aW9sYXRpb24gcHJpb3IgdG8gMzAgZGF5cyBhZnRlcgp5b3VyIHJlY2VpcHQgb2YgdGhlIG5vdGljZS4KCiAgVGVybWluYXRpb24gb2YgeW91ciByaWdodHMgdW5kZXIgdGhpcyBzZWN0aW9uIGRvZXMgbm90IHRlcm1pbmF0ZSB0aGUKbGljZW5zZXMgb2YgcGFydGllcyB3aG8gaGF2ZSByZWNlaXZlZCBjb3BpZXMgb3IgcmlnaHRzIGZyb20geW91IHVuZGVyCnRoaXMgTGljZW5zZS4gIElmIHlvdXIgcmlnaHRzIGhhdmUgYmVlbiB0ZXJtaW5hdGVkIGFuZCBub3QgcGVybWFuZW50bHkKcmVpbnN0YXRlZCwgeW91IGRvIG5vdCBxdWFsaWZ5IHRvIHJlY2VpdmUgbmV3IGxpY2Vuc2VzIGZvciB0aGUgc2FtZQptYXRlcmlhbCB1bmRlciBzZWN0aW9uIDEwLgoKICA5LiBBY2NlcHRhbmNlIE5vdCBSZXF1aXJlZCBmb3IgSGF2aW5nIENvcGllcy4KCiAgWW91IGFyZSBub3QgcmVxdWlyZWQgdG8gYWNjZXB0IHRoaXMgTGljZW5zZSBpbiBvcmRlciB0byByZWNlaXZlIG9yCnJ1biBhIGNvcHkgb2YgdGhlIFByb2dyYW0uICBBbmNpbGxhcnkgcHJvcGFnYXRpb24gb2YgYSBjb3ZlcmVkIHdvcmsKb2NjdXJyaW5nIHNvbGVseSBhcyBhIGNvbnNlcXVlbmNlIG9mIHVzaW5nIHBlZXItdG8tcGVlciB0cmFuc21pc3Npb24KdG8gcmVjZWl2ZSBhIGNvcHkgbGlrZXdpc2UgZG9lcyBub3QgcmVxdWlyZSBhY2NlcHRhbmNlLiAgSG93ZXZlciwKbm90aGluZyBvdGhlciB0aGFuIHRoaXMgTGljZW5zZSBncmFudHMgeW91IHBlcm1pc3Npb24gdG8gcHJvcGFnYXRlIG9yCm1vZGlmeSBhbnkgY292ZXJlZCB3b3JrLiAgVGhlc2UgYWN0aW9ucyBpbmZyaW5nZSBjb3B5cmlnaHQgaWYgeW91IGRvCm5vdCBhY2NlcHQgdGhpcyBMaWNlbnNlLiAgVGhlcmVmb3JlLCBieSBtb2RpZnlpbmcgb3IgcHJvcGFnYXRpbmcgYQpjb3ZlcmVkIHdvcmssIHlvdSBpbmRpY2F0ZSB5b3VyIGFjY2VwdGFuY2Ugb2YgdGhpcyBMaWNlbnNlIHRvIGRvIHNvLgoKICAxMC4gQXV0b21hdGljIExpY2Vuc2luZyBvZiBEb3duc3RyZWFtIFJlY2lwaWVudHMuCgogIEVhY2ggdGltZSB5b3UgY29udmV5IGEgY292ZXJlZCB3b3JrLCB0aGUgcmVjaXBpZW50IGF1dG9tYXRpY2FsbHkKcmVjZWl2ZXMgYSBsaWNlbnNlIGZyb20gdGhlIG9yaWdpbmFsIGxpY2Vuc29ycywgdG8gcnVuLCBtb2RpZnkgYW5kCnByb3BhZ2F0ZSB0aGF0IHdvcmssIHN1YmplY3QgdG8gdGhpcyBMaWNlbnNlLiAgWW91IGFyZSBub3QgcmVzcG9uc2libGUKZm9yIGVuZm9yY2luZyBjb21wbGlhbmNlIGJ5IHRoaXJkIHBhcnRpZXMgd2l0aCB0aGlzIExpY2Vuc2UuCgogIEFuICJlbnRpdHkgdHJhbnNhY3Rpb24iIGlzIGEgdHJhbnNhY3Rpb24gdHJhbnNmZXJyaW5nIGNvbnRyb2wgb2YgYW4Kb3JnYW5pemF0aW9uLCBvciBzdWJzdGFudGlhbGx5IGFsbCBhc3NldHMgb2Ygb25lLCBvciBzdWJkaXZpZGluZyBhbgpvcmdhbml6YXRpb24sIG9yIG1lcmdpbmcgb3JnYW5pemF0aW9ucy4gIElmIHByb3BhZ2F0aW9uIG9mIGEgY292ZXJlZAp3b3JrIHJlc3VsdHMgZnJvbSBhbiBlbnRpdHkgdHJhbnNhY3Rpb24sIGVhY2ggcGFydHkgdG8gdGhhdAp0cmFuc2FjdGlvbiB3aG8gcmVjZWl2ZXMgYSBjb3B5IG9mIHRoZSB3b3JrIGFsc28gcmVjZWl2ZXMgd2hhdGV2ZXIKbGljZW5zZXMgdG8gdGhlIHdvcmsgdGhlIHBhcnR5J3MgcHJlZGVjZXNzb3IgaW4gaW50ZXJlc3QgaGFkIG9yIGNvdWxkCmdpdmUgdW5kZXIgdGhlIHByZXZpb3VzIHBhcmFncmFwaCwgcGx1cyBhIHJpZ2h0IHRvIHBvc3Nlc3Npb24gb2YgdGhlCkNvcnJlc3BvbmRpbmcgU291cmNlIG9mIHRoZSB3b3JrIGZyb20gdGhlIHByZWRlY2Vzc29yIGluIGludGVyZXN0LCBpZgp0aGUgcHJlZGVjZXNzb3IgaGFzIGl0IG9yIGNhbiBnZXQgaXQgd2l0aCByZWFzb25hYmxlIGVmZm9ydHMuCgogIFlvdSBtYXkgbm90IGltcG9zZSBhbnkgZnVydGhlciByZXN0cmljdGlvbnMgb24gdGhlIGV4ZXJjaXNlIG9mIHRoZQpyaWdodHMgZ3JhbnRlZCBvciBhZmZpcm1lZCB1bmRlciB0aGlzIExpY2Vuc2UuICBGb3IgZXhhbXBsZSwgeW91IG1heQpub3QgaW1wb3NlIGEgbGljZW5zZSBmZWUsIHJveWFsdHksIG9yIG90aGVyIGNoYXJnZSBmb3IgZXhlcmNpc2Ugb2YKcmlnaHRzIGdyYW50ZWQgdW5kZXIgdGhpcyBMaWNlbnNlLCBhbmQgeW91IG1heSBub3QgaW5pdGlhdGUgbGl0aWdhdGlvbgooaW5jbHVkaW5nIGEgY3Jvc3MtY2xhaW0gb3IgY291bnRlcmNsYWltIGluIGEgbGF3c3VpdCkgYWxsZWdpbmcgdGhhdAphbnkgcGF0ZW50IGNsYWltIGlzIGluZnJpbmdlZCBieSBtYWtpbmcsIHVzaW5nLCBzZWxsaW5nLCBvZmZlcmluZyBmb3IKc2FsZSwgb3IgaW1wb3J0aW5nIHRoZSBQcm9ncmFtIG9yIGFueSBwb3J0aW9uIG9mIGl0LgoKICAxMS4gUGF0ZW50cy4KCiAgQSAiY29udHJpYnV0b3IiIGlzIGEgY29weXJpZ2h0IGhvbGRlciB3aG8gYXV0aG9yaXplcyB1c2UgdW5kZXIgdGhpcwpMaWNlbnNlIG9mIHRoZSBQcm9ncmFtIG9yIGEgd29yayBvbiB3aGljaCB0aGUgUHJvZ3JhbSBpcyBiYXNlZC4gIFRoZQp3b3JrIHRodXMgbGljZW5zZWQgaXMgY2FsbGVkIHRoZSBjb250cmlidXRvcidzICJjb250cmlidXRvciB2ZXJzaW9uIi4KCiAgQSBjb250cmlidXRvcidzICJlc3NlbnRpYWwgcGF0ZW50IGNsYWltcyIgYXJlIGFsbCBwYXRlbnQgY2xhaW1zCm93bmVkIG9yIGNvbnRyb2xsZWQgYnkgdGhlIGNvbnRyaWJ1dG9yLCB3aGV0aGVyIGFscmVhZHkgYWNxdWlyZWQgb3IKaGVyZWFmdGVyIGFjcXVpcmVkLCB0aGF0IHdvdWxkIGJlIGluZnJpbmdlZCBieSBzb21lIG1hbm5lciwgcGVybWl0dGVkCmJ5IHRoaXMgTGljZW5zZSwgb2YgbWFraW5nLCB1c2luZywgb3Igc2VsbGluZyBpdHMgY29udHJpYnV0b3IgdmVyc2lvbiwKYnV0IGRvIG5vdCBpbmNsdWRlIGNsYWltcyB0aGF0IHdvdWxkIGJlIGluZnJpbmdlZCBvbmx5IGFzIGEKY29uc2VxdWVuY2Ugb2YgZnVydGhlciBtb2RpZmljYXRpb24gb2YgdGhlIGNvbnRyaWJ1dG9yIHZlcnNpb24uICBGb3IKcHVycG9zZXMgb2YgdGhpcyBkZWZpbml0aW9uLCAiY29udHJvbCIgaW5jbHVkZXMgdGhlIHJpZ2h0IHRvIGdyYW50CnBhdGVudCBzdWJsaWNlbnNlcyBpbiBhIG1hbm5lciBjb25zaXN0ZW50IHdpdGggdGhlIHJlcXVpcmVtZW50cyBvZgp0aGlzIExpY2Vuc2UuCgogIEVhY2ggY29udHJpYnV0b3IgZ3JhbnRzIHlvdSBhIG5vbi1leGNsdXNpdmUsIHdvcmxkd2lkZSwgcm95YWx0eS1mcmVlCnBhdGVudCBsaWNlbnNlIHVuZGVyIHRoZSBjb250cmlidXRvcidzIGVzc2VudGlhbCBwYXRlbnQgY2xhaW1zLCB0bwptYWtlLCB1c2UsIHNlbGwsIG9mZmVyIGZvciBzYWxlLCBpbXBvcnQgYW5kIG90aGVyd2lzZSBydW4sIG1vZGlmeSBhbmQKcHJvcGFnYXRlIHRoZSBjb250ZW50cyBvZiBpdHMgY29udHJpYnV0b3IgdmVyc2lvbi4KCiAgSW4gdGhlIGZvbGxvd2luZyB0aHJlZSBwYXJhZ3JhcGhzLCBhICJwYXRlbnQgbGljZW5zZSIgaXMgYW55IGV4cHJlc3MKYWdyZWVtZW50IG9yIGNvbW1pdG1lbnQsIGhvd2V2ZXIgZGVub21pbmF0ZWQsIG5vdCB0byBlbmZvcmNlIGEgcGF0ZW50CihzdWNoIGFzIGFuIGV4cHJlc3MgcGVybWlzc2lvbiB0byBwcmFjdGljZSBhIHBhdGVudCBvciBjb3ZlbmFudCBub3QgdG8Kc3VlIGZvciBwYXRlbnQgaW5mcmluZ2VtZW50KS4gIFRvICJncmFudCIgc3VjaCBhIHBhdGVudCBsaWNlbnNlIHRvIGEKcGFydHkgbWVhbnMgdG8gbWFrZSBzdWNoIGFuIGFncmVlbWVudCBvciBjb21taXRtZW50IG5vdCB0byBlbmZvcmNlIGEKcGF0ZW50IGFnYWluc3QgdGhlIHBhcnR5LgoKICBJZiB5b3UgY29udmV5IGEgY292ZXJlZCB3b3JrLCBrbm93aW5nbHkgcmVseWluZyBvbiBhIHBhdGVudCBsaWNlbnNlLAphbmQgdGhlIENvcnJlc3BvbmRpbmcgU291cmNlIG9mIHRoZSB3b3JrIGlzIG5vdCBhdmFpbGFibGUgZm9yIGFueW9uZQp0byBjb3B5LCBmcmVlIG9mIGNoYXJnZSBhbmQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoaXMgTGljZW5zZSwgdGhyb3VnaCBhCnB1YmxpY2x5IGF2YWlsYWJsZSBuZXR3b3JrIHNlcnZlciBvciBvdGhlciByZWFkaWx5IGFjY2Vzc2libGUgbWVhbnMsCnRoZW4geW91IG11c3QgZWl0aGVyICgxKSBjYXVzZSB0aGUgQ29ycmVzcG9uZGluZyBTb3VyY2UgdG8gYmUgc28KYXZhaWxhYmxlLCBvciAoMikgYXJyYW5nZSB0byBkZXByaXZlIHlvdXJzZWxmIG9mIHRoZSBiZW5lZml0IG9mIHRoZQpwYXRlbnQgbGljZW5zZSBmb3IgdGhpcyBwYXJ0aWN1bGFyIHdvcmssIG9yICgzKSBhcnJhbmdlLCBpbiBhIG1hbm5lcgpjb25zaXN0ZW50IHdpdGggdGhlIHJlcXVpcmVtZW50cyBvZiB0aGlzIExpY2Vuc2UsIHRvIGV4dGVuZCB0aGUgcGF0ZW50CmxpY2Vuc2UgdG8gZG93bnN0cmVhbSByZWNpcGllbnRzLiAgIktub3dpbmdseSByZWx5aW5nIiBtZWFucyB5b3UgaGF2ZQphY3R1YWwga25vd2xlZGdlIHRoYXQsIGJ1dCBmb3IgdGhlIHBhdGVudCBsaWNlbnNlLCB5b3VyIGNvbnZleWluZyB0aGUKY292ZXJlZCB3b3JrIGluIGEgY291bnRyeSwgb3IgeW91ciByZWNpcGllbnQncyB1c2Ugb2YgdGhlIGNvdmVyZWQgd29yawppbiBhIGNvdW50cnksIHdvdWxkIGluZnJpbmdlIG9uZSBvciBtb3JlIGlkZW50aWZpYWJsZSBwYXRlbnRzIGluIHRoYXQKY291bnRyeSB0aGF0IHlvdSBoYXZlIHJlYXNvbiB0byBiZWxpZXZlIGFyZSB2YWxpZC4KCiAgSWYsIHB1cnN1YW50IHRvIG9yIGluIGNvbm5lY3Rpb24gd2l0aCBhIHNpbmdsZSB0cmFuc2FjdGlvbiBvcgphcnJhbmdlbWVudCwgeW91IGNvbnZleSwgb3IgcHJvcGFnYXRlIGJ5IHByb2N1cmluZyBjb252ZXlhbmNlIG9mLCBhCmNvdmVyZWQgd29yaywgYW5kIGdyYW50IGEgcGF0ZW50IGxpY2Vuc2UgdG8gc29tZSBvZiB0aGUgcGFydGllcwpyZWNlaXZpbmcgdGhlIGNvdmVyZWQgd29yayBhdXRob3JpemluZyB0aGVtIHRvIHVzZSwgcHJvcGFnYXRlLCBtb2RpZnkKb3IgY29udmV5IGEgc3BlY2lmaWMgY29weSBvZiB0aGUgY292ZXJlZCB3b3JrLCB0aGVuIHRoZSBwYXRlbnQgbGljZW5zZQp5b3UgZ3JhbnQgaXMgYXV0b21hdGljYWxseSBleHRlbmRlZCB0byBhbGwgcmVjaXBpZW50cyBvZiB0aGUgY292ZXJlZAp3b3JrIGFuZCB3b3JrcyBiYXNlZCBvbiBpdC4KCiAgQSBwYXRlbnQgbGljZW5zZSBpcyAiZGlzY3JpbWluYXRvcnkiIGlmIGl0IGRvZXMgbm90IGluY2x1ZGUgd2l0aGluCnRoZSBzY29wZSBvZiBpdHMgY292ZXJhZ2UsIHByb2hpYml0cyB0aGUgZXhlcmNpc2Ugb2YsIG9yIGlzCmNvbmRpdGlvbmVkIG9uIHRoZSBub24tZXhlcmNpc2Ugb2Ygb25lIG9yIG1vcmUgb2YgdGhlIHJpZ2h0cyB0aGF0IGFyZQpzcGVjaWZpY2FsbHkgZ3JhbnRlZCB1bmRlciB0aGlzIExpY2Vuc2UuICBZb3UgbWF5IG5vdCBjb252ZXkgYSBjb3ZlcmVkCndvcmsgaWYgeW91IGFyZSBhIHBhcnR5IHRvIGFuIGFycmFuZ2VtZW50IHdpdGggYSB0aGlyZCBwYXJ0eSB0aGF0IGlzCmluIHRoZSBidXNpbmVzcyBvZiBkaXN0cmlidXRpbmcgc29mdHdhcmUsIHVuZGVyIHdoaWNoIHlvdSBtYWtlIHBheW1lbnQKdG8gdGhlIHRoaXJkIHBhcnR5IGJhc2VkIG9uIHRoZSBleHRlbnQgb2YgeW91ciBhY3Rpdml0eSBvZiBjb252ZXlpbmcKdGhlIHdvcmssIGFuZCB1bmRlciB3aGljaCB0aGUgdGhpcmQgcGFydHkgZ3JhbnRzLCB0byBhbnkgb2YgdGhlCnBhcnRpZXMgd2hvIHdvdWxkIHJlY2VpdmUgdGhlIGNvdmVyZWQgd29yayBmcm9tIHlvdSwgYSBkaXNjcmltaW5hdG9yeQpwYXRlbnQgbGljZW5zZSAoYSkgaW4gY29ubmVjdGlvbiB3aXRoIGNvcGllcyBvZiB0aGUgY292ZXJlZCB3b3JrCmNvbnZleWVkIGJ5IHlvdSAob3IgY29waWVzIG1hZGUgZnJvbSB0aG9zZSBjb3BpZXMpLCBvciAoYikgcHJpbWFyaWx5CmZvciBhbmQgaW4gY29ubmVjdGlvbiB3aXRoIHNwZWNpZmljIHByb2R1Y3RzIG9yIGNvbXBpbGF0aW9ucyB0aGF0CmNvbnRhaW4gdGhlIGNvdmVyZWQgd29yaywgdW5sZXNzIHlvdSBlbnRlcmVkIGludG8gdGhhdCBhcnJhbmdlbWVudCwKb3IgdGhhdCBwYXRlbnQgbGljZW5zZSB3YXMgZ3JhbnRlZCwgcHJpb3IgdG8gMjggTWFyY2ggMjAwNy4KCiAgTm90aGluZyBpbiB0aGlzIExpY2Vuc2Ugc2hhbGwgYmUgY29uc3RydWVkIGFzIGV4Y2x1ZGluZyBvciBsaW1pdGluZwphbnkgaW1wbGllZCBsaWNlbnNlIG9yIG90aGVyIGRlZmVuc2VzIHRvIGluZnJpbmdlbWVudCB0aGF0IG1heQpvdGhlcndpc2UgYmUgYXZhaWxhYmxlIHRvIHlvdSB1bmRlciBhcHBsaWNhYmxlIHBhdGVudCBsYXcuCgogIDEyLiBObyBTdXJyZW5kZXIgb2YgT3RoZXJzJyBGcmVlZG9tLgoKICBJZiBjb25kaXRpb25zIGFyZSBpbXBvc2VkIG9uIHlvdSAod2hldGhlciBieSBjb3VydCBvcmRlciwgYWdyZWVtZW50IG9yCm90aGVyd2lzZSkgdGhhdCBjb250cmFkaWN0IHRoZSBjb25kaXRpb25zIG9mIHRoaXMgTGljZW5zZSwgdGhleSBkbyBub3QKZXhjdXNlIHlvdSBmcm9tIHRoZSBjb25kaXRpb25zIG9mIHRoaXMgTGljZW5zZS4gIElmIHlvdSBjYW5ub3QgY29udmV5IGEKY292ZXJlZCB3b3JrIHNvIGFzIHRvIHNhdGlzZnkgc2ltdWx0YW5lb3VzbHkgeW91ciBvYmxpZ2F0aW9ucyB1bmRlciB0aGlzCkxpY2Vuc2UgYW5kIGFueSBvdGhlciBwZXJ0aW5lbnQgb2JsaWdhdGlvbnMsIHRoZW4gYXMgYSBjb25zZXF1ZW5jZSB5b3UgbWF5Cm5vdCBjb252ZXkgaXQgYXQgYWxsLiAgRm9yIGV4YW1wbGUsIGlmIHlvdSBhZ3JlZSB0byB0ZXJtcyB0aGF0IG9ibGlnYXRlIHlvdQp0byBjb2xsZWN0IGEgcm95YWx0eSBmb3IgZnVydGhlciBjb252ZXlpbmcgZnJvbSB0aG9zZSB0byB3aG9tIHlvdSBjb252ZXkKdGhlIFByb2dyYW0sIHRoZSBvbmx5IHdheSB5b3UgY291bGQgc2F0aXNmeSBib3RoIHRob3NlIHRlcm1zIGFuZCB0aGlzCkxpY2Vuc2Ugd291bGQgYmUgdG8gcmVmcmFpbiBlbnRpcmVseSBmcm9tIGNvbnZleWluZyB0aGUgUHJvZ3JhbS4KCiAgMTMuIFVzZSB3aXRoIHRoZSBHTlUgQWZmZXJvIEdlbmVyYWwgUHVibGljIExpY2Vuc2UuCgogIE5vdHdpdGhzdGFuZGluZyBhbnkgb3RoZXIgcHJvdmlzaW9uIG9mIHRoaXMgTGljZW5zZSwgeW91IGhhdmUKcGVybWlzc2lvbiB0byBsaW5rIG9yIGNvbWJpbmUgYW55IGNvdmVyZWQgd29yayB3aXRoIGEgd29yayBsaWNlbnNlZAp1bmRlciB2ZXJzaW9uIDMgb2YgdGhlIEdOVSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBpbnRvIGEgc2luZ2xlCmNvbWJpbmVkIHdvcmssIGFuZCB0byBjb252ZXkgdGhlIHJlc3VsdGluZyB3b3JrLiAgVGhlIHRlcm1zIG9mIHRoaXMKTGljZW5zZSB3",
"aWxsIGNvbnRpbnVlIHRvIGFwcGx5IHRvIHRoZSBwYXJ0IHdoaWNoIGlzIHRoZSBjb3ZlcmVkIHdvcmssCmJ1dCB0aGUgc3BlY2lhbCByZXF1aXJlbWVudHMgb2YgdGhlIEdOVSBBZmZlcm8gR2VuZXJhbCBQdWJsaWMgTGljZW5zZSwKc2VjdGlvbiAxMywgY29uY2VybmluZyBpbnRlcmFjdGlvbiB0aHJvdWdoIGEgbmV0d29yayB3aWxsIGFwcGx5IHRvIHRoZQpjb21iaW5hdGlvbiBhcyBzdWNoLgoKICAxNC4gUmV2aXNlZCBWZXJzaW9ucyBvZiB0aGlzIExpY2Vuc2UuCgogIFRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24gbWF5IHB1Ymxpc2ggcmV2aXNlZCBhbmQvb3IgbmV3IHZlcnNpb25zIG9mCnRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmcm9tIHRpbWUgdG8gdGltZS4gIFN1Y2ggbmV3IHZlcnNpb25zIHdpbGwKYmUgc2ltaWxhciBpbiBzcGlyaXQgdG8gdGhlIHByZXNlbnQgdmVyc2lvbiwgYnV0IG1heSBkaWZmZXIgaW4gZGV0YWlsIHRvCmFkZHJlc3MgbmV3IHByb2JsZW1zIG9yIGNvbmNlcm5zLgoKICBFYWNoIHZlcnNpb24gaXMgZ2l2ZW4gYSBkaXN0aW5ndWlzaGluZyB2ZXJzaW9uIG51bWJlci4gIElmIHRoZQpQcm9ncmFtIHNwZWNpZmllcyB0aGF0IGEgY2VydGFpbiBudW1iZXJlZCB2ZXJzaW9uIG9mIHRoZSBHTlUgR2VuZXJhbApQdWJsaWMgTGljZW5zZSAib3IgYW55IGxhdGVyIHZlcnNpb24iIGFwcGxpZXMgdG8gaXQsIHlvdSBoYXZlIHRoZQpvcHRpb24gb2YgZm9sbG93aW5nIHRoZSB0ZXJtcyBhbmQgY29uZGl0aW9ucyBlaXRoZXIgb2YgdGhhdCBudW1iZXJlZAp2ZXJzaW9uIG9yIG9mIGFueSBsYXRlciB2ZXJzaW9uIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZQpGb3VuZGF0aW9uLiAgSWYgdGhlIFByb2dyYW0gZG9lcyBub3Qgc3BlY2lmeSBhIHZlcnNpb24gbnVtYmVyIG9mIHRoZQpHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSwgeW91IG1heSBjaG9vc2UgYW55IHZlcnNpb24gZXZlciBwdWJsaXNoZWQKYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi4KCiAgSWYgdGhlIFByb2dyYW0gc3BlY2lmaWVzIHRoYXQgYSBwcm94eSBjYW4gZGVjaWRlIHdoaWNoIGZ1dHVyZQp2ZXJzaW9ucyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgY2FuIGJlIHVzZWQsIHRoYXQgcHJveHkncwpwdWJsaWMgc3RhdGVtZW50IG9mIGFjY2VwdGFuY2Ugb2YgYSB2ZXJzaW9uIHBlcm1hbmVudGx5IGF1dGhvcml6ZXMgeW91CnRvIGNob29zZSB0aGF0IHZlcnNpb24gZm9yIHRoZSBQcm9ncmFtLgoKICBMYXRlciBsaWNlbnNlIHZlcnNpb25zIG1heSBnaXZlIHlvdSBhZGRpdGlvbmFsIG9yIGRpZmZlcmVudApwZXJtaXNzaW9ucy4gIEhvd2V2ZXIsIG5vIGFkZGl0aW9uYWwgb2JsaWdhdGlvbnMgYXJlIGltcG9zZWQgb24gYW55CmF1dGhvciBvciBjb3B5cmlnaHQgaG9sZGVyIGFzIGEgcmVzdWx0IG9mIHlvdXIgY2hvb3NpbmcgdG8gZm9sbG93IGEKbGF0ZXIgdmVyc2lvbi59Cn0KCiMgc3RhIG5hbWVzcGFjZSBlbmQKfQojIE9wZW5TVEEsIFN0YXRpYyBUaW1pbmcgQW5hbHl6ZXIKIyBDb3B5cmlnaHQgKGMpIDIwMjUsIFBhcmFsbGF4IFNvZnR3YXJlLCBJbmMuCiMgCiMgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKIyBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQojIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yCiMgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KIyAKIyBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKIyBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgojIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZQojIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCiMgCiMgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UKIyBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KIyAKIyBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdAojIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4KIyAKIyBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQojIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4KIyAKIyBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLgoKbmFtZXNwYWNlIGV2YWwgc3RhIHsKCmRlZmluZV9jbWRfYXJncyAicmVwb3J0X2RjYWxjIiBcCiAge1stZnJvbSBmcm9tX3Bpbl0gWy10byB0b19waW5dIFstY29ybmVyIGNvcm5lcl0gWy1taW5dIFstbWF4XSBbLWRpZ2l0cyBkaWdpdHNdfQoKcHJvY19yZWRpcmVjdCByZXBvcnRfZGNhbGMgewogIHJlcG9ydF9kY2FsY19jbWQgInJlcG9ydF9kY2FsYyIgJGFyZ3MgIi1kaWdpdHMiCn0KCiMgQWxsb3cgYW55IGNvbWJpbmF0aW9uIG9mIC1mcm9tLy10byBwaW5zLgpwcm9jIHJlcG9ydF9kY2FsY19jbWQgeyBjbWQgY21kX2FyZ3MgZGlnaXRzX2tleSB9IHsKICBnbG9iYWwgc3RhX3JlcG9ydF9kZWZhdWx0X2RpZ2l0cwoKICBwYXJzZV9rZXlfYXJncyAkY21kIGNtZF9hcmdzIFwKICAgIGtleXMgIiRkaWdpdHNfa2V5IC1mcm9tIC10byAtY29ybmVyIiBcCiAgICBmbGFncyB7LW1pbiAtbWF4fQogIHNldCBjb3JuZXIgW3BhcnNlX2Nvcm5lciBrZXlzXQogIHNldCBtaW5fbWF4IFtwYXJzZV9taW5fbWF4X2ZsYWdzIGZsYWdzXQogIGNoZWNrX2FyZ2NfZXEwICRjbWQgJGNtZF9hcmdzCgogIHNldCBkaWdpdHMgJHN0YV9yZXBvcnRfZGVmYXVsdF9kaWdpdHMKICBpZiBbaW5mbyBleGlzdHMga2V5cygkZGlnaXRzX2tleSldIHsKICAgIHNldCBkaWdpdHMgJGtleXMoJGRpZ2l0c19rZXkpCiAgICBjaGVja19wb3NpdGl2ZV9pbnRlZ2VyICRkaWdpdHNfa2V5ICRkaWdpdHMKICB9CiAgaWYge1tpbmZvIGV4aXN0cyBrZXlzKC1mcm9tKV0gJiYgW2luZm8gZXhpc3RzIGtleXMoLXRvKV19IHsKICAgIHNldCBmcm9tX3BpbiBbZ2V0X3BvcnRfcGluX2Vycm9yICJmcm9tX3BpbiIgJGtleXMoLWZyb20pXQogICAgc2V0IHRvX3BpbiBbZ2V0X3BvcnRfcGluX2Vycm9yICJ0b19waW4iICRrZXlzKC10byldCiAgICBmb3JlYWNoIGZyb21fdmVydGV4IFskZnJvbV9waW4gdmVydGljZXNdIHsKICAgICAgZm9yZWFjaCB0b192ZXJ0ZXggWyR0b19waW4gdmVydGljZXNdIHsKCXNldCBpdGVyIFskZnJvbV92ZXJ0ZXggb3V0X2VkZ2VfaXRlcmF0b3JdCgl3aGlsZSB7WyRpdGVyIGhhc19uZXh0XX0gewoJICBzZXQgZWRnZSBbJGl0ZXIgbmV4dF0KCSAgaWYgeyBbJGVkZ2UgdG9dID09ICR0b192ZXJ0ZXggfSB7CgkgICAgcmVwb3J0X2VkZ2VfZGNhbGMgJGVkZ2UgJGNvcm5lciAkbWluX21heCAkZGlnaXRzCgkgIH0KCX0KCSRpdGVyIGZpbmlzaAogICAgICB9CiAgICB9CiAgfSBlbHNlaWYgW2luZm8gZXhpc3RzIGtleXMoLWZyb20pXSB7CiAgICBzZXQgZnJvbV9waW4gW2dldF9wb3J0X3Bpbl9lcnJvciAiZnJvbV9waW4iICRrZXlzKC1mcm9tKV0KICAgIGZvcmVhY2ggZnJvbV92ZXJ0ZXggWyRmcm9tX3BpbiB2ZXJ0aWNlc10gewogICAgICBzZXQgaXRlciBbJGZyb21fdmVydGV4IG91dF9lZGdlX2l0ZXJhdG9yXQogICAgICB3aGlsZSB7WyRpdGVyIGhhc19uZXh0XX0gewoJc2V0IGVkZ2UgWyRpdGVyIG5leHRdCglyZXBvcnRfZWRnZV9kY2FsYyAkZWRnZSAkY29ybmVyICRtaW5fbWF4ICRkaWdpdHMKICAgICAgfQogICAgICAkaXRlciBmaW5pc2gKICAgIH0KICB9IGVsc2VpZiBbaW5mbyBleGlzdHMga2V5cygtdG8pXSB7CiAgICBzZXQgdG9fcGluIFtnZXRfcG9ydF9waW5fZXJyb3IgInRvX3BpbiIgJGtleXMoLXRvKV0KICAgIGZvcmVhY2ggdG9fdmVydGV4IFskdG9fcGluIHZlcnRpY2VzXSB7CiAgICAgIHNldCBpdGVyIFskdG9fdmVydGV4IGluX2VkZ2VfaXRlcmF0b3JdCiAgICAgIHdoaWxlIHtbJGl0ZXIgaGFzX25leHRdfSB7CglzZXQgZWRnZSBbJGl0ZXIgbmV4dF0KCXJlcG9ydF9lZGdlX2RjYWxjICRlZGdlICRjb3JuZXIgJG1pbl9tYXggJGRpZ2l0cwogICAgICB9CiAgICAgICRpdGVyIGZpbmlzaAogICAgfQogIH0KfQoKcHJvYyByZXBvcnRfZWRnZV9kY2FsYyB7IGVkZ2UgY29ybmVyIG1pbl9tYXggZGlnaXRzIH0gewogIHNldCByb2xlIFskZWRnZSByb2xlXQogIGlmIHsgJHJvbGUgIT0gIndpcmUiIH0gewogICAgc2V0IGZyb21fdmVydGV4IFskZWRnZSBmcm9tXQogICAgc2V0IGZyb21fcGluIFskZnJvbV92ZXJ0ZXggcGluXQogICAgc2V0IHRvX3ZlcnRleCBbJGVkZ2UgdG9dCiAgICBzZXQgdG9fcGluIFskdG9fdmVydGV4IHBpbl0KICAgIHNldCBjZWxsIFtbJHRvX3BpbiBpbnN0YW5jZV0gY2VsbF0KICAgIHNldCBsaWJyYXJ5IFskY2VsbCBsaWJyYXJ5XQogICAgIyBGaWx0ZXIgdGltaW5nIGNoZWNrcyBiYXNlZCBvbiBtaW5fbWF4LgogICAgaWYgeyEoKCRtaW5fbWF4ID09ICJtYXgiICYmICRyb2xlID09ICJob2xkIikgXAoJICAgIHx8ICgkbWluX21heD09Im1pbiIgJiYgJHJvbGU9PSJzZXR1cCIpKX0gewogICAgICByZXBvcnRfbGluZSAiTGlicmFyeTogW2dldF9uYW1lICRsaWJyYXJ5XSIKICAgICAgcmVwb3J0X2xpbmUgIkNlbGw6IFtnZXRfbmFtZSAkY2VsbF0iCiAgICAgIHNldCBzZW5zZSBbJGVkZ2Ugc2Vuc2VdCiAgICAgIGlmIHsgJHNlbnNlICE9ICJ1bmtub3duIiB9IHsKICAgICAgICByZXBvcnRfbGluZSAiQXJjIHNlbnNlOiAkc2Vuc2UiCiAgICAgIH0KICAgICAgcmVwb3J0X2xpbmUgIkFyYyB0eXBlOiAkcm9sZSIKCiAgICAgIGZvcmVhY2ggYXJjIFskZWRnZSB0aW1pbmdfYXJjc10gewoJc2V0IGZyb20gW2dldF9uYW1lIFskZnJvbV9waW4gcG9ydF1dCglzZXQgZnJvbV9yZiBbJGFyYyBmcm9tX2VkZ2VdCglzZXQgdG8gW2dldF9uYW1lIFskdG9fcGluIHBvcnRdXQoJc2V0IHRvX3JmIFskYXJjIHRvX2VkZ2VdCglyZXBvcnRfbGluZSAiJGZyb20gJGZyb21fcmYgLT4gJHRvICR0b19yZiIKICAgICAgICByZXBvcnRfbGluZSBbcmVwb3J0X2RlbGF5X2NhbGNfY21kICRlZGdlICRhcmMgJGNvcm5lciAkbWluX21heCAkZGlnaXRzXQoJaWYgeyBbJGVkZ2UgZGVsYXlfYW5ub3RhdGVkICRhcmMgJGNvcm5lciAkbWluX21heF0gfSB7CgkgIHNldCBkZWxheSBbJGVkZ2UgYXJjX2RlbGF5ICRhcmMgJGNvcm5lciAkbWluX21heF0KCSAgcmVwb3J0X2xpbmUgIkFubm90YXRlZCB2YWx1ZSA9IFtmb3JtYXRfdGltZSAkZGVsYXkgJGRpZ2l0c10iCgl9CglyZXBvcnRfbGluZSAiLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uIgoJcmVwb3J0X2xpbmUgIiIKICAgICAgfQogICAgfQogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2hpZGRlbl9jbWRfYXJncyAic2V0X2RlbGF5X2NhbGN1bGF0b3IiIFtkZWxheV9jYWxjX25hbWVzXQoKcHJvYyBzZXRfZGVsYXlfY2FsY3VsYXRvciB7IGFsZyB9IHsKICBpZiB7IFtpc19kZWxheV9jYWxjX25hbWUgJGFsZ10gfSB7CiAgICBzZXRfZGVsYXlfY2FsY3VsYXRvcl9jbWQgJGFsZwogIH0gZWxzZSB7CiAgICBzdGFfZXJyb3IgMTk1ICJkZWxheSBjYWxjdWxhdG9yICRhbGcgbm90IGZvdW5kLiIKICB9Cn0KCmRlZmluZV9jbWRfYXJncyAic2V0X3BvY3Zfc2lnbWFfZmFjdG9yIiB7IGZhY3RvciB9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF9hc3NpZ25lZF9kZWxheSIgXAogIHstY2VsbHwtbmV0IFstcmlzZV0gWy1mYWxsXSBbLWNvcm5lciBjb3JuZXJdIFstbWluXSBbLW1heF1cCiAgICAgWy1mcm9tIGZyb21fcGluc10gWy10byB0b19waW5zXSBkZWxheX0KCiMgQ2hhbmdlIHRoZSBkZWxheSBmb3IgdGltaW5nIGFyY3MgYmV0d2VlbiBmcm9tX3BpbnMgYW5kIHRvX3BpbnMgbWF0Y2hpbmcKIyBvbiBjZWxsIChpbnN0YW5jZSkgb3IgbmV0Lgpwcm9jIHNldF9hc3NpZ25lZF9kZWxheSB7IGFyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgInNldF9hc3NpZ25lZF9kZWxheSIgYXJncyBrZXlzIHstY29ybmVyIC1mcm9tIC10b30gXAogICAgZmxhZ3Mgey1jZWxsIC1uZXQgLXJpc2UgLWZhbGwgLW1heCAtbWlufQogIGNoZWNrX2FyZ2NfZXExICJzZXRfYXNzaWduZWRfZGVsYXkiICRhcmdzCiAgc2V0IGNvcm5lciBbcGFyc2VfY29ybmVyIGtleXNdCiAgc2V0IG1pbl9tYXggW3BhcnNlX21pbl9tYXhfYWxsX2NoZWNrX2ZsYWdzIGZsYWdzXQogIHNldCB0b19yZiBbcGFyc2VfcmlzZV9mYWxsX2ZsYWdzIGZsYWdzXQoKICBpZiBbaW5mbyBleGlzdHMga2V5cygtZnJvbSldIHsKICAgIHNldCBmcm9tX3BpbnMgW2dldF9wb3J0X3BpbnNfZXJyb3IgImZyb21fcGlucyIgJGtleXMoLWZyb20pXQogIH0gZWxzZSB7CiAgICBzdGFfZXJyb3IgMTk2ICJzZXRfYXNzaWduZWRfZGVsYXkgbWlzc2luZyAtZnJvbSBhcmd1bWVudC4iCiAgfQogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC10byldIHsKICAgIHNldCB0b19waW5zIFtnZXRfcG9ydF9waW5zX2Vycm9yICJ0b19waW5zIiAka2V5cygtdG8pXQogIH0gZWxzZSB7CiAgICBzdGFfZXJyb3IgMTgyICJzZXRfYXNzaWduZWRfZGVsYXkgbWlzc2luZyAtdG8gYXJndW1lbnQuIgogIH0KCiAgc2V0IGRlbGF5IFtsaW5kZXggJGFyZ3MgMF0KICBpZiB7IVtzdHJpbmcgaXMgZG91YmxlICRkZWxheV19IHsKICAgIHN0YV9lcnJvciAxODMgInNldF9hc3NpZ25lZF9kZWxheSBkZWxheSBpcyBub3QgYSBmbG9hdC4iCiAgfQogIHNldCBkZWxheSBbdGltZV91aV9zdGEgJGRlbGF5XQoKICBpZiB7W2luZm8gZXhpc3RzIGZsYWdzKC1jZWxsKV0gJiYgW2luZm8gZXhpc3RzIGZsYWdzKC1uZXQpXX0gewogICAgc3RhX2Vycm9yIDE4NCAic2V0X2Fubm90YXRlZF9kZWxheSAtY2VsbCBhbmQgLW5ldCBvcHRpb25zIGFyZSBtdXR1YWxseSBleGNsdWl2ZS4iCiAgfSBlbHNlaWYge1tpbmZvIGV4aXN0cyBmbGFncygtY2VsbCldfSB7CiAgICBpZiB7ICRmcm9tX3BpbnMgIT0ge30gfSB7CiAgICAgIHNldCBpbnN0IFtbbGluZGV4ICRmcm9tX3BpbnMgMF0gaW5zdGFuY2VdCiAgICAgIGZvcmVhY2ggcGluICRmcm9tX3BpbnMgewoJaWYge1skcGluIGluc3RhbmNlXSAhPSAkaW5zdH0gewoJICBzdGFfZXJyb3IgMTg1ICJzZXRfYXNzaWduZWRfZGVsYXkgcGluIFtnZXRfZnVsbF9uYW1lICRwaW5dIGlzIG5vdCBhdHRhY2hlZCB0byBpbnN0YW5jZSBbZ2V0X2Z1bGxfbmFtZSAkaW5zdF0uIgoJfQogICAgICB9CiAgICAgIGZvcmVhY2ggcGluICR0b19waW5zIHsKCWlmIHtbJHBpbiBpbnN0YW5jZV0gIT0gJGluc3R9IHsKCSAgc3RhX2Vycm9yIDE4NiAic2V0X2Fzc2lnbmVkX2RlbGF5IHBpbiBbZ2V0X2Z1bGxfbmFtZSAkcGluXSBpcyBub3QgYXR0YWNoZWQgdG8gaW5zdGFuY2UgW2dldF9mdWxsX25hbWUgJGluc3RdIgoJfQogICAgICB9CiAgICB9CiAgfSBlbHNlaWYgeyFbaW5mbyBleGlzdHMgZmxhZ3MoLW5ldCldfSB7CiAgICBzdGFfZXJyb3IgMTg3ICJzZXRfYXNzaWduZWRfZGVsYXkgLWNlbGwgb3IgLW5ldCByZXF1aXJlZC4iCiAgfQogIGZvcmVhY2ggZnJvbV9waW4gJGZyb21fcGlucyB7CiAgICBzZXQgZnJvbV92ZXJ0aWNlcyBbJGZyb21fcGluIHZlcnRpY2VzXQogICAgc2V0X2Fzc2lnbmVkX2RlbGF5MSBbbGluZGV4ICRmcm9tX3ZlcnRpY2VzIDBdIFwKICAgICAgJHRvX3BpbnMgJHRvX3JmICRjb3JuZXIgJG1pbl9tYXggJGRlbGF5CiAgICBpZiB7IFtsbGVuZ3RoICRmcm9tX3ZlcnRpY2VzXSA9PSAyIH0gewogICAgICBzZXRfYXNzaWduZWRfZGVsYXkxIFtsaW5kZXggJGZyb21fdmVydGljZXMgMV0gXAoJJHRvX3BpbnMgJHRvX3JmICRjb3JuZXIgJG1pbl9tYXggJGRlbGF5CiAgICB9CiAgfQp9Cgpwcm9jIHNldF9hc3NpZ25lZF9kZWxheTEgeyBmcm9tX3ZlcnRleCB0b19waW5zIHRvX3JmIGNvcm5lciBtaW5fbWF4IGRlbGF5IH0gewogIGZvcmVhY2ggdG9fcGluICR0b19waW5zIHsKICAgIHNldCB0b192ZXJ0aWNlcyBbJHRvX3BpbiB2ZXJ0aWNlc10KICAgIHNldF9hc3NpZ25lZF9kZWxheTIgJGZyb21fdmVydGV4IFtsaW5kZXggJHRvX3ZlcnRpY2VzIDBdIFwKICAgICAgJHRvX3JmICRjb3JuZXIgJG1pbl9tYXggJGRlbGF5CiAgICBpZiB7IFtsbGVuZ3RoICR0b192ZXJ0aWNlc10gPT0gMiB9IHsKICAgICAgIyBCaWRpcmVjdCBkcml2ZXIuCiAgICAgIHNldF9hc3NpZ25lZF9kZWxheTIgJGZyb21fdmVydGV4IFtsaW5kZXggJHRvX3ZlcnRpY2VzIDFdIFwKCSR0b19yZiAkY29ybmVyICRtaW5fbWF4ICRkZWxheQogICAgfQogIH0KfQoKcHJvYyBzZXRfYXNzaWduZWRfZGVsYXkyIHtmcm9tX3ZlcnRleCB0b192ZXJ0ZXggdG9fcmYgY29ybmVyIG1pbl9tYXggZGVsYXl9IHsKICBzZXQgbWF0Y2hlZCAwCiAgc2V0IGVkZ2VfaXRlciBbJGZyb21fdmVydGV4IG91dF9lZGdlX2l0ZXJhdG9yXQogIHdoaWxlIHtbJGVkZ2VfaXRlciBoYXNfbmV4dF19IHsKICAgIHNldCBlZGdlIFskZWRnZV9pdGVyIG5leHRdCiAgICBpZiB7IFskZWRnZSB0b10gPT0gJHRvX3ZlcnRleCBcCgkgICAmJiAhW3RpbWluZ19yb2xlX2lzX2NoZWNrIFskZWRnZSByb2xlXV0gfSB7CiAgICAgIGZvcmVhY2ggYXJjIFskZWRnZSB0aW1pbmdfYXJjc10gewoJaWYgeyAkdG9fcmYgPT0gInJpc2VfZmFsbCIgXAoJICAgICAgIHx8ICR0b19yZiBlcSBbJGFyYyB0b19lZGdlX25hbWVdIH0gewoJICBzZXRfYXJjX2RlbGF5ICRlZGdlICRhcmMgJGNvcm5lciAkbWluX21heCAkZGVsYXkKICAgICAgICAgIHNldCBtYXRjaGVkIDEKCX0KICAgICAgfQogICAgfQogIH0KICAkZWRnZV9pdGVyIGZpbmlzaAogIGlmIHsgISRtYXRjaGVkIH0gewogICAgc3RhX2Vycm9yIDE5MyAic2V0X2Fzc2lnbmVkX2RlbGF5IG5vIHRpbWluZyBhcmNzIGZvdW5kIGJldHdlZW4gZnJvbS90byBwaW5zLiIKICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAic2V0X2Fzc2lnbmVkX2NoZWNrIiBcCiAgey1zZXR1cHwtaG9sZHwtcmVjb3Zlcnl8LXJlbW92YWwgWy1yaXNlXSBbLWZhbGxdXAogICAgIFstY29ybmVyIGNvcm5lcl0gWy1taW5dIFstbWF4XVwKICAgICBbLWZyb20gZnJvbV9waW5zXSBbLXRvIHRvX3BpbnNdIFstY2xvY2sgcmlzZXxmYWxsXVwKICAgICBbLWNvbmQgc2RmX2NvbmRdIGNoZWNrX3ZhbHVlfQoKcHJvYyBzZXRfYXNzaWduZWRfY2hlY2sgeyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJzZXRfYXNzaWduZWRfY2hlY2siIGFyZ3MgXAogICAga2V5cyB7LWZyb20gLXRvIC1jb3JuZXIgLWNsb2NrIC1jb25kfSBcCiAgICBmbGFncyB7LXNldHVwIC1ob2xkIC1yZWNvdmVyeSAtcmVtb3ZhbCAtcmlzZSAtZmFsbCAtbWF4IC1taW59CiAgY2hlY2tfYXJnY19lcTEgInNldF9hc3NpZ25lZF9jaGVjayIgJGFyZ3MKCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtZnJvbSldIH0gewogICAgc2V0IGZyb21fcGlucyBbZ2V0X3BvcnRfcGluc19lcnJvciAiZnJvbV9waW5zIiAka2V5cygtZnJvbSldCiAgfSBlbHNlIHsKICAgIHN0YV9lcnJvciAxODggInNldF9hc3NpZ25lZF9jaGVjayBtaXNzaW5nIC1mcm9tIGFyZ3VtZW50LiIKICB9CiAgc2V0IGZyb21fcmYgInJpc2VfZmFsbCIKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1jbG9jayldIH0gewogICAgc2V0IGNsa19hcmcgJGtleXMoLWNsb2NrKQogICAgaWYgeyAkY2xrX2FyZyBlcSAicmlzZSIgXAoJICAgfHwgJGNsa19hcmcgZXEgImZhbGwiIH0gewogICAgICBzZXQgZnJvbV9yZiAkY2xrX2FyZwogICAgfSBlbHNlIHsKICAgICAgc3RhX2Vycm9yIDE4OSAic2V0X2Fzc2lnbmVkX2NoZWNrIC1jbG9jayBtdXN0IGJlIHJpc2Ugb3IgZmFsbC4iCiAgICB9CiAgfQoKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC10byldIH0gewogICAgc2V0IHRvX3BpbnMgW2dldF9wb3J0X3BpbnNfZXJyb3IgInRvX3BpbnMiICRrZXlzKC10byldCiAgfSBlbHNlIHsKICAgIHN0YV9lcnJvciAxOTAgInNldF9hc3NpZ25lZF9jaGVjayBtaXNzaW5nIC10byBhcmd1bWVudC4iCiAgfQogIHNldCB0b19yZiBbcGFyc2VfcmlzZV9mYWxsX2ZsYWdzIGZsYWdzXQogIHNldCBjb3JuZXIgW3BhcnNlX2Nvcm5lciBrZXlzXQogIHNldCBtaW5fbWF4IFtwYXJzZV9taW5fbWF4X2FsbF9jaGVja19mbGFncyBmbGFnc10KCiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLXNldHVwKV0gfSB7CiAgICBzZXQgcm9sZSAic2V0dXAiCiAgfSBlbHNlaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLWhvbGQpXSB9IHsKICAgIHNldCByb2xlICJob2xkIgogIH0gZWxzZWlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1yZWNvdmVyeSldIH0gewogICAgc2V0IHJvbGUgInJlY292ZXJ5IgogIH0gZWxzZWlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1yZW1vdmFsKV0gfSB7CiAgICBzZXQgcm9sZSAicmVtb3ZhbCIKICB9IGVsc2UgewogICAgc3RhX2Vycm9yIDE5MSAic2V0X2Fzc2lnbmVkX2NoZWNrIG1pc3NpbmcgLXNldHVwfC1ob2xkfC1yZWNvdmVyeXwtcmVtb3ZhbCBjaGVjayB0eXBlLi4iCiAgfQogIHNldCBjb25kICIiCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5KC1jb25kKV0gfSB7CiAgICBzZXQgY29uZCAka2V5KC1jb25kKQogIH0KICBzZXQgY2hlY2tfdmFsdWUgW2xpbmRleCAkYXJncyAwXQogIGlmIHsgIVtzdHJpbmcgaXMgZG91YmxlICRjaGVja192YWx1ZV0gfSB7CiAgICBzdGFfZXJyb3IgMTkyICJzZXRfYXNzaWduZWRfY2hlY2sgY2hlY2tfdmFsdWUgaXMgbm90IGEgZmxvYXQuIgogIH0KICBzZXQgY2hlY2tfdmFsdWUgW3RpbWVfdWlfc3RhICRjaGVja192YWx1ZV0KCiAgZm9yZWFjaCBmcm9tX3BpbiAkZnJvbV9waW5zIHsKICAgIHNldCBmcm9tX3ZlcnRpY2VzIFskZnJvbV9waW4gdmVydGljZXNdCiAgICBzZXRfYXNzaWduZWRfY2hlY2sxIFtsaW5kZXggJGZyb21fdmVydGljZXMgMF0gJGZyb21fcmYgXAogICAgICAkdG9fcGlucyAkdG9fcmYgJHJvbGUgJGNvcm5lciAkbWluX21heCAkY29uZCAkY2hlY2tfdmFsdWUKICAgIGlmIHsgW2xsZW5ndGggJGZyb21fdmVydGljZXNdID09IDIgfSB7CiAgICAgIHNldF9hc3NpZ25lZF9jaGVjazEgW2xpbmRleCAkZnJvbV92ZXJ0aWNlcyAxXSAkZnJvbV9yZiBcCgkkdG9fcGlucyAkdG9fcmYgJHJvbGUgJGNvcm5lciAkbWluX21heCAkY29uZCAkY2hlY2tfdmFsdWUKICAgIH0KICB9Cn0KCnByb2Mgc2V0X2Fzc2lnbmVkX2NoZWNrMSB7IGZyb21fdmVydGV4IGZyb21fcmYgdG9fcGlucyB0b19yZiBcCgkJCSAgICAgcm9sZSBjb3JuZXIgbWluX21heCBjb25kIGNoZWNrX3ZhbHVlIH0gewogIGZvcmVhY2ggdG9fcGluICR0b19waW5zIHsKICAgIHNldCB0b192ZXJ0aWNlcyBbJHRvX3BpbiB2ZXJ0aWNlc10KICAgIHNldF9hc3NpZ25lZF9jaGVjazIgJGZyb21fdmVydGV4ICRmcm9tX3JmIFtsaW5kZXggJHRvX3ZlcnRpY2VzIDBdIFwKICAgICAgJHRvX3JmICRyb2xlICRjb3JuZXIgJG1pbl9tYXggJGNvbmQgJGNoZWNrX3ZhbHVlCiAgICBpZiB7IFtsbGVuZ3RoICR0b192ZXJ0aWNlc10gPT0gMiB9IHsKICAgICAgIyBCaWRpcmVjdCBkcml2ZXIuCiAgICAgIHNldF9hc3NpZ25lZF9jaGVjazIgJGZyb21fdmVydGV4ICRmcm9tX3JmIFwKCVtsaW5kZXggJHRvX3ZlcnRpY2VzIDFdICR0b19yZiAkcm9sZSAkY29ybmVyICRtaW5fbWF4IFwKCSRjb25kICRjaGVja192YWx1ZQogICAgfQogIH0KfQoKcHJvYyBzZXRfYXNzaWduZWRfY2hlY2syIHsgZnJvbV92ZXJ0ZXggZnJvbV9yZiB0b192ZXJ0ZXggdG9fcmYgXAoJCQkgICAgIHJvbGUgY29ybmVyIG1pbl9tYXggY29uZCBjaGVja192YWx1ZSB9IHsKICBzZXQgZWRnZV9pdGVyIFskZnJvbV92ZXJ0ZXggb3V0X2VkZ2VfaXRlcmF0b3JdCiAgc2V0IG1hdGNoZWQgMAogIHdoaWxlIHtbJGVkZ2VfaXRlciBoYXNfbmV4dF19IHsKICAgIHNldCBlZGdlIFskZWRnZV9pdGVyIG5leHRdCiAgICBpZiB7IFskZWRnZSB0b10gPT0gJHRvX3ZlcnRleCB9IHsKICAgICAgZm9yZWFjaCBhcmMgWyRlZGdlIHRpbWluZ19hcmNzXSB7CglpZiB7ICgkZnJvbV9yZiBlcSAicmlzZV9mYWxsIiBcCgkJfHwgJGZyb21fcmYgZXEgWyRhcmMgZnJvbV9lZGdlX25hbWVdKSBcCgkgICAgICAgJiYgKCR0b19yZiBlcSAicmlzZV9mYWxsIiBcCgkJICAgICB8fCAkdG9fcmYgZXEgWyRhcmMgdG9fZWRnZV9uYW1lXSkgXAoJICAgICAgICYmIFskYXJjIHJvbGVdIGVxICRyb2xlIFwKCSAgICAgICAmJiAoJGNvbmQgZXEgIiIgfHwgWyRhcmMgc2RmX2NvbmRdIGVxICRjb25kKSB9IHsKCSAgc2V0X2FyY19kZWxheSAkZWRnZSAkYXJjICRjb3JuZXIgJG1pbl9tYXggJGNoZWNrX3ZhbHVlCiAgICAgICAgICBzZXQgbWF0Y2hlZCAxCgl9CiAgICAgIH0KICAgIH0KICB9CiAgJGVkZ2VfaXRlciBmaW5pc2gKICBpZiB7ICEkbWF0Y2hlZCB9IHsKICAgIHN0YV9lcnJvciAxOTQgInNldF9hc3NpZ25lZF9jaGVjayBubyBjaGVjayBhcmNzIGZvdW5kIGJldHdlZW4gZnJvbS90byBwaW5zLiIKICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNhCgpkZWZpbmVfY21kX2FyZ3MgInNldF9hc3NpZ25lZF90cmFuc2l0aW9uIiBcCiAge1stcmlzZV0gWy1mYWxsXSBbLWNvcm5lciBjb3JuZXJdIFstbWluXSBbLW1heF0gc2xldyBwaW5zfQoKIyBDaGFuZ2UgdGhlIHNsZXcgb24gYSBsaXN0IG9mIHBvcnRzLgpwcm9jIHNldF9hc3NpZ25lZF90cmFuc2l0aW9uIHsgYXJncyB9IHsKICBwYXJzZV9rZXlfYXJncyAic2V0X2Fzc2lnbmVkX3RyYW5zaXRpb24iIGFyZ3Mga2V5cyB7LWNvcm5lcn0gXAogICAgZmxhZ3Mgey1yaXNlIC1mYWxsIC1tYXggLW1pbn0KCiAgc2V0IGNvcm5lciBbcGFyc2VfY29ybmVyIGtleXNdCiAgc2V0IG1pbl9tYXggW3BhcnNlX21pbl9tYXhfYWxsX2NoZWNrX2ZsYWdzIGZsYWdzXQogIHNldCB0ciBbcGFyc2VfcmlzZV9mYWxsX2ZsYWdzIGZsYWdzXQogIGNoZWNrX2FyZ2NfZXEyICJzZXRfYXNzaWduZWRfdHJhbnNpdGlvbiIgJGFyZ3MKCiAgc2V0IHNsZXcgW2xpbmRleCAkYXJncyAwXQogIGlmIHshW3N0cmluZyBpcyBkb3VibGUgJHNsZXddfSB7CiAgICBzdGFfZXJyb3IgMjEwICJzZXRfYXNzaWduZWRfdHJhbnNpdGlvbiB0cmFuc2l0aW9uIGlzIG5vdCBhIGZsb2F0LiIKICB9CiAgc2V0IHNsZXcgW3RpbWVfdWlfc3RhICRzbGV3XQogIHNldCBwaW5zIFtnZXRfcG9ydF9waW5zX2Vycm9yICJwaW5zIiBbbGluZGV4ICRhcmdzIDFdXQogIGZvcmVhY2ggcGluICRwaW5zIHsKICAgIHNldCB2ZXJ0aWNlcyBbJHBpbiB2ZXJ0aWNlc10KICAgIHNldCB2ZXJ0ZXggW2xpbmRleCAkdmVydGljZXMgMF0KICAgIHNldF9hbm5vdGF0ZWRfc2xldyAkdmVydGV4ICRjb3JuZXIgJG1pbl9tYXggJHRyICRzbGV3CiAgICBpZiB7IFtsbGVuZ3RoICR2ZXJ0aWNlc10gPT0gMiB9IHsKICAgICAgIyBCaWRpcmVjdCBkcml2ZXIuCiAgICAgIHNldCB2ZXJ0ZXggW2xpbmRleCAkdmVydGljZXMgMV0KICAgICAgc2V0X2Fubm90YXRlZF9zbGV3ICR2ZXJ0ZXggJG1pbl9tYXggJHRyICRzbGV3CiAgICB9CiAgfQp9CgojIHN0YSBuYW1lc3BhY2UgZW5kCn0KIyBPcGVuU1RBLCBTdGF0aWMgVGltaW5nIEFuYWx5emVyCiMgQ29weXJpZ2h0IChjKSAyMDI1LCBQYXJhbGxheCBTb2Z0d2FyZSwgSW5jLgojIAojIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5CiMgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkKIyB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvcgojIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCiMgCiMgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiMgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKIyBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGUKIyBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgojIAojIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCiMgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCiMgCiMgVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QKIyBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiMgCiMgQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUKIyBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiMgCiMgVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4KCiMgR3JhcGggdXRpbGl0aWVzCgpuYW1lc3BhY2UgZXZhbCBzdGEgewoKZGVmaW5lX2NtZF9hcmdzICJyZXBvcnRfZWRnZXMiIHtbLWZyb20gZnJvbV9waW5dIFstdG8gdG9fcGluXX0KCnByb2MgcmVwb3J0X2VkZ2VzIHsgYXJncyB9IHsKICBwYXJzZV9rZXlfYXJncyAicmVwb3J0X2VkZ2VzIiBhcmdzIGtleXMgey1mcm9tIC10b30gZmxhZ3Mge30KICBjaGVja19hcmdjX2VxMCAicmVwb3J0X2VkZ2VzIiAkYXJncwoKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1mcm9tKV0gJiYgW2luZm8gZXhpc3RzIGtleXMoLXRvKV0gfSB7CiAgICBzZXQgZnJvbV9waW4gW2dldF9wb3J0X3Bpbl9lcnJvciAiZnJvbV9waW4iICRrZXlzKC1mcm9tKV0KICAgIHNldCB0b19waW4gW2dldF9wb3J0X3Bpbl9lcnJvciAidG9fcGluIiAka2V5cygtdG8pXQogICAgZm9yZWFjaCBmcm9tX3ZlcnRleCBbJGZyb21fcGluIHZlcnRpY2VzXSB7CiAgICAgIGZvcmVhY2ggdG9fdmVydGV4IFskdG9fcGluIHZlcnRpY2VzXSB7CglyZXBvcnRfZWRnZXNfYmV0d2Vlbl8gJGZyb21fdmVydGV4ICR0b192ZXJ0ZXgKICAgICAgfQogICAgfQogIH0gZWxzZWlmIFtpbmZvIGV4aXN0cyBrZXlzKC1mcm9tKV0gewogICAgc2V0IGZyb21fcGluIFtnZXRfcG9ydF9waW5fZXJyb3IgImZyb21fcGluIiAka2V5cygtZnJvbSldCiAgICBmb3JlYWNoIGZyb21fdmVydGV4IFskZnJvbV9waW4gdmVydGljZXNdIHsKICAgICAgcmVwb3J0X2VkZ2VzXyAkZnJvbV92ZXJ0ZXggb3V0X2VkZ2VfaXRlcmF0b3IgXAoJdmVydGV4X3BvcnRfbmFtZSB2ZXJ0ZXhfcGF0aF9uYW1lCiAgICB9CiAgfSBlbHNlaWYgW2luZm8gZXhpc3RzIGtleXMoLXRvKV0gewogICAgc2V0IHRvX3BpbiBbZ2V0X3BvcnRfcGluX2Vycm9yICJ0b19waW4iICRrZXlzKC10byldCiAgICBmb3JlYWNoIHRvX3ZlcnRleCBbJHRvX3BpbiB2ZXJ0aWNlc10gewogICAgICByZXBvcnRfZWRnZXNfICR0b192ZXJ0ZXggaW5fZWRnZV9pdGVyYXRvciBcCgl2ZXJ0ZXhfcGF0aF9uYW1lIHZlcnRleF9wb3J0X25hbWUKICAgIH0KICB9Cn0KCnByb2MgcmVwb3J0X2VkZ2VzX2JldHdlZW5fIHsgZnJvbV92ZXJ0ZXggdG9fdmVydGV4IH0gewogIHNldCBpdGVyIFskZnJvbV92ZXJ0ZXggb3V0X2VkZ2VfaXRlcmF0b3JdCiAgd2hpbGUge1skaXRlciBoYXNfbmV4dF19IHsKICAgIHNldCBlZGdlIFskaXRlciBuZXh0XQogICAgaWYgeyBbJGVkZ2UgdG9dID09ICR0b192ZXJ0ZXggfSB7CiAgICAgIGlmIHsgWyRlZGdlIHJvbGVdID09ICJ3aXJlIiB9IHsKCXJlcG9ydF9lZGdlXyAkZWRnZSB2ZXJ0ZXhfcGF0aF9uYW1lIHZlcnRleF9wYXRoX25hbWUKICAgICAgfSBlbHNlIHsKCXJlcG9ydF9lZGdlXyAkZWRnZSB2ZXJ0ZXhfcG9ydF9uYW1lIHZlcnRleF9wb3J0X25hbWUKICAgICAgfQogICAgfQogIH0KICAkaXRlciBmaW5pc2gKfQoKcHJvYyByZXBvcnRfZWRnZXNfIHsgdmVydGV4IGl0ZXJfcHJvYyB3aXJlX2Zyb21fbmFtZV9wcm9jIHdpcmVfdG9fbmFtZV9wcm9jIH0gewogICMgRmlyc3QgcmVwb3J0IGVkZ2VzIGludGVybmFsIHRvIHRoZSBkZXZpY2UuCiAgc2V0IGRldmljZV9oZWFkZXIgMAogIHNldCBpdGVyIFskdmVydGV4ICRpdGVyX3Byb2NdCiAgd2hpbGUge1skaXRlciBoYXNfbmV4dF19IHsKICAgIHNldCBlZGdlIFskaXRlciBuZXh0XQogICAgaWYgeyBbJGVkZ2Ugcm9sZV0gIT0gIndpcmUiIH0gewogICAgICBpZiB7ICEkZGV2aWNlX2hlYWRlciB9IHsKCXNldCBwaW4gWyR2ZXJ0ZXggcGluXQoJaWYgeyAhWyRwaW4gaXNfdG9wX2xldmVsX3BvcnRdIH0gewoJICBzZXQgaW5zdCBbJHBpbiBpbnN0YW5jZV0KCX0KCXNldCBkZXZpY2VfaGVhZGVyIDEKICAgICAgfQogICAgICByZXBvcnRfZWRnZV8gJGVkZ2UgdmVydGV4X3BvcnRfbmFtZSB2ZXJ0ZXhfcG9ydF9uYW1lCiAgICB9CiAgfQogICRpdGVyIGZpbmlzaAoKICAjIFRoZW4gd2lyZXMuIAogIHNldCBpdGVyIFskdmVydGV4ICRpdGVyX3Byb2NdCiAgd2hpbGUge1skaXRlciBoYXNfbmV4dF19IHsKICAgIHNldCBlZGdlIFskaXRlciBuZXh0XQogICAgaWYgeyBbJGVkZ2Ugcm9sZV0gPT0gIndpcmUiIH0gewogICAgICByZXBvcnRfZWRnZV8gJGVkZ2UgJHdpcmVfZnJvbV9uYW1lX3Byb2MgJHdpcmVfdG9fbmFtZV9wcm9jCiAgICB9CiAgfQogICRpdGVyIGZpbmlzaAp9Cgpwcm9jIHJlcG9ydF9lZGdlXyB7IGVkZ2UgdmVydGV4X2Zyb21fbmFtZV9wcm9jIHZlcnRleF90b19uYW1lX3Byb2MgfSB7CiAgZ2xvYmFsIHN0YV9yZXBvcnRfZGVmYXVsdF9kaWdpdHMKCiAgc2V0IGxhdGNoX2VuYWJsZSBbJGVkZ2UgbGF0Y2hfZF90b19xX2VuXQogIGlmIHsgJGxhdGNoX2VuYWJsZSAhPSAiIiB9IHsKICAgIHNldCBsYXRjaF9lbmFibGUgIiBlbmFibGUgJGxhdGNoX2VuYWJsZSIKICB9CiAgcmVwb3J0X2xpbmUgIlskdmVydGV4X2Zyb21fbmFtZV9wcm9jIFskZWRnZSBmcm9tXV0gLT4gWyR2ZXJ0ZXhfdG9fbmFtZV9wcm9jIFskZWRnZSB0b11dIFskZWRnZSByb2xlXSRsYXRjaF9lbmFibGUiCgogIHNldCBkaXNhYmxlcyBbZWRnZV9kaXNhYmxlX3JlYXNvbiAkZWRnZV0KICBpZiB7ICRkaXNhYmxlcyAhPSAiIiB9IHsKICAgIHJlcG9ydF9saW5lICIgIERpc2FibGVkIGJ5ICRkaXNhYmxlcyIKICB9CgogIHNldCBjb25kIFskZWRnZSBjb25kXQogIGlmIHsgJGNvbmQgIT0gIiIgfSB7CiAgICByZXBvcnRfbGluZSAiICBDb25kaXRpb246ICRjb25kIgogIH0KCiAgc2V0IG1vZGVfbmFtZSBbJGVkZ2UgbW9kZV9uYW1lXQogIGlmIHsgJG1vZGVfbmFtZSAhPSAiIiB9IHsKICAgIHJlcG9ydF9saW5lICIgIE1vZGU6ICRtb2RlX25hbWUgWyRlZGdlIG1vZGVfdmFsdWVdIgogIH0KCiAgZm9yZWFjaCBhcmMgWyRlZGdlIHRpbWluZ19hcmNzXSB7CiAgICBzZXQgZGVsYXlzIFskZWRnZSBhcmNfZGVsYXlfc3RyaW5ncyAkYXJjICRzdGFfcmVwb3J0X2RlZmF1bHRfZGlnaXRzXQogICAgc2V0IGRlbGF5c19mbXQgW2Zvcm1hdF9kZWxheXMgJGRlbGF5c10KICAgIHNldCBkaXNhYmxlX3JlYXNvbiAiIgogICAgaWYgeyBbdGltaW5nX2FyY19kaXNhYmxlZCAkZWRnZSAkYXJjXSB9IHsKICAgICAgc2V0IGRpc2FibGVfcmVhc29uICIgZGlzYWJsZWQiCiAgICB9CiAgICByZXBvcnRfbGluZSAiICBbJGFyYyBmcm9tX2VkZ2VdIC0+IFskYXJjIHRvX2VkZ2VdICRkZWxheXNfZm10JGRpc2FibGVfcmVhc29uIgogIH0KfQoKIyBTZXBhcmF0ZSBsaXN0IGVsZW1lbnRzIHdpdGggY29sb25zLgpwcm9jIGZvcm1hdF90aW1lcyB7IHZhbHVlcyBkaWdpdHMgfSB7CiAgc2V0IHJlc3VsdCAiIgogIGZvcmVhY2ggdmFsdWUgJHZhbHVlcyB7CiAgICBpZiB7ICRyZXN1bHQgIT0gIiIgfSB7CiAgICAgIGFwcGVuZCByZXN1bHQgIjoiCiAgICB9CiAgICBhcHBlbmQgcmVzdWx0IFtmb3JtYXRfdGltZSAkdmFsdWUgJGRpZ2l0c10KICB9CiAgcmV0dXJuICRyZXN1bHQKfQoKIyBTZXBhcmF0ZSBkZWxheSBsaXN0IGVsZW1lbnRzIHdpdGggY29sb25zLgpwcm9jIGZvcm1hdF9kZWxheXMgeyB2YWx1ZXMgfSB7CiAgc2V0IHJlc3VsdCAiIgogIGZvcmVhY2ggdmFsdWUgJHZhbHVlcyB7CiAgICBpZiB7ICRyZXN1bHQgIT0gIiIgfSB7CiAgICAgIGFwcGVuZCByZXN1bHQgIjoiCiAgICB9CiAgICBhcHBlbmQgcmVzdWx0ICR2YWx1ZQogIH0KICByZXR1cm4gJHJlc3VsdAp9Cgpwcm9jIGVkZ2VfZGlzYWJsZV9yZWFzb24geyBlZGdlIH0gewogIHNldCBkaXNhYmxlcyAiIgogIGlmIFskZWRnZSBpc19kaXNhYmxlZF9jb25zdHJhaW50XSB7CiAgICBhcHBlbmQgZGlzYWJsZXMgImNvbnN0cmFpbnQiCiAgfQogIGlmIFskZWRnZSBpc19kaXNhYmxlZF9jb25zdGFudF0gewogICAgaWYgeyAkZGlzYWJsZXMgIT0gIiIgfSB7IGFwcGVuZCBkaXNhYmxlcyAiLCAiIH0KICAgIGFwcGVuZCBkaXNhYmxlcyAiY29uc3RhbnQiCiAgfQogIGlmIFskZWRnZSBpc19kaXNhYmxlZF9jb25kX2RlZmF1bHRdIHsKICAgIGlmIHsgJGRpc2FibGVzICE9ICIiIH0geyBhcHBlbmQgZGlzYWJsZXMgIiwgIiB9CiAgICBhcHBlbmQgZGlzYWJsZXMgImNvbmRfZGVmYXVsdCIKICB9CiAgaWYgWyRlZGdlIGlzX2Rpc2FibGVkX2xvb3BdIHsKICAgIGlmIHsgJGRpc2FibGVzICE9ICIiIH0geyBhcHBlbmQgZGlzYWJsZXMgIiwgIiB9CiAgICBhcHBlbmQgZGlzYWJsZXMgImxvb3AiCiAgfQogIGlmIFskZWRnZSBpc19kaXNhYmxlZF9iaWRpcmVjdF9pbnN0X3BhdGhdIHsKICAgIGlmIHsgJGRpc2FibGVzICE9ICIiIH0geyBhcHBlbmQgZGlzYWJsZXMgIiwgIiB9CiAgICBhcHBlbmQgZGlzYWJsZXMgImJpZGlyZWN0IGluc3RhbmNlIHBhdGgiCiAgfQogIGlmIFskZWRnZSBpc19kaXNhYmxlZF9iaWRpcmVjdF9uZXRfcGF0aF0gewogICAgaWYgeyAkZGlzYWJsZXMgIT0gIiIgfSB7IGFwcGVuZCBkaXNhYmxlcyAiLCAiIH0KICAgIGFwcGVuZCBkaXNhYmxlcyAiYmlkaXJlY3QgbmV0IHBhdGgiCiAgfQogIGlmIHsgWyRlZGdlIGlzX2Rpc2FibGVkX3ByZXNldF9jbGVhcl0gfSB7CiAgICBpZiB7ICRkaXNhYmxlcyAhPSAiIiB9IHsgYXBwZW5kIGRpc2FibGVzICIsICIgfQogICAgYXBwZW5kIGRpc2FibGVzICJzdGFfcHJlc2V0X2NsZWFyX2FyY3NfZW5hYmxlZCIKICB9CiAgcmV0dXJuICRkaXNhYmxlcwp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInJlcG9ydF9jb25zdGFudCIge3BpbnxpbnN0YW5jZXxuZXR9Cgpwcm9jIHJlcG9ydF9jb25zdGFudCB7IG9iaiB9IHsKICBwYXJzZV9pbnN0X3BvcnRfcGluX25ldF9hcmcgJG9iaiBpbnN0cyBwaW5zIG5ldHMKICBmb3JlYWNoIHBpbiAkcGlucyB7CiAgICByZXBvcnRfcGluX2NvbnN0YW50ICRwaW4KICB9CiAgZm9yZWFjaCBpbnN0ICRpbnN0cyB7CiAgICBzZXQgcGluX2l0ZXIgWyRpbnN0IHBpbl9pdGVyYXRvcl0KICAgIHdoaWxlIHtbJHBpbl9pdGVyIGhhc19uZXh0XX0gewogICAgICBzZXQgcGluIFskcGluX2l0ZXIgbmV4dF0KICAgICAgcmVwb3J0X3Bpbl9jb25zdGFudCAkcGluCiAgICB9CiAgICAkcGluX2l0ZXIgZmluaXNoCiAgfQogIGZvcmVhY2ggbmV0ICRuZXRzIHsKICAgIHNldCBwaW5faXRlciBbJG5ldCBwaW5faXRlcmF0b3JdCiAgICB3aGlsZSB7WyRwaW5faXRlciBoYXNfbmV4dF19IHsKICAgICAgc2V0IHBpbiBbJHBpbl9pdGVyIG5leHRdCiAgICAgIHJlcG9ydF9waW5fY29uc3RhbnQgJHBpbgogICAgfQogICAgJHBpbl9pdGVyIGZpbmlzaAogIH0KfQoKcHJvYyByZXBvcnRfcGluX2NvbnN0YW50IHsgcGluIH0gewogIHNldCBzaW1fdmFsdWUgW3Bpbl9zaW1fbG9naWNfdmFsdWUgJHBpbl0KCiAgc2V0IGNhc2VfdmFsdWUgW3Bpbl9jYXNlX2xvZ2ljX3ZhbHVlICRwaW5dCiAgaWYgeyAkY2FzZV92YWx1ZSAhPSAiWCIgfSB7CiAgICBzZXQgY2FzZSAiIGNhc2U9JGNhc2VfdmFsdWUiCiAgfSBlbHNlIHsKICAgIHNldCBjYXNlICIiCiAgfQogIHNldCBsb2dpY192YWx1ZSBbcGluX2xvZ2ljX3ZhbHVlICRwaW5dCiAgaWYgeyAkbG9naWNfdmFsdWUgIT0gIlgiIH0gewogICAgc2V0IGxvZ2ljICIgbG9naWM9JGxvZ2ljX3ZhbHVlIgogIH0gZWxzZSB7CiAgICBzZXQgbG9naWMgIiIKICB9CiAgcmVwb3J0X2xpbmUgIltwaW5fcHJvcGVydHkgJHBpbiBsaWJfcGluX25hbWVdICRzaW1fdmFsdWUkY2FzZSRsb2dpYyIKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKcHJvY19yZWRpcmVjdCByZXBvcnRfZGlzYWJsZWRfZWRnZXMgewogIGZvcmVhY2ggZWRnZSBbZGlzYWJsZWRfZWRnZXNfc29ydGVkXSB7CiAgICBpZiB7IFskZWRnZSByb2xlXSA9PSAid2lyZSIgfSB7CiAgICAgIHNldCBmcm9tX3Bpbl9uYW1lIFtnZXRfZnVsbF9uYW1lIFtbJGVkZ2UgZnJvbV0gcGluXV0KICAgICAgc2V0IHRvX3Bpbl9uYW1lIFtnZXRfZnVsbF9uYW1lIFtbJGVkZ2UgdG9dIHBpbl1dCiAgICAgIHJlcG9ydF9saW5lICIkZnJvbV9waW5fbmFtZSAkdG9fcGluX25hbWUgW2VkZ2VfZGlzYWJsZV9yZWFzb25fdmVyYm9zZSAkZWRnZV0iCiAgICB9IGVsc2UgewogICAgICBzZXQgZnJvbV9waW4gW1skZWRnZSBmcm9tXSBwaW5dCiAgICAgIHNldCB0b19waW4gW1skZWRnZSB0b10gcGluXQogICAgICBzZXQgaW5zdF9uYW1lIFtnZXRfZnVsbF9uYW1lIFskZnJvbV9waW4gaW5zdGFuY2VdXQogICAgICBzZXQgZnJvbV9wb3J0X25hbWUgW2dldF9uYW1lIFskZnJvbV9waW4gcG9ydF1dCiAgICAgIHNldCB0b19wb3J0X25hbWUgW2dldF9uYW1lIFskdG9fcGluIHBvcnRdXQogICAgICBzZXQgY29uZCBbJGVkZ2UgY29uZF0KICAgICAgaWYgeyAkY29uZCAhPSAiIiB9IHsKCXNldCB3aGVuICIgd2hlbjogJGNvbmQiCiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2V0IHdoZW4gIiIKICAgICAgfQogICAgICByZXBvcnRfbGluZSAiJGluc3RfbmFtZSAkZnJvbV9wb3J0X25hbWUgJHRvX3BvcnRfbmFtZSR3aGVuIFtlZGdlX2Rpc2FibGVfcmVhc29uX3ZlcmJvc2UgJGVkZ2VdIgogICAgfQogIH0KfQoKcHJvYyBlZGdlX2Rpc2FibGVfcmVhc29uX3ZlcmJvc2UgeyBlZGdlIH0gewogIHNldCBkaXNhYmxlcyAiIgogIGlmIHsgWyRlZGdlIGlzX2Rpc2FibGVkX2NvbnN0cmFpbnRdIH0gewogICAgYXBwZW5kIGRpc2FibGVzICJjb25zdHJhaW50IgogIH0KICBpZiB7IFskZWRnZSBpc19kaXNhYmxlZF9jb25zdGFudF0gfSB7CiAgICBpZiB7ICRkaXNhYmxlcyAhPSAiIiB9IHsgYXBwZW5kIGRpc2FibGVzICIsICIgfQogICAgYXBwZW5kIGRpc2FibGVzICJjb25zdGFudCIKICAgIHNldCBzZW5zZSBbJGVkZ2Ugc2ltX3RpbWluZ19zZW5zZV0KICAgIGlmIHsgJHNlbnNlID09ICJwb3NpdGl2ZV91bmF0ZSIgfHwgJHNlbnNlID09ICJuZWdhdGl2ZV91bmF0ZSIgfSB7CiAgICAgIGFwcGVuZCBkaXNhYmxlcyAiICRzZW5zZSIKICAgIH0KICAgIHNldCBjb25zdF9waW5zIFskZWRnZSBkaXNhYmxlZF9jb25zdGFudF9waW5zXQogICAgZm9yZWFjaCBwaW4gW3NvcnRfYnlfZnVsbF9uYW1lICRjb25zdF9waW5zXSB7CiAgICAgIHNldCBwb3J0X25hbWUgW3Bpbl9wcm9wZXJ0eSAkcGluIGxpYl9waW5fbmFtZV0KICAgICAgc2V0IHZhbHVlIFtwaW5fc2ltX2xvZ2ljX3ZhbHVlICRwaW5dCiAgICAgIGFwcGVuZCBkaXNhYmxlcyAiICRwb3J0X25hbWU9JHZhbHVlIgogICAgfQogIH0KICBpZiB7IFskZWRnZSBpc19kaXNhYmxlZF9jb25kX2RlZmF1bHRdIH0gewogICAgaWYgeyAkZGlzYWJsZXMgIT0gIiIgfSB7IGFwcGVuZCBkaXNhYmxlcyAiLCAiIH0KICAgIGFwcGVuZCBkaXNhYmxlcyAiY29uZF9kZWZhdWx0IgogIH0KICBpZiB7IFskZWRnZSBpc19kaXNhYmxlZF9sb29wXSB9IHsKICAgIGlmIHsgJGRpc2FibGVzICE9ICIiIH0geyBhcHBlbmQgZGlzYWJsZXMgIiwgIiB9CiAgICBhcHBlbmQgZGlzYWJsZXMgImxvb3AiCiAgfQogIGlmIHsgWyRlZGdlIGlzX2Rpc2FibGVkX3ByZXNldF9jbGVhcl0gfSB7CiAgICBpZiB7ICRkaXNhYmxlcyAhPSAiIiB9IHsgYXBwZW5kIGRpc2FibGVzICIsICIgfQogICAgYXBwZW5kIGRpc2FibGVzICJ0aW1pbmdfZW5hYmxlX3ByZXNldF9jbGVhcl9hcmNzIgogIH0KICByZXR1cm4gJGRpc2FibGVzCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAicmVwb3J0X3NsZXdzIiB7Wy1jb3JuZXIgY29ybmVyXSBwaW59Cgpwcm9jIHJlcG9ydF9zbGV3cyB7IGFyZ3MgfSB7CiAgZ2xvYmFsIHN0YV9yZXBvcnRfZGVmYXVsdF9kaWdpdHMKCiAgcGFyc2Vfa2V5X2FyZ3MgInJlcG9ydF9zbGV3cyIgYXJncyBrZXlzIHstY29ybmVyfSBmbGFncyB7fQogIGNoZWNrX2FyZ2NfZXExICJyZXBvcnRfc2xld3MiICRhcmdzCgogIHNldCBjb3JuZXIgW3BhcnNlX2Nvcm5lcl9vcl9hbGwga2V5c10KICBzZXQgcGluIFtnZXRfcG9ydF9waW5fZXJyb3IgInBpbiIgW2xpbmRleCAkYXJncyAwXV0KICBzZXQgZGlnaXRzICRzdGFfcmVwb3J0X2RlZmF1bHRfZGlnaXRzCiAgZm9yZWFjaCB2ZXJ0ZXggWyRwaW4gdmVydGljZXNdIHsKICAgIGlmIHsgJGNvcm5lciA9PSAiTlVMTCIgfSB7CiAgICAgIHJlcG9ydF9saW5lICJbdmVydGV4X3BhdGhfbmFtZSAkdmVydGV4XSBbcmlzZV9zaG9ydF9uYW1lXSBbZm9ybWF0X3RpbWUgWyR2ZXJ0ZXggc2xldyByaXNlIG1pbl0gJGRpZ2l0c106W2Zvcm1hdF90aW1lIFskdmVydGV4IHNsZXcgcmlzZSBtYXhdICRkaWdpdHNdIFtmYWxsX3Nob3J0X25hbWVdIFtmb3JtYXRfdGltZSBbJHZlcnRleCBzbGV3IGZhbGwgbWluXSAkZGlnaXRzXTpbZm9ybWF0X3RpbWUgWyR2ZXJ0ZXggc2xldyBmYWxsIG1heF0gJGRpZ2l0c10iCiAgICB9IGVsc2UgewogICAgICByZXBvcnRfbGluZSAiW3ZlcnRleF9wYXRoX25hbWUgJHZlcnRleF0gW3Jpc2Vfc2hvcnRfbmFtZV0gW2Zvcm1hdF90aW1lIFskdmVydGV4IHNsZXdfY29ybmVyIHJpc2UgJGNvcm5lciBtaW5dICRkaWdpdHNdOltmb3JtYXRfdGltZSBbJHZlcnRleCBzbGV3X2Nvcm5lciByaXNlICRjb3JuZXIgbWF4XSAkZGlnaXRzXSBbZmFsbF9zaG9ydF9uYW1lXSBbZm9ybWF0X3RpbWUgWyR2ZXJ0ZXggc2xld19jb3JuZXIgZmFsbCAkY29ybmVyIG1pbl0gJGRpZ2l0c106W2Zvcm1hdF90aW1lIFskdmVydGV4IHNsZXdfY29ybmVyIGZhbGwgJGNvcm5lciBtYXhdICRkaWdpdHNdIgogICAgfQogIH0KfQoKcHJvYyB2ZXJ0ZXhfcGF0aF9uYW1lIHsgdmVydGV4IH0gewogIHNldCBwaW4gWyR2ZXJ0ZXggcGluXQogIHNldCBwaW5fbmFtZSBbZ2V0X2Z1bGxfbmFtZSAkcGluXQogIHJldHVybiBbdmVydGV4X25hbWVfICR2ZXJ0ZXggJHBpbiAkcGluX25hbWVdCn0KCnByb2MgdmVydGV4X3BvcnRfbmFtZSB7IHZlcnRleCB9IHsKICBzZXQgcGluIFskdmVydGV4IHBpbl0KICBzZXQgcGluX25hbWUgW3Bpbl9wcm9wZXJ0eSAkcGluIGxpYl9waW5fbmFtZV0KICByZXR1cm4gW3ZlcnRleF9uYW1lXyAkdmVydGV4ICRwaW4gJHBpbl9uYW1lXQp9CgojIEFwcGVuZCBkcml2ZXIvbG9hZCBmb3IgYmlkaXJlY3QgcGluIHZlcnRpY2VzLgpwcm9jIHZlcnRleF9uYW1lXyB7IHZlcnRleCBwaW4gcGluX25hbWUgfSB7CiAgaWYgeyBbcGluX2RpcmVjdGlvbiAkcGluXSA9PSAiYmlkaXJlY3QiIH0gewogICAgaWYgWyR2ZXJ0ZXggaXNfYmlkaXJlY3RfZHJpdmVyXSB7CiAgICAgIHJldHVybiAiJHBpbl9uYW1lIGRyaXZlciIKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiAiJHBpbl9uYW1lIGxvYWQgICIKICAgIH0KICB9IGVsc2UgewogICAgcmV0dXJuICRwaW5fbmFtZQogIH0KfQoKIyBSZXR1cm4gYSBsaXN0IG9mIGhpZXJhcmNoaWNhbCBwaW5zIGNyb3NzZWQgYnkgYSBncmFwaCBlZGdlLgpwcm9jIGhpZXJfcGluc19jcm9zc2VkX2J5X2VkZ2UgeyBlZGdlIH0gewogIHNldCBmcm9tX3BpbnMgW2hpZXJfcGluc19hYm92ZSBbWyRlZGdlIGZyb21dIHBpbl1dCiAgc2V0IHRvX3BpbnMgW2hpZXJfcGluc19hYm92ZSBbWyRlZGdlIHRvXSBwaW5dXQogIGZvcmVhY2ggcCAkdG9fcGlucyB7IHJlcG9ydF9saW5lIFskcCBwYXRoX25hbWVdIH0KICB3aGlsZSB7IFtsbGVuZ3RoICRmcm9tX3BpbnNdID4gMCBcCgkgICAgJiYgW2xsZW5ndGggJHRvX3BpbnNdID4gMCBcCgkgICAgICAmJiBbbGluZGV4ICRmcm9tX3BpbnMgMF0gPT0gW2xpbmRleCAkdG9fcGlucyAwXSB9IHsKICAgIHNldCBmcm9tX3BpbnMgW2xyYW5nZSAkZnJvbV9waW5zIDEgZW5kXQogICAgc2V0IHRvX3BpbnMgW2xyYW5nZSAkdG9fcGlucyAxIGVuZF0KICB9CiAgcmV0dXJuIFtjb25jYXQgJGZyb21fcGlucyAkdG9fcGluc10KfQoKcHJvYyBoaWVyX3BpbnNfYWJvdmUgeyBwaW4gfSB7CiAgc2V0IHBpbnNfYWJvdmUge30KICBzZXQgaW5zdCBbJHBpbiBpbnN0YW5jZV0KICBzZXQgbmV0IFskcGluIG5ldF0KICBzZXQgcGFyZW50IFskaW5zdCBwYXJlbnRdCiAgd2hpbGUgeyAkcGFyZW50ICE9ICJOVUxMIiB9IHsKICAgIHNldCBmb3VuZCAwCiAgICBzZXQgcGFyZW50X3Bpbl9pdGVyIFskcGFyZW50IHBpbl9pdGVyYXRvcl0KICAgIHdoaWxlIHtbJHBhcmVudF9waW5faXRlciBoYXNfbmV4dF19IHsKICAgICAgc2V0IHBhcmVudF9waW4gWyRwYXJlbnRfcGluX2l0ZXIgbmV4dF0KICAgICAgaWYge1skcGFyZW50X3BpbiBuZXRdID09ICRuZXR9IHsKCXNldCBwaW5zX2Fib3ZlIFtjb25jYXQgW2xpc3QgJHBhcmVudF9waW5dICRwaW5zX2Fib3ZlXQoJc2V0IGZvdW5kIDEKCWJyZWFrCiAgICAgIH0KICAgIH0KICAgICRwYXJlbnRfcGluX2l0ZXIgZmluaXNoCiAgICBpZiB7ICEkZm91bmR9IHsKICAgICAgYnJlYWsKICAgIH0KICAgIHNldCBwYXJlbnQgWyRwYXJlbnQgcGFyZW50XQogIH0KICByZXR1cm4gJHBpbnNfYWJvdmUKfQoKcHJvYyByZXBvcnRfbGV2ZWwgeyBwaW4gfSB7CiAgc2V0IHBpbjEgW2dldF9wb3J0X3Bpbl9lcnJvciAicGluIiAkcGluXQogIGZvcmVhY2ggdmVydGV4IFskcGluMSB2ZXJ0aWNlc10gewogICAgaWYgeyAkdmVydGV4ICE9ICJOVUxMIiB9IHsKICAgICAgcmVwb3J0X2xpbmUgIlt2ZXJ0ZXhfcGF0aF9uYW1lICR2ZXJ0ZXhdIGxldmVsID0gWyR2ZXJ0ZXggbGV2ZWxdIgogICAgfQogIH0KfQoKIyBTaG93IGhvdyBtYW55IHBpbnMgYXJlIGF0IGVhY2ggbGV2ZWwgZnJvbSBhbiBpbnB1dC4KcHJvYyByZXBvcnRfbGV2ZWxfZGlzdHJpYnV0aW9uIHt9IHsKICBzZXQgbWF4X2xldmVsIDAKICBzZXQgaXRlciBbdmVydGV4X2l0ZXJhdG9yXQogIHdoaWxlIHtbJGl0ZXIgaGFzX25leHRdfSB7CiAgICBzZXQgdmVydGV4IFskaXRlciBuZXh0XQogICAgc2V0IGxldmVsIFskdmVydGV4IGxldmVsXQogICAgaWYgeyAkbGV2ZWwgPiAkbWF4X2xldmVsIH0gewogICAgICBzZXQgbWF4X2xldmVsICRsZXZlbAogICAgfQogICAgaWYgW2luZm8gZXhpc3RzIGNvdW50KCRsZXZlbCldIHsKICAgICAgaW5jciBjb3VudCgkbGV2ZWwpCiAgICB9IGVsc2UgewogICAgICBzZXQgY291bnQoJGxldmVsKSAxCiAgICB9CiAgfQogICRpdGVyIGZpbmlzaAoKICByZXBvcnRfbGluZSAibGV2ZWwgIHBpbiBjb3VudCIKICBmb3IgeyBzZXQgbGV2ZWwgMCB9IHsgJGxldmVsIDwgJG1heF9sZXZlbCB9IHsgaW5jciBsZXZlbCB9IHsKICAgIHJlcG9ydF9saW5lICIgICRsZXZlbCAgICAgICRjb3VudCgkbGV2ZWwpIgogIH0KfQoKIyBzdGEgbmFtZXNwYWNlIGVuZAp9CiMgT3BlblNUQSwgU3RhdGljIFRpbWluZyBBbmFseXplcgojIENvcHlyaWdodCAoYykgMjAyNSwgUGFyYWxsYXggU29mdHdhcmUsIEluYy4KIyAKIyBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeQojIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CiMgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3IKIyAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLgojIAojIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAojIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiMgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlCiMgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KIyAKIyBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQojIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LgojIAojIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90CiMgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgojIAojIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlCiMgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgojIAojIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uCgojIExpYmVydHkgY29tbWFuZHMuCgpuYW1lc3BhY2UgZXZhbCBzdGEgewoKZGVmaW5lX2NtZF9hcmdzICJyZWFkX2xpYmVydHkiIFwKICB7Wy1jb3JuZXIgY29ybmVyXSBbLW1pbl0gWy1tYXhdIFstaW5mZXJfbGF0Y2hlc10gZmlsZW5hbWV9Cgpwcm9jX3JlZGlyZWN0IHJlYWRfbGliZXJ0eSB7CiAgcGFyc2Vfa2V5X2FyZ3MgInJlYWRfbGliZXJ0eSIgYXJncyBrZXlzIHstY29ybmVyfSBcCiAgICBmbGFncyB7LW1pbiAtbWF4IC1pbmZlcl9sYXRjaGVzfQogIGNoZWNrX2FyZ2NfZXExICJyZWFkX2xpYmVydHkiICRhcmdzCgogIHNldCBmaWxlbmFtZSBbZmlsZSBuYXRpdmVuYW1lIFtsaW5kZXggJGFyZ3MgMF1dCiAgc2V0IGNvcm5lciBbcGFyc2VfY29ybmVyIGtleXNdCiAgc2V0IG1pbl9tYXggW3BhcnNlX21pbl9tYXhfYWxsX2ZsYWdzIGZsYWdzXQogIHNldCBpbmZlcl9sYXRjaGVzIFtpbmZvIGV4aXN0cyBmbGFncygtaW5mZXJfbGF0Y2hlcyldCiAgcmVhZF9saWJlcnR5X2NtZCAkZmlsZW5hbWUgJGNvcm5lciAkbWluX21heCAkaW5mZXJfbGF0Y2hlcwp9CgojIGZvciByZWdyZXNzaW9uIHRlc3RpbmcKcHJvYyB3cml0ZV9saWJlcnR5IHsgYXJncyB9IHsKICBjaGVja19hcmdjX2VxMiAid3JpdGVfbGliZXJ0eSIgJGFyZ3MKCiAgc2V0IGxpYnJhcnkgW2dldF9saWJlcnR5X2Vycm9yICJsaWJyYXJ5IiBbbGluZGV4ICRhcmdzIDBdXQogIHNldCBmaWxlbmFtZSBbZmlsZSBuYXRpdmVuYW1lIFtsaW5kZXggJGFyZ3MgMV1dCiAgd3JpdGVfbGliZXJ0eV9jbWQgJGxpYnJhcnkgJGZpbGVuYW1lCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAicmVwb3J0X2xpYl9jZWxsIiB7Y2VsbF9uYW1lIFs+IGZpbGVuYW1lXSBbPj4gZmlsZW5hbWVdfQoKcHJvY19yZWRpcmVjdCByZXBvcnRfbGliX2NlbGwgewogIGNoZWNrX2FyZ2NfZXExICJyZXBvcnRfbGliX2NlbGwiICRhcmdzCiAgc2V0IGFyZyBbbGluZGV4ICRhcmdzIDBdCiAgc2V0IGNlbGwgW2dldF9saWJfY2VsbF93YXJuICJsaWJfY2VsbCIgJGFyZ10KICBzZXQgY29ybmVyIFtjbWRfY29ybmVyXQogIGlmIHsgJGNlbGwgIT0gIk5VTEwiIH0gewogICAgcmVwb3J0X2xpYl9jZWxsXyAkY2VsbCAkY29ybmVyCiAgfQp9Cgpwcm9jIHJlcG9ydF9saWJfY2VsbF8geyBjZWxsIGNvcm5lciB9IHsKICBnbG9iYWwgc3RhX3JlcG9ydF9kZWZhdWx0X2RpZ2l0cwoKICBzZXQgbGliIFskY2VsbCBsaWJlcnR5X2xpYnJhcnldCiAgcmVwb3J0X2xpbmUgIkNlbGwgW2dldF9uYW1lICRjZWxsXSIKICByZXBvcnRfbGluZSAiTGlicmFyeSBbZ2V0X25hbWUgJGxpYl0iCiAgc2V0IGZpbGVuYW1lIFtsaWJlcnR5X2NlbGxfcHJvcGVydHkgJGNlbGwgImZpbGVuYW1lIl0KICBpZiB7ICRmaWxlbmFtZSAhPSAiIiB9IHsKICAgIHJlcG9ydF9saW5lICJGaWxlICRmaWxlbmFtZSIKICB9CiAgc2V0IGl0ZXIgWyRjZWxsIGxpYmVydHlfcG9ydF9pdGVyYXRvcl0KICB3aGlsZSB7WyRpdGVyIGhhc19uZXh0XX0gewogICAgc2V0IHBvcnQgWyRpdGVyIG5leHRdCiAgICBpZiB7IFskcG9ydCBpc19idXNdIHx8IFskcG9ydCBpc19idW5kbGVdIH0gewogICAgICByZXBvcnRfbGliX3BvcnQgJHBvcnQgJGNvcm5lcgogICAgICBzZXQgbWVtYmVyX2l0ZXIgWyRwb3J0IG1lbWJlcl9pdGVyYXRvcl0KICAgICAgd2hpbGUgeyBbJG1lbWJlcl9pdGVyIGhhc19uZXh0XSB9IHsKICAgICAgICBzZXQgcG9ydCBbJG1lbWJlcl9pdGVyIG5leHRdCiAgICAgICAgcmVwb3J0X2xpYl9wb3J0ICRwb3J0ICRjb3JuZXIKICAgICAgfQogICAgICAkbWVtYmVyX2l0ZXIgZmluaXNoCiAgICB9IGVsc2VpZiB7ICFbJHBvcnQgaXNfYnVuZGxlX21lbWJlcl0gJiYgIVskcG9ydCBpc19idXNfYml0XSB9IHsKICAgICAgcmVwb3J0X2xpYl9wb3J0ICRwb3J0ICRjb3JuZXIKICAgIH0KICB9CiAgJGl0ZXIgZmluaXNoCn0KCnByb2MgcmVwb3J0X2xpYl9wb3J0IHsgcG9ydCBjb3JuZXIgfSB7CiAgZ2xvYmFsIHN0YV9yZXBvcnRfZGVmYXVsdF9kaWdpdHMKCiAgaWYgeyBbJHBvcnQgaXNfYnVzXSB9IHsKICAgIHNldCBwb3J0X25hbWUgWyRwb3J0IGJ1c19uYW1lXQogIH0gZWxzZSB7CiAgICBzZXQgcG9ydF9uYW1lIFtnZXRfbmFtZSAkcG9ydF0KICB9CiAgc2V0IGluZGVudCAiIgogIGlmIHsgWyRwb3J0IGlzX2J1bmRsZV9tZW1iZXJdIHx8IFskcG9ydCBpc19idXNfYml0XSB9IHsKICAgIHNldCBpbmRlbnQgIiAgIgogIH0KICBzZXQgZW5hYmxlIFskcG9ydCB0cmlzdGF0ZV9lbmFibGVdCiAgaWYgeyAkZW5hYmxlICE9ICIiIH0gewogICAgc2V0IGVuYWJsZSAiIGVuYWJsZT0kZW5hYmxlIgogIH0KICBzZXQgZnVuYyBbJHBvcnQgZnVuY3Rpb25dCiAgaWYgeyAkZnVuYyAhPSAiIiB9IHsKICAgIHNldCBmdW5jICIgZnVuY3Rpb249JGZ1bmMiCiAgfQogIHJlcG9ydF9saW5lICIgJHtpbmRlbnR9JHBvcnRfbmFtZSBbbGliZXJ0eV9wb3J0X2RpcmVjdGlvbiAkcG9ydF0kZW5hYmxlJGZ1bmNbcG9ydF9jYXBhY2l0YW5jZV9zdHIgJHBvcnQgJGNvcm5lciAkc3RhX3JlcG9ydF9kZWZhdWx0X2RpZ2l0c10iCn0KCiMgc3RhIG5hbWVzcGFjZSBlbmQKfQojIE9wZW5TVEEsIFN0YXRpYyBUaW1pbmcgQW5hbHl6ZXIKIyBDb3B5cmlnaHQgKGMpIDIwMjUsIFBhcmFsbGF4IFNvZnR3YXJlLCBJbmMuCiMgCiMgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKIyBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQojIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yCiMgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KIyAKIyBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKIyBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgojIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZQojIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCiMgCiMgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UKIyBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KIyAKIyBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdAojIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4KIyAKIyBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQojIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4KIyAKIyBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLgoKIyBOZXR3b3JrIHJlcG9ydGluZyBjb21tYW5kcy4KCm5hbWVzcGFjZSBldmFsIHN0YSB7CgpkZWZpbmVfY21kX2FyZ3MgInJlcG9ydF9pbnN0YW5jZSIgXAogIHtbLWNvbm5lY3Rpb25zXSBbLXZlcmJvc2VdIGluc3RhbmNlX3BhdGggWz4gZmlsZW5hbWVdIFs+PiBmaWxlbmFtZV19Cgpwcm9jX3JlZGlyZWN0IHJlcG9ydF9pbnN0YW5jZSB7CiAgcGFyc2Vfa2V5X2FyZ3MgInJlcG9ydF9pbnN0YW5jZSIgYXJncyBrZXlzIHt9IGZsYWdzIHstY29ubmVjdGlvbnMgLXZlcmJvc2V9CiAgY2hlY2tfYXJnY19lcTEgInJlcG9ydF9pbnN0YW5jZSIgJGFyZ3MKCiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLWNvbm5lY3Rpb25zKV0gfSB7CiAgICAjIGRlcHJlY2F0ZWQgMjAyNC0wMS0xNwogICAgc3RhX3dhcm4gMjMzICJyZXBvcnRfaW5zdGFuY2UgLWNvbm5lY3Rpb25zIGlzIGRlcHJlY2F0ZWQuIgogIH0KICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtdmVyYm9zZSldIH0gewogICAgIyBkZXByZWNhdGVkIDIwMjQtMDEtMTcKICAgIHN0YV93YXJuIDIzNCAicmVwb3J0X2luc3RhbmNlIC12ZXJib3NlIGlzIGRlcHJlY2F0ZWQuIgogIH0KICBzZXQgaW5zdGFuY2VfcGF0aCBbbGluZGV4ICRhcmdzIDBdCiAgaWYgeyBbaXNfb2JqZWN0ICRpbnN0YW5jZV9wYXRoXSB9IHsKICAgIHNldCBpbnN0YW5jZSAkaW5zdGFuY2VfcGF0aAogIH0gZWxzZSB7CiAgICBzZXQgaW5zdGFuY2UgW2ZpbmRfaW5zdGFuY2UgJGluc3RhbmNlX3BhdGhdCiAgfQogIGlmIHsgJGluc3RhbmNlICE9ICJOVUxMIiB9IHsKICAgIHJlcG9ydF9pbnN0YW5jZTEgJGluc3RhbmNlCiAgfSBlbHNlIHsKICAgIHN0YV9lcnJvciAyMzAgImluc3RhbmNlICRpbnN0YW5jZV9wYXRoIG5vdCBmb3VuZC4iCiAgfQp9Cgpwcm9jIHJlcG9ydF9pbnN0YW5jZTEgeyBpbnN0YW5jZSB9IHsKICBpZiB7ICRpbnN0YW5jZSA9PSBbdG9wX2luc3RhbmNlXSB9IHsKICAgIHNldCBpbnN0X25hbWUgInRvcCIKICB9IGVsc2UgewogICAgc2V0IGluc3RfbmFtZSBbZ2V0X2Z1bGxfbmFtZSAkaW5zdGFuY2VdCiAgfQogIHJlcG9ydF9saW5lICJJbnN0YW5jZSAkaW5zdF9uYW1lIgogIHNldCBjZWxsIFtpbnN0YW5jZV9wcm9wZXJ0eSAkaW5zdGFuY2UgImNlbGwiXQogIHJlcG9ydF9saW5lICIgQ2VsbDogW2dldF9uYW1lICRjZWxsXSIKICByZXBvcnRfbGluZSAiIExpYnJhcnk6IFtnZXRfbmFtZSBbJGNlbGwgbGlicmFyeV1dIgogIHJlcG9ydF9saW5lICIgUGF0aCBjZWxsczogW2luc3RhbmNlX2NlbGxfcGF0aCAkaW5zdGFuY2VdIgogIHJlcG9ydF9pbnN0YW5jZV9waW5zICRpbnN0YW5jZQogIHJlcG9ydF9pbnN0YW5jZV9jaGlsZHJlbl8gJGluc3RhbmNlCn0KCnByb2MgcmVwb3J0X2luc3RhbmNlX3BpbnMgeyBpbnN0YW5jZSB9IHsKICByZXBvcnRfaW5zdGFuY2VfcGluczEgJGluc3RhbmNlICIgSW5wdXQgcGluczoiIDAgeyJpbnB1dCIgImJpZGlyZWN0In0KICByZXBvcnRfaW5zdGFuY2VfcGluczEgJGluc3RhbmNlICIgT3V0cHV0IHBpbnM6IiAwIHsib3V0cHV0IiAiYmlkaXJlY3QiICJ0cmlzdGF0ZSJ9CiAgcmVwb3J0X2luc3RhbmNlX3BpbnMxICRpbnN0YW5jZSAiIE90aGVyIHBpbnM6IiAxIHsiaW50ZXJuYWwiICJwb3dlciIgImdyb3VuZCIgInVua25vd24ifQp9Cgpwcm9jIHJlcG9ydF9pbnN0YW5jZV9waW5zMSB7aW5zdGFuY2UgaGVhZGVyIGhlYWRlcl9vcHRpb25hbCBkaXJzfSB7CiAgc2V0IGhlYWRlcl9zaG93biAwCiAgaWYgeyAhJGhlYWRlcl9vcHRpb25hbCB9IHsKICAgIHJlcG9ydF9saW5lICRoZWFkZXIKICAgIHNldCBoZWFkZXJfc2hvd24gMQogIH0KICBzZXQgaXRlciBbJGluc3RhbmNlIHBpbl9pdGVyYXRvcl0KICB3aGlsZSB7WyRpdGVyIGhhc19uZXh0XX0gewogICAgc2V0IHBpbiBbJGl0ZXIgbmV4dF0KICAgIHNldCBkaXIgW3Bpbl9kaXJlY3Rpb24gJHBpbl0KICAgIGlmIHsgW2xzZWFyY2ggJGRpcnMgJGRpcl0gIT0gIC0xIH0gewogICAgICBpZiB7ICEkaGVhZGVyX3Nob3duIH0gewoJcmVwb3J0X2xpbmUgJGhlYWRlcgoJc2V0IGhlYWRlcl9zaG93biAxCiAgICAgIH0KICAgICAgcmVwb3J0X2luc3RhbmNlX3BpbiAkcGluCiAgICB9CiAgfQogICRpdGVyIGZpbmlzaAp9Cgpwcm9jIHJlcG9ydF9pbnN0YW5jZV9waW4geyBwaW4gfSB7CiAgc2V0IG5ldCBbJHBpbiBuZXRdCiAgaWYgeyAkbmV0ID09ICJOVUxMIiB9IHsKICAgIHNldCBuZXRfbmFtZSAiKHVuY29ubmVjdGVkKSIKICB9IGVsc2UgewogICAgc2V0IG5ldF9uYW1lIFtnZXRfZnVsbF9uYW1lIFskbmV0IGhpZ2hlc3RfY29ubmVjdGVkX25ldF1dCiAgfQogIHJlcG9ydF9saW5lICIgIFskcGluIHBvcnRfbmFtZV0gW3Bpbl9kaXJlY3Rpb24gJHBpbl0gJG5ldF9uYW1lIgp9CgojIENvbmNhdGVuYXRlIHRoZSBjZWxsIG5hbWVzIG9mIHRoZSBpbnN0YW5jZSBwYXJlbnRzLgpwcm9jIGluc3RhbmNlX2NlbGxfcGF0aCB7IGluc3RhbmNlIH0gewogIHNldCBjZWxsX3BhdGggIltnZXRfbmFtZSBbaW5zdGFuY2VfcHJvcGVydHkgJGluc3RhbmNlICJjZWxsIl1dIgogIHNldCBwYXJlbnQgWyRpbnN0YW5jZSBwYXJlbnRdCiAgc2V0IHRvcF9pbnN0YW5jZSBbdG9wX2luc3RhbmNlXQogIHdoaWxlIHsgJHBhcmVudCAhPSAiTlVMTCIgJiYgJHBhcmVudCAhPSAkdG9wX2luc3RhbmNlIH0gewogICAgc2V0IGNlbGxfcGF0aCAiW2dldF9uYW1lIFskcGFyZW50IGNlbGxdXS8kY2VsbF9wYXRoIgogICAgc2V0IHBhcmVudCBbJHBhcmVudCBwYXJlbnRdCiAgfQogIHJldHVybiAkY2VsbF9wYXRoCn0KCnByb2MgcmVwb3J0X2luc3RhbmNlX2NoaWxkcmVuXyB7IGluc3RhbmNlIH0gewogIHNldCBjaGlsZHJlbiBbaW5zdGFuY2Vfc29ydGVkX2NoaWxkcmVuICRpbnN0YW5jZV0KICBpZiB7ICRjaGlsZHJlbiAhPSB7fSB9IHsKICAgIHJlcG9ydF9saW5lICIgQ2hpbGRyZW46IgogICAgZm9yZWFjaCBjaGlsZCAkY2hpbGRyZW4gewogICAgICByZXBvcnRfbGluZSAiICBbZ2V0X25hbWUgJGNoaWxkXSAoW2luc3RhbmNlX3Byb3BlcnR5ICRjaGlsZCByZWZfbmFtZV0pIgogICAgfQogIH0KfQoKcHJvYyBpbnN0YW5jZV9zb3J0ZWRfY2hpbGRyZW4geyBpbnN0YW5jZSB9IHsKICBzZXQgY2hpbGRyZW4ge30KICBzZXQgaXRlciBbJGluc3RhbmNlIGNoaWxkX2l0ZXJhdG9yXQogIHdoaWxlIHtbJGl0ZXIgaGFzX25leHRdfSB7CiAgICBsYXBwZW5kIGNoaWxkcmVuIFskaXRlciBuZXh0XQogIH0KICAkaXRlciBmaW5pc2gKICByZXR1cm4gW3NvcnRfYnlfZnVsbF9uYW1lICRjaGlsZHJlbl0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJyZXBvcnRfbmV0IiB7Wy1jb3JuZXIgY29ybmVyXSBbLWRpZ2l0cyBkaWdpdHNdXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldF9wYXRoIFs+IGZpbGVuYW1lXSBbPj4gZmlsZW5hbWVdfQoKIyAtaHBpbnMgdG8gc2hvdyBoaWVyYXJjaGljYWwgcGlucwpwcm9jX3JlZGlyZWN0IHJlcG9ydF9uZXQgewogIGdsb2JhbCBzdGFfcmVwb3J0X2RlZmF1bHRfZGlnaXRzCgogIHBhcnNlX2tleV9hcmdzICJyZXBvcnRfbmV0IiBhcmdzIGtleXMgey1jb3JuZXIgLWRpZ2l0c30gXAogICAgZmxhZ3Mgey1jb25uZWN0aW9ucyAtdmVyYm9zZSAtaGllcl9waW5zfQogIGNoZWNrX2FyZ2NfZXExICJyZXBvcnRfbmV0IiAkYXJncwoKICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtY29ubmVjdGlvbnMpXSB9IHsKICAgICMgZGVwcmVjYXRlZCAyMDI0LTAxLTE3CiAgICBzdGFfd2FybiAyMzUgInJlcG9ydF9uZXQgLWNvbm5lY3Rpb25zIGlzIGRlcHJlY2F0ZWQuIgogIH0KICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtdmVyYm9zZSldIH0gewogICAgIyBkZXByZWNhdGVkIDIwMjQtMDEtMTcKICAgIHN0YV93YXJuIDIzNiAicmVwb3J0X25ldCAtdmVyYm9zZSBpcyBkZXByZWNhdGVkLiIKICB9CiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLWhpZXJfcGlucyldIH0gewogICAgIyBkZXByZWNhdGVkIDIwMjQtMDEtMTcKICAgIHN0YV93YXJuIDIzNyAicmVwb3J0X25ldCAtaGllcl9waW5zIGlzIGRlcHJlY2F0ZWQuIgogIH0KCiAgc2V0IGNvcm5lciBbcGFyc2VfY29ybmVyX29yX2FsbCBrZXlzXQogIHNldCBkaWdpdHMgJHN0YV9yZXBvcnRfZGVmYXVsdF9kaWdpdHMKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1kaWdpdHMpXSB9IHsKICAgICAgc2V0IGRpZ2l0cyAka2V5cygtZGlnaXRzKQogIH0KCiAgc2V0IG5ldF9wYXRoIFtsaW5kZXggJGFyZ3MgMF0KICBzZXQgbmV0IFtmaW5kX25ldCAkbmV0X3BhdGhdCiAgaWYgeyAkbmV0ICE9ICJOVUxMIiB9IHsKICAgIHJlcG9ydF9uZXQxICRuZXQgJGNvcm5lciAkZGlnaXRzCiAgfSBlbHNlIHsKICAgIHNldCBwaW4gW2ZpbmRfcGluICRuZXRfcGF0aF0KICAgIGlmIHsgJHBpbiAhPSAiTlVMTCIgfSB7CiAgICAgIHNldCBuZXQgWyRwaW4gbmV0XQogICAgICBpZiB7ICRuZXQgIT0gIk5VTEwiIH0gewoJcmVwb3J0X25ldDEgJG5ldCAkY29ybmVyICRkaWdpdHMKICAgICAgfSBlbHNlIHsKCXN0YV9lcnJvciAyMzEgIm5ldCAkbmV0X3BhdGggbm90IGZvdW5kLiIKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgc3RhX2Vycm9yIDIzMiAibmV0ICRuZXRfcGF0aCBub3QgZm91bmQuIgogICAgfQogIH0KfQoKcHJvYyByZXBvcnRfbmV0MSB7IG5ldCBjb3JuZXIgZGlnaXRzIH0gewogIHJlcG9ydF9saW5lICJOZXQgW2dldF9mdWxsX25hbWUgJG5ldF0iCiAgc2V0IHBpbnMgW25ldF9jb25uZWN0ZWRfcGluc19zb3J0ZWQgJG5ldF0KICByZXBvcnRfbmV0X2NhcHMgJG5ldCAkcGlucyAkY29ybmVyICRkaWdpdHMKICByZXBvcnRfbmV0X3BpbnMgJHBpbnMgIkRyaXZlciBwaW5zIiAiaXNfZHJpdmVyIiAkY29ybmVyICRkaWdpdHMKICByZXBvcnRfbmV0X3BpbnMgJHBpbnMgIkxvYWQgcGlucyIgImlzX2xvYWQiICRjb3JuZXIgJGRpZ2l0cwogIHJlcG9ydF9uZXRfcGlucyAkcGlucyAiSGllcmFyY2hpY2FsIHBpbnMiICJpc19oaWVyYXJjaGljYWwiICRjb3JuZXIgJGRpZ2l0cwogIHJlcG9ydF9uZXRfb3RoZXJfcGlucyAkcGlucyAkY29ybmVyICRkaWdpdHMKfQoKcHJvYyBuZXRfY29ubmVjdGVkX3BpbnNfc29ydGVkIHsgbmV0IH0gewogIHNldCBwaW5zIHt9CiAgc2V0IGl0ZXIgWyRuZXQgY29ubmVjdGVkX3Bpbl9pdGVyYXRvcl0KICB3aGlsZSB7WyRpdGVyIGhhc19uZXh0XX0gewogICAgc2V0IHBpbiBbJGl0ZXIgbmV4dF0KICAgIGxhcHBlbmQgcGlucyAkcGluCiAgfQogICRpdGVyIGZpbmlzaAogIHNldCBwaW5zIFtzb3J0X2J5X2Z1bGxfbmFtZSAkcGluc10KICByZXR1cm4gJHBpbnMKfQoKcHJvYyByZXBvcnRfbmV0X2NhcHMgeyBuZXQgcGlucyBjb3JuZXIgZGlnaXRzIH0gewogIHJlcG9ydF9uZXRfY2FwICRuZXQgIlBpbiIgInBpbl9jYXBhY2l0YW5jZSIgJGNvcm5lciAkZGlnaXRzCiAgcmVwb3J0X25ldF9jYXAgJG5ldCAiV2lyZSIgIndpcmVfY2FwYWNpdGFuY2UiICRjb3JuZXIgJGRpZ2l0cwogIHJlcG9ydF9uZXRfY2FwICRuZXQgIlRvdGFsIiAiY2FwYWNpdGFuY2UiICRjb3JuZXIgJGRpZ2l0cwoKICBzZXQgcGluX2NvdW50IDAKICBzZXQgZHJpdmVyX2NvdW50IDAKICBzZXQgbG9hZF9jb3VudCAwCiAgZm9yZWFjaCBwaW4gJHBpbnMgewogICAgaWYgeyFbJHBpbiBpc19oaWVyYXJjaGljYWxdfSB7CiAgICAgIGluY3IgcGluX2NvdW50CiAgICB9CiAgICBpZiBbJHBpbiBpc19kcml2ZXJdIHsKICAgICAgaW5jciBkcml2ZXJfY291bnQKICAgIH0KICAgIGlmIFskcGluIGlzX2xvYWRdIHsKICAgICAgaW5jciBsb2FkX2NvdW50CiAgICB9CiAgfQogIHJlcG9ydF9saW5lICIgTnVtYmVyIG9mIGRyaXZlcnM6ICRkcml2ZXJfY291bnQiCiAgcmVwb3J0X2xpbmUgIiBOdW1iZXIgb2YgbG9hZHM6ICRsb2FkX2NvdW50IgogIHJlcG9ydF9saW5lICIgTnVtYmVyIG9mIHBpbnM6ICRwaW5fY291bnQiCiAgcmVwb3J0X2xpbmUgIiIKfQoKcHJvYyByZXBvcnRfbmV0X2NhcCB7IG5ldCBjYXB0aW9uIGNhcF9tc2cgY29ybmVyIGRpZ2l0cyB9IHsKICBzZXQgY2FwX21pbiBbJG5ldCAkY2FwX21zZyAkY29ybmVyICJtaW4iXQogIHNldCBjYXBfbWF4IFskbmV0ICRjYXBfbXNnICRjb3JuZXIgIm1heCJdCiAgcmVwb3J0X2xpbmUgIiAkY2FwdGlvbiBjYXBhY2l0YW5jZTogW2NhcGFjaXRhbmNlX3JhbmdlX3N0ciAkY2FwX21pbiAkY2FwX21heCAkZGlnaXRzXSIKfQoKcHJvYyByZXBvcnRfbmV0X3BpbnMgeyBwaW5zIGhlYWRlciBwaW5fcHJlZCBjb3JuZXIgZGlnaXRzIH0gewogIHNldCBmb3VuZCAwCiAgZm9yZWFjaCBwaW4gJHBpbnMgewogICAgaWYge1skcGluICRwaW5fcHJlZF19IHsKICAgICAgaWYgeyAhJGZvdW5kIH0gewogICAgICAgIHJlcG9ydF9saW5lICRoZWFkZXIKICAgICAgICBzZXQgZm91bmQgMQogICAgICB9CiAgICAgIHJlcG9ydF9uZXRfcGluICRwaW4gJGNvcm5lciAkZGlnaXRzCiAgICB9CiAgfQogIGlmIHsgJGZvdW5kIH0gewogICAgcmVwb3J0X2xpbmUgIiIKICB9Cn0KCnByb2MgcmVwb3J0X25ldF9vdGhlcl9waW5zIHsgcGlucyBjb3JuZXIgZGlnaXRzIH0gewogIHNldCBoZWFkZXIgMAogIGZvcmVhY2ggcGluICRwaW5zIHsKICAgIGlmIHsgIShbJHBpbiBpc19kcml2ZXJdIHx8IFskcGluIGlzX2xvYWRdIHx8IFskcGluIGlzX2hpZXJhcmNoaWNhbF0pIH0gewogICAgICBpZiB7ICEkaGVhZGVyIH0gewoJcmVwb3J0X2xpbmUgIiIKCXJlcG9ydF9saW5lICJPdGhlciBwaW5zIgoJc2V0IGhlYWRlciAxCiAgICAgIH0KICAgICAgcmVwb3J0X25ldF9waW4gJHBpbiAkY29ybmVyICRkaWdpdHMKICAgIH0KICB9Cn0KCnByb2MgcmVwb3J0X25ldF9waW4geyBwaW4gY29ybmVyIGRpZ2l0cyB9IHsKICBpZiBbJHBpbiBpc19sZWFmXSB7CiAgICBzZXQgY2VsbF9uYW1lIFtnZXRfbmFtZSBbWyRwaW4gaW5zdGFuY2VdIGNlbGxdXQogICAgc2V0IGNhcCAiIgogICAgc2V0IGxpYmVydHlfcG9ydCBbJHBpbiBsaWJlcnR5X3BvcnRdCiAgICBpZiB7ICRsaWJlcnR5X3BvcnQgIT0gIk5VTEwiIH0gewogICAgICBzZXQgY2FwIFtwb3J0X2NhcGFjaXRhbmNlX3N0ciAkbGliZXJ0eV9wb3J0ICRjb3JuZXIgJGRpZ2l0c10KICAgIH0KICAgIHJlcG9ydF9saW5lICIgW2dldF9mdWxsX25hbWUgJHBpbl0gW3Bpbl9kaXJlY3Rpb24gJHBpbl0gKCRjZWxsX25hbWUpJGNhcFtwaW5fbG9jYXRpb25fc3RyICRwaW5dIgogIH0gZWxzZWlmIFskcGluIGlzX3RvcF9sZXZlbF9wb3J0XSB7CiAgICBzZXQgd2lyZV9jYXAgIiIKICAgIHNldCBwaW5fY2FwICIiCiAgICBzZXQgY29ybmVyIFtzdGE6OmNtZF9jb3JuZXJdCgogICAgc2V0IHBvcnQgWyRwaW4gcG9ydF0KICAgIHNldCBjYXBfbWluIFtwb3J0X2V4dF93aXJlX2NhcCAkcG9ydCAkY29ybmVyICJtaW4iXQogICAgc2V0IGNhcF9tYXggW3BvcnRfZXh0X3dpcmVfY2FwICRwb3J0ICRjb3JuZXIgIm1heCJdCiAgICBpZiB7ICRjYXBfbWluID4gMCB8fCAkY2FwX21heCA+IDAgfSB7CiAgICAgIHNldCB3aXJlX2NhcCAiIHdpcmUgW2NhcGFjaXRhbmNlX3JhbmdlX3N0ciAkY2FwX21pbiAkY2FwX21heCAkZGlnaXRzXSIKICAgIH0KCiAgICBzZXQgY2FwX21pbiBbcG9ydF9leHRfcGluX2NhcCAkcG9ydCAkY29ybmVyICJtaW4iXQogICAgc2V0IGNhcF9tYXggW3BvcnRfZXh0X3Bpbl9jYXAgJHBvcnQgJGNvcm5lciAibWF4Il0KICAgIGlmIHsgJGNhcF9taW4gPiAwIHx8ICRjYXBfbWF4ID4gMH0gewogICAgICBzZXQgcGluX2NhcCAiIHBpbiBbY2FwYWNpdGFuY2VfcmFuZ2Vfc3RyICRjYXBfbWluICRjYXBfbWF4ICRkaWdpdHNdIgogICAgfQogICAgcmVwb3J0X2xpbmUgIiBbZ2V0X2Z1bGxfbmFtZSAkcGluXSBbcGluX2RpcmVjdGlvbiAkcGluXSBwb3J0JHdpcmVfY2FwJHBpbl9jYXBbcGluX2xvY2F0aW9uX3N0ciAkcGluXSIKICB9IGVsc2VpZiBbJHBpbiBpc19oaWVyYXJjaGljYWxdIHsKICAgIHJlcG9ydF9saW5lICIgW2dldF9mdWxsX25hbWUgJHBpbl0gW3Bpbl9kaXJlY3Rpb24gJHBpbl0iCiAgfQp9CgojIFVzZWQgYnkgcmVwb3J0X25ldApwcm9jIHBpbl9sb2NhdGlvbl9zdHIgeyBwaW4gfSB7CiAgc2V0IGxvYyBbcGluX2xvY2F0aW9uICRwaW5dCiAgaWYgeyAkbG9jICE9ICIiIH0gewogICAgbGFzc2lnbiAkbG9jIHggeQogICAgcmV0dXJuICIgKFtmb3JtYXRfZGlzdGFuY2UgJHggMF0sIFtmb3JtYXRfZGlzdGFuY2UgJHkgMF0pIgogIH0gZWxzZSB7CiAgICByZXR1cm4gIiIKICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCnByb2MgcmVwb3J0X3Bpbl8geyBwaW4gY29ybmVyIGRpZ2l0cyB9IHsKICBzZXQgbGliZXJ0eV9wb3J0IFskcGluIGxpYmVydHlfcG9ydF0KICBpZiB7ICRsaWJlcnR5X3BvcnQgIT0gIk5VTEwiIH0gewogICAgc2V0IGNhcCBbcG9ydF9jYXBhY2l0YW5jZV9zdHIgJGxpYmVydHlfcG9ydCAkY29ybmVyICRkaWdpdHNdCiAgfSBlbHNlIHsKICAgIHNldCBjYXAgIiIKICB9CgogIGlmIHsgWyRwaW4gaXNfdG9wX2xldmVsX3BvcnRdIH0gewogICAgc2V0IHRlcm0gWyRwaW4gdGVybV0KICAgIGlmIHsgJHRlcm0gPT0gIk5VTEwiIH0gewogICAgICBzZXQgbmV0ICJOVUxMIgogICAgfSBlbHNlIHsKICAgICAgc2V0IG5ldCBbJHRlcm0gbmV0XQogICAgfQogIH0gZWxzZSB7CiAgICBzZXQgbmV0IFskcGluIG5ldF0KICB9CiAgaWYgeyAkbmV0ID09ICJOVUxMIiB9IHsKICAgIHNldCBuZXRfbmFtZSAiKHVuY29ubmVjdGVkKSIKICB9IGVsc2UgewogICAgc2V0IG5ldF9uYW1lIFtnZXRfZnVsbF9uYW1lIFskbmV0IGhpZ2hlc3RfY29ubmVjdGVkX25ldF1dCiAgfQogIHJlcG9ydF9saW5lICJQaW4gW2dldF9mdWxsX25hbWUgJHBpbl0gW3Bpbl9kaXJlY3Rpb25fZGVzYyAkcGluXSRjYXAgJG5ldF9uYW1lIgp9Cgpwcm9jIHBpbl9kaXJlY3Rpb25fZGVzYyB7IHBpbiB9IHsKICBpZiBbJHBpbiBpc19oaWVyYXJjaGljYWxdIHsKICAgIHJldHVybiAiaGllcmFyY2hpY2FsIFtwaW5fZGlyZWN0aW9uICRwaW5dIgogIH0gZWxzZWlmIFskcGluIGlzX3RvcF9sZXZlbF9wb3J0XSB7CiAgICByZXR1cm4gIltwaW5fZGlyZWN0aW9uICRwaW5dIHBvcnQiCiAgfSBlbHNlIHsKICAgIHJldHVybiBbcGluX2RpcmVjdGlvbiAkcGluXQogIH0KfQoKIyBEbyBub3QgcHJlY2VlZCB0aGlzIGZpZWxkIGJ5IGEgc3BhY2UgaW4gdGhlIGNhbGxlci4KcHJvYyBwb3J0X2NhcGFjaXRhbmNlX3N0ciB7IGxpYmVydHlfcG9ydCBjb3JuZXIgZGlnaXRzIH0gewogIHNldCBjYXBfbWluIFskbGliZXJ0eV9wb3J0IGNhcGFjaXRhbmNlICRjb3JuZXIgIm1pbiJdCiAgc2V0IGNhcF9tYXggWyRsaWJlcnR5X3BvcnQgY2FwYWNpdGFuY2UgJGNvcm5lciAibWF4Il0KICBpZiB7ICRjYXBfbWluID4gMCB8fCAkY2FwX21heCA+IDAgfSB7CiAgICByZXR1cm4gIiBbY2FwYWNpdGFuY2VfcmFuZ2Vfc3RyICRjYXBfbWluICRjYXBfbWF4ICRkaWdpdHNdIgogIH0gZWxzZSB7CiAgICByZXR1cm4gIiIKICB9Cn0KCnByb2MgY2FwYWNpdGFuY2VfcmFuZ2Vfc3RyIHsgY2FwX21pbiBjYXBfbWF4IGRpZ2l0cyB9IHsKICBpZiB7ICRjYXBfbWluID09ICRjYXBfbWF4IH0gewogICAgcmV0dXJuICJbZm9ybWF0X2NhcGFjaXRhbmNlICRjYXBfbWF4ICRkaWdpdHNdIgogIH0gZWxzZSB7CiAgICByZXR1cm4gIltmb3JtYXRfY2FwYWNpdGFuY2UgJGNhcF9taW4gJGRpZ2l0c10tW2Zvcm1hdF9jYXBhY2l0YW5jZSAkY2FwX21heCAkZGlnaXRzXSIKICB9Cn0KCnByb2MgY2FwYWNpdGFuY2VzX3N0ciB7IGNhcF9yX21pbiBjYXBfcl9tYXggY2FwX2ZfbWluIGNhcF9mX21heCBkaWdpdHMgfSB7CiAgaWYgeyAkY2FwX3JfbWluID09ICRjYXBfcl9tYXggXAoJICYmICRjYXBfZl9taW4gPT0gJGNhcF9mX21heCBcCgkgJiYgJGNhcF9yX21heCA9PSAkY2FwX2ZfbWF4IH0gewogICAgIyBBbGwgNCB2YWx1ZXMgYXJlIHRoZSBzYW1lLgogICAgc2V0IGNhcCAkY2FwX3JfbWluCiAgICByZXR1cm4gIltmb3JtYXRfY2FwYWNpdGFuY2UgJGNhcCAkZGlnaXRzXSIKICB9IGVsc2VpZiB7ICRjYXBfcl9taW4gPT0gJGNhcF9yX21heCBcCgkgICAgICAgJiYgJGNhcF9mX21pbiA9PSAkY2FwX2ZfbWF4IH0gewogICAgIyBNaW5zIGVxdWFsIG1heGVzLgogICAgcmV0dXJuICJyIFtmb3JtYXRfY2FwYWNpdGFuY2UgJGNhcF9yX21pbiAkZGlnaXRzXSBmIFtmb3JtYXRfY2FwYWNpdGFuY2UgJGNhcF9mX21pbiAkZGlnaXRzXSIKICB9IGVsc2UgewogICAgcmV0dXJuICJyIFtmb3JtYXRfY2FwYWNpdGFuY2UgJGNhcF9yX21pbiAkZGlnaXRzXTpbZm9ybWF0X2NhcGFjaXRhbmNlICRjYXBfcl9tYXggJGRpZ2l0c10gZiBbZm9ybWF0X2NhcGFjaXRhbmNlICRjYXBfZl9taW4gJGRpZ2l0c106W2Zvcm1hdF9jYXBhY2l0YW5jZSAkY2FwX2ZfbWF4ICRkaWdpdHNdIgogIH0KfQoKIyBzdGEgbmFtZXNwYWNlIGVuZAp9CiMgT3BlblNUQSwgU3RhdGljIFRpbWluZyBBbmFseXplcgojIENvcHlyaWdodCAoYykgMjAyNSwgUGFyYWxsYXggU29mdHdhcmUsIEluYy4KIyAKIyBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeQojIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CiMgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3IKIyAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLgojIAojIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAojIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiMgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlCiMgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KIyAKIyBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQojIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LgojIAojIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90CiMgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgojIAojIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlCiMgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgojIAojIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uCgojIE5ldHdvcmsgZWRpdGluZyBjb21tYW5kcy4KCm5hbWVzcGFjZSBldmFsIHN0YSB7CgpkZWZpbmVfY21kX2FyZ3MgIm1ha2VfaW5zdGFuY2UiIHtpbnN0X3BhdGggbGliX2NlbGx9Cgpwcm9jIG1ha2VfaW5zdGFuY2UgeyBpbnN0X3BhdGggbGliX2NlbGwgfSB7CiAgc2V0IGxpYl9jZWxsIFtnZXRfbGliX2NlbGxfd2FybiAibGliX2NlbGwiICRsaWJfY2VsbF0KICBpZiB7ICRsaWJfY2VsbCAhPSAiTlVMTCIgfSB7CiAgICBzZXQgcGF0aF9yZWdleHAgW3BhdGhfcmVnZXhwXQogICAgaWYge1tyZWdleHAgJHBhdGhfcmVnZXhwICRpbnN0X3BhdGggaWdub3JlIHBhdGhfbmFtZSBpbnN0X25hbWVdfSB7CiAgICAgIHNldCBwYXJlbnQgW2ZpbmRfaW5zdGFuY2UgJHBhdGhfbmFtZV0KICAgICAgaWYgeyAkcGFyZW50ID09ICJOVUxMIiB9IHsKCSMgUGFyZW50IGluc3RhbmNlIG5vdCBmb3VuZC4gIFRoaXMgY291bGQgYmUgYSB0eXBvLCBidXQgc2luY2UKCSMgU0RDIGRvZXMgbm90IGVzY2FwZSBoaWVyYXJjaHkgZGl2aWRlcnMgaXQgY2FuIGFsc28gYmUKCSMgYW4gZXNjYXBlZCBuYW1lLgoJc2V0IGluc3RfbmFtZSAkaW5zdF9wYXRoCglzZXQgcGFyZW50IFt0b3BfaW5zdGFuY2VdCiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHNldCBpbnN0X25hbWUgJGluc3RfcGF0aAogICAgICBzZXQgcGFyZW50IFt0b3BfaW5zdGFuY2VdCiAgICB9CiAgICByZXR1cm4gW21ha2VfaW5zdGFuY2VfY21kICRpbnN0X25hbWUgJGxpYl9jZWxsICRwYXJlbnRdCiAgfSBlbHNlIHsKICAgIHJldHVybiAwCiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgIm1ha2VfbmV0IiB7bmV0X3BhdGh9Cgpwcm9jIG1ha2VfbmV0IHsgbmV0X3BhdGggfSB7CiAgIyBDb3B5IGJhY2tzbGFzaGVzIHRoYXQgd2lsbCBiZSByZW1vdmVkIGJ5IGZvcmVhY2guCiAgc2V0IG5ldF9wYXRoIFtzdHJpbmcgbWFwIHtcXCBcXFxcfSAkbmV0X3BhdGhdCiAgc2V0IHBhdGhfcmVnZXhwIFtwYXRoX3JlZ2V4cF0KICBpZiB7W3JlZ2V4cCAkcGF0aF9yZWdleHAgJG5ldF9wYXRoIGlnbm9yZSBwYXRoX25hbWUgbmV0X25hbWVdfSB7CiAgICBzZXQgcGFyZW50IFtmaW5kX2luc3RhbmNlICRwYXRoX25hbWVdCiAgICBpZiB7ICRwYXJlbnQgPT0gIk5VTEwiIH0gewogICAgICByZXR1cm4gMAogICAgfQogIH0gZWxzZSB7CiAgICBzZXQgcGFyZW50IFt0b3BfaW5zdGFuY2VdCiAgICBzZXQgbmV0X25hbWUgJG5ldF9wYXRoCiAgfQogIHJldHVybiBbbWFrZV9uZXRfY21kICRuZXRfbmFtZSAkcGFyZW50XQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgIm1ha2VfcG9ydCIge3BvcnRfbmFtZSBkaXJlY3Rpb259Cgpwcm9jIG1ha2VfcG9ydCB7IHBvcnRfbmFtZSBkaXJlY3Rpb24gfSB7CiAgbWFrZV9wb3J0X3Bpbl9jbWQgJHBvcnRfbmFtZSAkZGlyZWN0aW9uCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAiY29ubmVjdF9waW4iIHtuZXQgcGlufQoKcHJvYyBjb25uZWN0X3BpbiB7IG5ldCBwaW4gfSB7CiAgc2V0IGluc3RzX3BvcnQgW3BhcnNlX2Nvbm5lY3RfcGluICRwaW5dCiAgaWYgeyAkaW5zdHNfcG9ydCA9PSAwIH0gewogICAgcmV0dXJuIDAKICB9CiAgc2V0IG5ldCBbZ2V0X25ldF9hcmcgIm5ldCIgJG5ldF0KICBpZiB7ICRuZXQgPT0gIk5VTEwiIH0gewogICAgcmV0dXJuIDAKICB9CiAgbGFzc2lnbiAkaW5zdHNfcG9ydCBpbnN0IHBvcnQKICBjb25uZWN0X3Bpbl9jbWQgJGluc3QgJHBvcnQgJG5ldAogIHJldHVybiAxCn0KCnByb2MgcGFyc2VfY29ubmVjdF9waW4geyBhcmcgfSB7CiAgc2V0IHBhdGhfcmVnZXhwIFtwYXRoX3JlZ2V4cF0KICBzZXQgaW5zdHNfcG9ydCB7fQogIGlmIHsgW2lzX29iamVjdCAkYXJnXSB9IHsKICAgIHNldCBvYmplY3RfdHlwZSBbb2JqZWN0X3R5cGUgJGFyZ10KICAgIGlmIHsgJG9iamVjdF90eXBlID09ICJQaW4iIH0gewogICAgICBzZXQgcGluICRhcmcKICAgICAgc2V0IGluc3QgWyRwaW4gaW5zdGFuY2VdCiAgICAgIHNldCBwb3J0IFskcGluIHBvcnRdCiAgICB9IGVsc2VpZiB7ICRvYmplY3RfdHlwZSA9PSAiUG9ydCIgfSB7CiAgICAgICMgRXhwbGljaXQgcG9ydCBhcmcgLSBjb252ZXJ0IHRvIHBpbi4KICAgICAgc2V0IHBpbiBbZmluZF9waW4gW2dldF9uYW1lICRhcmddXQogICAgICBzZXQgaW5zdCBbJHBpbiBpbnN0YW5jZV0KICAgICAgc2V0IHBvcnQgWyRwaW4gcG9ydF0KICAgIH0gZWxzZSB7CiAgICAgIHN0YV9lcnJvciAyNTAgInVuc3VwcG9ydGVkIG9iamVjdCB0eXBlICRvYmplY3RfdHlwZS4iCiAgICB9CiAgfSBlbHNlIHsKICAgIGlmIHtbcmVnZXhwICRwYXRoX3JlZ2V4cCAkYXJnIGlnbm9yZSBwYXRoX25hbWUgcG9ydF9uYW1lXX0gewogICAgICBzZXQgaW5zdCBbZmluZF9pbnN0YW5jZSAkcGF0aF9uYW1lXQogICAgICBpZiB7ICRpbnN0ID09ICJOVUxMIiB9IHsKCXJldHVybiAwCiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHNldCBpbnN0IFt0b3BfaW5zdGFuY2VdCiAgICAgIHNldCBwb3J0X25hbWUgJGFyZwogICAgfQogICAgc2V0IGNlbGwgWyRpbnN0IGNlbGxdCiAgICBzZXQgcG9ydCBbJGNlbGwgZmluZF9wb3J0ICRwb3J0X25hbWVdCiAgICBpZiB7ICRwb3J0ID09ICJOVUxMIiB9IHsKICAgICAgcmV0dXJuIDAKICAgIH0KICAgIHNldCBwaW4gWyRpbnN0IGZpbmRfcGluICRwb3J0X25hbWVdCiAgfQogIAogICMgTWFrZSBzdXJlIHRoZSBwaW4gaXMgbm90IGN1cnJlbnRseSBjb25uZWN0ZWQgdG8gYSBuZXQuCiAgaWYgeyAkcGluICE9ICJOVUxMIiBcCgkgJiYgIVskcGluIGlzX2hpZXJhcmNoaWNhbF0gXAoJICYmIFskcGluIG5ldF0gIT0gIk5VTEwiIH0gewogICAgcmV0dXJuIDAKICB9CiAgcmV0dXJuIFtsaXN0ICRpbnN0ICRwb3J0XQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgImRpc2Nvbm5lY3RfcGluIiB7bmV0IC1hbGx8cGlufQoKcHJvYyBkaXNjb25uZWN0X3BpbiB7IG5ldCBwaW4gfSB7CiAgc2V0IG5ldCBbZ2V0X25ldF9hcmcgIm5ldCIgJG5ldF0KICBpZiB7ICRuZXQgPT0gIk5VTEwiIH0gewogICAgcmV0dXJuIDAKICB9CiAgaWYgeyAkcGluID09ICItYWxsIiB9IHsKICAgIHNldCBpdGVyIFskbmV0IGNvbm5lY3RlZF9waW5faXRlcmF0b3JdCiAgICB3aGlsZSB7WyRpdGVyIGhhc19uZXh0XX0gewogICAgICBzZXQgcGluIFskaXRlciBuZXh0XQogICAgICBkaXNjb25uZWN0X3Bpbl9jbWQgJHBpbgogICAgfQogICAgJGl0ZXIgZmluaXNoCiAgICByZXR1cm4gMQogIH0gZWxzZSB7CiAgICBzZXQgcGluMSBbZ2V0X3BvcnRfcGluX3dhcm4gInBpbiIgJHBpbl0KICAgIGlmIHsgJHBpbjEgPT0gIk5VTEwiIH0gewogICAgICByZXR1cm4gMAogICAgfSBlbHNlIHsKICAgICAgZGlzY29ubmVjdF9waW5fY21kICRwaW4xCiAgICAgIHJldHVybiAxCiAgICB9CiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgImRlbGV0ZV9pbnN0YW5jZSIge2luc3R9Cgpwcm9jIGRlbGV0ZV9pbnN0YW5jZSB7IGluc3RhbmNlIH0gewogIGlmIHsgW2lzX29iamVjdCAkaW5zdGFuY2VdIH0gewogICAgc2V0IG9iamVjdF90eXBlIFtvYmplY3RfdHlwZSAkaW5zdGFuY2VdCiAgICBpZiB7ICRvYmplY3RfdHlwZSA9PSAiSW5zdGFuY2UiIH0gewogICAgICBzZXQgaW5zdCAkaW5zdGFuY2UKICAgIH0gZWxzZSB7CiAgICAgIHN0YV9lcnJvciAyNTIgInVuc3VwcG9ydGVkIG9iamVjdCB0eXBlICRvYmplY3RfdHlwZS4iCiAgICB9CiAgfSBlbHNlIHsKICAgIHNldCBpbnN0IFtmaW5kX2luc3RhbmNlICRpbnN0YW5jZV0KICB9CiAgaWYgeyAkaW5zdCAhPSAiTlVMTCIgfSB7CiAgICBkZWxldGVfaW5zdGFuY2VfY21kICRpbnN0CiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgImRlbGV0ZV9uZXQiIHtuZXR9Cgpwcm9jIGRlbGV0ZV9uZXQgeyBuZXQgfSB7CiAgaWYgeyBbaXNfb2JqZWN0ICRuZXRdIH0gewogICAgc2V0IG9iamVjdF90eXBlIFtvYmplY3RfdHlwZSAkbmV0XQogICAgaWYgeyAkb2JqZWN0X3R5cGUgIT0gIk5ldCIgfSB7CiAgICAgIHN0YV9lcnJvciAyNTMgInVuc3VwcG9ydGVkIG9iamVjdCB0eXBlICRvYmplY3RfdHlwZS4iCiAgICB9CiAgfSBlbHNlIHsKICAgIHNldCBuZXQgW2ZpbmRfbmV0ICRuZXRdCiAgfQogIGlmIHsgJG5ldCAhPSAiTlVMTCIgfSB7CiAgICBkZWxldGVfbmV0X2NtZCAkbmV0CiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInJlcGxhY2VfY2VsbCIge2luc3RhbmNlIGxpYl9jZWxsfQoKcHJvYyByZXBsYWNlX2NlbGwgeyBpbnN0YW5jZSBsaWJfY2VsbCB9IHsKICBzZXQgY2VsbCBbZ2V0X2xpYl9jZWxsX3dhcm4gImxpYl9jZWxsIiAkbGliX2NlbGxdCiAgaWYgeyAkY2VsbCAhPSAiTlVMTCIgfSB7CiAgICBzZXQgaW5zdCBbZ2V0X2luc3RhbmNlX2Vycm9yICJpbnN0YW5jZSIgJGluc3RhbmNlXQogICAgc2V0IGluc3RfY2VsbCBbJGluc3QgbGliZXJ0eV9jZWxsXQogICAgaWYgeyAkaW5zdF9jZWxsID09ICJOVUxMIiBcCgkgICB8fCAhW2VxdWl2X2NlbGxfcG9ydHMgJGluc3RfY2VsbCAkY2VsbF0gfSB7CiAgICAgIHJldHVybiAwCiAgICB9CiAgICByZXBsYWNlX2NlbGxfY21kICRpbnN0ICRjZWxsCiAgICByZXR1cm4gMQogIH0gZWxzZSB7CiAgICByZXR1cm4gMAogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKcHJvYyBwYXRoX3JlZ2V4cCB7fSB7CiAgZ2xvYmFsIGhpZXJhcmNoeV9zZXBhcmF0b3IKICBzZXQgaWRfcmVnZXhwICJcW14ke2hpZXJhcmNoeV9zZXBhcmF0b3J9XF0rIgogIHNldCBwcmVmaXhfcmVnZXhwICIke2lkX3JlZ2V4cH0oPzoke2hpZXJhcmNoeV9zZXBhcmF0b3J9JHtpZF9yZWdleHB9KSoiCiAgcmV0dXJuICJeKCR7cHJlZml4X3JlZ2V4cH0pJHtoaWVyYXJjaHlfc2VwYXJhdG9yfSgke2lkX3JlZ2V4cH0pJCIKfQoKIyBzdGEgbmFtZXNwYWNlIGVuZC4KfQojIE9wZW5TVEEsIFN0YXRpYyBUaW1pbmcgQW5hbHl6ZXIKIyBDb3B5cmlnaHQgKGMpIDIwMjUsIFBhcmFsbGF4IFNvZnR3YXJlLCBJbmMuCiMgCiMgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKIyBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQojIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yCiMgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KIyAKIyBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKIyBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgojIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZQojIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCiMgCiMgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UKIyBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KIyAKIyBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdAojIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4KIyAKIyBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQojIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4KIyAKIyBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLgoKbmFtZXNwYWNlIGV2YWwgc3RhIHsKCmRlZmluZV9jbWRfYXJncyAicmVhZF9zcGVmIiBcCiAge1stY29ybmVyIGNvcm5lcl1cCiAgICAgWy1taW5dXAogICAgIFstbWF4XVwKICAgICBbLXBhdGggcGF0aF1cCiAgICAgWy1w",
"aW5fY2FwX2luY2x1ZGVkXVwKICAgICBbLWtlZXBfY2FwYWNpdGl2ZV9jb3VwbGluZ11cCiAgICAgWy1jb3VwbGluZ19yZWR1Y3Rpb25fZmFjdG9yIGZhY3Rvcl1cCiAgICAgWy1yZWR1Y2VdXAogICAgIFstZGVsZXRlX2FmdGVyX3JlZHVjZV1cCiAgICAgZmlsZW5hbWV9Cgpwcm9jX3JlZGlyZWN0IHJlYWRfc3BlZiB7CiAgcGFyc2Vfa2V5X2FyZ3MgInJlYWRfc3BlZiIgYXJncyBcCiAgICBrZXlzIHstcGF0aCAtY291cGxpbmdfcmVkdWN0aW9uX2ZhY3RvciAtY29ybmVyIC1uYW1lfSBcCiAgICBmbGFncyB7LW1pbiAtbWF4IC1pbmNyZW1lbnQgLXBpbl9jYXBfaW5jbHVkZWQgLWtlZXBfY2FwYWNpdGl2ZV9jb3VwbGluZyAtcmVkdWNlfQogIGNoZWNrX2FyZ2NfZXExICJyZWFkX3NwZWYiICRhcmdzCgogIHNldCByZWR1Y2UgW2luZm8gZXhpc3RzIGZsYWdzKC1yZWR1Y2UpXQogIHNldCBpbnN0YW5jZSBbdG9wX2luc3RhbmNlXQogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1wYXRoKV0gewogICAgc2V0IHBhdGggJGtleXMoLXBhdGgpCiAgICBzZXQgaW5zdGFuY2UgW2ZpbmRfaW5zdGFuY2UgJHBhdGhdCiAgICBpZiB7ICRpbnN0YW5jZSA9PSAiTlVMTCIgfSB7CiAgICAgIHN0YV9lcnJvciAyNzYgInBhdGggaW5zdGFuY2UgJyRwYXRoJyBub3QgZm91bmQuIgogICAgfQogIH0KICBzZXQgY29ybmVyIFtwYXJzZV9jb3JuZXJfb3JfYWxsIGtleXNdCiAgc2V0IG1pbl9tYXggW3BhcnNlX21pbl9tYXhfYWxsX2ZsYWdzIGZsYWdzXQogIHNldCBjb3VwbGluZ19yZWR1Y3Rpb25fZmFjdG9yIDEuMAogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1jb3VwbGluZ19yZWR1Y3Rpb25fZmFjdG9yKV0gewogICAgc2V0IGNvdXBsaW5nX3JlZHVjdGlvbl9mYWN0b3IgJGtleXMoLWNvdXBsaW5nX3JlZHVjdGlvbl9mYWN0b3IpCiAgICBjaGVja19wb3NpdGl2ZV9mbG9hdCAiLWNvdXBsaW5nX3JlZHVjdGlvbl9mYWN0b3IiICRjb3VwbGluZ19yZWR1Y3Rpb25fZmFjdG9yCiAgfQogIHNldCBrZWVwX2NvdXBsaW5nX2NhcHMgW2luZm8gZXhpc3RzIGZsYWdzKC1rZWVwX2NhcGFjaXRpdmVfY291cGxpbmcpXQogIHNldCBwaW5fY2FwX2luY2x1ZGVkIFtpbmZvIGV4aXN0cyBmbGFncygtcGluX2NhcF9pbmNsdWRlZCldCgogIHNldCBmaWxlbmFtZSBbZmlsZSBuYXRpdmVuYW1lIFtsaW5kZXggJGFyZ3MgMF1dCiAgcmV0dXJuIFtyZWFkX3NwZWZfY21kICRmaWxlbmFtZSAkaW5zdGFuY2UgJGNvcm5lciAkbWluX21heCBcCgkgICAgJHBpbl9jYXBfaW5jbHVkZWQgJGtlZXBfY291cGxpbmdfY2FwcyBcCiAgICAgICAgICAgICRjb3VwbGluZ19yZWR1Y3Rpb25fZmFjdG9yICRyZWR1Y2VdCn0KCmRlZmluZV9jbWRfYXJncyAicmVwb3J0X3BhcmFzaXRpY19hbm5vdGF0aW9uIiB7Wy1yZXBvcnRfdW5hbm5vdGF0ZWRdfQoKcHJvY19yZWRpcmVjdCByZXBvcnRfcGFyYXNpdGljX2Fubm90YXRpb24gewogIHBhcnNlX2tleV9hcmdzICJyZXBvcnRfcGFyYXNpdGljX2Fubm90YXRpb24iIGFyZ3MgXAogICAga2V5cyB7fSBmbGFncyB7LXJlcG9ydF91bmFubm90YXRlZH0KICBjaGVja19hcmdjX2VxMCAicmVwb3J0X3BhcmFzaXRpY19hbm5vdGF0aW9uIiAkYXJncwoKICBzZXQgcmVwb3J0X3VuYW5ub3RhdGVkIFtpbmZvIGV4aXN0cyBmbGFncygtcmVwb3J0X3VuYW5ub3RhdGVkKV0KICByZXBvcnRfcGFyYXNpdGljX2Fubm90YXRpb25fY21kICRyZXBvcnRfdW5hbm5vdGF0ZWQgW3N0YTo6Y21kX2Nvcm5lcl0KfQoKIyBzZXRfcGlfbW9kZWwgWy1taW5dIFstbWF4XSBkcnZyX3BpbiBjMiBycGkgYzEKcHJvYyBzZXRfcGlfbW9kZWwgeyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJzZXRfcGlfbW9kZWwiIGFyZ3Mga2V5cyB7fSBmbGFncyB7LW1heCAtbWlufQogIGNoZWNrX2FyZ2NfZXE0ICJzZXRfcGlfbW9kZWwiICRhcmdzCgogIHNldCBkcnZyX3Bpbl9uYW1lIFtsaW5kZXggJGFyZ3MgMF0KCiAgc2V0IGMyIFtsaW5kZXggJGFyZ3MgMV0KICBjaGVja19wb3NpdGl2ZV9mbG9hdCAiYzIiICRjMgogIHNldCBjMiBbY2FwYWNpdGFuY2VfdWlfc3RhICRjMl0KCiAgc2V0IHJwaSBbbGluZGV4ICRhcmdzIDJdCiAgY2hlY2tfcG9zaXRpdmVfZmxvYXQgIlJwaSIgJHJwaQogIHNldCBycGkgW3Jlc2lzdGFuY2VfdWlfc3RhICRycGldCgogIHNldCBjMSBbbGluZGV4ICRhcmdzIDNdCiAgY2hlY2tfcG9zaXRpdmVfZmxvYXQgImMxIiAkYzEKICBzZXQgYzEgW2NhcGFjaXRhbmNlX3VpX3N0YSAkYzFdCgogIHNldCBtaW5fbWF4IFtwYXJzZV9taW5fbWF4X2FsbF9jaGVja19mbGFncyBmbGFnc10KCiAgc2V0IGRydnJfcGluIFtnZXRfcG9ydF9waW5fZXJyb3IgImRydnJfcGluIiAkZHJ2cl9waW5fbmFtZV0KICBzZXRfcGlfbW9kZWxfY21kICRkcnZyX3BpbiAicmlzZSIgJG1pbl9tYXggJGMyICRycGkgJGMxCiAgc2V0X3BpX21vZGVsX2NtZCAkZHJ2cl9waW4gImZhbGwiICRtaW5fbWF4ICRjMiAkcnBpICRjMQp9CgojIHNldF9lbG1vcmUgWy1taW5dIFstbWF4XSBkcnZyX3Bpbl9uYW1lIGxvYWRfcGluX25hbWUgZWxtb3JlCnByb2Mgc2V0X2VsbW9yZSB7IGFyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgInNldF9lbG1vcmUiIGFyZ3Mga2V5cyB7fSBmbGFncyB7LW1pbiAtbWF4fQogIGNoZWNrX2FyZ2NfZXEzICAic2V0X2VsbW9yZSIgJGFyZ3MKCiAgc2V0IGRydnJfcGluX2FyZyBbbGluZGV4ICRhcmdzIDBdCiAgc2V0IGRydnJfcGluIFtnZXRfcG9ydF9waW5fZXJyb3IgImRydnJfcGluIiAkZHJ2cl9waW5fYXJnXQogIHNldCBsb2FkX3Bpbl9hcmcgW2xpbmRleCAkYXJncyAxXQogIHNldCBsb2FkX3BpbiBbZ2V0X3BvcnRfcGluX2Vycm9yICJsb2FkX3BpbiIgJGxvYWRfcGluX2FyZ10KICBzZXQgZWxtb3JlIFtsaW5kZXggJGFyZ3MgMl0KICBjaGVja19wb3NpdGl2ZV9mbG9hdCAiZWxtb3JlIGRlbGF5IiAkZWxtb3JlCiAgc2V0IGVsbW9yZSBbdGltZV91aV9zdGEgJGVsbW9yZV0KICBzZXQgbWluX21heCBbcGFyc2VfbWluX21heF9hbGxfY2hlY2tfZmxhZ3MgZmxhZ3NdCgogIHNldF9lbG1vcmVfY21kICRkcnZyX3BpbiAkbG9hZF9waW4gInJpc2UiICRtaW5fbWF4ICRlbG1vcmUKICBzZXRfZWxtb3JlX2NtZCAkZHJ2cl9waW4gJGxvYWRfcGluICJmYWxsIiAkbWluX21heCAkZWxtb3JlCn0KCiMgc3RhIG5hbWVzcGFjZSBlbmQKfQojIE9wZW5TVEEsIFN0YXRpYyBUaW1pbmcgQW5hbHl6ZXIKIyBDb3B5cmlnaHQgKGMpIDIwMjUsIFBhcmFsbGF4IFNvZnR3YXJlLCBJbmMuCiMgCiMgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKIyBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQojIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yCiMgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KIyAKIyBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKIyBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgojIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZQojIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCiMgCiMgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UKIyBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KIyAKIyBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdAojIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4KIyAKIyBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQojIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4KIyAKIyBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojCiMgUG93ZXIgY29tbWFuZHMuCiMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKbmFtZXNwYWNlIGV2YWwgc3RhIHsKCmRlZmluZV9jbWRfYXJncyAicmVwb3J0X3Bvd2VyIiBcCiAgeyBbLWluc3RhbmNlcyBpbnN0YW5jZXNdXAogICAgICBbLWhpZ2hlc3RfcG93ZXJfaW5zdGFuY2VzIGNvdW50XVwKICAgICAgWy1jb3JuZXIgY29ybmVyXVwKICAgICAgWy1kaWdpdHMgZGlnaXRzXVwKICAgICAgWz4gZmlsZW5hbWVdIFs+PiBmaWxlbmFtZV0gfQoKcHJvY19yZWRpcmVjdCByZXBvcnRfcG93ZXIgewogIGdsb2JhbCBzdGFfcmVwb3J0X2RlZmF1bHRfZGlnaXRzCgogIHBhcnNlX2tleV9hcmdzICJyZXBvcnRfcG93ZXIiIGFyZ3MgXAogICAga2V5cyB7LWluc3RhbmNlcyAtaGlnaGVzdF9wb3dlcl9pbnN0YW5jZXMgLWNvcm5lciAtZGlnaXRzfSBmbGFncyB7fQoKICBjaGVja19hcmdjX2VxMCAicmVwb3J0X3Bvd2VyIiAkYXJncwoKICBpZiB7ICFbbGliZXJ0eV9saWJyYXJpZXNfZXhpc3RdIH0gewogICAgc3RhX2Vycm9yIDMwNCAiTm8gbGliZXJ0eSBsaWJyYXJpZXMgaGF2ZSBiZWVuIHJlYWQuIgogIH0KICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1kaWdpdHMpXSB9IHsKICAgIHNldCBkaWdpdHMgJGtleXMoLWRpZ2l0cykKICAgIGNoZWNrX3Bvc2l0aXZlX2ludGVnZXIgIi1kaWdpdHMiICRkaWdpdHMKICB9IGVsc2UgewogICAgc2V0IGRpZ2l0cyAkc3RhX3JlcG9ydF9kZWZhdWx0X2RpZ2l0cwogIH0KICBzZXQgY29ybmVyIFtwYXJzZV9jb3JuZXIga2V5c10KCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtaW5zdGFuY2VzKV0gfSB7CiAgICBzZXQgaW5zdHMgW2dldF9pbnN0YW5jZXNfZXJyb3IgIi1pbnN0YW5jZXMiICRrZXlzKC1pbnN0YW5jZXMpXQogICAgcmVwb3J0X3Bvd2VyX2luc3RzICRpbnN0cyAkY29ybmVyICRkaWdpdHMKICB9IGVsc2VpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1oaWdoZXN0X3Bvd2VyX2luc3RhbmNlcyldIH0gewogICAgc2V0IGNvdW50ICRrZXlzKC1oaWdoZXN0X3Bvd2VyX2luc3RhbmNlcykKICAgIGNoZWNrX3Bvc2l0aXZlX2ludGVnZXIgIi1oaWdoZXN0X3Bvd2VyX2luc3RhbmNlcyIgJGNvdW50CiAgICBzZXQgaW5zdHMgW2hpZ2hlc3RfcG93ZXJfaW5zdGFuY2VzICRjb3VudCAkY29ybmVyXQogICAgcmVwb3J0X3Bvd2VyX2luc3RzICRpbnN0cyAkY29ybmVyICRkaWdpdHMKICB9IGVsc2UgewogICAgcmVwb3J0X3Bvd2VyX2Rlc2lnbiAkY29ybmVyICRkaWdpdHMKICB9Cn0KCnByb2MgbGliZXJ0eV9saWJyYXJpZXNfZXhpc3Qge30gewogIHNldCBsaWJfaXRlciBbbGliZXJ0eV9saWJyYXJ5X2l0ZXJhdG9yXQogIHNldCBoYXZlX2xpYmVydHkgMAogIGlmIHsgWyRsaWJfaXRlciBoYXNfbmV4dF0gfSB7CiAgICBzZXQgaGF2ZV9saWJlcnR5IDEKICB9CiAgJGxpYl9pdGVyIGZpbmlzaAogIHJldHVybiAkaGF2ZV9saWJlcnR5Cn0KCnByb2MgcmVwb3J0X3Bvd2VyX2Rlc2lnbiB7IGNvcm5lciBkaWdpdHMgfSB7CiAgc2V0IHBvd2VyX3Jlc3VsdCBbZGVzaWduX3Bvd2VyICRjb3JuZXJdCiAgc2V0IHRvdGFscyAgICAgICAgW2xyYW5nZSAkcG93ZXJfcmVzdWx0ICAwICAzXQogIHNldCBzZXF1ZW50aWFsICAgIFtscmFuZ2UgJHBvd2VyX3Jlc3VsdCAgNCAgN10KICBzZXQgY29tYmluYXRpb25hbCBbbHJhbmdlICRwb3dlcl9yZXN1bHQgIDggMTFdCiAgc2V0IGNsb2NrICAgICAgICAgW2xyYW5nZSAkcG93ZXJfcmVzdWx0IDEyIDE1XQogIHNldCBtYWNybyAgICAgICAgIFtscmFuZ2UgJHBvd2VyX3Jlc3VsdCAxNiAxOV0KICBzZXQgcGFkICAgICAgICAgICBbbHJhbmdlICRwb3dlcl9yZXN1bHQgMjAgZW5kXQogIGxhc3NpZ24gJHRvdGFscyBkZXNpZ25faW50ZXJuYWwgZGVzaWduX3N3aXRjaGluZyBkZXNpZ25fbGVha2FnZSBkZXNpZ25fdG90YWwKCiAgc2V0IGZpZWxkX3dpZHRoIFttYXggW2V4cHIgJGRpZ2l0cyArIDZdIDEwXQogIHJlcG9ydF9wb3dlcl90aXRsZTUgICAgICAgIkdyb3VwIiAiSW50ZXJuYWwiICJTd2l0Y2hpbmciICJMZWFrYWdlIiAiVG90YWwiICRmaWVsZF93aWR0aAogIHJlcG9ydF9wb3dlcl90aXRsZTVfdW5pdHMgIiAgICAgIiAiUG93ZXIiICAgICJQb3dlciIgICAgICJQb3dlciIgICAiUG93ZXIiICIoV2F0dHMpIiAkZmllbGRfd2lkdGgKICByZXBvcnRfdGl0bGVfZGFzaGVzNSAkZmllbGRfd2lkdGgKICByZXBvcnRfcG93ZXJfcm93ICJTZXF1ZW50aWFsIiAgICAkc2VxdWVudGlhbCAgICAkZGVzaWduX3RvdGFsICRmaWVsZF93aWR0aCAkZGlnaXRzCiAgcmVwb3J0X3Bvd2VyX3JvdyAiQ29tYmluYXRpb25hbCIgJGNvbWJpbmF0aW9uYWwgJGRlc2lnbl90b3RhbCAkZmllbGRfd2lkdGggJGRpZ2l0cwogIHJlcG9ydF9wb3dlcl9yb3cgIkNsb2NrIiAgICAgICAgICRjbG9jayAgICAgICAgICRkZXNpZ25fdG90YWwgJGZpZWxkX3dpZHRoICRkaWdpdHMKICByZXBvcnRfcG93ZXJfcm93ICJNYWNybyIgICAgICAgICAkbWFjcm8gICAgICAgICAkZGVzaWduX3RvdGFsICRmaWVsZF93aWR0aCAkZGlnaXRzCiAgcmVwb3J0X3Bvd2VyX3JvdyAiUGFkIiAgICAgICAgICAgJHBhZCAgICAgICAgICAgJGRlc2lnbl90b3RhbCAkZmllbGRfd2lkdGggJGRpZ2l0cwogIHJlcG9ydF90aXRsZV9kYXNoZXM1ICRmaWVsZF93aWR0aAogIHJlcG9ydF9wb3dlcl9yb3cgIlRvdGFsIiAkcG93ZXJfcmVzdWx0ICRkZXNpZ25fdG90YWwgJGZpZWxkX3dpZHRoICRkaWdpdHMKCiAgcmVwb3J0X2xpbmUgIltmb3JtYXQgJS0yMHMge31dW3Bvd2VyX2NvbF9wZXJjZW50ICRkZXNpZ25faW50ZXJuYWwgICRkZXNpZ25fdG90YWwgJGZpZWxkX3dpZHRoXVtwb3dlcl9jb2xfcGVyY2VudCAkZGVzaWduX3N3aXRjaGluZyAkZGVzaWduX3RvdGFsICRmaWVsZF93aWR0aF1bcG93ZXJfY29sX3BlcmNlbnQgJGRlc2lnbl9sZWFrYWdlICRkZXNpZ25fdG90YWwgJGZpZWxkX3dpZHRoXSIKfQoKcHJvYyBtYXggeyB4IHkgfSB7CiAgaWYgeyAkeCA+PSAkeSB9IHsKICAgIHJldHVybiAkeAogIH0gZWxzZSB7CiAgICByZXR1cm4gJHkKICB9Cn0KCnByb2MgcmVwb3J0X3Bvd2VyX3RpdGxlNSB7IHRpdGxlMSB0aXRsZTIgdGl0bGUzIHRpdGxlNCB0aXRsZTUgZmllbGRfd2lkdGggfSB7CiAgcmVwb3J0X2xpbmUgIltmb3JtYXQgJS0yMHMgJHRpdGxlMV0gW2Zvcm1hdCAlJHtmaWVsZF93aWR0aH1zICR0aXRsZTJdIFtmb3JtYXQgJSR7ZmllbGRfd2lkdGh9cyAkdGl0bGUzXSBbZm9ybWF0ICUke2ZpZWxkX3dpZHRofXMgJHRpdGxlNF0gW2Zvcm1hdCAlJHtmaWVsZF93aWR0aH1zICR0aXRsZTVdIgp9Cgpwcm9jIHJlcG9ydF9wb3dlcl90aXRsZTVfdW5pdHMgeyB0aXRsZTEgdGl0bGUyIHRpdGxlMyB0aXRsZTQgdGl0bGU1IHVuaXRzIGZpZWxkX3dpZHRoIH0gewogIHJlcG9ydF9saW5lICJbZm9ybWF0ICUtMjBzICR0aXRsZTFdIFtmb3JtYXQgJSR7ZmllbGRfd2lkdGh9cyAkdGl0bGUyXSBbZm9ybWF0ICUke2ZpZWxkX3dpZHRofXMgJHRpdGxlM10gW2Zvcm1hdCAlJHtmaWVsZF93aWR0aH1zICR0aXRsZTRdIFtmb3JtYXQgJSR7ZmllbGRfd2lkdGh9cyAkdGl0bGU1XSAkdW5pdHMiCn0KCnByb2MgcmVwb3J0X3Bvd2VyX3RpdGxlNCB7IHRpdGxlMSB0aXRsZTIgdGl0bGUzIHRpdGxlNCBmaWVsZF93aWR0aCB9IHsKICByZXBvcnRfbGluZSAiIFtmb3JtYXQgJSR7ZmllbGRfd2lkdGh9cyAkdGl0bGUxXSBbZm9ybWF0ICUke2ZpZWxkX3dpZHRofXMgJHRpdGxlMl0gW2Zvcm1hdCAgJSR7ZmllbGRfd2lkdGh9cyAkdGl0bGUzXSBbZm9ybWF0ICUke2ZpZWxkX3dpZHRofXMgJHRpdGxlNF0iCn0KCnByb2MgcmVwb3J0X3Bvd2VyX3RpdGxlNF91bml0cyB7IHRpdGxlMSB0aXRsZTIgdGl0bGUzIHRpdGxlNCB1bml0cyBmaWVsZF93aWR0aCB9IHsKICByZXBvcnRfbGluZSAiIFtmb3JtYXQgJSR7ZmllbGRfd2lkdGh9cyAkdGl0bGUxXSBbZm9ybWF0ICUke2ZpZWxkX3dpZHRofXMgJHRpdGxlMl0gW2Zvcm1hdCAgJSR7ZmllbGRfd2lkdGh9cyAkdGl0bGUzXSBbZm9ybWF0ICUke2ZpZWxkX3dpZHRofXMgJHRpdGxlNF0gJHVuaXRzIgp9Cgpwcm9jIHJlcG9ydF90aXRsZV9kYXNoZXM1IHsgZmllbGRfd2lkdGggfSB7CiAgc2V0IGNvdW50IFtleHByIDIwICsgKCRmaWVsZF93aWR0aCArIDEpICogNF0KICByZXBvcnRfdGl0bGVfZGFzaGVzICRjb3VudAp9Cgpwcm9jIHJlcG9ydF90aXRsZV9kYXNoZXM0IHsgZmllbGRfd2lkdGggfSB7CiAgc2V0IGNvdW50IFtleHByICgkZmllbGRfd2lkdGggKyAxKSAqIDRdCiAgcmVwb3J0X3RpdGxlX2Rhc2hlcyAkY291bnQKfQoKcHJvYyByZXBvcnRfdGl0bGVfZGFzaGVzIHsgY291bnQgfSB7CiAgc2V0IGxpbmUgIiIKICBmb3Ige3NldCBpIDB9IHskaSA8ICRjb3VudH0ge2luY3IgaX0gewogICAgc2V0IGxpbmUgIi0kbGluZSIKICB9CiAgcmVwb3J0X2xpbmUgJGxpbmUKfQoKcHJvYyByZXBvcnRfcG93ZXJfcm93IHsgdHlwZSByb3dfcmVzdWx0IGRlc2lnbl90b3RhbCBmaWVsZF93aWR0aCBkaWdpdHMgfSB7CiAgbGFzc2lnbiAkcm93X3Jlc3VsdCBpbnRlcm5hbCBzd2l0Y2hpbmcgbGVha2FnZSB0b3RhbAogIGlmIHsgJGRlc2lnbl90b3RhbCA9PSAwLjAgfHwgW2lzX25hbiAkZGVzaWduX3RvdGFsXSB9IHsKICAgIHNldCBwZXJjZW50IDAuMAogIH0gZWxzZSB7CiAgICBzZXQgcGVyY2VudCBbZXhwciAkdG90YWwgLyAkZGVzaWduX3RvdGFsICogMTAwXQogIH0KICByZXBvcnRfbGluZSAiW2Zvcm1hdCAlLTIwcyAkdHlwZV1bcG93ZXJfY29sICRpbnRlcm5hbCAkZmllbGRfd2lkdGggJGRpZ2l0c11bcG93ZXJfY29sICRzd2l0Y2hpbmcgJGZpZWxkX3dpZHRoICRkaWdpdHNdW3Bvd2VyX2NvbCAkbGVha2FnZSAkZmllbGRfd2lkdGggJGRpZ2l0c11bcG93ZXJfY29sICR0b3RhbCAkZmllbGRfd2lkdGggJGRpZ2l0c10gW2Zvcm1hdCAlNS4xZiAkcGVyY2VudF0lIgp9Cgpwcm9jIGlzX25hbiB7IHN0ciB9IHsKICByZXR1cm4gIFtzdHJpbmcgbWF0Y2ggIipOYU4iICRzdHJdCn0KCnByb2MgcG93ZXJfY29sIHsgcHdyIGZpZWxkX3dpZHRoIGRpZ2l0cyB9IHsKICBpZiB7IFtpc19uYW4gJHB3cl0gfSB7CiAgICBmb3JtYXQgIiAlJHtmaWVsZF93aWR0aH1zIiAkcHdyCiAgfSBlbHNlIHsKICAgIGZvcm1hdCAiICUkZmllbGRfd2lkdGguJHtkaWdpdHN9ZSIgJHB3cgogIH0KfQoKcHJvYyBwb3dlcl9jb2xfcGVyY2VudCB7IGNvbF90b3RhbCB0b3RhbCBmaWVsZF93aWR0aCB9IHsKICBpZiB7ICR0b3RhbCA9PSAwLjAgfHwgW2lzX25hbiAkdG90YWxdfSB7CiAgICBzZXQgcGVyY2VudCAwLjAKICB9IGVsc2UgewogICAgc2V0IHBlcmNlbnQgW2V4cHIgJGNvbF90b3RhbCAvICR0b3RhbCAqIDEwMF0KICB9CiAgZm9ybWF0ICIlJGZpZWxkX3dpZHRoLjFmJSUiICRwZXJjZW50Cn0KCnByb2MgcmVwb3J0X3Bvd2VyX2xpbmUgeyB0eXBlIHB3ciBkaWdpdHMgfSB7CiAgaWYgeyBbaXNfbmFuICRwd3JdIH0gewogICAgcmVwb3J0X2xpbmUgW2Zvcm1hdCAiJS0xNnMgJXMiICR0eXBlICRwd3JdCiAgfSBlbHNlIHsKICAgIHJlcG9ydF9saW5lIFtmb3JtYXQgIiUtMTZzICUuJHtkaWdpdHN9ZSIgJHR5cGUgJHB3cl0KICB9Cn0KCnByb2MgcmVwb3J0X3Bvd2VyX2luc3RzIHsgaW5zdHMgY29ybmVyIGRpZ2l0cyB9IHsKICBzZXQgaW5zdF9wd3JzIHt9CiAgZm9yZWFjaCBpbnN0ICRpbnN0cyB7CiAgICBzZXQgcG93ZXJfcmVzdWx0IFtpbnN0YW5jZV9wb3dlciAkaW5zdCAkY29ybmVyXQogICAgbGFwcGVuZCBpbnN0X3B3cnMgW2xpc3QgJGluc3QgJHBvd2VyX3Jlc3VsdF0KICB9CiAgc2V0IGluc3RfcHdycyBbbHNvcnQgLWNvbW1hbmQgaW5zdF9wd3JfY21wICRpbnN0X3B3cnNdCgogIHNldCBmaWVsZF93aWR0aCBbbWF4IFtleHByICRkaWdpdHMgKyA2XSAxMF0KCiAgcmVwb3J0X3Bvd2VyX3RpdGxlNCAgICAgICAiSW50ZXJuYWwiICJTd2l0Y2hpbmciICJMZWFrYWdlIiAiVG90YWwiICRmaWVsZF93aWR0aAogIHJlcG9ydF9wb3dlcl90aXRsZTRfdW5pdHMgIlBvd2VyIiAgICAiUG93ZXIiICAgICAiUG93ZXIiICAgIlBvd2VyIiAiKFdhdHRzKSIgJGZpZWxkX3dpZHRoCiAgcmVwb3J0X3RpdGxlX2Rhc2hlczQgJGZpZWxkX3dpZHRoCgogIGZvcmVhY2ggaW5zdF9wd3IgJGluc3RfcHdycyB7CiAgICBzZXQgaW5zdCBbbGluZGV4ICRpbnN0X3B3ciAwXQogICAgc2V0IHBvd2VyIFtsaW5kZXggJGluc3RfcHdyIDFdCiAgICByZXBvcnRfcG93ZXJfaW5zdCAkaW5zdCAkcG93ZXIgJGZpZWxkX3dpZHRoICRkaWdpdHMKICB9Cn0KCnByb2MgaW5zdF9wd3JfY21wIHsgaW5zdF9wd3IxIGluc3RfcHdyMiB9IHsKICBzZXQgcHdyMSBbbGluZGV4ICRpbnN0X3B3cjEgMV0KICBzZXQgcHdyMiBbbGluZGV4ICRpbnN0X3B3cjIgMV0KICBsYXNzaWduICRwd3IxIGludGVybmFsMSBzd2l0Y2hpbmcxIGxlYWthZ2UxIHRvdGFsMQogIGxhc3NpZ24gJHB3cjIgaW50ZXJuYWwyIHN3aXRjaGluZzIgbGVha2FnZTIgdG90YWwyCiAgaWYgeyAkdG90YWwxIDwgJHRvdGFsMiB9IHsKICAgIHJldHVybiAxCiAgfSBlbHNlaWYgeyAkdG90YWwxID09ICR0b3RhbDIgfSB7CiAgICByZXR1cm4gMAogIH0gZWxzZSB7CiAgICByZXR1cm4gLTEKICB9Cn0KCnByb2MgcmVwb3J0X3Bvd2VyX2luc3QgeyBpbnN0IHBvd2VyX3Jlc3VsdCBmaWVsZF93aWR0aCBkaWdpdHMgfSB7CiAgbGFzc2lnbiAkcG93ZXJfcmVzdWx0IGludGVybmFsIHN3aXRjaGluZyBsZWFrYWdlIHRvdGFsCiAgcmVwb3J0X2xpbmUgIltwb3dlcl9jb2wgJGludGVybmFsICRmaWVsZF93aWR0aCAkZGlnaXRzXVtwb3dlcl9jb2wgJHN3aXRjaGluZyAkZmllbGRfd2lkdGggJGRpZ2l0c11bcG93ZXJfY29sICRsZWFrYWdlICRmaWVsZF93aWR0aCAkZGlnaXRzXVtwb3dlcl9jb2wgJHRvdGFsICRmaWVsZF93aWR0aCAkZGlnaXRzXSBbZ2V0X2Z1bGxfbmFtZSAkaW5zdF0iCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAic2V0X3Bvd2VyX2FjdGl2aXR5IiB7IFstZ2xvYmFsXVwKCQkJCQkgWy1pbnB1dF1cCgkJCQkJIFstaW5wdXRfcG9ydHMgcG9ydHNdXAoJCQkJCSBbLXBpbnMgcGluc11cCgkJCQkJIFstYWN0aXZpdHkgYWN0aXZpdHkgfCAtZGVuc2l0eSBkZW5zaXR5XVwKCQkJCQkgWy1kdXR5IGR1dHldXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstY2xvY2sgY2xvY2tdfQoKcHJvYyBzZXRfcG93ZXJfYWN0aXZpdHkgeyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJzZXRfcG93ZXJfYWN0aXZpdHkiIGFyZ3MgXAogICAga2V5cyB7LWlucHV0X3BvcnRzIC1waW5zIC1hY3Rpdml0eSAtZGVuc2l0eSAtZHV0eSAtY2xvY2t9IFwKICAgIGZsYWdzIHstZ2xvYmFsIC1pbnB1dH0KCiAgY2hlY2tfYXJnY19lcTAgInNldF9wb3dlcl9hY3Rpdml0eSIgJGFyZ3MKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1hY3Rpdml0eSldICYmIFtpbmZvIGV4aXN0cyBrZXlzKC1kZW5zaXR5KV0gXAogICAgICAgICB8fCAhW2luZm8gZXhpc3RzIGtleXMoLWFjdGl2aXR5KV0gJiYgIVtpbmZvIGV4aXN0cyBrZXlzKC1kZW5zaXR5KV0gfSB7CiAgICBzdGFfZXJyb3IgMzA2ICJTcGVjaWZ5IC1hY3Rpdml0eSBvciAtZGVuc2l0eS4iCiAgfQoKICBzZXQgZGVuc2l0eSAwLjAKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1hY3Rpdml0eSldIH0gewogICAgc2V0IGFjdGl2aXR5ICRrZXlzKC1hY3Rpdml0eSkKICAgIGNoZWNrX3Bvc2l0aXZlX2Zsb2F0ICJhY3Rpdml0eSIgJGFjdGl2aXR5CiAgICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1jbG9jayldIH0gewogICAgICBzZXQgY2xrIFtnZXRfY2xvY2tfd2FybiAiLWNsb2NrIiAka2V5cygtY2xvY2spXQogICAgfSBlbHNlIHsKICAgICAgc2V0IGNsa3MgW2dldF9jbG9ja3NdCiAgICAgIGlmIHsgJGNsa3MgPT0ge30gfSB7CiAgICAgICAgc3RhX2Vycm9yIDMwNyAiLWFjdGl2aXR5IHJlcXVpcmVzIGEgY2xvY2sgdG8gYmUgZGVmaW5lZCIKICAgICAgfQogICAgfQogICAgc2V0IGRlbnNpdHkgW2V4cHIgJGFjdGl2aXR5IC8gW2Nsb2NrX21pbl9wZXJpb2RdXQogIH0KCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtZGVuc2l0eSldIH0gewogICAgc2V0IGRlbnNpdHkgJGtleXMoLWRlbnNpdHkpCiAgICBjaGVja19wb3NpdGl2ZV9mbG9hdCAiZGVuc2l0eSIgJGRlbnNpdHkKICAgIHNldCBkZW5zaXR5IFtleHByICRkZW5zaXR5IC8gW3RpbWVfdWlfc3RhIDEuMF1dCiAgICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1jbG9jayldIH0gewogICAgICBzdGFfd2FybiAzMDggIi1jbG9jayBpZ25vcmVkIGZvciAtZGVuc2l0eSIKICAgIH0KICB9CiAgc2V0IGR1dHkgMC41CiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtZHV0eSldIH0gewogICAgc2V0IGR1dHkgJGtleXMoLWR1dHkpCiAgICBjaGVja19mbG9hdCAiZHV0eSIgJGR1dHkKICAgIGlmIHsgJGR1dHkgPCAwLjAgfHwgJGR1dHkgPiAxLjAgfSB7CiAgICAgIHN0YV9lcnJvciAzMDkgImR1dHkgc2hvdWxkIGJlIDAuMCB0byAxLjAiCiAgICB9CiAgfQoKICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtZ2xvYmFsKV0gfSB7CiAgICBzZXRfcG93ZXJfZ2xvYmFsX2FjdGl2aXR5ICRkZW5zaXR5ICRkdXR5CiAgfQogIGlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1pbnB1dCldIH0gewogICAgc2V0X3Bvd2VyX2lucHV0X2FjdGl2aXR5ICRkZW5zaXR5ICRkdXR5CiAgfQogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLWlucHV0X3BvcnRzKV0gfSB7CiAgICBzZXQgcG9ydHMgW2dldF9wb3J0c19lcnJvciAiaW5wdXRfcG9ydHMiICRrZXlzKC1pbnB1dF9wb3J0cyldCiAgICBmb3JlYWNoIHBvcnQgJHBvcnRzIHsKICAgICAgaWYgeyBbZ2V0X3Byb3BlcnR5ICRwb3J0ICJkaXJlY3Rpb24iXSA9PSAiaW5wdXQiIH0gewoJaWYgeyBbaXNfY2xvY2tfc3JjIFtzdGE6OmdldF9wb3J0X3BpbiAkcG9ydF1dIH0gewogICAgICAgICAgc3RhX3dhcm4gMzEwICJhY3Rpdml0eSBjYW5ub3QgYmUgc2V0IG9uIGNsb2NrIHBvcnRzLiIKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2V0X3Bvd2VyX2lucHV0X3BvcnRfYWN0aXZpdHkgJHBvcnQgJGRlbnNpdHkgJGR1dHkKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtcGlucyldIH0gewogICAgc2V0IHBpbnMgW2dldF9waW5zICRrZXlzKC1waW5zKV0KICAgIGZvcmVhY2ggcGluICRwaW5zIHsKICAgICAgc2V0X3Bvd2VyX3Bpbl9hY3Rpdml0eSAkcGluICRkZW5zaXR5ICRkdXR5CiAgICB9CiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInVuc2V0X3Bvd2VyX2FjdGl2aXR5IiB7IFstZ2xvYmFsXVwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstaW5wdXRdXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1pbnB1dF9wb3J0cyBwb3J0c11cCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLXBpbnMgcGluc11cCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLWNsb2NrIGNsb2NrXX0KCnByb2MgdW5zZXRfcG93ZXJfYWN0aXZpdHkgeyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJ1bnNldF9wb3dlcl9hY3Rpdml0eSIgYXJncyBcCiAgICBrZXlzIHstaW5wdXRfcG9ydHMgLXBpbnMgLWNsb2NrfSBcCiAgICBmbGFncyB7LWdsb2JhbCAtaW5wdXR9CgogIGNoZWNrX2FyZ2NfZXEwICJ1bnNldF9wb3dlcl9hY3Rpdml0eSIgJGFyZ3MKCiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLWdsb2JhbCldIH0gewogICAgdW5zZXRfcG93ZXJfZ2xvYmFsX2FjdGl2aXR5CiAgfQogIGlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1pbnB1dCldIH0gewogICAgdW5zZXRfcG93ZXJfaW5wdXRfYWN0aXZpdHkKICB9CiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtaW5wdXRfcG9ydHMpXSB9IHsKICAgIHNldCBwb3J0cyBbZ2V0X3BvcnRzX2Vycm9yICJpbnB1dF9wb3J0cyIgJGtleXMoLWlucHV0X3BvcnRzKV0KICAgIGZvcmVhY2ggcG9ydCAkcG9ydHMgewogICAgICBpZiB7IFtnZXRfcHJvcGVydHkgJHBvcnQgImRpcmVjdGlvbiJdID09ICJpbnB1dCIgfSB7CglpZiB7IFtpc19jbG9ja19zcmMgW3N0YTo6Z2V0X3BvcnRfcGluICRwb3J0XV0gfSB7CiAgICAgICAgICBzdGFfd2FybiAzMDMgImFjdGl2aXR5IGNhbm5vdCBiZSBzZXQgb24gY2xvY2sgcG9ydHMuIgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB1bnNldF9wb3dlcl9pbnB1dF9wb3J0X2FjdGl2aXR5ICRwb3J0CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLXBpbnMpXSB9IHsKICAgIHNldCBwaW5zIFtnZXRfcGlucyAka2V5cygtcGlucyldCiAgICBmb3JlYWNoIHBpbiAkcGlucyB7CiAgICAgIHVuc2V0X3Bvd2VyX3Bpbl9hY3Rpdml0eSAkcGluCiAgICB9CiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgojIERlcHJlY2F0ZWQgOS8yMDI0CmRlZmluZV9jbWRfYXJncyAicmVhZF9wb3dlcl9hY3Rpdml0aWVzIiB7IFstc2NvcGUgc2NvcGVdIC12Y2QgZmlsZW5hbWUgfQoKcHJvYyByZWFkX3Bvd2VyX2FjdGl2aXRpZXMgeyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJyZWFkX3Bvd2VyX2FjdGl2aXRpZXMiIGFyZ3MgXAogICAga2V5cyB7LXNjb3BlfSBmbGFncyB7LXZjZH0KCiAgY2hlY2tfYXJnY19lcTEgInNldF9wb3dlcl9hY3Rpdml0eSIgJGFyZ3MKICBzZXQgZmlsZW5hbWUgW2ZpbGUgbmF0aXZlbmFtZSBbbGluZGV4ICRhcmdzIDBdXQogIHNldCBzY29wZSAiIgogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLXNjb3BlKV0gfSB7CiAgICBzZXQgc2NvcGUgJGtleXMoLXNjb3BlKQogIH0KICBzdGFfd2FybiAzMDUgInJlYWRfcG93ZXJfYWN0aXZpdGllcyBpcyBkZXByZWNhdGVkLiBVc2UgcmVhZF92Y2QuIgogIHJlYWRfdmNkX2ZpbGUgJGZpbGVuYW1lICRzY29wZQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInJlYWRfdmNkIiB7IFstc2NvcGUgc2NvcGVdIGZpbGVuYW1lIH0KCnByb2MgcmVhZF92Y2QgeyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJyZWFkX3ZjZCIgYXJncyBcCiAgICBrZXlzIHstc2NvcGV9IGZsYWdzIHt9CgogIGNoZWNrX2FyZ2NfZXExICJyZWFkX3ZjZCIgJGFyZ3MKICBzZXQgZmlsZW5hbWUgW2ZpbGUgbmF0aXZlbmFtZSBbbGluZGV4ICRhcmdzIDBdXQogIHNldCBzY29wZSAiIgogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLXNjb3BlKV0gfSB7CiAgICBzZXQgc2NvcGUgJGtleXMoLXNjb3BlKQogIH0KICByZWFkX3ZjZF9maWxlICRmaWxlbmFtZSAkc2NvcGUKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJyZWFkX3NhaWYiIHsgWy1zY29wZSBzY29wZV0gZmlsZW5hbWUgfQoKcHJvYyByZWFkX3NhaWYgeyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJyZWFkX3NhaWYiIGFyZ3Mga2V5cyB7LXNjb3BlfSBmbGFncyB7fQoKICBjaGVja19hcmdjX2VxMSAicmVhZF9zYWlmIiAkYXJncwogIHNldCBmaWxlbmFtZSBbZmlsZSBuYXRpdmVuYW1lIFtsaW5kZXggJGFyZ3MgMF1dCiAgc2V0IHNjb3BlICIiCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtc2NvcGUpXSB9IHsKICAgIHNldCBzY29wZSAka2V5cygtc2NvcGUpCiAgfQogIHJlYWRfc2FpZl9maWxlICRmaWxlbmFtZSAkc2NvcGUKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJyZXBvcnRfYWN0aXZpdHlfYW5ub3RhdGlvbiIgeyBbLXJlcG9ydF91bmFubm90YXRlZF0gXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1yZXBvcnRfYW5ub3RhdGVkXSB9Cgpwcm9jX3JlZGlyZWN0IHJlcG9ydF9hY3Rpdml0eV9hbm5vdGF0aW9uIHsKICBwYXJzZV9rZXlfYXJncyAicmVwb3J0X2FjdGl2aXR5X2Fubm90YXRpb24iIGFyZ3MgXAogICAga2V5cyB7fSBmbGFncyB7LXJlcG9ydF91bmFubm90YXRlZCAtcmVwb3J0X2Fubm90YXRlZH0KICBjaGVja19hcmdjX2VxMCAicmVwb3J0X2FjdGl2aXR5X2Fubm90YXRpb24iICRhcmdzCiAgc2V0IHJlcG9ydF91bmFubm90YXRlZCBbaW5mbyBleGlzdHMgZmxhZ3MoLXJlcG9ydF91bmFubm90YXRlZCldCiAgc2V0IHJlcG9ydF9hbm5vdGF0ZWQgW2luZm8gZXhpc3RzIGZsYWdzKC1yZXBvcnRfYW5ub3RhdGVkKV07CiAgcmVwb3J0X2FjdGl2aXR5X2Fubm90YXRpb25fY21kICRyZXBvcnRfdW5hbm5vdGF0ZWQgJHJlcG9ydF9hbm5vdGF0ZWQKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKcHJvYyBwb3dlcl9maW5kX25hbiB7IH0gewogIHNldCBjb3JuZXIgW2NtZF9jb3JuZXJdCiAgZm9yZWFjaCBpbnN0IFtuZXR3b3JrX2xlYWZfaW5zdGFuY2VzXSB7CiAgICBzZXQgcG93ZXJfcmVzdWx0IFtpbnN0YW5jZV9wb3dlciAkaW5zdCAkY29ybmVyXQogICAgbGFzc2lnbiAkcG93ZXJfcmVzdWx0IGludGVybmFsIHN3aXRjaGluZyBsZWFrYWdlIHRvdGFsCiAgICBpZiB7IFtpc19uYW4gJGludGVybmFsXSB8fCBbaXNfbmFuICRzd2l0Y2hpbmddIHx8IFtpc19uYW4gJGxlYWthZ2VdIH0gewogICAgICByZXBvcnRfbGluZSAiW2dldF9mdWxsX25hbWUgJGluc3RdICRpbnRlcm5hbCAkc3dpdGNoaW5nICRsZWFrYWdlIgogICAgICBicmVhawogICAgfQogIH0KfQoKIyBzdGEgbmFtZXNwYWNlIGVuZC4KfQojIE9wZW5TVEEsIFN0YXRpYyBUaW1pbmcgQW5hbHl6ZXIKIyBDb3B5cmlnaHQgKGMpIDIwMjUsIFBhcmFsbGF4IFNvZnR3YXJlLCBJbmMuCiMgCiMgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKIyBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQojIHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIGVpdGhlciB2ZXJzaW9uIDMgb2YgdGhlIExpY2Vuc2UsIG9yCiMgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KIyAKIyBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKIyBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgojIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gU2VlIHRoZQojIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCiMgCiMgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UKIyBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gSWYgbm90LCBzZWUgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KIyAKIyBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdAojIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4KIyAKIyBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQojIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4KIyAKIyBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojCiMgU0RDIGNvbW1hbmRzLgojIEFscGhhYmV0aWNhbCB3aXRoaW4gZ3JvdXBzIGFzIGluIHRoZSBTREMgc3BlYy4KIwojIEFyZ3VtZW50IHBhcnNpbmcgYW5kIGNoZWNraW5nIGlzIGRvbmUgaW4gVENMIGJlZm9yZSBjYWxsaW5nIGEKIyBTV0lHIGludGVyZmFjZSBmdW5jdGlvbi4KIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpuYW1lc3BhY2UgZXZhbCBzdGEgewoKZGVmaW5lX2NtZF9hcmdzICJyZWFkX3NkYyIge1stZWNob10gZmlsZW5hbWV9Cgpwcm9jX3JlZGlyZWN0IHJlYWRfc2RjIHsKICBwYXJzZV9rZXlfYXJncyAicmVhZF9zZGMiIGFyZ3Mga2V5cyB7fSBmbGFncyB7LWVjaG99CgogIGNoZWNrX2FyZ2NfZXExICJyZWFkX3NkYyIgJGFyZ3MKICBzZXQgZWNobyBbaW5mbyBleGlzdHMgZmxhZ3MoLWVjaG8pXQogIHNldCBmaWxlbmFtZSBbZmlsZSBuYXRpdmVuYW1lIFtsaW5kZXggJGFyZ3MgMF1dCiAgc2V0IHByZXZfZmlsZW5hbWUgW2luZm8gc2NyaXB0XQogIGluY2x1ZGVfZmlsZSAkZmlsZW5hbWUgJGVjaG8gMAp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgIndyaXRlX3NkYyIgXAogIHtbLW1hcF9ocGluc10gWy1kaWdpdHMgZGlnaXRzXSBbLWd6aXBdIFstbm9fdGltZXN0YW1wXSBmaWxlbmFtZX0KCnByb2Mgd3JpdGVfc2RjIHsgYXJncyB9IHsKICBwYXJzZV9rZXlfYXJncyAid3JpdGVfc2RjIiBhcmdzIGtleXMgey1kaWdpdHMgLXNpZ25pZmljYW50X2RpZ2l0c30gXAogICAgZmxhZ3Mgey1tYXBfaHBpbnMgLWNvbXBhdGlibGUgLWd6aXAgLW5vX3RpbWVzdGFtcH0KICBjaGVja19hcmdjX2VxMSAid3JpdGVfc2RjIiAkYXJncwoKICBzZXQgZGlnaXRzIDQKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1kaWdpdHMpXSB9IHsKICAgIHNldCBkaWdpdHMgJGtleXMoLWRpZ2l0cykKICB9CiAgY2hlY2tfcG9zaXRpdmVfaW50ZWdlciAiLWRpZ2l0cyIgJGRpZ2l0cwoKICBzZXQgZmlsZW5hbWUgW2ZpbGUgbmF0aXZlbmFtZSBbbGluZGV4ICRhcmdzIDBdXQogIHNldCBnemlwIFtpbmZvIGV4aXN0cyBmbGFncygtZ3ppcCldCiAgc2V0IG5vX3RpbWVzdGFtcCBbaW5mbyBleGlzdHMgZmxhZ3MoLW5vX3RpbWVzdGFtcCldCiAgc2V0IG1hcF9ocGlucyBbaW5mbyBleGlzdHMgZmxhZ3MoLW1hcF9ocGlucyldCiAgc2V0IG5hdGl2ZSBbZXhwciAhW2luZm8gZXhpc3RzIGZsYWdzKC1jb21wYXRpYmxlKV1dCiAgd3JpdGVfc2RjX2NtZCAkZmlsZW5hbWUgJG1hcF9ocGlucyAkbmF0aXZlICRkaWdpdHMgJGd6aXAgJG5vX3RpbWVzdGFtcAp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMKIyBHZW5lcmFsIFB1cnBvc2UgQ29tbWFuZHMKIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgImN1cnJlbnRfaW5zdGFuY2UiIHtbaW5zdGFuY2VdfQoKcHJvYyBjdXJyZW50X2luc3RhbmNlIHsge2luc3QgIiJ9IH0gewogIGlmIHsgJGluc3QgPT0gIiIgfSB7CiAgICBzZXQgY3VycmVudF9pbnN0YW5jZSBbdG9wX2luc3RhbmNlXQogIH0gZWxzZSB7CiAgICBzZXQgY3VycmVudF9pbnN0YW5jZSBbZ2V0X2luc3RhbmNlX2Vycm9yICJpbnN0YW5jZSIgJGluc3RdCiAgfQogIHNldCBjZWxsIFtnZXRfbmFtZSBbJGN1cnJlbnRfaW5zdGFuY2UgY2VsbF1dCiAgcmVwb3J0X2xpbmUgIkN1cnJlbnQgaW5zdGFuY2UgaXMgJGNlbGwuIgogICMgQ3VycmVudCBpbnN0YW5jZSBzdGF0ZSB2YXJpYWJsZSBtdXN0IGJlIHBhcnQgb2YgdGhlIHN0YSBzdGF0ZSBzbwogICMgdGhlIHRjbCBpbnRlcnByZXRlciBjYW4gYmUgc2hhcmVkIGJ5IG11bHRpcGxlIHNkYyBmaWxlcy4KICBzZXRfY3VycmVudF9pbnN0YW5jZSAkY3VycmVudF9pbnN0YW5jZQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF9oaWVyYXJjaHlfc2VwYXJhdG9yIiB7IHNlcGVyYXRvciB9CgpzZXQgOjpoaWVyYXJjaHlfc2VwYXJhdG9yICIvIgoKcHJvYyBzZXRfaGllcmFyY2h5X3NlcGFyYXRvciB7IHNlcGFyYXRvciB9IHsKICBnbG9iYWwgaGllcmFyY2h5X3NlcGFyYXRvcgogIGNoZWNrX3BhdGhfZGl2aWRlciAkc2VwYXJhdG9yCiAgc2V0X3BhdGhfZGl2aWRlciAkc2VwYXJhdG9yCiAgc2V0IGhpZXJhcmNoeV9zZXBhcmF0b3IgJHNlcGFyYXRvcgp9Cgpwcm9jIGNoZWNrX3BhdGhfZGl2aWRlciB7IGRpdmlkZXIgfSB7CiAgc2V0IHNkY19kaXZpZGVycyAiL0BeIy58IgogIGlmIHsgIShbc3RyaW5nIGxlbmd0aCAkZGl2aWRlcl0gPT0gMQoJICYmIFtzdHJpbmcgZmlyc3QgJGRpdmlkZXIgJHNkY19kaXZpZGVyc10gIT0gLTEpfSB7CiAgICBzdGFfZXJyb3IgMzQyICJoaWVyYXJjaHkgc2VwYXJhdG9yIG11c3QgYmUgb25lIG9mICckc2RjX2RpdmlkZXJzJy4iCiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF91bml0cyIgXAogIHtbLXRpbWUgdGltZV91bml0XSBbLWNhcGFjaXRhbmNlIGNhcF91bml0XSBbLXJlc2lzdGFuY2UgcmVzX3VuaXRdXAogICAgIFstdm9sdGFnZSB2b2x0YWdlX3VuaXRdIFstY3VycmVudCBjdXJyZW50X3VuaXRdIFstcG93ZXIgcG93ZXJfdW5pdF1cCiAgICAgWy1kaXN0YW5jZSBkaXN0YW5jZV91bml0XX0KCiMgTm90ZSB0aGF0IHRoZSBzZXRfdW5pdHMgY29tbWFuZCBkb2VzIE5PVCBhY3R1YWxseSBzZXQgdGhlIHVuaXRzLgojIEl0IG1lcmVseSBjaGVja3MgdGhhdCB0aGUgY3VycmVudCB1bml0cyBhcmUgdGhlIHNhbWUgYXMgdGhlCiMgdW5pdHMgaW4gdGhlIHNldF91bml0cyBjb21tYW5kLgpwcm9jIHNldF91bml0cyB7IGFyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgInNldF91bml0cyIgYXJncyBcCiAgICBrZXlzIHstY2FwYWNpdGFuY2UgLXJlc2lzdGFuY2UgLXRpbWUgLXZvbHRhZ2UgLWN1cnJlbnQgLXBvd2VyIC1kaXN0YW5jZX0gXAogICAgZmxhZ3Mge30KICBjaGVja19hcmdjX2VxMCAic2V0X3VuaXRzIiAkYXJncwogIGNoZWNrX3VuaXQgInRpbWUiIC10aW1lICJzIiBrZXlzCiAgY2hlY2tfdW5pdCAiY2FwYWNpdGFuY2UiIC1jYXBhY2l0YW5jZSAiZiIga2V5cwogIGNoZWNrX3VuaXQgInJlc2lzdGFuY2UiIC1yZXNpc3RhbmNlICJvaG0iIGtleXMKICBjaGVja191bml0ICJ2b2x0YWdlIiAtdm9sdGFnZSAidiIga2V5cwogIGNoZWNrX3VuaXQgImN1cnJlbnQiIC1jdXJyZW50ICJBIiBrZXlzCiAgY2hlY2tfdW5pdCAicG93ZXIiIC1wb3dlciAiVyIga2V5cwogIGNoZWNrX3VuaXQgImRpc3RhbmNlIiAtZGlzdGFuY2UgIm0iIGtleXMKfQoKcHJvYyBjaGVja191bml0IHsgdW5pdCBrZXkgc3VmZml4IGtleV92YXIgfSB7CiAgdXB2YXIgMSAka2V5X3ZhciBrZXlzCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygka2V5KV0gfSB7CiAgICBzZXQgdmFsdWUgJGtleXMoJGtleSkKICAgIHNldCBzdWZmaXhfbGVuZ3RoIFtzdHJpbmcgbGVuZ3RoICRzdWZmaXhdCiAgICBzZXQgYXJnX3N1ZmZpeCBbc3RyaW5nIHJhbmdlICR2YWx1ZSBlbmQtW2V4cHIgJHN1ZmZpeF9sZW5ndGggLSAxXSBlbmRdCiAgICBpZiB7IFtzdHJpbmcgbWF0Y2ggLW5vY2FzZSAkYXJnX3N1ZmZpeCAkc3VmZml4XSB9IHsKICAgICAgc2V0IGFyZ19wcmVmaXggW3N0cmluZyByYW5nZSAkdmFsdWUgMCBlbmQtJHN1ZmZpeF9sZW5ndGhdCiAgICAgIGlmIHsgW3JlZ2V4cCAiXigxMCopPyhcW01rbXVucGZcXSk/JCIgJGFyZ19wcmVmaXggaWdub3JlIG11bHQgcHJlZml4XSB9IHsKICAgICAgICBpZiB7ICRtdWx0ID09ICIiIH0gewogICAgICAgICAgc2V0IG11bHQgMQogICAgICAgIH0KICAgICAgICBzZXQgc2NhbGUgW3VuaXRfcHJlZml4X3NjYWxlICR1bml0ICRwcmVmaXggXQogICAgICAgIGNoZWNrX3VuaXRfc2NhbGUgJHVuaXQgW2V4cHIgJHNjYWxlICogJG11bHRdCiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhX2Vycm9yIDM0MyAidW5rbm93biB1bml0ICR1bml0IHByZWZpeCAnJHthcmdfcHJlZml4fScuIgogICAgICB9CiAgICB9IGVsc2UgewogICAgICBzdGFfZXJyb3IgNTAxICJpbmNvcnJlY3QgdW5pdCBzdWZmaXggJyRhcmdfc3VmZml4Jy4iCiAgICB9CiAgfQp9Cgpwcm9jIHVuaXRfcHJlZml4X3NjYWxlIHsgdW5pdCBwcmVmaXggfSB7CiAgc3dpdGNoIC1leGFjdCAtLSAkcHJlZml4IHsKICAgICJNIiB7IHJldHVybiAxRSs2ICB9CiAgICAiayIgeyByZXR1cm4gMUUrMyAgfQogICAgIiIgIHsgcmV0dXJuIDFFKzAgIH0KICAgICJtIiB7IHJldHVybiAxRS0zICB9CiAgICAidSIgeyByZXR1cm4gMUUtNiAgfQogICAgIm4iIHsgcmV0dXJuIDFFLTkgIH0KICAgICJwIiB7IHJldHVybiAxRS0xMiB9CiAgICAiZiIgeyByZXR1cm4gMUUtMTUgfQogIH0KICBzdGFfZXJyb3IgMzQ0ICJ1bmtub3duICR1bml0IHByZWZpeCAnJHByZWZpeCcuIgp9Cgpwcm9jIGNoZWNrX3VuaXRfc2NhbGUgeyB1bml0IHNjYWxlIH0gewogIHNldCB1bml0X3NjYWxlIFt1bml0X3NjYWxlICR1bml0XQogIGlmIHsgIVtmdXp6eV9lcXVhbCAkc2NhbGUgJHVuaXRfc2NhbGVdIH0gewogICAgc3RhX3dhcm4gMzQ1ICIkdW5pdCBzY2FsZSBbZm9ybWF0ICUuMGUgJHNjYWxlXSBkb2VzIG5vdCBtYXRjaCBsaWJyYXJ5IHNjYWxlIFtmb3JtYXQgJS4wZSAkdW5pdF9zY2FsZV0uIgogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojCiMgT2JqZWN0IEFjY2VzcyBDb21tYW5kcwojCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAiYWxsX2Nsb2NrcyIge30KCnByb2MgYWxsX2Nsb2NrcyB7IH0gewogIHJldHVybiBbZ2V0X2Nsb2NrcyAtcXVpZXQgKl0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJhbGxfaW5wdXRzIiB7Wy1ub19jbG9ja3NdfQoKcHJvYyBhbGxfaW5wdXRzIHsgYXJncyB9IHsKICBwYXJzZV9rZXlfYXJncyAiYWxsX2lucHV0cyIgYXJncyBrZXlzIHt9IGZsYWdzIHstbm9fY2xvY2tzfQogIHNldCBub19jbGtzIFtpbmZvIGV4aXN0cyBmbGFncygtbm9fY2xvY2tzKV0KICByZXR1cm4gW2FsbF9pbnB1dHNfY21kICRub19jbGtzXQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgImFsbF9vdXRwdXRzIiB7fQoKcHJvYyBhbGxfb3V0cHV0cyB7IGFyZ3MgfSB7CiAgY2hlY2tfYXJnY19lcTAgImFsbF9vdXRwdXRzIiAkYXJncwogIHJldHVybiBbYWxsX291dHB1dHNfY21kXQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgYWxsX3JlZ2lzdGVycyBcCiAge1stY2xvY2sgY2xvY2tzXSBbLXJpc2VfY2xvY2sgY2xvY2tzXSBbLWZhbGxfY2xvY2sgY2xvY2tzXSBbLWNlbGxzXSBbLWRhdGFfcGluc10gWy1jbG9ja19waW5zXVwKICAgICBbLWFzeW5jX3BpbnNdIFstb3V0cHV0X3BpbnNdIFstbGV2ZWxfc2Vuc2l0aXZlXSBbLWVkZ2VfdHJpZ2dlcmVkXX0KCnByb2MgYWxsX3JlZ2lzdGVycyB7IGFyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgImFsbF9yZWdpc3RlcnMiIGFyZ3Mga2V5cyB7LWNsb2NrIC1yaXNlX2Nsb2NrIC1mYWxsX2Nsb2NrfSBcCiAgICBmbGFncyB7LWNlbGxzIC1kYXRhX3BpbnMgLWNsb2NrX3BpbnMgLWFzeW5jX3BpbnMgLW91dHB1dF9waW5zIC1sZXZlbF9zZW5zaXRpdmUgLWVkZ2VfdHJpZ2dlcmVkfQogIGNoZWNrX2FyZ2NfZXEwICJhbGxfcmVnaXN0ZXJzIiAkYXJncwoKICBzZXQgY2xrcyB7fQogIHNldCBjbGtfcmYgInJpc2VfZmFsbCIKICBpZiBbaW5mbyBleGlzdHMga2V5cygtY2xvY2spXSB7CiAgICBzZXQgY2xrcyBbZ2V0X2Nsb2Nrc193YXJuICJjbG9ja3MiICRrZXlzKC1jbG9jayldCiAgfQogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1yaXNlX2Nsb2NrKV0gewogICAgc2V0IGNsa3MgW2dldF9jbG9ja3Nfd2FybiAiY2xvY2tzIiAka2V5cygtcmlzZV9jbG9jayldCiAgICBzZXQgY2xrX3JmICJyaXNlIgogIH0KICBpZiBbaW5mbyBleGlzdHMga2V5cygtZmFsbF9jbG9jayldIHsKICAgIHNldCBjbGtzIFtnZXRfY2xvY2tzX3dhcm4gImNsb2NrcyIgJGtleXMoLWZhbGxfY2xvY2spXQogICAgc2V0IGNsa19yZiAiZmFsbCIKICB9CgogIGlmIHtbaW5mbyBleGlzdHMgZmxhZ3MoLWVkZ2VfdHJpZ2dlcmVkKV0gXAoJJiYgIVtpbmZvIGV4aXN0cyBmbGFncygtbGV2ZWxfc2Vuc2l0aXZlKV19IHsKICAgIHNldCBlZGdlX3RyaWdnZXJlZCAxCiAgICBzZXQgbGV2ZWxfc2Vuc2l0aXZlIDAKICB9IGVsc2VpZiB7W2luZm8gZXhpc3RzIGZsYWdzKC1sZXZlbF9zZW5zaXRpdmUpXSBcCgkgICAgICAmJiAhW2luZm8gZXhpc3RzIGZsYWdzKC1lZGdlX3RyaWdnZXJlZCldfSB7CiAgICBzZXQgbGV2ZWxfc2Vuc2l0aXZlIDEKICAgIHNldCBlZGdlX3RyaWdnZXJlZCAwCiAgfSBlbHNlIHsKICAgIHNldCBlZGdlX3RyaWdnZXJlZCAxCiAgICBzZXQgbGV2ZWxfc2Vuc2l0aXZlIDEKICB9CiAgaWYgeyBbZXhwciBbaW5mbyBleGlzdHMgZmxhZ3MoLWNlbGxzKV0gXAogICAgICAgICAgKyBbaW5mbyBleGlzdHMgZmxhZ3MoLWRhdGFfcGlucyldIFwKICAgICAgICAgICsgW2luZm8gZXhpc3RzIGZsYWdzKC1jbG9ja19waW5zKV0gXAogICAgICAgICAgKyAgW2luZm8gZXhpc3RzIGZsYWdzKC1hc3luY19waW5zKV0gXAogICAgICAgICAgKyBbaW5mbyBleGlzdHMgZmxhZ3MoLW91dHB1dF9waW5zKV1dID4gMSB9IHsKICAgIHN0YV9lcnJvciAzNDYgIm9ubHkgb25lIG9mIC1jZWxscywgLWRhdGFfcGlucywgLWNsb2NrX3BpbnMsIC1hc3luY19waW5zLCAtb3V0cHV0X3BpbnMgYXJlIHN1cHBwb3J0ZWQuIgogIH0KICBpZiBbaW5mbyBleGlzdHMgZmxhZ3MoLWNlbGxzKV0gewogICAgcmV0dXJuIFtmaW5kX3JlZ2lzdGVyX2luc3RhbmNlcyAkY2xrcyAkY2xrX3JmIFwKCSAgICAgICRlZGdlX3RyaWdnZXJlZCAkbGV2ZWxfc2Vuc2l0aXZlXQogIH0gZWxzZWlmIFtpbmZvIGV4aXN0cyBmbGFncygtZGF0YV9waW5zKV0gewogICAgcmV0dXJuIFtmaW5kX3JlZ2lzdGVyX2RhdGFfcGlucyAkY2xrcyAkY2xrX3JmIFwKCSAgICAgICRlZGdlX3RyaWdnZXJlZCAkbGV2ZWxfc2Vuc2l0aXZlXQogIH0gZWxzZWlmIFtpbmZvIGV4aXN0cyBmbGFncygtY2xvY2tfcGlucyldIHsKICAgIHJldHVybiBbZmluZF9yZWdpc3Rlcl9jbGtfcGlucyAkY2xrcyAkY2xrX3JmIFwKCSAgICAgICRlZGdlX3RyaWdnZXJlZCAkbGV2ZWxfc2Vuc2l0aXZlXQogIH0gZWxzZWlmIFtpbmZvIGV4aXN0cyBmbGFncygtYXN5bmNfcGlucyldIHsKICAgIHJldHVybiBbZmluZF9yZWdpc3Rlcl9hc3luY19waW5zICRjbGtzICRjbGtfcmYgXAoJICAgICAgJGVkZ2VfdHJpZ2dlcmVkICRsZXZlbF9zZW5zaXRpdmVdCiAgfSBlbHNlaWYgW2luZm8gZXhpc3RzIGZsYWdzKC1vdXRwdXRfcGlucyldIHsKICAgIHJldHVybiBbZmluZF9yZWdpc3Rlcl9vdXRwdXRfcGlucyAkY2xrcyAkY2xrX3JmIFwKCSAgICAgICRlZGdlX3RyaWdnZXJlZCAkbGV2ZWxfc2Vuc2l0aXZlXQogIH0gZWxzZSB7CiAgICAjIC1jZWxscyBpcyB0aGUgZGVmYXVsdC4KICAgIHJldHVybiBbZmluZF9yZWdpc3Rlcl9pbnN0YW5jZXMgJGNsa3MgJGNsa19yZiBcCgkgICAgICAkZWRnZV90cmlnZ2VyZWQgJGxldmVsX3NlbnNpdGl2ZV0KICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAiY3VycmVudF9kZXNpZ24iIHtbZGVzaWduXX0KCnZhcmlhYmxlIGN1cnJlbnRfZGVzaWduX25hbWUgIiIKCnByb2MgY3VycmVudF9kZXNpZ24geyB7ZGVzaWduICIifSB9IHsKICB2YXJpYWJsZSBjdXJyZW50X2Rlc2lnbl9uYW1lCgogIGlmIHsgJGRlc2lnbiA9PSAiIiB9IHsKICAgICMgdG9wX2luc3RhbmNlIGVycm9ycyBpZiB0aGUgbmV0d29yayBoYXMgbm90IGJlZW4gbGlua2VkLgogICAgc2V0IGN1cnJlbnRfZGVzaWduX25hbWUgW2dldF9uYW1lIFtnZXRfb2JqZWN0X3Byb3BlcnR5IFt0b3BfaW5zdGFuY2VdIGNlbGxdXQogIH0gZWxzZWlmIHsgIVtuZXR3b3JrX2lzX2xpbmtlZF0gfSB7CiAgICBzZXQgY3VycmVudF9kZXNpZ25fbmFtZSAkZGVzaWduCiAgICByZXR1cm4gJGRlc2lnbgogIH0gZWxzZWlmIHsgW25ldHdvcmtfaXNfbGlua2VkXSAmJiAkZGVzaWduID09IFtnZXRfbmFtZSBbZ2V0X29iamVjdF9wcm9wZXJ0eSBbdG9wX2luc3RhbmNlXSBjZWxsXV0gfSB7CiAgICBzZXQgY3VycmVudF9kZXNpZ25fbmFtZSAkZGVzaWduCiAgICByZXR1cm4gJGRlc2lnbgogIH0gZWxzZSB7CiAgICBzdGFfd2FybiAzNDcgImN1cnJlbnRfZGVzaWduIGZvciBvdGhlciB0aGFuIHRvcCBjZWxsIG5vdCBzdXBwb3J0ZWQuIgogICAgc2V0IGN1cnJlbnRfZGVzaWduX25hbWUgJGRlc2lnbgogICAgcmV0dXJuICRkZXNpZ24KICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiMgR2VuZXJpYyBnZXRfKiBmaWx0ZXIuCnByb2MgZmlsdGVyX29ianMgeyBmaWx0ZXIgb2JqZWN0cyBmaWx0ZXJfZnVuY3Rpb24gb2JqZWN0X3R5cGUgfSB7CiAgc2V0IGZpbHRlcl9yZWdleHAxIHtAPyhbYS16QS1aX10rKSAqKCg9PXwhPXw9fnwhfikgKihbMC05YS16QS1aX1wqXSspKT99CiAgc2V0IGZpbHRlcl9vcl9yZWdleHAgIigkZmlsdGVyX3JlZ2V4cDEpICpcXHxcXHwgKigkZmlsdGVyX3JlZ2V4cDEpIgogIHNldCBmaWx0ZXJfYW5kX3JlZ2V4cCAiKCRmaWx0ZXJfcmVnZXhwMSkgKiYmICooJGZpbHRlcl9yZWdleHAxKSIKICBzZXQgZmlsdGVyZWRfb2JqZWN0cyB7fQogICMgSWdub3JlIHN1Yi1leHBycyBpbiBmaWx0ZXJfcmVnZXhwMSBmb3IgZXhwcjIgbWF0Y2ggdmFyLgogIGlmIHsgW3JlZ2V4cCAkZmlsdGVyX29yX3JlZ2V4cCAkZmlsdGVyIGlnbm9yZSBleHByMSBpZ25vcmUgaWdub3JlIGlnbm9yZSBpZ25vcmUgZXhwcjJdIH0gewogICAgc2V0IGZpbHRlcmVkX29iamVjdHMxIFtmaWx0ZXJfb2JqcyAkZXhwcjEgJG9iamVjdHMgJGZpbHRlcl9mdW5jdGlvbiAkb2JqZWN0X3R5cGVdCiAgICBzZXQgZmlsdGVyZWRfb2JqZWN0czIgW2ZpbHRlcl9vYmpzICRleHByMiAkb2JqZWN0cyAkZmlsdGVyX2Z1bmN0aW9uICRvYmplY3RfdHlwZV0KICAgIHNldCBmaWx0ZXJlZF9vYmplY3RzIFtjb25jYXQgJGZpbHRlcmVkX29iamVjdHMxICRmaWx0ZXJlZF9vYmplY3RzMl0KICB9IGVsc2VpZiB7IFtyZWdleHAgJGZpbHRlcl9hbmRfcmVnZXhwICRmaWx0ZXIgaWdub3JlIGV4cHIxIGlnbm9yZSBpZ25vcmUgaWdub3JlIGlnbm9yZSBleHByMl0gfSB7CiAgICBzZXQgZmlsdGVyZWRfb2JqZWN0cyBbZmlsdGVyX29ianMgJGV4cHIxICRvYmplY3RzICRmaWx0ZXJfZnVuY3Rpb24gJG9iamVjdF90eXBlXQogICAgc2V0IGZpbHRlcmVkX29iamVjdHMgW2ZpbHRlcl9vYmpzICRleHByMiAkZmlsdGVyZWRfb2JqZWN0cyAkZmlsdGVyX2Z1bmN0aW9uICRvYmplY3RfdHlwZV0KICB9IGVsc2VpZiB7IFtyZWdleHAgJGZpbHRlcl9yZWdleHAxICRmaWx0ZXIgaWdub3JlIGF0dHJfbmFtZSBpZ25vcmUgb3AgYXJnXSB9IHsKICAgICMgSWYgbm8gb3AvYXJnLCB1c2UgPGF0dHJfbmFtZT49PTEgYnkgZGVmYXVsdC4KICAgIHNldCBvcCBbZXhwciB7KCRvcCA9PSAiIikgPyAiPT0iIDogJG9wfV0KICAgIHNldCBhcmcgW2V4cHIgeygkYXJnID09ICIiKSA/ICIxIiA6ICRhcmd9XQogICAgc2V0IGZpbHRlcmVkX29iamVjdHMgWyRmaWx0ZXJfZnVuY3Rpb24gJGF0dHJfbmFtZSAkb3AgJGFyZyAkb2JqZWN0c10KICB9IGVsc2UgewogICAgc3RhX2Vycm9yIDM1MCAidW5zdXBwb3J0ZWQgJG9iamVjdF90eXBlIC1maWx0ZXIgZXhwcmVzc2lvbi4iCiAgfQogIHJldHVybiAkZmlsdGVyZWRfb2JqZWN0cwp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgImdldF9jZWxscyIgXAogIHtbLWhpZXJhcmNoaWNhbF0gWy1oc2Mgc2VwYXJhdG9yXSBbLWZpbHRlciBleHByXVwKICAgICBbLXJlZ2V4cF0gWy1ub2Nhc2VdIFstcXVpZXRdIFstb2Zfb2JqZWN0cyBvYmplY3RzXSBbcGF0dGVybnNdfQoKZGVmaW5lX2NtZF9hbGlhcyAiZ2V0X2NlbGwiICJnZXRfY2VsbHMiCgojIFJlYWxseSBnZXRfaW5zdGFuY2VzLCBidXQgU0RDIGNhbGxzIGluc3RhbmNlcyAiY2VsbHMiLgpwcm9jIGdldF9jZWxscyB7IGFyZ3MgfSB7CiAgZ2xvYmFsIGhpZXJhcmNoeV9zZXBhcmF0b3IKCiAgcGFyc2Vfa2V5X2FyZ3MgImdldF9jZWxscyIgYXJncyBrZXlzIHstaHNjIC1maWx0ZXIgLW9mX29iamVjdHN9IFwKICAgIGZsYWdzIHstaGllcmFyY2hpY2FsIC1yZWdleHAgLW5vY2FzZSAtcXVpZXR9CiAgY2hlY2tfbm9jYXNlX2ZsYWcgZmxhZ3MKCiAgc2V0IHJlZ2V4cCBbaW5mbyBleGlzdHMgZmxhZ3MoLXJlZ2V4cCldCiAgc2V0IG5vY2FzZSBbaW5mbyBleGlzdHMgZmxhZ3MoLW5vY2FzZSldCiAgc2V0IGhpZXJhcmNoaWNhbCBbaW5mbyBleGlzdHMgZmxhZ3MoLWhpZXJhcmNoaWNhbCldCiAgc2V0IHF1aWV0IFtpbmZvIGV4aXN0cyBmbGFncygtcXVpZXQpXQogICMgQ29weSBiYWNrc2xhc2hlcyB0aGF0IHdpbGwgYmUgcmVtb3ZlZCBieSBmb3JlYWNoLgogIGlmIHsgJGFyZ3MgPT0ge30gfSB7CiAgICBzZXQgcGF0dGVybnMgIioiCiAgfSBlbHNlIHsKICAgIHNldCBwYXR0ZXJucyBbc3RyaW5nIG1hcCB7XFwgXFxcXH0gW2xpbmRleCAkYXJncyAwXV0KICB9CiAgc2V0IGRpdmlkZXIgJGhpZXJhcmNoeV9zZXBhcmF0b3IKICBpZiBbaW5mbyBleGlzdHMga2V5cygtaHNjKV0gewogICAgc2V0IGRpdmlkZXIgJGtleXMoLWhzYykKICAgIGNoZWNrX3BhdGhfZGl2aWRlciAkZGl2aWRlcgogIH0KICBzZXQgaW5zdHMge30KICBpZiBbaW5mbyBleGlzdHMga2V5cygtb2Zfb2JqZWN0cyldIHsKICAgIGlmIHsgJGFyZ3MgIT0ge30gfSB7CiAgICAgIHN0YV93YXJuIDM0OCAicGF0dGVybnMgYXJndW1lbnQgbm90IHN1cHBvcnRlZCB3aXRoIC1vZl9vYmplY3RzLiIKICAgIH0KICAgIHBhcnNlX3BvcnRfcGluX25ldF9hcmcgJGtleXMoLW9mX29iamVjdHMpIHBpbnMgbmV0cwogICAgZm9yZWFjaCBwaW4gJHBpbnMgewogICAgICBpZiB7IFskcGluIGlzX3RvcF9sZXZlbF9wb3J0XSB9IHsKCXNldCBuZXQgW2dldF9uZXRzIFtnZXRfbmFtZSAkcGluXV0KCWlmIHsgJG5ldCAhPSAiTlVMTCIgfSB7CgkgIGxhcHBlbmQgbmV0cyAkbmV0Cgl9CiAgICAgIH0gZWxzZSB7CglsYXBwZW5kIGluc3RzIFskcGluIGluc3RhbmNlXQogICAgICB9CiAgICB9CiAgICBmb3JlYWNoIG5ldCAkbmV0cyB7CiAgICAgIHNldCBwaW5faXRlciBbJG5ldCBwaW5faXRlcmF0b3JdCiAgICAgIHdoaWxlIHsgWyRwaW5faXRlciBoYXNfbmV4dF0gfSB7CglzZXQgcGluIFskcGluX2l0ZXIgbmV4dF0KCWxhcHBlbmQgaW5zdHMgWyRwaW4gaW5zdGFuY2VdCiAgICAgIH0KICAgICAgJHBpbl9pdGVyIGZpbmlzaAogICAgfQogIH0gZWxzZSB7CiAgICBjaGVja19hcmdjX2VxMG9yMSAiZ2V0X2NlbGxzIiAkYXJncwogICAgZm9yZWFjaCBwYXR0ZXJuICRwYXR0ZXJucyB7CiAgICAgIGlmIHsgW2lzX29iamVjdCAkcGF0dGVybl0gfSB7CglpZiB7IFtvYmplY3RfdHlwZSAkcGF0dGVybl0gIT0gIkluc3RhbmNlIiB9IHsKCSAgc3RhX2Vycm9yIDMyNiAib2JqZWN0ICckcGF0dGVybicgaXMgbm90IGFuIGluc3RhbmNlLiIKCX0KCXNldCBpbnN0cyBbY29uY2F0ICRpbnN0cyAkcGF0dGVybl0KICAgICAgfSBlbHNlIHsKCWlmIHsgJGRpdmlkZXIgIT0gJGhpZXJhcmNoeV9zZXBhcmF0b3IgfSB7CgkgIHJlZ3N1YiAkZGl2aWRlciAkcGF0dGVybiAkaGllcmFyY2h5X3NlcGFyYXRvciBwYXR0ZXJuCgl9CglpZiB7ICRoaWVyYXJjaGljYWwgfSB7CgkgIHNldCBtYXRjaGVzIFtmaW5kX2luc3RhbmNlc19oaWVyX21hdGNoaW5nICRwYXR0ZXJuICRyZWdleHAgJG5vY2FzZV0KCX0gZWxzZSB7CgkgIHNldCBtYXRjaGVzIFtmaW5kX2luc3RhbmNlc19tYXRjaGluZyAkcGF0dGVybiAkcmVnZXhwICRub2Nhc2VdCgl9CglpZiB7ICRtYXRjaGVzID09IHt9ICYmICEkcXVpZXR9IHsKCSAgc3RhX3dhcm4gMzQ5ICJpbnN0YW5jZSAnJHBhdHRlcm4nIG5vdCBmb3VuZC4iCgl9CglzZXQgaW5zdHMgW2NvbmNhdCAkaW5zdHMgJG1hdGNoZXNdCiAgICAgIH0KICAgIH0KICB9CiAgaWYgW2luZm8gZXhpc3RzIGtleXMoLWZpbHRlcildIHsKICAgIHNldCBpbnN0cyBbZmlsdGVyX29ianMgJGtleXMoLWZpbHRlcikgJGluc3RzIGZpbHRlcl9pbnN0cyAiaW5zdGFuY2UiXQogIH0KICByZXR1cm4gJGluc3RzCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAiZ2V0X2Nsb2NrcyIge1stcmVnZXhwXSBbLW5vY2FzZV0gWy1xdWlldF0gWy1maWx0ZXIgZXhwcl0gW3BhdHRlcm5zXX0KCmRlZmluZV9jbWRfYWxpYXMgImdldF9jbG9jayIgImdldF9jbG9ja3MiCgpwcm9jIGdldF9jbG9ja3MgeyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJnZXRfY2xvY2tzIiBhcmdzIGtleXMgey1maWx0ZXJ9IGZsYWdzIHstcmVnZXhwIC1ub2Nhc2UgLXF1aWV0fQogIGNoZWNrX2FyZ2NfZXEwb3IxICJnZXRfY2xvY2tzIiAkYXJncwogIGNoZWNrX25vY2FzZV9mbGFnIGZsYWdzCgogICMgQ29weSBiYWNrc2xhc2hlcyB0aGF0IHdpbGwgYmUgcmVtb3ZlZCBieSBmb3JlYWNoLgogIGlmIHsgJGFyZ3MgPT0ge30gfSB7CiAgICBzZXQgcGF0dGVybnMgIioiCiAgfSBlbHNlIHsKICAgIHNldCBwYXR0ZXJucyBbc3RyaW5nIG1hcCB7XFwgXFxcXH0gW2xpbmRleCAkYXJncyAwXV0KICB9CiAgc2V0IHJlZ2V4cCBbaW5mbyBleGlzdHMgZmxhZ3MoLXJlZ2V4cCldCiAgc2V0IG5vY2FzZSBbaW5mbyBleGlzdHMgZmxhZ3MoLW5vY2FzZSldCiAgc2V0IGNsb2NrcyB7fQogIGZvcmVhY2ggcGF0dGVybiAkcGF0dGVybnMgewogICAgaWYgeyBbaXNfb2JqZWN0ICRwYXR0ZXJuXSB9IHsKICAgICAgaWYgeyBbb2JqZWN0X3R5cGUgJHBhdHRlcm5dICE9ICJDbG9jayIgfSB7CglzdGFfZXJyb3IgMzI3ICJvYmplY3QgJyRwYXR0ZXJuJyBpcyBub3QgYW4gY2xvY2suIgogICAgICB9CiAgICAgIHNldCBjbG9ja3MgW2NvbmNhdCAkY2xvY2tzICRwYXR0ZXJuXQogICAgfSBlbHNlIHsKICAgICAgc2V0IG1hdGNoZXMgW2ZpbmRfY2xvY2tzX21hdGNoaW5nICRwYXR0ZXJuICRyZWdleHAgJG5vY2FzZV0KICAgICAgaWYgeyAkbWF0Y2hlcyAhPSB7fSB9IHsKCXNldCBjbG9ja3MgW2NvbmNhdCAkY2xvY2tzICRtYXRjaGVzXQogICAgICB9IGVsc2UgewoJaWYgeyFbaW5mbyBleGlzdHMgZmxhZ3MoLXF1aWV0KV19IHsKCSAgc3RhX3dhcm4gMzUxICJjbG9jayAnJHBhdHRlcm4nIG5vdCBmb3VuZC4iCgl9CiAgICAgIH0KICAgIH0KICB9CiAgaWYgW2luZm8gZXhpc3RzIGtleXMoLWZpbHRlcildIHsKICAgIHNldCBjbG9ja3MgW2ZpbHRlcl9vYmpzICRrZXlzKC1maWx0ZXIpICRjbG9ja3MgZmlsdGVyX2Nsb2NrcyAiY2xvY2siXQogIH0KICByZXR1cm4gJGNsb2Nrcwp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgImdldF9saWJfY2VsbHMiIFwKICB7Wy1oc2Mgc2VwYXJhdG9yXSBbLXJlZ2V4cF0gWy1ub2Nhc2VdIFstcXVpZXRdIFstZmlsdGVyIGV4cHJdXAogICAgIFstb2Zfb2JqZWN0cyBvYmplY3RzXSBbcGF0dGVybnNdfQoKZGVmaW5lX2NtZF9hbGlhcyAiZ2V0X2xpYl9jZWxsIiAiZ2V0X2xpYl9jZWxscyIKCnByb2MgZ2V0X2xpYl9jZWxscyB7IGFyZ3MgfSB7CiAgZ2xvYmFsIGhpZXJhcmNoeV9zZXBhcmF0b3IKICBwYXJzZV9rZXlfYXJncyAiZ2V0X2xpYl9jZWxscyIgYXJncyBrZXlzIHstaHNjIC1vZl9vYmplY3RzIC1maWx0ZXJ9IFwKICAgIGZsYWdzIHstcmVnZXhwIC1ub2Nhc2UgLXF1aWV0fQogIGNoZWNrX25vY2FzZV9mbGFnIGZsYWdzCgogIHNldCByZWdleHAgW2luZm8gZXhpc3RzIGZsYWdzKC1yZWdleHApXQogIHNldCBub2Nhc2UgW2luZm8gZXhpc3RzIGZsYWdzKC1ub2Nhc2UpXQogIHNldCBjZWxscyB7fQogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1vZl9vYmplY3RzKV0gewogICAgaWYgeyAkYXJncyAhPSB7fSB9IHsKICAgICAgc3RhX3dhcm4gMzUyICJwb3NpdGlvbmFsIGFyZ3VtZW50cyBub3Qgc3VwcG9ydGVkIHdpdGggLW9mX29iamVjdHMuIgogICAgfQogICAgc2V0IGluc3RzIFtnZXRfaW5zdGFuY2VzX2Vycm9yICJvYmplY3RzIiAka2V5cygtb2Zfb2JqZWN0cyldCiAgICBmb3JlYWNoIGluc3QgJGluc3RzIHsKICAgICAgbGFwcGVuZCBjZWxscyBbJGluc3QgbGliZXJ0eV9jZWxsXQogICAgfQogIH0gZWxzZSB7CiAgICBjaGVja19hcmdjX2VxMG9yMSAiZ2V0X2xpYl9jZWxscyIgJGFyZ3MKICAgICMgQ29weSBiYWNrc2xhc2hlcyB0aGF0IHdpbGwgYmUgcmVtb3ZlZCBieSBmb3JlYWNoLgogICAgaWYgeyAkYXJncyA9PSB7fSB9IHsKICAgICAgc2V0IHBhdHRlcm5zICIqIgogICAgfSBlbHNlIHsKICAgICAgc2V0IHBhdHRlcm5zIFtzdHJpbmcgbWFwIHtcXCBcXFxcfSBbbGluZGV4ICRhcmdzIDBdXQogICAgfQogICAgIyBQYXJzZSBsaWJyYXJ5X25hbWUvcGF0dGVybi4KICAgIHNldCBkaXZpZGVyICRoaWVyYXJjaHlfc2VwYXJhdG9yCiAgICBpZiBbaW5mbyBleGlzdHMga2V5cygtaHNjKV0gewogICAgICBzZXQgZGl2aWRlciAka2V5cygtaHNjKQogICAgICBjaGVja19wYXRoX2RpdmlkZXIgJGRpdmlkZXIKICAgIH0KICAgIHNldCBjZWxsX3JlZ2V4cCBbY2VsbF9yZWdleHBfaHNjICRkaXZpZGVyXQogICAgc2V0IHF1aWV0IFtpbmZvIGV4aXN0cyBmbGFncygtcXVpZXQpXQogICAgZm9yZWFjaCBwYXR0ZXJuICRwYXR0ZXJucyB7CiAgICAgIGlmIHsgW2lzX29iamVjdCAkcGF0dGVybl0gfSB7CglpZiB7IFtvYmplY3RfdHlwZSAkcGF0dGVybl0gIT0gIkxpYmVydHlDZWxsIiB9IHsKCSAgc3RhX2Vycm9yIDMyOCAib2JqZWN0ICckcGF0dGVybicgaXMgbm90IGEgbGliZXJ0eSBjZWxsLiIKCX0KCXNldCBjZWxscyBbY29uY2F0ICRjZWxscyAkcGF0dGVybl0KICAgICAgfSBlbHNlIHsKCWlmIHsgIVtyZWdleHAgJGNlbGxfcmVnZXhwICRwYXR0ZXJuIGlnbm9yZSBsaWJfbmFtZSBjZWxsX3BhdHRlcm5dfSB7CgkgIHNldCBsaWJfbmFtZSAiKiIKCSAgc2V0IGNlbGxfcGF0dGVybiAkcGF0dGVybgoJfQoJIyBBbGxvdyB3aWxkY2FyZHMgaW4gdGhlIGxpYnJhcnkgbmFtZSAoaW5jb21wYXRpYmxlKS4KCXNldCBsaWJzIFtnZXRfbGlicyAtcXVpZXQgJGxpYl9uYW1lXQoJaWYgeyAkbGlicyA9PSB7fSB9IHsKCSAgaWYgeyEkcXVpZXR9IHsKCSAgICBzdGFfd2FybiAzNTMgImxpYnJhcnkgJyRsaWJfbmFtZScgbm90IGZvdW5kLiIKCSAgfQoJfSBlbHNlIHsKCSAgZm9yZWFjaCBsaWIgJGxpYnMgewoJICAgIHNldCBtYXRjaGVzIFskbGliIGZpbmRfbGliZXJ0eV9jZWxsc19tYXRjaGluZyAkY2VsbF9wYXR0ZXJuIFwKCSAgCQkgJHJlZ2V4cCAkbm9jYXNlXQoJICAgIGlmIHskbWF0Y2hlcyAhPSB7fX0gewoJICAgICAgc2V0IGNlbGxzIFtjb25jYXQgJGNlbGxzICRtYXRjaGVzXQoJICAgIH0KCSAgfQoJICBpZiB7ICRjZWxscyA9PSB7fSB9IHsKCSAgICBpZiB7ISRxdWlldH0gewoJICAgICAgc3RhX3dhcm4gMzU0ICJjZWxsICckY2VsbF9wYXR0ZXJuJyBub3QgZm91bmQuIgoJICAgIH0KCSAgfQoJfQogICAgICB9CiAgICB9CiAgfQogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1maWx0ZXIpXSB7CiAgICBzZXQgY2VsbHMgW2ZpbHRlcl9vYmpzICRrZXlzKC1maWx0ZXIpICRjZWxscyBmaWx0ZXJfbGliX2NlbGxzICJsaWJlcnR5IGNlbGwiXQogIH0KICByZXR1cm4gJGNlbGxzCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAiZ2V0X2xpYl9waW5zIiBcCiAge1staHNjIHNlcGFyYXRvcl0gWy1yZWdleHBdIFstbm9jYXNlXSBbLXF1aWV0XSBbLWZpbHRlciBleHByXVwKICAgICBbLW9mX29iamVjdHMgb2JqZWN0c10gW3BhdHRlcm5zXX0KCmRlZmluZV9jbWRfYWxpYXMgImdldF9saWJfcGluIiAiZ2V0X2xpYl9waW5zIgoKIyAiZ2V0X2xpYl9wb3J0cyIgaW4gc3RhIHRlcm1pbm9sb2d5Lgpwcm9jIGdldF9saWJfcGlucyB7IGFyZ3MgfSB7CiAgZ2xvYmFsIGhpZXJhcmNoeV9zZXBhcmF0b3IKICBwYXJzZV9rZXlfYXJncyAiZ2V0X2xpYl9waW5zIiBhcmdzIGtleXMgey1oc2MgLW9mX29iamVjdHMgLWZpbHRlcn0gXAogICAgZmxhZ3Mgey1yZWdleHAgLW5vY2FzZSAtcXVpZXR9CiAgY2hlY2tfYXJnY19lcTBvcjEgImdldF9saWJfcGlucyIgJGFyZ3MKICBjaGVja19ub2Nhc2VfZmxhZyBmbGFncwogIAogIHNldCByZWdleHAgW2luZm8gZXhpc3RzIGZsYWdzKC1yZWdleHApXQogIHNldCBub2Nhc2UgW2luZm8gZXhpc3RzIGZsYWdzKC1ub2Nhc2UpXQogIHNldCBxdWlldCBbaW5mbyBleGlzdHMgZmxhZ3MoLXF1aWV0KV0KICAjIENvcHkgYmFja3NsYXNoZXMgdGhhdCB3aWxsIGJlIHJlbW92ZWQgYnkgZm9yZWFjaC4KICBpZiB7ICRhcmdzID09IHt9IH0gewogICAgc2V0IHBhdHRlcm5zICIqLyoiCiAgfSBlbHNlIHsKICAgIHNldCBwYXR0ZXJucyBbc3RyaW5nIG1hcCB7XFwgXFxcXH0gW2xpbmRleCAkYXJncyAwXV0KICB9CiAgIyBQYXJzZSBsaWJyYXJ5X25hbWUvY2VsbF9uYW1lL3BhdHRlcm4uCiAgc2V0IGRpdmlkZXIgJGhpZXJhcmNoeV9zZXBhcmF0b3IKICBpZiBbaW5mbyBleGlzdHMga2V5cygtaHNjKV0gewogICAgc2V0IGRpdmlkZXIgJGtleXMoLWhzYykKICAgIGNoZWNrX3BhdGhfZGl2aWRlciAkZGl2aWRlcgogIH0KICBzZXQgcG9ydF9yZWdleHAxIFtwb3J0X3JlZ2V4cF9oc2MgJGRpdmlkZXJdCiAgc2V0IHBvcnRfcmVnZXhwMiBbY2VsbF9yZWdleHBfaHNjICRkaXZpZGVyXQogIHNldCBwb3J0cyB7fQogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1vZl9vYmplY3RzKV0gewogICAgaWYgeyAkYXJncyAhPSB7fSB9IHsKICAgICAgc3RhX3dhcm4gMzM1ICJwb3NpdGlvbmFsIGFyZ3VtZW50cyBub3Qgc3VwcG9ydGVkIHdpdGggLW9mX29iamVjdHMuIgogICAgfQogICAgc2V0IGxpYmNlbGxzIFtnZXRfbGliY2VsbHNfZXJyb3IgIm9iamVjdHMiICRrZXlzKC1vZl9vYmplY3RzKV0KICAgIGZvcmVhY2ggbGliY2VsbCAkbGliY2VsbHMgewogICAgICBsYXBwZW5kIHBvcnRzIHsqfVskbGliY2VsbCBmaW5kX2xpYmVydHlfcG9ydHNfbWF0Y2hpbmcgKiAwIDFdCiAgICB9CiAgfSBlbHNlIHsKICAgIGZvcmVhY2ggcGF0dGVybiAkcGF0dGVybnMgewogICAgICBpZiB7IFtpc19vYmplY3QgJHBhdHRlcm5dIH0gewoJaWYgeyBbb2JqZWN0X3R5cGUgJHBhdHRlcm5dICE9ICJMaWJlcnR5UG9ydCIgfSB7CgkgIHN0YV9lcnJvciAzMjkgIm9iamVjdCAnJHBhdHRlcm4nIGlzIG5vdCBhIGxpYmVydHkgcGluLiIKCX0KCXNldCBwb3J0cyBbY29uY2F0ICRwb3J0cyAkcGF0dGVybl0KICAgICAgfSBlbHNlIHsKCSMgbWF0Y2ggbGlicmFyeS9jZWxsL3BvcnQKCXNldCBsaWJzIHt9CglpZiB7IFtyZWdleHAgJHBvcnRfcmVnZXhwMSAkcGF0dGVybiBpZ25vcmUgbGliX25hbWUgY2VsbF9uYW1lIHBvcnRfcGF0dGVybl0gfSB7CgkgIHNldCBsaWJzIFtnZXRfbGlicyAtcXVpZXQgJGxpYl9uYW1lXQoJICAjIG1hdGNoIGNlbGwvcG9ydAoJfSBlbHNlaWYgeyBbcmVnZXhwICRwb3J0X3JlZ2V4cDIgJHBhdHRlcm4gaWdub3JlIGNlbGxfbmFtZSBwb3J0X3BhdHRlcm5dIH0gewoJICBzZXQgbGlicyBbZ2V0X2xpYnMgKl0KCX0gZWxzZSB7CgkgIGlmIHsgISRxdWlldCB9IHsKCSAgICBzdGFfd2FybiAzNTUgImxpYnJhcnkvY2VsbC9wb3J0ICckcGF0dGVybicgbm90IGZvdW5kLiIKCSAgfQoJICByZXR1cm4ge30KCX0KCWlmIHsgJGxpYnMgIT0ge30gfSB7CgkgIHNldCBmb3VuZF9tYXRjaCAwCgkgIHNldCBjZWxscyB7fQoJICBmb3JlYWNoIGxpYiAkbGlicyB7CgkgICAgc2V0IGNlbGxzIFskbGliIGZpbmRfbGliZXJ0eV9jZWxsc19tYXRjaGluZyAkY2VsbF9uYW1lICRyZWdleHAgJG5vY2FzZV0KCSAgICBmb3JlYWNoIGNlbGwgJGNlbGxzIHsKCSAgICAgIHNldCBtYXRjaGVzIFskY2VsbCBmaW5kX2xpYmVydHlfcG9ydHNfbWF0Y2hpbmcgJHBvcnRfcGF0dGVybiBcCgkgIAkJICAgJHJlZ2V4cCAkbm9jYXNlXQoJICAgICAgZm9yZWFjaCBtYXRjaCAkbWF0Y2hlcyB7CgkJbGFwcGVuZCBwb3J0cyAkbWF0Y2gKCQlzZXQgZm91bmRfbWF0Y2ggMQoJICAgICAgfQoJICAgIH0KCSAgfQoJICBpZiB7ICEkZm91bmRfbWF0Y2ggfSB7CgkgICAgaWYgeyAhJHF1aWV0IH0gewoJICAgICAgc3RhX3dhcm4gMzU2ICJwb3J0ICckcG9ydF9wYXR0ZXJuJyBub3QgZm91bmQuIgoJICAgIH0KCSAgfQoJfSBlbHNlIHsKCSAgaWYgeyAhJHF1aWV0IH0gewoJICAgIHN0YV93YXJuIDM1NyAibGlicmFyeSAnJGxpYl9uYW1lJyBub3QgZm91bmQuIgoJICB9Cgl9CiAgICAgIH0KICAgIH0KICB9CiAgaWYgW2luZm8gZXhpc3RzIGtleXMoLWZpbHRlcildIHsKICAgIHNldCBwb3J0cyBbZmlsdGVyX29ianMgJGtleXMoLWZpbHRlcikgJHBvcnRzIGZpbHRlcl9saWJfcGlucyAibGliZXJ0eSBwb3J0Il0KICB9CiAgcmV0dXJuICRwb3J0cwp9Cgpwcm9jIGNoZWNrX25vY2FzZV9mbGFnIHsgZmxhZ3NfdmFyIH0gewogIHVwdmFyIDEgJGZsYWdzX3ZhciBmbGFncwogIGlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1ub2Nhc2UpXSAmJiAhW2luZm8gZXhpc3RzIGZsYWdzKC1yZWdleHApXSB9IHsKICAgIHN0YV93YXJuIDM1OCAiLW5vY2FzZSBpZ25vcmVkIHdpdGhvdXQgLXJlZ2V4cC4iCiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgImdldF9saWJzIiB7Wy1yZWdleHBdIFstbm9jYXNlXSBbLXF1aWV0XSBbLWZpbHRlciBleHByXSBbcGF0dGVybnNdfQoKZGVmaW5lX2NtZF9hbGlhcyAiZ2V0X2xpYiIgImdldF9saWJzIgoKcHJvYyBnZXRfbGlicyB7IGFyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgImdldF9saWJzIiBhcmdzIGtleXMgey1maWx0ZXJ9IGZsYWdzIHstcmVnZXhwIC1ub2Nhc2UgLXF1aWV0fQogIGNoZWNrX2FyZ2NfZXEwb3IxICJnZXRfbGlicyIgJGFyZ3MKICBjaGVja19ub2Nhc2VfZmxhZyBmbGFncwogIAogICMgQ29weSBiYWNrc2xhc2hlcyB0aGF0IHdpbGwgYmUgcmVtb3ZlZCBieSBmb3JlYWNoLgogIGlmIHsgJGFyZ3MgPT0ge30gfSB7CiAgICBzZXQgcGF0dGVybnMgIioiCiAgfSBlbHNlIHsKICAgIHNldCBwYXR0ZXJucyBbc3RyaW5nIG1hcCB7XFwgXFxcXH0gW2xpbmRleCAkYXJncyAwXV0KICB9CiAgc2V0IHJlZ2V4cCBbaW5mbyBleGlzdHMgZmxhZ3MoLXJlZ2V4cCldCiAgc2V0IG5vY2FzZSBbaW5mbyBleGlzdHMgZmxhZ3MoLW5vY2FzZSldCiAgc2V0IGxpYnMge30KICBmb3JlYWNoIHBhdHRlcm4gJHBhdHRlcm5zIHsKICAgIGlmIHsgW2lzX29iamVjdCAkcGF0dGVybl0gfSB7CiAgICAgIGlmIHsgW29iamVjdF90eXBlICRwYXR0ZXJuXSAhPSAiTGliZXJ0eUxpYnJhcnkiIH0gewoJc3RhX2Vycm9yIDMzMCAib2JqZWN0ICckcGF0dGVybicgaXMgbm90IGEgbGliZXJ0eSBsaWJyYXJ5LiIKICAgICAgfQogICAgICBzZXQgbGlicyBbY29uY2F0ICRsaWJzICRwYXR0ZXJuXQogICAgfSBlbHNlIHsKICAgICAgc2V0IG1hdGNoZXMgW2ZpbmRfbGliZXJ0eV9saWJyYXJpZXNfbWF0Y2hpbmcgJHBhdHRlcm4gJHJlZ2V4cCAkbm9jYXNlXQogICAgICBpZiB7JG1hdGNoZXMgIT0ge319IHsKCXNldCBsaWJzIFtjb25jYXQgJGxpYnMgJG1hdGNoZXNdCiAgICAgIH0gZWxzZSB7CglpZiB7IVtpbmZvIGV4aXN0cyBmbGFncygtcXVpZXQpXX0gewoJICBzdGFfd2FybiAzNTkgImxpYnJhcnkgJyRwYXR0ZXJuJyBub3QgZm91bmQuIgoJfQogICAgICB9CiAgICB9CiAgfQogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1maWx0ZXIpXSB7CiAgICBzZXQgbGlicyBbZmlsdGVyX29ianMgJGtleXMoLWZpbHRlcikgJGxpYnMgZmlsdGVyX2xpYmVydHlfbGlicmFyaWVzICJsaWJlcnR5IGxpYnJhcnkiXQogIH0KICByZXR1cm4gJGxpYnMKfQoKcHJvYyBmaW5kX2xpYmVydHlfbGlicmFyaWVzX21hdGNoaW5nIHsgcGF0dGVybiByZWdleHAgbm9jYXNlIH0gewogICMgUmVtb3ZlICJsaWIuZGI6IiByZWZlcmVuY2UgZnJvbSB0aGUgbGlicmFyeSBuYW1lLgogIHNldCBpeCBbc3RyaW5nIGxhc3QgIi5kYjoiICRwYXR0ZXJuXQogIGlmIHsgJGl4ICE9IC0xIH0gewogICAgc2V0IHBhdHRlcm4yIFtzdHJpbmcgcmFuZ2UgJHBhdHRlcm4gW2V4cHIgJGl4ICsgNF0gZW5kXQogIH0gZWxzZSB7CiAgICBzZXQgcGF0dGVybjIgJHBhdHRlcm4KICB9CiAgaWYgeyAkcmVnZXhwIH0gewogICAgIyBBbmNob3IgdGhlIHJlZ2V4cCBwYXR0ZXJuLgogICAgc2V0IHBhdHRlcm4yICJeJHtwYXR0ZXJufSQiCiAgfQogIHNldCBsaWJfaXRlciBbbGliZXJ0eV9saWJyYXJ5X2l0ZXJhdG9yXQogIHNldCBtYXRjaGVzIHt9CiAgd2hpbGUgeyBbJGxpYl9pdGVyIGhhc19uZXh0XSB9IHsKICAgIHNldCBsaWIgWyRsaWJfaXRlciBuZXh0XQogICAgc2V0IGxpYl9uYW1lIFtnZXRfbmFtZSAkbGliXQogICAgaWYgeyAoISRyZWdleHAgJiYgW3N0cmluZyBtYXRjaCAkcGF0dGVybjIgJGxpYl9uYW1lXSkgXAoJICAgfHwgKCRyZWdleHAgJiYgJG5vY2FzZSAmJiBbcmVnZXhwIC1ub2Nhc2UgJHBhdHRlcm4yICRsaWJfbmFtZV0pIFwKCSAgIHx8ICgkcmVnZXhwICYmICEkbm9jYXNlICYmIFtyZWdleHAgJHBhdHRlcm4yICRsaWJfbmFtZV0pIH0gewogICAgICBsYXBwZW5kIG1hdGNoZXMgJGxpYgogICAgfQogIH0KICAkbGliX2l0ZXIgZmluaXNoCiAgcmV0dXJuICRtYXRjaGVzCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAiZ2V0X25ldHMiIFwKICB7Wy1oaWVyYXJjaGljYWxdIFstaHNjIHNlcGFyYXRvcl0gWy1yZWdleHBdIFstbm9jYXNlXSBbLXF1aWV0XSBbLWZpbHRlciBleHByXVwKICAgICBbLW9mX29iamVjdHMgb2JqZWN0c10gW3BhdHRlcm5zXX0KCmRlZmluZV9jbWRfYWxpYXMgImdldF9uZXQiICJnZXRfbmV0cyIKCnByb2MgZ2V0X25ldHMgeyBhcmdzIH0gewogIGdsb2JhbCBoaWVyYXJjaHlfc2VwYXJhdG9yCiAgCiAgcGFyc2Vfa2V5X2FyZ3MgZ2V0X25ldHMgYXJncyBrZXlzIHstaHNjIC1vZl9vYmplY3RzIC1maWx0ZXJ9IFwKICAgIGZsYWdzIHstaGllcmFyY2hpY2FsIC1yZWdleHAgLW5vY2FzZSAtcXVpZXR9CiAgY2hlY2tfbm9jYXNlX2ZsYWcgZmxhZ3MKICAKICBzZXQgcmVnZXhwIFtpbmZvIGV4aXN0cyBmbGFncygtcmVnZXhwKV0KICBzZXQgbm9jYXNlIFtpbmZvIGV4aXN0cyBmbGFncygtbm9jYXNlKV0KICBzZXQgaGllcmFyY2hpY2FsIFtpbmZvIGV4aXN0cyBmbGFncygtaGllcmFyY2hpY2FsKV0KICBzZXQgcXVpZXQgW2luZm8gZXhpc3RzIGZsYWdzKC1xdWlldCldCiAgIyBDb3B5IGJhY2tzbGFzaGVzIHRoYXQgd2lsbCBiZSByZW1vdmVkIGJ5IGZvcmVhY2guCiAgaWYgeyAkYXJncyA9PSB7fSB9IHsKICAgIHNldCBwYXR0ZXJucyAiKiIKICB9IGVsc2UgewogICAgc2V0IHBhdHRlcm5zIFtzdHJpbmcgbWFwIHtcXCBcXFxcfSBbbGluZGV4ICRhcmdzIDBdXQogIH0KICBpZiBbaW5mbyBleGlzdHMga2V5cygtaHNjKV0gewogICAgc2V0IGRpdmlkZXIgJGtleXMoLWhzYykKICAgIGNoZWNrX3BhdGhfZGl2aWRlciAkZGl2aWRlcgogICAgc2V0IHBhdHRlcm5zIFtzdHJpbmcgbWFwICIkZGl2aWRlciAkaGllcmFyY2h5X3NlcGFyYXRvciIgJHBhdHRlcm5zXQogIH0KICBzZXQgbmV0cyB7fQogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1vZl9vYmplY3RzKV0gewogICAgaWYgeyAkYXJncyAhPSB7fSB9IHsKICAgICAgc3RhX3dhcm4gMzYwICJwYXR0ZXJucyBhcmd1bWVudCBub3Qgc3VwcG9ydGVkIHdpdGggLW9mX29iamVjdHMuIgogICAgfQogICAgcGFyc2VfaW5zdF9waW5fYXJnICRrZXlzKC1vZl9vYmplY3RzKSBpbnN0cyBwaW5zCiAgICBmb3JlYWNoIGluc3QgJGluc3RzIHsKICAgICAgc2V0IHBpbl9pdGVyIFskaW5zdCBwaW5faXRlcmF0b3JdCiAgICAgIHdoaWxlIHsgWyRwaW5faXRlciBoYXNfbmV4dF0gfSB7CglzZXQgcGluIFskcGluX2l0ZXIgbmV4dF0KCWxhcHBlbmQgbmV0cyBbJHBpbiBuZXRdCiAgICAgIH0KICAgICAgJHBpbl9pdGVyIGZpbmlzaAogICAgfQogICAgZm9yZWFjaCBwaW4gJHBpbnMgewogICAgICBsYXBwZW5kIG5ldHMgWyRwaW4gbmV0XQogICAgfQogIH0gZWxzZSB7CiAgICBjaGVja19hcmdjX2VxMG9yMSAiZ2V0X25ldHMiICRhcmdzCiAgICBmb3JlYWNoIHBhdHRlcm4gJHBhdHRlcm5zIHsKICAgICAgaWYgeyBbaXNfb2JqZWN0ICRwYXR0ZXJuXSB9IHsKCWlmIHsgW29iamVjdF90eXBlICRwYXR0ZXJuXSAhPSAiTmV0IiB9IHsKCSAgc3RhX2Vycm9yIDMzMSAib2JqZWN0ICckcGF0dGVybicgaXMgbm90IGEgbmV0LiIKCX0KCXNldCBuZXRzIFtjb25jYXQgJG5ldHMgJHBhdHRlcm5dCiAgICAgIH0gZWxzZSB7CglpZiB7ICRoaWVyYXJjaGljYWwgfSB7CgkgIHNldCBtYXRjaGVzIFtmaW5kX25ldHNfaGllcl9tYXRjaGluZyAkcGF0dGVybiAkcmVnZXhwICRub2Nhc2VdCgl9IGVsc2UgewoJICBzZXQgbWF0Y2hlcyBbZmluZF9uZXRzX21hdGNoaW5nICRwYXR0ZXJuICRyZWdleHAgJG5vY2FzZV0KCX0KCXNldCBuZXRzIFtjb25jYXQgJG5ldHMgJG1hdGNoZXNdCglpZiB7ICRtYXRjaGVzID09IHt9ICYmICEkcXVpZXQgfSB7CgkgIHN0YV93YXJuIDM2MSAibmV0ICckcGF0dGVybicgbm90IGZvdW5kLiIKCX0KICAgICAgfQogICAgfQogIH0KICBpZiBbaW5mbyBleGlzdHMga2V5cygtZmlsdGVyKV0gewogICAgc2V0IG5ldHMgW2ZpbHRlcl9vYmpzICRrZXlzKC1maWx0ZXIpICRuZXRzIGZpbHRlcl9uZXRzICJuZXQiXQogIH0KICByZXR1cm4gJG5ldHMKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJnZXRfcGlucyIgXAogIHtbLWhpZXJhcmNoaWNhbF0gWy1oc2Mgc2VwYXJhdG9yXSBbLXF1aWV0XSBbLWZpbHRlciBleHByXVwKICAgICBbLXJlZ2V4cF0gWy1ub2Nhc2VdIFstb2Zfb2JqZWN0cyBvYmplY3RzXSBbcGF0dGVybnNdfQoKZGVmaW5lX2NtZF9hbGlhcyAiZ2V0X3BpbiIgImdldF9waW5zIgoKcHJvYyBnZXRfcGlucyB7IGFyZ3MgfSB7CiAgZ2xvYmFsIGhpZXJhcmNoeV9zZXBhcmF0b3IKICAKICBwYXJzZV9rZXlfYXJncyAiZ2V0X3BpbnMiIGFyZ3Mga2V5cyB7LWhzYyAtb2Zfb2JqZWN0cyAtZmlsdGVyfSBcCiAgICBmbGFncyB7LWhpZXJhcmNoaWNhbCAtcmVnZXhwIC1ub2Nhc2UgLXF1aWV0fQogIGNoZWNrX25vY2FzZV9mbGFnIGZsYWdzCiAgCiAgc2V0IHJlZ2V4cCBbaW5mbyBleGlzdHMgZmxhZ3MoLXJlZ2V4cCldCiAgc2V0IG5vY2FzZSBbaW5mbyBleGlzdHMgZmxhZ3MoLW5vY2FzZSldCiAgc2V0IGhpZXJhcmNoaWNhbCBbaW5mbyBleGlzdHMgZmxhZ3MoLWhpZXJhcmNoaWNhbCldCiAgc2V0IHF1aWV0IFtpbmZvIGV4aXN0cyBmbGFncygtcXVpZXQpXQogIHNldCBwaW5zIHt9CiAgaWYgW2luZm8gZXhpc3RzIGtleXMoLW9mX29iamVjdHMpXSB7CiAgICBpZiB7ICRhcmdzICE9IHt9IH0gewogICAgICBzdGFfd2FybiAzNjIgInBhdHRlcm5zIGFyZ3VtZW50IG5vdCBzdXBwb3J0ZWQgd2l0aCAtb2Zfb2JqZWN0cy4iCiAgICB9CiAgICBwYXJzZV9pbnN0X25ldF9hcmcgJGtleXMoLW9mX29iamVjdHMpIGluc3RzIG5ldHMKICAgIGZvcmVhY2ggaW5zdCAkaW5zdHMgewogICAgICBzZXQgcGluX2l0ZXIgWyRpbnN0IHBpbl9pdGVyYXRvcl0KICAgICAgd2hpbGUgeyBbJHBpbl9pdGVyIGhhc19uZXh0XSB9IHsKCXNldCBwaW4gWyRwaW5faXRlciBuZXh0XQoJbGFwcGVuZCBwaW5zICRwaW4KICAgICAgfQogICAgICAkcGluX2l0ZXIgZmluaXNoCiAgICB9CiAgICBmb3JlYWNoIG5ldCAkbmV0cyB7CiAgICAgIHNldCBwaW5faXRlciBbJG5ldCBwaW5faXRlcmF0b3JdCiAgICAgIHdoaWxlIHsgWyRwaW5faXRlciBoYXNfbmV4dF0gfSB7CglzZXQgcGluIFskcGluX2l0ZXIgbmV4dF0KCWxhcHBlbmQgcGlucyAkcGluCiAgICAgIH0KICAgICAgJHBpbl9pdGVyIGZpbmlzaAogICAgfQogIH0gZWxzZSB7CiAgICBjaGVja19hcmdjX2VxMG9yMSAiZ2V0X3BpbnMiICRhcmdzCiAgICBpZiB7ICRhcmdzID09IHt9IH0gewogICAgICBzZXQgcGF0dGVybnMgIioiCiAgICB9IGVsc2UgewogICAgICBzZXQgcGF0dGVybnMgW2xpbmRleCAkYXJncyAwXQogICAgfQogICAgaWYgW2luZm8gZXhpc3RzIGtleXMoLWhzYyldIHsKICAgICAgc2V0IGRpdmlkZXIgJGtleXMoLWhzYykKICAgICAgY2hlY2tfcGF0aF9kaXZpZGVyICRkaXZpZGVyCiAgICAgIHNldCBwYXR0ZXJucyBbc3RyaW5nIG1hcCAiJGRpdmlkZXIgJGhpZXJhcmNoeV9zZXBhcmF0b3IiICRwYXR0ZXJuc10KICAgIH0KICAgICMgQ29weSBiYWNrc2xhc2hlcyB0aGF0IHdpbGwgYmUgcmVtb3ZlZCBieSBmb3JlYWNoLgogICAgc2V0IHBhdHRlcm5zIFtzdHJpbmcgbWFwIHtcXCBcXFxcfSAkcGF0dGVybnNdCiAgICBmb3JlYWNoIHBhdHRlcm4gJHBhdHRlcm5zIHsKICAgICAgaWYgeyBbaXNfb2JqZWN0ICRwYXR0ZXJuXSB9IHsKCWlmIHsgW29iamVjdF90eXBlICRwYXR0ZXJuXSAhPSAiUGluIiB9IHsKCSAgc3RhX2Vycm9yIDMzMiAib2JqZWN0ICckcGF0dGVybicgaXMgbm90IGEgcGluLiIKCX0KCXNldCBwaW5zIFtjb25jYXQgJHBpbnMgJHBhdHRlcm5dCiAgICAgIH0gZWxzZSB7CglpZiB7ICRoaWVyYXJjaGljYWwgfSB7CgkgIHNldCBtYXRjaGVzIFtmaW5kX3BpbnNfaGllcl9tYXRjaGluZyAkcGF0dGVybiAkcmVnZXhwICRub2Nhc2VdCgl9IGVsc2UgewoJICBzZXQgbWF0Y2hlcyBbZmluZF9waW5zX21hdGNoaW5nICRwYXR0ZXJuICRyZWdleHAgJG5vY2FzZV0KCX0KCXNldCBwaW5zIFtjb25jYXQgJHBpbnMgJG1hdGNoZXNdCglpZiB7ICRtYXRjaGVzID09IHt9ICYmICEkcXVpZXQgfSB7CgkgIHN0YV93YXJuIDM2MyAicGluICckcGF0dGVybicgbm90IGZvdW5kLiIKCX0KICAgICAgfQogICAgfQogIH0KICBpZiBbaW5mbyBleGlzdHMga2V5cygtZmlsdGVyKV0gewogICAgc2V0IHBpbnMgW2ZpbHRlcl9vYmpzICRrZXlzKC1maWx0ZXIpICRwaW5zIGZpbHRlcl9waW5zICJwaW4iXQogIH0KICByZXR1cm4gJHBpbnMKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJnZXRfcG9ydHMiIFwKICB7Wy1xdWlldF0gWy1maWx0ZXIgZXhwcl0gWy1yZWdleHBdIFstbm9jYXNlXSBbLW9mX29iamVjdHMgb2JqZWN0c10gW3BhdHRlcm5zXX0KCmRlZmluZV9jbWRfYWxpYXMgImdldF9wb3J0IiAiZ2V0X3BvcnRzIgoKIyBGaW5kIHRvcCBsZXZlbCBkZXNpZ24gcG9ydHMgbWF0Y2hpbmcgcGF0dGVybi4KcHJvYyBnZXRfcG9ydHMgeyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJnZXRfcG9ydHMiIGFyZ3Mga2V5cyB7LW9mX29iamVjdHMgLWZpbHRlcn0gXAogICAgZmxhZ3Mgey1yZWdleHAgLW5vY2FzZSAtcXVpZXR9CiAgY2hlY2tfbm9jYXNlX2ZsYWcgZmxhZ3MKICAKICBzZXQgcmVnZXhwIFtpbmZvIGV4aXN0cyBmbGFncygtcmVnZXhwKV0KICBzZXQgbm9jYXNlIFtpbmZvIGV4aXN0cyBmbGFncygtbm9jYXNlKV0KICAjIENvcHkgYmFja3NsYXNoZXMgdGhhdCB3aWxsIGJlIHJlbW92ZWQgYnkgZm9yZWFjaC4KICBpZiB7ICRhcmdzID09IHt9IH0gewogICAgc2V0IHBhdHRlcm5zICIqIgogIH0gZWxzZSB7CiAgICBzZXQgcGF0dGVybnMgW3N0cmluZyBtYXAge1xcIFxcXFx9IFtsaW5kZXggJGFyZ3MgMF1dCiAgfQogIHNldCBwb3J0cyB7fQogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1vZl9vYmplY3RzKV0gewogICAgaWYgeyAkYXJncyAhPSB7fSB9IHsKICAgICAgc3RhX3dhcm4gMzY1ICJwYXR0ZXJucyBhcmd1bWVudCBub3Qgc3VwcG9ydGVkIHdpdGggLW9mX29iamVjdHMuIgogICAgfQogICAgc2V0IG5ldHMgW2dldF9uZXRzX2FyZyAib2JqZWN0cyIgJGtleXMoLW9mX29iamVjdHMpXQogICAgZm9yZWFjaCBuZXQgJG5ldHMgewogICAgICBzZXQgcG9ydHMgW2NvbmNhdCAkcG9ydHMgWyRuZXQgcG9ydHNdXQogICAgfQogIH0gZWxzZSB7CiAgICBjaGVja19hcmdjX2VxMG9yMSAiZ2V0X3BvcnRzIiAkYXJncwogICAgZm9yZWFjaCBwYXR0ZXJuICRwYXR0ZXJucyB7CiAgICAgIGlmIHsgW2lzX29iamVjdCAkcGF0dGVybl0gfSB7CglpZiB7IFtvYmplY3RfdHlwZSAkcGF0dGVybl0gIT0gIlBvcnQiIH0gewoJICBzdGFfZXJyb3IgMzMzICJvYmplY3QgJyRwYXR0ZXJuJyBpcyBub3QgYSBwb3J0LiIKCX0KCXNldCBwb3J0cyBbY29uY2F0ICRwb3J0cyAkcGF0dGVybl0KICAgICAgfSBlbHNlIHsKICAgICAgICBzZXQgbWF0Y2hlcyBbZmluZF9wb3J0c19tYXRjaGluZyAkcGF0dGVybiAkcmVnZXhwICRub2Nhc2VdCiAgICAgICAgaWYgeyAkbWF0Y2hlcyAhPSB7fSB9IHsKCSAgc2V0IHBvcnRzIFtjb25jYXQgJHBvcnRzICRtYXRjaGVzXQogICAgICAgIH0gZWxzZSB7CgkgIGlmIHshW2luZm8gZXhpc3RzIGZsYWdzKC1xdWlldCldfSB7CgkgICAgc3RhX3dhcm4gMzY2ICJwb3J0ICckcGF0dGVybicgbm90IGZvdW5kLiIKCSAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KICBpZiBbaW5mbyBleGlzdHMga2V5cygtZmlsdGVyKV0gewogICAgc2V0IHBvcnRzIFtmaWx0ZXJfb2JqcyAka2V5cygtZmlsdGVyKSAkcG9ydHMgZmlsdGVyX3BvcnRzICJwb3J0Il0KICB9CiAgcmV0dXJuICRwb3J0cwp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMKIyBUaW1pbmcgQ29uc3RyYWludHMKIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgImNyZWF0ZV9jbG9jayIgXAogIHtbLW5hbWUgbmFtZV0gWy1wZXJpb2QgcGVyaW9kXSBbLXdhdmVmb3JtIHdhdmVmb3JtXSBbLWFkZF1cCiAgICAgWy1jb21tZW50IGNvbW1lbnRdIFtwaW5zXX0KCnByb2MgY3JlYXRlX2Nsb2NrIHsgYXJncyB9IHsKICBwYXJzZV9rZXlfYXJncyAiY3JlYXRlX2Nsb2NrIiBhcmdzIFwKICAgIGtleXMgey1uYW1lIC1wZXJpb2QgLXdhdmVmb3JtIC1jb21tZW50fSBcCiAgICBmbGFncyB7LWFkZH0KICAKICBjaGVja19hcmdjX2VxMG9yMSAiY3JlYXRlX2Nsb2NrIiAkYXJncwogIHNldCBhcmdjIFtsbGVuZ3RoICRhcmdzXQogIGlmIHsgJGFyZ2MgPT0gMCB9IHsKICAgIHNldCBwaW5zIHt9CiAgfSBlbHNlaWYgeyAkYXJnYyA9PSAxIH0gewogICAgc2V0IHBpbnMgW2dldF9wb3J0X3BpbnNfZXJyb3IgInBpbnMiIFtsaW5kZXggJGFyZ3MgMF1dCiAgfQogIAogIHNldCBhZGQgW2luZm8gZXhpc3RzIGZsYWdzKC1hZGQpXQogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1uYW1lKV0gewogICAgc2V0IG5hbWUgJGtleXMoLW5hbWUpCiAgfSBlbHNlaWYgeyAkcGlucyAhPSB7fSB9IHsKICAgIGlmIHsgJGFkZCB9IHsKICAgICAgc3RhX2Vycm9yIDM2OCAiLWFkZCByZXF1aXJlcyAtbmFtZS4iCiAgICB9CiAgICAjIERlZmF1bHQgY2xvY2sgbmFtZSBpcyB0aGUgZmlyc3QgcGluIG5hbWUuCiAgICBzZXQgbmFtZSBbZ2V0X2Z1bGxfbmFtZSBbbGluZGV4ICRwaW5zIDBdXQogIH0gZWxzZSB7CiAgICBzdGFfZXJyb3IgMzY5ICItbmFtZSBvciBwb3J0X3Bpbl9saXN0IG11c3QgYmUgc3BlY2lmaWVkLiIKICB9CiAgCiAgaWYgW2luZm8gZXhpc3RzIGtleXMoLXBlcmlvZCldIHsKICAgIHNldCBwZXJpb2QgJGtleXMoLXBlcmlvZCkKICAgIGNoZWNrX3Bvc2l0aXZlX2Zsb2F0ICJwZXJpb2QiICRwZXJpb2QKICAgIHNldCBwZXJpb2QgW3RpbWVfdWlfc3RhICRwZXJpb2RdCiAgfSBlbHNlIHsKICAgIHN0YV9lcnJvciAzNzAgIm1pc3NpbmcgLXBlcmlvZCBhcmd1bWVudC4iCiAgfQogIAogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC13YXZlZm9ybSldIHsKICAgIHNldCB3YXZlX2FyZyAka2V5cygtd2F2ZWZvcm0pCiAgICBpZiB7IFtleHByIFtsbGVuZ3RoICR3YXZlX2FyZ10gJSAyXSAhPSAwIH0gewogICAgICBzdGFfZXJyb3IgMzcxICItd2F2ZWZvcm0gZWRnZV9saXN0IG11c3QgaGF2ZSBhbiBldmVuIG51bWJlciBvZiBlZGdlIHRpbWVzLiIKICAgIH0KICAgIHNldCBmaXJzdF9lZGdlIDEKICAgIHNldCBwcmV2X2VkZ2UgMAogICAgc2V0IHdhdmVmb3JtIHt9CiAgICBmb3JlYWNoIGVkZ2UgJHdhdmVfYXJnIHsKICAgICAgY2hlY2tfZmxvYXQgIi13YXZlZm9ybSBlZGdlIiAkZWRnZQogICAgICBzZXQgZWRnZSBbdGltZV91aV9zdGEgJGVkZ2VdCiAgICAgIGlmIHsgISRmaXJzdF9lZGdlICYmICRlZGdlIDwgJHByZXZfZWRnZSB9IHsKCXN0YV9lcnJvciAzNzIgIm5vbi1pbmNyZWFzaW5nIGNsb2NrIC13YXZlZm9ybSBlZGdlIHRpbWVzLiIKICAgICAgfQogICAgICBpZiB7ICRlZGdlID4gW2V4cHIgJHBlcmlvZCAqIDJdIH0gewoJc3RhX2Vycm9yIDM3MyAiLXdhdmVmb3JtIHRpbWUgZ3JlYXRlciB0aGFuIHR3byBwZXJpb2RzLiIKICAgICAgfQogICAgICBsYXBwZW5kIHdhdmVmb3JtICRlZGdlCiAgICAgIHNldCBwcmV2X2VkZ2UgJGVkZ2UKICAgICAgc2V0IGZpcnN0X2VkZ2UgMAogICAgfQogIH0gZWxzZSB7CiAgICBzZXQgd2F2ZWZvcm0gW2xpc3QgMCBbZXhwciAkcGVyaW9kIC8gMi4wXV0KICB9CiAgCiAgc2V0IGNvbW1lbnQgW3BhcnNlX2NvbW1lbnRfa2V5IGtleXNdCiAgCiAgbWFrZV9jbG9jayAkbmFtZSAkcGlucyAkYWRkICRwZXJpb2QgJHdhdmVmb3JtICRjb21tZW50Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAiZGVsZXRlX2Nsb2NrIiB7Wy1hbGxdIGNsb2Nrc30KCnByb2MgZGVsZXRlX2Nsb2NrIHsgYXJncyB9IHsKICBwYXJzZV9rZXlfYXJncyAiZGVsZXRlX2Nsb2NrIiBhcmdzIGtleXMge30gZmxhZ3Mgey1hbGx9CiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLWFsbCldIH0gewogICAgY2hlY2tfYXJnY19lcTAgImRlbGV0ZV9jbG9jayIgJGFyZ3MKICAgIHNldCBjbGtzIFthbGxfY2xvY2tzXQogIH0gZWxzZSB7CiAgICBjaGVja19hcmdjX2VxMSAiZGVsZXRlX2Nsb2NrIiAkYXJncwogICAgc2V0IGNsa3MgW2dldF9jbG9ja3Nfd2FybiAiY2xvY2tzIiBbbGluZGV4ICRhcmdzIDBdXQogIH0KICBmb3JlYWNoIGNsayAkY2xrcyB7CiAgICByZW1vdmVfY2xvY2tfY21kICRjbGsKICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAiY3JlYXRlX2dlbmVyYXRlZF9jbG9jayIgXAogIHtbLW5hbWUgY2xvY2tfbmFtZV0gLXNvdXJjZSBtYXN0ZXJfcGluIFstbWFzdGVyX2Nsb2NrIGNsb2NrXVwKICAgICBbLWRpdmlkZV9ieSBkaXZpc29yIHwgLW11bHRpcGx5X2J5IG11bHRpcGxpZXJdXAogICAgIFstZHV0eV9jeWNsZSBkdXR5X2N5Y2xlXSBbLWludmVydF0gWy1lZGdlcyBlZGdlX2xpc3RdXAogICAgIFstZWRnZV9zaGlmdCBlZGdlX3NoaWZ0X2xpc3RdIFstY29tYmluYXRpb25hbF0gWy1hZGRdXAogICAgIFstY29tbWVudCBjb21tZW50XSBwb3J0X3Bpbl9saXN0fQoKcHJvYyBjcmVhdGVfZ2VuZXJhdGVkX2Nsb2NrIHsgYXJncyB9IHsKICBwYXJzZV9rZXlfYXJncyAiY3JlYXRlX2dlbmVyYXRlZF9jbG9jayIgYXJncyBrZXlzIFwKICAgIHstbmFtZSAtc291cmNlIC1tYXN0ZXJfY2xvY2sgLWRpdmlkZV9ieSAtbXVsdGlwbHlfYnkgXAogICAgICAgLWR1dHlfY3ljbGUgLWVkZ2VzIC1lZGdlX3NoaWZ0IC1jb21tZW50fSBcCiAgICBmbGFncyB7LWludmVydCAtY29tYmluYXRpb25hbCAtYWRkfQogIAogIGNoZWNrX2FyZ2NfZXExICJjcmVhdGVfZ2VuZXJhdGVkX2Nsb2NrIiAkYXJncwogIHBhcnNlX3BvcnRfcGluX25ldF9hcmcgW2xpbmRleCAkYXJncyAwXSBwaW5zIG5ldHMKICAj",
"IENvbnZlcnQgbmV0IGFyZ3MgdG8gbmV0IGRyaXZlciBwaW4uCiAgZm9yZWFjaCBuZXQgJG5ldHMgewogICAgc2V0IGRyaXZlcnMgW25ldF9kcml2ZXJfcGlucyAkbmV0XQogICAgaWYgeyAkZHJpdmVycyAhPSB7fSB9IHsKICAgICAgbGFwcGVuZCBwaW5zIFtsaW5kZXggJGRyaXZlcnMgMF0KICAgIH0KICB9CiAgaWYgeyAkcGlucyA9PSB7fSB9IHsKICAgIHN0YV9lcnJvciAzNzQgImVtcHR5IHBvcnRzL3BpbnMvbmV0cyBhcmd1bWVudC4iCiAgfQogIHNldCBhZGQgW2luZm8gZXhpc3RzIGZsYWdzKC1hZGQpXQogIAogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1uYW1lKV0gewogICAgc2V0IG5hbWUgJGtleXMoLW5hbWUpCiAgfSBlbHNlaWYgeyAkcGlucyAhPSB7fSB9IHsKICAgIGlmIHsgJGFkZCB9IHsKICAgICAgc3RhX2Vycm9yIDM3NSAiLWFkZCByZXF1aXJlcyAtbmFtZS4iCiAgICB9CiAgICAjIERlZmF1bHQgY2xvY2sgbmFtZSBpcyB0aGUgZmlyc3QgcGluIG5hbWUuCiAgICBzZXQgbmFtZSBbZ2V0X2Z1bGxfbmFtZSBbbGluZGV4ICRwaW5zIDBdXQogIH0gZWxzZSB7CiAgICBzdGFfZXJyb3IgMzc2ICJuYW1lIG9yIHBvcnRfcGluX2xpc3QgbXVzdCBiZSBzcGVjaWZpZWQuIgogIH0KICAKICBpZiBbaW5mbyBleGlzdHMga2V5cygtc291cmNlKV0gewogICAgc2V0IHNvdXJjZSAka2V5cygtc291cmNlKQogICAgc2V0IHNvdXJjZV9waW4gW2dldF9wb3J0X3Bpbl9lcnJvciAibWFzdGVyX3BpbiIgJHNvdXJjZV0KICB9IGVsc2UgewogICAgc3RhX2Vycm9yIDM3NyAibWlzc2luZyAtc291cmNlIGFyZ3VtZW50LiIKICB9CiAgCiAgc2V0IG1hc3Rlcl9jbGsgIk5VTEwiCiAgc2V0IGRpdmlkZV9ieSAwCiAgc2V0IG11bHRpcGx5X2J5IDAKICBzZXQgZHV0eV9jeWNsZSAwCiAgc2V0IGVkZ2VzIHt9CiAgc2V0IGVkZ2Vfc2hpZnRzIHt9CiAgCiAgc2V0IGNvbWJpbmF0aW9uYWwgW2luZm8gZXhpc3RzIGZsYWdzKC1jb21iaW5hdGlvbmFsKV0KICAKICBpZiB7W2luZm8gZXhpc3RzIGtleXMoLW1hc3Rlcl9jbG9jayldfSB7CiAgICBzZXQgbWFzdGVyX2NsayBbZ2V0X2Nsb2NrX2Vycm9yICItbWFzdGVyX2NsayIgJGtleXMoLW1hc3Rlcl9jbG9jayldCiAgICBpZiB7ICRtYXN0ZXJfY2xrID09ICJOVUxMIiB9IHsKICAgICAgc3RhX2Vycm9yIDM3OCAiLW1hc3Rlcl9jbG9jayBhcmd1bWVudCBlbXB0eS4iCiAgICB9CiAgfSBlbHNlaWYgeyAkYWRkIH0gewogICAgc3RhX2Vycm9yIDM3OSAiLWFkZCByZXF1aXJlZHMgLW1hc3Rlcl9jbG9jay4iCiAgfQogIAogIGlmIHtbaW5mbyBleGlzdHMga2V5cygtZGl2aWRlX2J5KV0gJiYgW2luZm8gZXhpc3RzIGtleXMoLW11bHRpcGx5X2J5KV19IHsKICAgIHN0YV9lcnJvciAzODAgIi1tdWx0aXBseV9ieSBhbmQgLWRpdmlkZV9ieSBvcHRpb25zIGFyZSBleGNsdXNpdmUuIgogIH0gZWxzZWlmIHtbaW5mbyBleGlzdHMga2V5cygtZGl2aWRlX2J5KV19IHsKICAgIHNldCBkaXZpZGVfYnkgJGtleXMoLWRpdmlkZV9ieSkKICAgIGlmIHshW3N0cmluZyBpcyBpbnRlZ2VyICRkaXZpZGVfYnldIHx8ICRkaXZpZGVfYnkgPCAxfSB7CiAgICAgIHN0YV9lcnJvciAzODEgIi1kaXZpZGVfYnkgaXMgbm90IGFuIGludGVnZXIgZ3JlYXRlciB0aGFuIG9uZS4iCiAgICB9CiAgICBpZiB7JGNvbWJpbmF0aW9uYWwgJiYgJGRpdmlkZV9ieSAhPSAxfSB7CiAgICAgIHN0YV9lcnJvciAzODIgIi1jb21iaW5hdGlvbmFsIGltcGxpZXMgLWRpdmlkZV9ieSAxLiIKICAgIH0KICB9IGVsc2VpZiB7W2luZm8gZXhpc3RzIGtleXMoLW11bHRpcGx5X2J5KV19IHsKICAgIHNldCBtdWx0aXBseV9ieSAka2V5cygtbXVsdGlwbHlfYnkpCiAgICBpZiB7IVtzdHJpbmcgaXMgaW50ZWdlciAkbXVsdGlwbHlfYnldIHx8ICRtdWx0aXBseV9ieSA8IDF9IHsKICAgICAgc3RhX2Vycm9yIDM4MyAiLW11bHRpcGx5X2J5IGlzIG5vdCBhbiBpbnRlZ2VyIGdyZWF0ZXIgdGhhbiBvbmUuIgogICAgfQogICAgaWYge1tpbmZvIGV4aXN0cyBrZXlzKC1kdXR5X2N5Y2xlKV19IHsKICAgICAgc2V0IGR1dHlfY3ljbGUgJGtleXMoLWR1dHlfY3ljbGUpCiAgICAgIGlmIHshW3N0cmluZyBpcyBkb3VibGUgJGR1dHlfY3ljbGVdIFwKCSAgICB8fCAkZHV0eV9jeWNsZSA8IDAuMCB8fCAkZHV0eV9jeWNsZSA+IDEwMC4wfSB7CglzdGFfZXJyb3IgMzg0ICItZHV0eV9jeWNsZSBpcyBub3QgYSBmbG9hdCBiZXR3ZWVuIDAgYW5kIDEwMC4iCiAgICAgIH0KICAgIH0KICB9IGVsc2VpZiB7W2luZm8gZXhpc3RzIGtleXMoLWVkZ2VzKV19IHsKICAgIHNldCBlZGdlcyAka2V5cygtZWRnZXMpCiAgICBpZiB7IFtsbGVuZ3RoICRlZGdlc10gIT0gMyB9IHsKICAgICAgc3RhX2Vycm9yIDM4NSAiLWVkZ2VzIG9ubHkgc3VwcG9ydGVkIGZvciB0aHJlZSBlZGdlcy4iCiAgICB9CiAgICBzZXQgcHJldl9lZGdlIFtleHByIFtsaW5kZXggJGVkZ2VzIDBdIC0gMV0KICAgIGZvcmVhY2ggZWRnZSAkZWRnZXMgewogICAgICBjaGVja19jYXJkaW5hbCAiLWVkZ2VzIiAkZWRnZQogICAgICBpZiB7ICRlZGdlIDw9ICRwcmV2X2VkZ2UgfSB7CglzdGFfZXJyb3IgMzg2ICJlZGdlcyB0aW1lcyBhcmUgbm90IG1vbm90b25pY2FsbHkgaW5jcmVhc2luZy4iCiAgICAgIH0KICAgIH0KICAgIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1lZGdlX3NoaWZ0KV0gewogICAgICBmb3JlYWNoIHNoaWZ0ICRrZXlzKC1lZGdlX3NoaWZ0KSB7CgljaGVja19mbG9hdCAiLWVkZ2Vfc2hpZnQiICRzaGlmdAoJbGFwcGVuZCBlZGdlX3NoaWZ0cyBbdGltZV91aV9zdGEgJHNoaWZ0XQogICAgICB9CiAgICAgIGlmIHsgW2xsZW5ndGggJGVkZ2Vfc2hpZnRzXSAhPSBbbGxlbmd0aCAkZWRnZXNdIH0gewoJc3RhX2Vycm9yIDM4NyAiLWVkZ2Vfc2hpZnQgbGVuZ3RoIGRvZXMgbm90IG1hdGNoIC1lZGdlcyBsZW5ndGguIgogICAgICB9CiAgICB9CiAgfSBlbHNlaWYgeyAkY29tYmluYXRpb25hbCB9IHsKICAgIHNldCBkaXZpZGVfYnkgMQogIH0gZWxzZSB7CiAgICBzdGFfZXJyb3IgMzg4ICJtaXNzaW5nIC1tdWx0aXBseV9ieSwgLWRpdmlkZV9ieSwgLWNvbWJpbmF0aW9uYWwgb3IgLWVkZ2VzIGFyZ3VtZW50LiIKICB9CiAgCiAgc2V0IGludmVydCAwCiAgaWYge1tpbmZvIGV4aXN0cyBmbGFncygtaW52ZXJ0KV19IHsKICAgIGlmIHshKFtpbmZvIGV4aXN0cyBrZXlzKC1kaXZpZGVfYnkpXSBcCgkgICAgfHwgW2luZm8gZXhpc3RzIGtleXMoLW11bHRpcGx5X2J5KV0gXAoJICAgIHx8IFtpbmZvIGV4aXN0cyBmbGFncygtY29tYmluYXRpb25hbCldKX0gewogICAgICBzdGFfZXJyb3IgMzg5ICJjYW5ub3Qgc3BlY2lmeSAtaW52ZXJ0IHdpdGhvdXQgLW11bHRpcGx5X2J5LCAtZGl2aWRlX2J5IG9yIC1jb21iaW5hdGlvbmFsLiIKICAgIH0KICAgIHNldCBpbnZlcnQgMQogIH0KICAKICBpZiB7W2luZm8gZXhpc3RzIGtleXMoLWR1dHlfY3ljbGUpXSAmJiAhW2luZm8gZXhpc3RzIGtleXMoLW11bHRpcGx5X2J5KV19IHsKICAgIHN0YV9lcnJvciAzOTAgIi1kdXR5X2N5Y2xlIHJlcXVpcmVzIC1tdWx0aXBseV9ieSB2YWx1ZS4iCiAgfQogIAogIHNldCBjb21tZW50IFtwYXJzZV9jb21tZW50X2tleSBrZXlzXQogIAogIG1ha2VfZ2VuZXJhdGVkX2Nsb2NrICRuYW1lICRwaW5zICRhZGQgJHNvdXJjZV9waW4gJG1hc3Rlcl9jbGsgXAogICAgJGRpdmlkZV9ieSAkbXVsdGlwbHlfYnkgJGR1dHlfY3ljbGUgJGludmVydCAkY29tYmluYXRpb25hbCBcCiAgICAkZWRnZXMgJGVkZ2Vfc2hpZnRzICRjb21tZW50Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAiZGVsZXRlX2dlbmVyYXRlZF9jbG9jayIge1stYWxsXSBjbG9ja3N9Cgpwcm9jIGRlbGV0ZV9nZW5lcmF0ZWRfY2xvY2sgeyBhcmdzIH0gewogIHJlbW92ZV9nY2xrX2NtZCAiZGVsZXRlX2dlbmVyYXRlZF9jbG9jayIgJGFyZ3MKfQoKcHJvYyByZW1vdmVfZ2Nsa19jbWQgeyBjbWQgY21kX2FyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgJGNtZCBjbWRfYXJncyBrZXlzIHt9IGZsYWdzIHstYWxsfQogIGlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1hbGwpXSB9IHsKICAgIGNoZWNrX2FyZ2NfZXEwICRjbWQgJGNtZF9hcmdzCiAgICBzZXQgY2xrcyBbYWxsX2Nsb2Nrc10KICB9IGVsc2UgewogICAgY2hlY2tfYXJnY19lcTEgJGNtZCAkY21kX2FyZ3MKICAgIHNldCBjbGtzIFtnZXRfY2xvY2tzX3dhcm4gImNsb2NrcyIgW2xpbmRleCAkY21kX2FyZ3MgMF1dCiAgfQogIGZvcmVhY2ggY2xrICRjbGtzIHsKICAgIGlmIHsgWyRjbGsgaXNfZ2VuZXJhdGVkXSB9IHsKICAgICAgcmVtb3ZlX2Nsb2NrX2NtZCAkY2xrCiAgICB9CiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgImdyb3VwX3BhdGgiIFwKICB7LW5hbWUgZ3JvdXBfbmFtZSBbLXdlaWdodCB3ZWlnaHRdIFstY3JpdGljYWxfcmFuZ2UgcmFuZ2VdXAogICAgIFstZGVmYXVsdF0gWy1jb21tZW50IGNvbW1lbnRdXAogICAgIFstZnJvbSBmcm9tX2xpc3RdIFstcmlzZV9mcm9tIGZyb21fbGlzdF0gWy1mYWxsX2Zyb20gZnJvbV9saXN0XVwKICAgICBbLXRocm91Z2ggdGhyb3VnaF9saXN0XSBbLXJpc2VfdGhyb3VnaCB0aHJvdWdoX2xpc3RdXAogICAgIFstZmFsbF90aHJvdWdoIHRocm91Z2hfbGlzdF0gWy10byB0b19saXN0XSBbLXJpc2VfdG8gdG9fbGlzdF1cCiAgICAgWy1mYWxsX3RvIHRvX2xpc3RdfQoKIyBUaGUgLXdlaWdodCBhbmQgLWNyaXRpY2FsX3JhbmdlIGFyZ3VtZW50cyBhcmUgaWdub3JlZC4KcHJvYyBncm91cF9wYXRoIHsgYXJncyB9IHsKICBwYXJzZV9rZXlfYXJncyAiZ3JvdXBfcGF0aCIgYXJncyBcCiAgICBrZXlzIHstbmFtZSAtd2VpZ2h0IC1jcml0aWNhbF9yYW5nZSBcCgkgICAgLWZyb20gLXJpc2VfZnJvbSAtZmFsbF9mcm9tIFwKCSAgICAtdG8gLXJpc2VfdG8gLWZhbGxfdG8gLWNvbW1lbnR9IFwKICAgIGZsYWdzIHstZGVmYXVsdH0gMAogIAogIHNldCBjbWQgImdyb3VwX3BhdGgiCiAgc2V0IGFyZ19lcnJvciAwCiAgc2V0IGZyb20gW3BhcnNlX2Zyb21fYXJnIGtleXMgYXJnX2Vycm9yXQogIHNldCB0aHJ1cyBbcGFyc2VfdGhydXNfYXJnIGFyZ3MgYXJnX2Vycm9yXQogIHNldCB0byBbcGFyc2VfdG9fYXJnMSBrZXlzICJyaXNlX2ZhbGwiIGFyZ19lcnJvcl0KICBjaGVja19leGNlcHRpb25fcGlucyAkZnJvbSAkdG8KICBpZiB7ICRhcmdfZXJyb3IgfSB7CiAgICBkZWxldGVfZnJvbV90aHJ1c190byAkZnJvbSAkdGhydXMgJHRvCiAgICBzdGFfZXJyb3IgMzkxICJncm91cF9wYXRoIGNvbW1hbmQgZmFpbGVkLiIKICAgIHJldHVybiAwCiAgfQogIAogIGNoZWNrX2Zvcl9rZXlfYXJncyAkY21kIGFyZ3MKICBpZiB7ICRhcmdzICE9IHt9IH0gewogICAgZGVsZXRlX2Zyb21fdGhydXNfdG8gJGZyb20gJHRocnVzICR0bwogICAgc3RhX2Vycm9yIDM5MiAicG9zaXRpb25hbCBhcmd1bWVudHMgbm90IHN1cHBvcnRlZC4iCiAgfQogIGlmIHsgKCRmcm9tID09ICJOVUxMIiAmJiAkdGhydXMgPT0gIiIgJiYgJHRvID09ICJOVUxMIikgfSB7CiAgICBkZWxldGVfZnJvbV90aHJ1c190byAkZnJvbSAkdGhydXMgJHRvCiAgICBzdGFfZXJyb3IgMzkzICItZnJvbSwgLXRocm91Z2ggb3IgLXRvIHJlcXVpcmVkLiIKICB9CiAgCiAgc2V0IGRlZmF1bHQgW2luZm8gZXhpc3RzIGZsYWdzKC1kZWZhdWx0KV0KICBzZXQgbmFtZV9leGlzdHMgW2luZm8gZXhpc3RzIGtleXMoLW5hbWUpXQogIGlmIHsgJGRlZmF1bHQgJiYgJG5hbWVfZXhpc3RzIH0gewogICAgc3RhX2Vycm9yIDM5NCAiLW5hbWUgYW5kIC1kZWZhdWx0IGFyZSBtdXR1YWxseSBleGNsdXNpdmUuIgogIH0gZWxzZWlmIHsgISRuYW1lX2V4aXN0cyAmJiAhJGRlZmF1bHQgfSB7CiAgICBzdGFfZXJyb3IgMzk1ICItbmFtZSBvciAtZGVmYXVsdCBvcHRpb24gaXMgcmVxdWlyZWQuIgogIH0gZWxzZWlmIHsgJGRlZmF1bHQgfSB7CiAgICBzZXQgbmFtZSAiIgogIH0gZWxzZSB7CiAgICBzZXQgbmFtZSAka2V5cygtbmFtZSkKICB9CiAgCiAgc2V0IGNvbW1lbnQgW3BhcnNlX2NvbW1lbnRfa2V5IGtleXNdCiAgCiAgbWFrZV9ncm91cF9wYXRoICRuYW1lICRkZWZhdWx0ICRmcm9tICR0aHJ1cyAkdG8gJGNvbW1lbnQKfQoKcHJvYyBjaGVja19leGNlcHRpb25fcGlucyB7IGZyb20gdG8gfSB7CiAgc2V0IGZpbGUgW3NkY19maWxlbmFtZV0KICBzZXQgbGluZSBbc2RjX2ZpbGVfbGluZV0KICBjaGVja19leGNlcHRpb25fZnJvbV9waW5zICRmcm9tICRmaWxlICRsaW5lCiAgY2hlY2tfZXhjZXB0aW9uX3RvX3BpbnMgJHRvICRmaWxlICRsaW5lCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAic2V0X2Nsb2NrX2dhdGluZ19jaGVjayIgXAogIHtbLXNldHVwIHNldHVwX3RpbWVdIFstaG9sZCBob2xkX3RpbWVdIFstcmlzZV0gWy1mYWxsXVwKICAgICBbLWxvd10gWy1oaWdoXSBbb2JqZWN0c119Cgpwcm9jIHNldF9jbG9ja19nYXRpbmdfY2hlY2sgeyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJzZXRfY2xvY2tfZ2F0aW5nX2NoZWNrIiBhcmdzIGtleXMgey1zZXR1cCAtaG9sZCB9IFwKICAgIGZsYWdzIHstcmlzZSAtZmFsbCAtaGlnaCAtbG93fQogIAogIGNoZWNrX2FyZ2NfZXEwb3IxICJzZXRfY2xvY2tfZ2F0aW5nX2NoZWNrIiAkYXJncwogIHNldCByZiBbcGFyc2VfcmlzZV9mYWxsX2ZsYWdzIGZsYWdzXQogIAogIHNldCBhY3RpdmVfdmFsdWUgIiIKICBpZiB7W2luZm8gZXhpc3RzIGZsYWdzKC1oaWdoKV0gJiYgW2luZm8gZXhpc3RzIGZsYWdzKC1sb3cpXX0gewogICAgc3RhX2Vycm9yIDM5NiAiY2Fubm90IHNwZWNpZnkgYm90aCAtaGlnaCBhbmQgLWxvdy4iCiAgfSBlbHNlaWYgW2luZm8gZXhpc3RzIGZsYWdzKC1sb3cpXSB7CiAgICBzZXQgYWN0aXZlX3ZhbHVlICIwIgogIH0gZWxzZWlmIFtpbmZvIGV4aXN0cyBmbGFncygtaGlnaCldIHsKICAgIHNldCBhY3RpdmVfdmFsdWUgIjEiCiAgfQogIAogIGlmIHsgIShbaW5mbyBleGlzdHMga2V5cygtaG9sZCldIHx8IFtpbmZvIGV4aXN0cyBrZXlzKC1zZXR1cCldKSB9IHsKICAgIHN0YV9lcnJvciAzOTcgIm1pc3NpbmcgLXNldHVwIG9yIC1ob2xkIGFyZ3VtZW50LiIKICB9CiAgaWYgW2luZm8gZXhpc3RzIGtleXMoLWhvbGQpXSB7CiAgICBzZXRfY2xvY2tfZ2F0aW5nX2NoZWNrMSAkYXJncyAkcmYgIm1pbiIgJGtleXMoLWhvbGQpICRhY3RpdmVfdmFsdWUKICB9CiAgaWYgW2luZm8gZXhpc3RzIGtleXMoLXNldHVwKV0gewogICAgc2V0X2Nsb2NrX2dhdGluZ19jaGVjazEgJGFyZ3MgJHJmICJtYXgiICRrZXlzKC1zZXR1cCkgJGFjdGl2ZV92YWx1ZQogIH0KfQoKcHJvYyBzZXRfY2xvY2tfZ2F0aW5nX2NoZWNrMSB7IGFyZ3MgcmYgc2V0dXBfaG9sZCBtYXJnaW4gYWN0aXZlX3ZhbHVlIH0gewogIHNldCBtYXJnaW4gW3RpbWVfdWlfc3RhICRtYXJnaW5dCiAgaWYgeyBbbGxlbmd0aCAkYXJnc10gPT0gMCB9IHsKICAgIGlmIHsgJGFjdGl2ZV92YWx1ZSAhPSAiIiB9IHsKICAgICAgc3RhX2Vycm9yIDM5OCAiLWhpZ2ggYW5kIC1sb3cgb25seSBwZXJtaXR0ZWQgZm9yIHBpbnMgYW5kIGluc3RhbmNlcy4iCiAgICB9CiAgICBzZXRfY2xvY2tfZ2F0aW5nX2NoZWNrX2NtZCAkcmYgJHNldHVwX2hvbGQgJG1hcmdpbgogIH0gZWxzZWlmIHsgW2xsZW5ndGggJGFyZ3NdID09IDEgfSB7CiAgICBwYXJzZV9jbGtfaW5zdF9wb3J0X3Bpbl9hcmcgW2xpbmRleCAkYXJncyAwXSBjbGtzIGluc3RzIHBpbnMKICAgIAogICAgaWYgeyAkY2xrcyAhPSB7fSAmJiAkYWN0aXZlX3ZhbHVlICE9ICIiIH0gewogICAgICBzdGFfZXJyb3IgMzk5ICItaGlnaCBhbmQgLWxvdyBvbmx5IHBlcm1pdHRlZCBmb3IgcGlucyBhbmQgaW5zdGFuY2VzLiIKICAgIH0KICAgIGZvcmVhY2ggY2xrICRjbGtzIHsKICAgICAgc2V0X2Nsb2NrX2dhdGluZ19jaGVja19jbGtfY21kICRjbGsgJHJmICRzZXR1cF9ob2xkICRtYXJnaW4KICAgIH0KICAgIAogICAgaWYgeyAkYWN0aXZlX3ZhbHVlID09ICIiIH0gewogICAgICBzZXQgYWN0aXZlX3ZhbHVlICJYIgogICAgfQogICAgZm9yZWFjaCBwaW4gJHBpbnMgewogICAgICBzZXRfY2xvY2tfZ2F0aW5nX2NoZWNrX3Bpbl9jbWQgJHBpbiAkcmYgJHNldHVwX2hvbGQgXAoJJG1hcmdpbiAkYWN0aXZlX3ZhbHVlCiAgICB9CiAgICBmb3JlYWNoIGluc3QgJGluc3RzIHsKICAgICAgc2V0X2Nsb2NrX2dhdGluZ19jaGVja19pbnN0YW5jZV9jbWQgJGluc3QgJHJmICRzZXR1cF9ob2xkIFwKCSRtYXJnaW4gJGFjdGl2ZV92YWx1ZQogICAgfQogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJzZXRfY2xvY2tfZ3JvdXBzIiBcCiAge1stbmFtZSBuYW1lXSBbLWxvZ2ljYWxseV9leGNsdXNpdmVdIFstcGh5c2ljYWxseV9leGNsdXNpdmVdXAogICAgIFstYXN5bmNocm9ub3VzXSBbLWFsbG93X3BhdGhzXSBbLWNvbW1lbnQgY29tbWVudF0gLWdyb3VwIGNsb2Nrc30KCnByb2Mgc2V0X2Nsb2NrX2dyb3VwcyB7IGFyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgInNldF9jbG9ja19ncm91cHMiIGFyZ3MgXAogICAga2V5cyB7LW5hbWUgLWNvbW1lbnR9IFwKICAgIGZsYWdzIHstbG9naWNhbGx5X2V4Y2x1c2l2ZSAtcGh5c2ljYWxseV9leGNsdXNpdmUgXAoJICAgICAtYXN5bmNocm9ub3VzIC1hbGxvd19wYXRoc30gMAogIAogIGlmIHtbaW5mbyBleGlzdHMga2V5cygtbmFtZSldfSB7CiAgICBzZXQgbmFtZSAka2V5cygtbmFtZSkKICB9IGVsc2UgewogICAgc2V0IG5hbWUgIiIKICB9CiAgc2V0IGxvZ2ljYWxseV9leGNsdXNpdmUgW2luZm8gZXhpc3RzIGZsYWdzKC1sb2dpY2FsbHlfZXhjbHVzaXZlKV0KICBzZXQgcGh5c2ljYWxseV9leGNsdXNpdmUgW2luZm8gZXhpc3RzIGZsYWdzKC1waHlzaWNhbGx5X2V4Y2x1c2l2ZSldCiAgc2V0IGFzeW5jaHJvbm91cyBbaW5mbyBleGlzdHMgZmxhZ3MoLWFzeW5jaHJvbm91cyldCiAgc2V0IGFsbG93X3BhdGhzIFtpbmZvIGV4aXN0cyBmbGFncygtYWxsb3dfcGF0aHMpXQogIAogIGlmIHsgKCRsb2dpY2FsbHlfZXhjbHVzaXZlKyRwaHlzaWNhbGx5X2V4Y2x1c2l2ZSskYXN5bmNocm9ub3VzKSA9PSAwIH0gewogICAgc3RhX2Vycm9yIDQwMCAib25lIG9mIC1sb2dpY2FsbHlfZXhjbHVzaXZlLCAtcGh5c2ljYWxseV9leGNsdXNpdmUgb3IgLWFzeW5jaHJvbm91cyBpcyByZXF1aXJlZC4iCiAgfQogIGlmIHsgKCRsb2dpY2FsbHlfZXhjbHVzaXZlKyRwaHlzaWNhbGx5X2V4Y2x1c2l2ZSskYXN5bmNocm9ub3VzKSA+IDEgfSB7CiAgICBzdGFfZXJyb3IgNDAxICJ0aGUga2V5d29yZHMgLWxvZ2ljYWxseV9leGNsdXNpdmUsIC1waHlzaWNhbGx5X2V4Y2x1c2l2ZSBhbmQgLWFzeW5jaHJvbm91cyBhcmUgbXV0dWFsbHkgZXhjbHVzaXZlLiIKICB9CiAgCiAgc2V0IGNvbW1lbnQgW3BhcnNlX2NvbW1lbnRfa2V5IGtleXNdCiAgCiAgc2V0IGNsa19ncm91cHMgW21ha2VfY2xvY2tfZ3JvdXBzICRuYW1lICRsb2dpY2FsbHlfZXhjbHVzaXZlIFwKCQkgICAgJHBoeXNpY2FsbHlfZXhjbHVzaXZlICRhc3luY2hyb25vdXMgJGFsbG93X3BhdGhzIFwKCQkgICAgJGNvbW1lbnRdCiAgCiAgd2hpbGUgeyAkYXJncyAhPSAiIiB9IHsKICAgIHNldCBhcmcgW2xpbmRleCAkYXJncyAwXQogICAgaWYge1tzdHJpbmcgbWF0Y2ggJGFyZyAiLWdyb3VwIl19IHsKICAgICAgc2V0IGdyb3VwX2Nsa3MgW2dldF9jbG9ja3Nfd2FybiAiY2xvY2tzIiBbbGluZGV4ICRhcmdzIDFdXQogICAgICBpZiB7ICRncm91cF9jbGtzICE9IHt9IH0gewoJY2xvY2tfZ3JvdXBzX21ha2VfZ3JvdXAgJGNsa19ncm91cHMgJGdyb3VwX2Nsa3MKICAgICAgfQogICAgICBzZXQgYXJncyBbbHJhbmdlICRhcmdzIDIgZW5kXQogICAgfSBlbHNlIHsKICAgICAgaWYge1tpc19rZXl3b3JkX2FyZyAkYXJnXX0gewoJc3RhX3dhcm4gNDAyICJ1bmtub3duIGtleXdvcmQgYXJndW1lbnQgJGFyZy4iCiAgICAgIH0gZWxzZSB7CglzdGFfd2FybiA0MDMgImV4dHJhIHBvc2l0aW9uYWwgYXJndW1lbnQgJGFyZy4iCiAgICAgIH0KICAgICAgc2V0IGFyZ3MgW2xyYW5nZSAkYXJncyAxIGVuZF0KICAgIH0KICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAidW5zZXRfY2xvY2tfZ3JvdXBzIiBcCiAge1stbG9naWNhbGx5X2V4Y2x1c2l2ZV0gWy1waHlzaWNhbGx5X2V4Y2x1c2l2ZV1cCiAgICAgWy1hc3luY2hyb25vdXNdIFstbmFtZSBuYW1lc10gWy1hbGxdfQoJCQkJCnByb2MgdW5zZXRfY2xvY2tfZ3JvdXBzIHsgYXJncyB9IHsKICB1bnNldF9jbGtfZ3JvdXBzX2NtZCAidW5zZXRfY2xvY2tfZ3JvdXBzIiAkYXJncwp9Cgpwcm9jIHVuc2V0X2Nsa19ncm91cHNfY21kIHsgY21kIGNtZF9hcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICRjbWQgY21kX2FyZ3MgXAogICAga2V5cyB7LW5hbWV9IFwKICAgIGZsYWdzIHstbG9naWNhbGx5X2V4Y2x1c2l2ZSAtcGh5c2ljYWxseV9leGNsdXNpdmUgLWFzeW5jaHJvbm91cyAtYWxsfQoKICBzZXQgYWxsIFtpbmZvIGV4aXN0cyBmbGFncygtYWxsKV0KICBzZXQgbmFtZXMge30KICBpZiB7W2luZm8gZXhpc3RzIGtleXMoLW5hbWUpXX0gewogICAgc2V0IG5hbWVzICRrZXlzKC1uYW1lKQogIH0KCiAgaWYgeyAkYWxsICYmICRuYW1lcyAhPSB7fSB9IHsKICAgIHN0YV9lcnJvciA0MDQgInRoZSAtYWxsIGFuZCAtbmFtZSBvcHRpb25zIGFyZSBtdXR1YWxseSBleGNsdXNpdmUuIgogIH0KICBpZiB7ICEkYWxsICYmICRuYW1lcyA9PSB7fSB9IHsKICAgIHN0YV9lcnJvciA0MDUgImVpdGhlciAtYWxsIG9yIC1uYW1lIG9wdGlvbnMgbXVzdCBiZSBzcGVjaWZpZWQuIgogIH0KCiAgc2V0IGxvZ2ljYWxseV9leGNsdXNpdmUgW2luZm8gZXhpc3RzIGZsYWdzKC1sb2dpY2FsbHlfZXhjbHVzaXZlKV0KICBzZXQgcGh5c2ljYWxseV9leGNsdXNpdmUgW2luZm8gZXhpc3RzIGZsYWdzKC1waHlzaWNhbGx5X2V4Y2x1c2l2ZSldCiAgc2V0IGFzeW5jaHJvbm91cyBbaW5mbyBleGlzdHMgZmxhZ3MoLWFzeW5jaHJvbm91cyldCgogIGlmIHsgKCRsb2dpY2FsbHlfZXhjbHVzaXZlKyRwaHlzaWNhbGx5X2V4Y2x1c2l2ZSskYXN5bmNocm9ub3VzKSA9PSAwIH0gewogICAgc3RhX2Vycm9yIDQwNiAib25lIG9mIC1sb2dpY2FsbHlfZXhjbHVzaXZlLCAtcGh5c2ljYWxseV9leGNsdXNpdmUgb3IgLWFzeW5jaHJvbm91cyBpcyByZXF1aXJlZC4iCiAgfQogIGlmIHsgKCRsb2dpY2FsbHlfZXhjbHVzaXZlKyRwaHlzaWNhbGx5X2V4Y2x1c2l2ZSskYXN5bmNocm9ub3VzKSA+IDEgfSB7CiAgICBzdGFfZXJyb3IgNDA3ICJ0aGUga2V5d29yZHMgLWxvZ2ljYWxseV9leGNsdXNpdmUsIC1waHlzaWNhbGx5X2V4Y2x1c2l2ZSBhbmQgLWFzeW5jaHJvbm91cyBhcmUgbXV0dWFsbHkgZXhjbHVzaXZlLiIKICB9CgogIGlmIHsgJGFsbCB9IHsKICAgIGlmIHsgJGxvZ2ljYWxseV9leGNsdXNpdmUgfSB7CiAgICAgIHVuc2V0X2Nsb2NrX2dyb3Vwc19sb2dpY2FsbHlfZXhjbHVzaXZlICJOVUxMIgogICAgfSBlbHNlaWYgeyAkcGh5c2ljYWxseV9leGNsdXNpdmUgfSB7CiAgICAgIHVuc2V0X2Nsb2NrX2dyb3Vwc19waHlzaWNhbGx5X2V4Y2x1c2l2ZSAiTlVMTCIKICAgIH0gZWxzZWlmIHsgJGFzeW5jaHJvbm91cyB9IHsKICAgICAgdW5zZXRfY2xvY2tfZ3JvdXBzX2FzeW5jaHJvbm91cyAiTlVMTCIKICAgIH0KICB9IGVsc2UgewogICAgZm9yZWFjaCBuYW1lICRuYW1lcyB7CiAgICAgIGlmIHsgJGxvZ2ljYWxseV9leGNsdXNpdmUgfSB7Cgl1bnNldF9jbG9ja19ncm91cHNfbG9naWNhbGx5X2V4Y2x1c2l2ZSAkbmFtZQogICAgICB9IGVsc2VpZiB7ICRwaHlzaWNhbGx5X2V4Y2x1c2l2ZSB9IHsKCXVuc2V0X2Nsb2NrX2dyb3Vwc19waHlzaWNhbGx5X2V4Y2x1c2l2ZSAkbmFtZQogICAgICB9IGVsc2VpZiB7ICRhc3luY2hyb25vdXMgfSB7Cgl1bnNldF9jbG9ja19ncm91cHNfYXN5bmNocm9ub3VzICRuYW1lCiAgICAgIH0KICAgIH0KICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAic2V0X2Nsb2NrX2xhdGVuY3kiIFwKICB7Wy1zb3VyY2VdIFstY2xvY2sgY2xvY2tdIFstcmlzZV0gWy1mYWxsXSBbLW1pbl0gWy1tYXhdXAogICAgIFstZWFybHldIFstbGF0ZV0gZGVsYXkgb2JqZWN0c30KCnByb2Mgc2V0X2Nsb2NrX2xhdGVuY3kgeyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJzZXRfY2xvY2tfbGF0ZW5jeSIgYXJncyBrZXlzIHstY2xvY2t9IFwKICAgIGZsYWdzIHstcmlzZSAtZmFsbCAtbWluIC1tYXggLXNvdXJjZSAtbGF0ZSAtZWFybHl9CiAgCiAgY2hlY2tfYXJnY19lcTIgInNldF9jbG9ja19sYXRlbmN5IiAkYXJncwogIAogIHNldCBkZWxheSBbbGluZGV4ICRhcmdzIDBdCiAgY2hlY2tfZmxvYXQgImRlbGF5IiAkZGVsYXkKICBzZXQgZGVsYXkgW3RpbWVfdWlfc3RhICRkZWxheV0KICBzZXQgb2JqZWN0cyBbbGluZGV4ICRhcmdzIDFdCiAgCiAgcGFyc2VfY2xrX3BvcnRfcGluX2FyZyAkb2JqZWN0cyBjbGtzIHBpbnMKICAKICBzZXQgcmYgW3BhcnNlX3Jpc2VfZmFsbF9mbGFncyBmbGFnc10KICBzZXQgbWluX21heCBbcGFyc2VfbWluX21heF9hbGxfZmxhZ3MgZmxhZ3NdCiAgCiAgc2V0IHBpbl9jbGsgIk5VTEwiCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtY2xvY2spXSB9IHsKICAgIHNldCBwaW5fY2xrIFtnZXRfY2xvY2tfd2FybiAiY2xvY2siICRrZXlzKC1jbG9jayldCiAgICBpZiB7ICRjbGtzICE9IHt9IH0gewogICAgICBzdGFfd2FybiA0MDggIi1jbG9jayBpZ25vcmVkIGZvciBjbG9jayBvYmplY3RzLiIKICAgIH0KICB9CiAgCiAgaWYge1tpbmZvIGV4aXN0cyBmbGFncygtc291cmNlKV19IHsKICAgICMgSW5zZXJ0aW9uIGRlbGF5IChzb3VyY2UgbGF0ZW5jeSkuCiAgICBzZXQgZWFybHlfbGF0ZSBbcGFyc2VfZWFybHlfbGF0ZV9hbGxfZmxhZ3MgZmxhZ3NdCiAgICAKICAgIGZvcmVhY2ggY2xrICRjbGtzIHsKICAgICAgc2V0X2Nsb2NrX2luc2VydGlvbl9jbWQgJGNsayAiTlVMTCIgJHJmICRtaW5fbWF4ICRlYXJseV9sYXRlICRkZWxheQogICAgfQogICAgZm9yZWFjaCBwaW4gJHBpbnMgewogICAgICAjIFNvdXJjZSBvbmx5IGFsbG93ZWQgb24gY2xvY2tzIGFuZCBjbG9jayBwaW5zLgogICAgICBpZiB7ICFbaXNfY2xvY2tfc3JjICRwaW5dIH0gewoJc3RhX2Vycm9yIDQwOSAiLXNvdXJjZSAnW2dldF9mdWxsX25hbWUgJHBpbl0nIGlzIG5vdCBhIGNsb2NrIHBpbi4iCiAgICAgIH0KICAgICAgc2V0X2Nsb2NrX2luc2VydGlvbl9jbWQgJHBpbl9jbGsgJHBpbiAkcmYgJG1pbl9tYXggJGVhcmx5X2xhdGUgJGRlbGF5CiAgICB9CiAgfSBlbHNlIHsKICAgICMgTGF0ZW5jeS4KICAgIGlmIHtbaW5mbyBleGlzdHMgZmxhZ3MoLWVhcmx5KV0gfHwgW2luZm8gZXhpc3RzIGZsYWdzKC1sYXRlKV19IHsKICAgICAgc3RhX2Vycm9yIDQxMCAiLWVhcmx5Ly1sYXRlIGlzIG9ubHkgYWxsb3dlZCB3aXRoIC1zb3VyY2UuIgogICAgfQogICAgCiAgICBmb3JlYWNoIGNsayAkY2xrcyB7CiAgICAgIHNldF9jbG9ja19sYXRlbmN5X2NtZCAkY2xrICJOVUxMIiAkcmYgJG1pbl9tYXggJGRlbGF5CiAgICB9CiAgICBmb3JlYWNoIHBpbiAkcGlucyB7CiAgICAgIHNldF9jbG9ja19sYXRlbmN5X2NtZCAkcGluX2NsayAkcGluICRyZiAkbWluX21heCAkZGVsYXkKICAgIH0KICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAidW5zZXRfY2xvY2tfbGF0ZW5jeSIge1stc291cmNlXSBbLWNsb2NrIGNsb2NrXSBvYmplY3RzfQoKcHJvYyB1bnNldF9jbG9ja19sYXRlbmN5IHsgYXJncyB9IHsKICB1bnNldF9jbGtfbGF0ZW5jeV9jbWQgInVuc2V0X2Nsb2NrX2xhdGVuY3kiICRhcmdzCn0KCnByb2MgdW5zZXRfY2xrX2xhdGVuY3lfY21kIHsgY21kIGNtZF9hcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICRjbWQgY21kX2FyZ3Mga2V5cyB7LWNsb2NrfSBmbGFncyB7LXNvdXJjZX0KICBjaGVja19hcmdjX2VxMSAkY21kICRjbWRfYXJncwogIHNldCBvYmplY3RzIFtsaW5kZXggJGNtZF9hcmdzIDBdCiAgcGFyc2VfY2xrX3BvcnRfcGluX2FyZyAkb2JqZWN0cyBjbGtzIHBpbnMKICBzZXQgcGluX2NsayAiTlVMTCIKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1jbG9jayldIH0gewogICAgc2V0IHBpbl9jbGsgW2dldF9jbG9ja193YXJuICJjbG9jayIgJGtleXMoLWNsb2NrKV0KICAgIGlmIHsgJGNsa3MgIT0ge30gfSB7CiAgICAgIHN0YV93YXJuIDQxMSAiLWNsb2NrIGlnbm9yZWQgZm9yIGNsb2NrIG9iamVjdHMuIgogICAgfQogIH0KCiAgaWYge1tpbmZvIGV4aXN0cyBmbGFncygtc291cmNlKV19IHsKICAgICMgU291cmNlIGxhdGVuY3kuCiAgICBmb3JlYWNoIGNsayAkY2xrcyB7CiAgICAgIHVuc2V0X2Nsb2NrX2luc2VydGlvbl9jbWQgJGNsayAiTlVMTCIKICAgIH0KICAgIGZvcmVhY2ggcGluICRwaW5zIHsKICAgICAgIyBTb3VyY2Ugb25seSBhbGxvd2VkIG9uIGNsb2NrcyBhbmQgY2xvY2sgcGlucy4KICAgICAgaWYgeyAhW2lzX2Nsb2NrX3BpbiAkcGluXSB9IHsKCXN0YV9lcnJvciA0MTIgIi1zb3VyY2UgJ1skcGluIHBhdGhfbmFtZV0nIGlzIG5vdCBhIGNsb2NrIHBpbi4iCiAgICAgIH0KICAgICAgdW5zZXRfY2xvY2tfaW5zZXJ0aW9uX2NtZCAkcGluX2NsayAkcGluCiAgICB9CiAgfSBlbHNlIHsKICAgICMgTGF0ZW5jeS4KICAgIGZvcmVhY2ggY2xrICRjbGtzIHsKICAgICAgdW5zZXRfY2xvY2tfbGF0ZW5jeV9jbWQgJGNsayAiTlVMTCIKICAgIH0KICAgIGZvcmVhY2ggcGluICRwaW5zIHsKICAgICAgdW5zZXRfY2xvY2tfbGF0ZW5jeV9jbWQgJHBpbl9jbGsgJHBpbgogICAgfQogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJzZXRfc2Vuc2UiIFwKICB7Wy10eXBlIGNsb2NrfGRhdGFdIFstcG9zaXRpdmVdIFstbmVnYXRpdmVdIFstcHVsc2UgcHVsc2VfdHlwZV1cCiAgICAgWy1zdG9wX3Byb3BhZ2F0aW9uXSBbLWNsb2NrcyBjbG9ja3NdIHBpbnN9Cgpwcm9jIHNldF9zZW5zZSB7IGFyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgInNldF9zZW5zZSIgYXJncyBrZXlzIHstdHlwZX0gZmxhZ3Mge30gMAogIAogIHNldCB0eXBlICJjbG9jayIKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC10eXBlKV0gfSB7CiAgICBzZXQgdHlwZSAka2V5cygtdHlwZSkKICAgIGlmIHsgJHR5cGUgPT0gImRhdGEiIH0gewogICAgICBzdGFfd2FybiA0MTMgInNldF9zZW5zZSAtdHlwZSBkYXRhIG5vdCBzdXBwb3J0ZWQuIgogICAgfSBlbHNlaWYgeyAkdHlwZSA9PSAiY2xvY2siIH0gewogICAgICBzZXRfY2xvY2tfc2Vuc2VfY21kMSAic2V0X3NlbnNlIiAkYXJncwogICAgfSBlbHNlIHsKICAgICAgc3RhX2Vycm9yIDQxNCAic2V0X3NlbnNlIC10eXBlIGNsb2NrfGRhdGEiCiAgICB9CiAgfQp9CgojIGRlcHJlY2F0ZWQgaW4gU0RDIDIuMQpkZWZpbmVfY21kX2FyZ3MgInNldF9jbG9ja19zZW5zZSIgXAogIHtbLXBvc2l0aXZlXSBbLW5lZ2F0aXZlXSBbLXB1bHNlIHB1bHNlX3R5cGVdIFstc3RvcF9wcm9wYWdhdGlvbl0gXAogICAgIFstY2xvY2sgY2xvY2tzXSBwaW5zfQoKcHJvYyBzZXRfY2xvY2tfc2Vuc2UgeyBhcmdzIH0gewogIHN0YV93YXJuIDQxNSAic2V0X2Nsb2NrX3NlbnNlIGlzIGRlcHJlY2F0ZWQgYXMgb2YgU0RDIDIuMS4gVXNlIHNldF9zZW5zZSAtdHlwZSBjbG9jay4iCiAgc2V0X2Nsb2NrX3NlbnNlX2NtZDEgInNldF9jbG9ja19zZW5zZSIgJGFyZ3MKfQoKcHJvYyBzZXRfY2xvY2tfc2Vuc2VfY21kMSB7IGNtZCBjbWRfYXJncyB9IHsKICAjIFNEQyB1c2VzIC1jbG9jaywgT1QsIE9DIHVzZSAtY2xvY2tzCiAgcGFyc2Vfa2V5X2FyZ3MgJGNtZCBjbWRfYXJncyBrZXlzIHstY2xvY2sgLWNsb2NrcyAtcHVsc2V9IFwKICAgIGZsYWdzIHstcG9zaXRpdmUgLW5lZ2F0aXZlIC1zdG9wX3Byb3BhZ2F0aW9ufSAwCiAgY2hlY2tfYXJnY19lcTEgJGNtZCAkY21kX2FyZ3MKICAKICBzZXQgcHVsc2UgW2luZm8gZXhpc3RzIGtleXMoLXB1bHNlKV0KICBpZiB7ICRwdWxzZSB9IHsKICAgIHN0YV93YXJuIDQxNiAiLXB1bHNlIGFyZ3VtZW50IG5vdCBzdXBwb3J0ZWQuIgogIH0KICBzZXQgcG9zaXRpdmUgW2luZm8gZXhpc3RzIGZsYWdzKC1wb3NpdGl2ZSldCiAgc2V0IG5lZ2F0aXZlIFtpbmZvIGV4aXN0cyBmbGFncygtbmVnYXRpdmUpXQogIHNldCBzdG9wX3Byb3BhZ2F0aW9uIFtpbmZvIGV4aXN0cyBmbGFncygtc3RvcF9wcm9wYWdhdGlvbildCiAgaWYgeyAoJHBvc2l0aXZlICYmICgkbmVnYXRpdmUgfHwgJHN0b3BfcHJvcGFnYXRpb24gfHwgJHB1bHNlKSkgXAoJIHx8ICgkbmVnYXRpdmUgJiYgKCRwb3NpdGl2ZSB8fCAkc3RvcF9wcm9wYWdhdGlvbiB8fCAkcHVsc2UpKSBcCgkgfHwgKCRzdG9wX3Byb3BhZ2F0aW9uICYmICgkcG9zaXRpdmUgfHwgJG5lZ2F0aXZlIHx8ICRwdWxzZSkpCiAgICAgICB8fCAoJHB1bHNlICYmICgkcG9zaXRpdmUgfHwgJG5lZ2F0aXZlIHx8ICRzdG9wX3Byb3BhZ2F0aW9uKSkgfSB7CiAgICBzdGFfd2FybiA0MTcgIi1wb3NpdGl2ZSwgLW5lZ2F0aXZlLCAtc3RvcF9wcm9wYWdhdGlvbiBhbmQgLXB1bHNlIGFyZSBtdXR1YWxseSBleGNsdXNpdmUuIgogIH0KICAKICBzZXQgcGlucyBbZ2V0X3BvcnRfcGluc19lcnJvciAicGlucyIgW2xpbmRleCAkY21kX2FyZ3MgMF1dCiAgc2V0IGNsa3Mge30KICBpZiB7W2luZm8gZXhpc3RzIGtleXMoLWNsb2NrKV19IHsKICAgIHNldCBjbGtzIFtnZXRfY2xvY2tzX3dhcm4gImNsb2NrIiAka2V5cygtY2xvY2spXQogIH0KICBpZiB7W2luZm8gZXhpc3RzIGtleXMoLWNsb2NrcyldfSB7CiAgICBzZXQgY2xrcyBbZ2V0X2Nsb2Nrc193YXJuICJjbG9ja3MiICRrZXlzKC1jbG9ja3MpXQogIH0KICBmb3JlYWNoIHBpbiAkcGlucyB7CiAgICBpZiB7WyRwaW4gaXNfaGllcmFyY2hpY2FsXX0gewogICAgICBzdGFfd2FybiA0MTggImhpZXJhcmNoaWNhbCBwaW4gJ1tnZXRfZnVsbF9uYW1lICRwaW5dJyBub3Qgc3VwcG9ydGVkLiIKICAgIH0KICB9CiAgc2V0X2Nsb2NrX3NlbnNlX2NtZCAkcGlucyAkY2xrcyAkcG9zaXRpdmUgJG5lZ2F0aXZlICRzdG9wX3Byb3BhZ2F0aW9uCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAic2V0X2Nsb2NrX3RyYW5zaXRpb24iIFwKICB7Wy1yaXNlXSBbLWZhbGxdIFstbWluXSBbLW1heF0gdHJhbnNpdGlvbiBjbG9ja3N9Cgpwcm9jIHNldF9jbG9ja190cmFuc2l0aW9uIHsgYXJncyB9IHsKICBwYXJzZV9rZXlfYXJncyAic2V0X2Nsb2NrX3RyYW5zaXRpb24iIGFyZ3Mga2V5cyB7fSBcCiAgICBmbGFncyB7LXJpc2UgLWZhbGwgLW1heCAtbWlufQogIAogIHNldCByZiBbcGFyc2VfcmlzZV9mYWxsX2ZsYWdzIGZsYWdzXQogIHNldCBtaW5fbWF4IFtwYXJzZV9taW5fbWF4X2FsbF9mbGFncyBmbGFnc10KICBjaGVja19hcmdjX2VxMiAic2V0X2Nsb2NrX3RyYW5zaXRpb24iICRhcmdzCiAgCiAgc2V0IHNsZXcgW2xpbmRleCAkYXJncyAwXQogIHNldCBjbGtzIFtnZXRfY2xvY2tzX3dhcm4gImNsb2NrcyIgW2xpbmRleCAkYXJncyAxXV0KICAKICBmb3JlYWNoIGNsayAkY2xrcyB7CiAgICBpZiB7IFskY2xrIGlzX3ZpcnR1YWxdIH0gewogICAgICBzdGFfd2FybiA0MTkgInRyYW5zaXRpb24gdGltZSBjYW4gbm90IGJlIHNwZWNpZmllZCBmb3IgdmlydHVhbCBjbG9ja3MuIgogICAgfSBlbHNlIHsKICAgICAgc2V0X2Nsb2NrX3NsZXdfY21kICRjbGsgJHJmICRtaW5fbWF4IFt0aW1lX3VpX3N0YSAkc2xld10KICAgIH0KICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAidW5zZXRfY2xvY2tfdHJhbnNpdGlvbiIge2Nsb2Nrc30KCnByb2MgdW5zZXRfY2xvY2tfdHJhbnNpdGlvbiB7IGFyZ3MgfSB7CiAgY2hlY2tfYXJnY19lcTEgInVuc2V0X2Nsb2NrX3RyYW5zaXRpb24iICRhcmdzCiAgc2V0IGNsa3MgW2dldF9jbG9ja3Nfd2FybiAiY2xvY2tzIiBbbGluZGV4ICRhcmdzIDBdXQogIGZvcmVhY2ggY2xrICRjbGtzIHsKICAgIHVuc2V0X2Nsb2NrX3NsZXdfY21kICRjbGsKICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiMgLXJpc2UvLWZhbGwgYXJlIG9ic29sZXRlLgpkZWZpbmVfY21kX2FyZ3MgInNldF9jbG9ja191bmNlcnRhaW50eSIgXAogIHtbLWZyb218LXJpc2VfZnJvbXwtZmFsbF9mcm9tIGZyb21fY2xvY2tdXAogICAgIFstdG98LXJpc2VfdG98LWZhbGxfdG8gdG9fY2xvY2tdIFstcmlzZV0gWy1mYWxsXVwKICAgICBbLXNldHVwXSBbLWhvbGRdIHVuY2VydGFpbnR5IFtvYmplY3RzXX0KCnByb2Mgc2V0X2Nsb2NrX3VuY2VydGFpbnR5IHsgYXJncyB9IHsKICBwYXJzZV9rZXlfYXJncyAic2V0X2Nsb2NrX3VuY2VydGFpbnR5IiBhcmdzIFwKICAgIGtleXMgey1mcm9tIC1yaXNlX2Zyb20gLWZhbGxfZnJvbSAtdG8gLXJpc2VfdG8gLWZhbGxfdG99IFwKICAgIGZsYWdzIHstcmlzZSAtZmFsbCAtc2V0dXAgLWhvbGR9CiAgCiAgaWYgeyBbbGxlbmd0aCAkYXJnc10gPT0gMCB9IHsKICAgIHN0YV9lcnJvciA0MjAgIm1pc3NpbmcgdW5jZXJ0YWludHkgdmFsdWUuIgogIH0KICBzZXQgdW5jZXJ0YWludHkgW2xpbmRleCAkYXJncyAwXQogIGNoZWNrX2Zsb2F0ICJ1bmNlcnRhaW50eSIgJHVuY2VydGFpbnR5CiAgc2V0IHVuY2VydGFpbnR5IFt0aW1lX3VpX3N0YSAkdW5jZXJ0YWludHldCiAgCiAgc2V0IG1pbl9tYXggIm1pbl9tYXgiCiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLXNldHVwKV0gJiYgIVtpbmZvIGV4aXN0cyBmbGFncygtaG9sZCldIH0gewogICAgc2V0IG1pbl9tYXggIm1heCIKICB9CiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLWhvbGQpXSAmJiAhW2luZm8gZXhpc3RzIGZsYWdzKC1zZXR1cCldIH0gewogICAgc2V0IG1pbl9tYXggIm1pbiIKICB9CiAgCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtZnJvbSldIH0gewogICAgc2V0IGZyb21fa2V5ICItZnJvbSIKICAgIHNldCBmcm9tX3JmICJyaXNlX2ZhbGwiCiAgfSBlbHNlaWYgeyBbaW5mbyBleGlzdHMga2V5cygtcmlzZV9mcm9tKV0gfSB7CiAgICBzZXQgZnJvbV9rZXkgIi1yaXNlX2Zyb20iCiAgICBzZXQgZnJvbV9yZiAicmlzZSIKICB9IGVsc2VpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1mYWxsX2Zyb20pXSB9IHsKICAgIHNldCBmcm9tX2tleSAiLWZhbGxfZnJvbSIKICAgIHNldCBmcm9tX3JmICJmYWxsIgogIH0gZWxzZSB7CiAgICBzZXQgZnJvbV9rZXkgIm5vbmUiCiAgfQogIAogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLXRvKV0gfSB7CiAgICBzZXQgdG9fa2V5ICItdG8iCiAgICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtcmlzZSldIH0gewogICAgICBzZXQgdG9fcmYgInJpc2UiCiAgICB9IGVsc2VpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtZmFsbCldIH0gewogICAgICBzZXQgdG9fcmYgImZhbGwiCiAgICB9IGVsc2UgewogICAgICBzZXQgdG9fcmYgInJpc2VfZmFsbCIKICAgIH0KICB9IGVsc2VpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1yaXNlX3RvKV0gfSB7CiAgICBzZXQgdG9fa2V5ICItcmlzZV90byIKICAgIHNldCB0b19yZiAicmlzZSIKICB9IGVsc2VpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1mYWxsX3RvKV0gfSB7CiAgICBzZXQgdG9fa2V5ICItZmFsbF90byIKICAgIHNldCB0b19yZiAiZmFsbCIKICB9IGVsc2UgewogICAgc2V0IHRvX2tleSAibm9uZSIKICB9CiAgCiAgaWYgeyAkZnJvbV9rZXkgIT0gIm5vbmUiICYmICR0b19rZXkgPT0gIm5vbmUiIFwKCSB8fCAkZnJvbV9rZXkgPT0gIm5vbmUiICYmICR0b19rZXkgIT0gIm5vbmUiIH0gewogICAgc3RhX2Vycm9yIDQyMSAiLWZyb20vLXRvIG11c3QgYmUgdXNlZCB0b2dldGhlci4iCiAgfSBlbHNlaWYgeyAkZnJvbV9rZXkgIT0gIm5vbmUiICYmICR0b19rZXkgIT0gIm5vbmUiIH0gewogICAgIyBJbnRlci1jbG9jayB1bmNlcnRhaW50eS4KICAgIGNoZWNrX2FyZ2NfZXExICItZnJvbS8tdG8iICRhcmdzCiAgICAKICAgICMgLWZyb20vLXRvIGNhbiBiZSBsaXN0cy4KICAgIHNldCBmcm9tX2Nsa3MgW2dldF9jbG9ja3Nfd2FybiAiZnJvbV9jbG9ja3MiICRrZXlzKCRmcm9tX2tleSldCiAgICBzZXQgdG9fY2xrcyBbZ2V0X2Nsb2Nrc193YXJuICJ0b19jbG9ja3MiICRrZXlzKCR0b19rZXkpXQogICAgCiAgICBmb3JlYWNoIGZyb21fY2xrICRmcm9tX2Nsa3MgewogICAgICBmb3JlYWNoIHRvX2NsayAkdG9fY2xrcyB7CglzZXRfaW50ZXJfY2xvY2tfdW5jZXJ0YWludHkgJGZyb21fY2xrICRmcm9tX3JmIFwKCSAgJHRvX2NsayAkdG9fcmYgJG1pbl9tYXggJHVuY2VydGFpbnR5CiAgICAgIH0KICAgIH0KICB9IGVsc2UgewogICAgIyBTaW5nbGUgY2xvY2sgdW5jZXJ0YWludHkuCiAgICBjaGVja19hcmdjX2VxMiAic2V0X2Nsb2NrX3VuY2VydGFpbnR5IiAkYXJncwogICAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLXJpc2UpXSBcCgkgICB8fCBbaW5mbyBleGlzdHMgZmxhZ3MoLWZhbGwpXSB9IHsKICAgICAgc3RhX2Vycm9yIDQyMiAiLXJpc2UsIC1mYWxsIG9wdGlvbnMgbm90IGFsbG93ZWQgZm9yIHNpbmdsZSBjbG9jayB1bmNlcnRhaW50eS4iCiAgICB9CiAgICBzZXQgb2JqZWN0cyBbbGluZGV4ICRhcmdzIDFdCiAgICBwYXJzZV9jbGtfcG9ydF9waW5fYXJnICRvYmplY3RzIGNsa3MgcGlucwogICAgCiAgICBmb3JlYWNoIGNsayAkY2xrcyB7CiAgICAgIHNldF9jbG9ja191bmNlcnRhaW50eV9jbGsgJGNsayAkbWluX21heCAkdW5jZXJ0YWludHkKICAgIH0KICAgIGZvcmVhY2ggcGluICRwaW5zIHsKICAgICAgc2V0X2Nsb2NrX3VuY2VydGFpbnR5X3BpbiAkcGluICRtaW5fbWF4ICR1bmNlcnRhaW50eQogICAgfQogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJ1bnNldF9jbG9ja191bmNlcnRhaW50eSIgXAogIHtbLWZyb218LXJpc2VfZnJvbXwtZmFsbF9mcm9tIGZyb21fY2xvY2tdXAogICAgIFstdG98LXJpc2VfdG98LWZhbGxfdG8gdG9fY2xvY2tdIFstcmlzZV0gWy1mYWxsXVwKICAgICBbLXNldHVwXSBbLWhvbGRdIFtvYmplY3RzXX0KCnByb2MgdW5zZXRfY2xvY2tfdW5jZXJ0YWludHkgeyBhcmdzIH0gewogIHVuc2V0X2Nsa191bmNlcnRhaW50eV9jbWQgInVuc2V0X2Nsb2NrX3VuY2VydGFpbnR5IiAkYXJncwp9Cgpwcm9jIHVuc2V0X2Nsa191bmNlcnRhaW50eV9jbWQgeyBjbWQgY21kX2FyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgJGNtZCBjbWRfYXJncyBcCiAgICBrZXlzIHstZnJvbSAtcmlzZV9mcm9tIC1mYWxsX2Zyb20gLXRvIC1yaXNlX3RvIC1mYWxsX3RvfSBcCiAgICBmbGFncyB7LXJpc2UgLWZhbGwgLXNldHVwIC1ob2xkfQoKICBzZXQgbWluX21heCAibWluX21heCIKICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtc2V0dXApXSAmJiAhW2luZm8gZXhpc3RzIGZsYWdzKC1ob2xkKV0gfSB7CiAgICBzZXQgbWluX21heCAibWF4IgogIH0KICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtaG9sZCldICYmICFbaW5mbyBleGlzdHMgZmxhZ3MoLXNldHVwKV0gfSB7CiAgICBzZXQgbWluX21heCAibWluIgogIH0KCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtZnJvbSldIH0gewogICAgc2V0IGZyb21fa2V5ICItZnJvbSIKICAgIHNldCBmcm9tX3JmICJyaXNlX2ZhbGwiCiAgfSBlbHNlaWYgeyBbaW5mbyBleGlzdHMga2V5cygtcmlzZV9mcm9tKV0gfSB7CiAgICBzZXQgZnJvbV9rZXkgIi1yaXNlX2Zyb20iCiAgICBzZXQgZnJvbV9yZiAicmlzZSIKICB9IGVsc2VpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1mYWxsX2Zyb20pXSB9IHsKICAgIHNldCBmcm9tX2tleSAiLWZhbGxfZnJvbSIKICAgIHNldCBmcm9tX3JmICJmYWxsIgogIH0gZWxzZSB7CiAgICBzZXQgZnJvbV9rZXkgIm5vbmUiCiAgfQoKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC10byldIH0gewogICAgc2V0IHRvX2tleSAiLXRvIgogICAgc2V0IHRvX3JmICJyaXNlX2ZhbGwiCiAgfSBlbHNlaWYgeyBbaW5mbyBleGlzdHMga2V5cygtcmlzZV90byldIH0gewogICAgc2V0IHRvX2tleSAiLXJpc2VfdG8iCiAgICBzZXQgdG9fcmYgInJpc2UiCiAgfSBlbHNlaWYgeyBbaW5mbyBleGlzdHMga2V5cygtZmFsbF90byldIH0gewogICAgc2V0IHRvX2tleSAiLWZhbGxfdG8iCiAgICBzZXQgdG9fcmYgImZhbGwiCiAgfSBlbHNlIHsKICAgIHNldCB0b19rZXkgIm5vbmUiCiAgfQoKICBpZiB7ICRmcm9tX2tleSAhPSAibm9uZSIgJiYgJHRvX2tleSA9PSAibm9uZSIgXAoJIHx8ICRmcm9tX2tleSA9PSAibm9uZSIgJiYgJHRvX2tleSAhPSAibm9uZSIgfSB7CiAgICBzdGFfZXJyb3IgNDIzICItZnJvbS8tdG8gbXVzdCBiZSB1c2VkIHRvZ2V0aGVyLiIKICB9IGVsc2VpZiB7ICRmcm9tX2tleSAhPSAibm9uZSIgJiYgJHRvX2tleSAhPSAibm9uZSIgfSB7CiAgICAjIEludGVyLWNsb2NrIHVuY2VydGFpbnR5LgogICAgY2hlY2tfYXJnY19lcTAgInVuc2V0X2Nsb2NrX3VuY2VydGFpbnR5IiAkY21kX2FyZ3MKCiAgICAjIC1mcm9tLy10byBjYW4gYmUgbGlzdHMuCiAgICBzZXQgZnJvbV9jbGtzIFtnZXRfY2xvY2tzX3dhcm4gImZyb21fY2xvY2tzIiAka2V5cygkZnJvbV9rZXkpXQogICAgc2V0IHRvX2Nsa3MgW2dldF9jbG9ja3Nfd2FybiAidG9fY2xvY2tzIiAka2V5cygkdG9fa2V5KV0KCiAgICBmb3JlYWNoIGZyb21fY2xrICRmcm9tX2Nsa3MgewogICAgICBmb3JlYWNoIHRvX2NsayAkdG9fY2xrcyB7Cgl1bnNldF9pbnRlcl9jbG9ja191bmNlcnRhaW50eSAkZnJvbV9jbGsgJGZyb21fcmYgXAoJICAkdG9fY2xrICR0b19yZiAkbWluX21heAogICAgICB9CiAgICB9CiAgfSBlbHNlIHsKICAgICMgU2luZ2xlIGNsb2NrIHVuY2VydGFpbnR5LgogICAgY2hlY2tfYXJnY19lcTEgJGNtZCAkY21kX2FyZ3MKICAgIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLXJpc2UpXSBcCgkgICB8fCBbaW5mbyBleGlzdHMga2V5cygtZmFsbCldIH0gewogICAgICBzdGFfZXJyb3IgNDI0ICItcmlzZSwgLWZhbGwgb3B0aW9ucyBub3QgYWxsb3dlZCBmb3Igc2luZ2xlIGNsb2NrIHVuY2VydGFpbnR5LiIKICAgIH0KICAgIHNldCBvYmplY3RzIFtsaW5kZXggJGNtZF9hcmdzIDBdCiAgICBwYXJzZV9jbGtfcG9ydF9waW5fYXJnICRvYmplY3RzIGNsa3MgcGlucwoKICAgIGZvcmVhY2ggY2xrICRjbGtzIHsKICAgICAgdW5zZXRfY2xvY2tfdW5jZXJ0YWludHlfY2xrICRjbGsgJG1pbl9tYXgKICAgIH0KICAgIGZvcmVhY2ggcGluICRwaW5zIHsKICAgICAgdW5zZXRfY2xvY2tfdW5jZXJ0YWludHlfcGluICRwaW4gJG1pbl9tYXgKICAgIH0KICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAic2V0X2RhdGFfY2hlY2siIFwKICB7Wy1mcm9tIGZyb21fcGluXSBbLXJpc2VfZnJvbSBmcm9tX3Bpbl0gWy1mYWxsX2Zyb20gZnJvbV9waW5dXAogICAgIFstdG8gdG9fcGluXSBbLXJpc2VfdG8gdG9fcGluXSBbLWZhbGxfdG8gdG9fcGluXVwKICAgICBbLXNldHVwIHwgLWhvbGRdIFstY2xvY2sgY2xvY2tdIG1hcmdpbn0KCnByb2Mgc2V0X2RhdGFfY2hlY2sgeyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJzZXRfZGF0YV9jaGVjayIgYXJncyBcCiAgICBrZXlzIHstZnJvbSAtcmlzZV9mcm9tIC1mYWxsX2Zyb20gLXRvIC1yaXNlX3RvIC1mYWxsX3RvIC1jbG9ja30gXAogICAgZmxhZ3Mgey1zZXR1cCAtaG9sZH0KICBjaGVja19hcmdjX2VxMSAic2V0X2RhdGFfY2hlY2siICRhcmdzCiAgCiAgc2V0IG1hcmdpbiBbdGltZV91aV9zdGEgJGFyZ3NdCiAgc2V0IGZyb21fcmYgInJpc2VfZmFsbCIKICBzZXQgdG9fcmYgInJpc2VfZmFsbCIKICBzZXQgY2xrICJOVUxMIgogIAogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1mcm9tKV0gewogICAgc2V0IGZyb20gW2dldF9wb3J0X3Bpbl9lcnJvciAiZnJvbV9waW4iICRrZXlzKC1mcm9tKV0KICB9IGVsc2VpZiBbaW5mbyBleGlzdHMga2V5cygtcmlzZV9mcm9tKV0gewogICAgc2V0IGZyb20gW2dldF9wb3J0X3Bpbl9lcnJvciAiZnJvbV9waW4iICRrZXlzKC1yaXNlX2Zyb20pXQogICAgc2V0IGZyb21fcmYgInJpc2UiCiAgfSBlbHNlaWYgW2luZm8gZXhpc3RzIGtleXMoLWZhbGxfZnJvbSldIHsKICAgIHNldCBmcm9tIFtnZXRfcG9ydF9waW5fZXJyb3IgImZyb21fcGluIiAka2V5cygtZmFsbF9mcm9tKV0KICAgIHNldCBmcm9tX3JmICJmYWxsIgogIH0gZWxzZSB7CiAgICBzdGFfZXJyb3IgNDI1ICJtaXNzaW5nIC1mcm9tLCAtcmlzZV9mcm9tIG9yIC1mYWxsX2Zyb20gYXJndW1lbnQuIgogIH0KICAKICBpZiBbaW5mbyBleGlzdHMga2V5cygtdG8pXSB7CiAgICBzZXQgdG8gW2dldF9wb3J0X3Bpbl9lcnJvciAidG9fcGluIiAka2V5cygtdG8pXQogIH0gZWxzZWlmIFtpbmZvIGV4aXN0cyBrZXlzKC1yaXNlX3RvKV0gewogICAgc2V0IHRvIFtnZXRfcG9ydF9waW5fZXJyb3IgInRvX3BpbiIgJGtleXMoLXJpc2VfdG8pXQogICAgc2V0IHRvX3JmICJyaXNlIgogIH0gZWxzZWlmIFtpbmZvIGV4aXN0cyBrZXlzKC1mYWxsX3RvKV0gewogICAgc2V0IHRvIFtnZXRfcG9ydF9waW5fZXJyb3IgInRvX3BpbiIgJGtleXMoLWZhbGxfdG8pXQogICAgc2V0IHRvX3JmICJmYWxsIgogIH0gZWxzZSB7CiAgICBzdGFfZXJyb3IgNDI2ICJtaXNzaW5nIC10bywgLXJpc2VfdG8gb3IgLWZhbGxfdG8gYXJndW1lbnQuIgogIH0KICAKICBpZiBbaW5mbyBleGlzdHMga2V5cygtY2xvY2spXSB7CiAgICBzZXQgY2xrIFtnZXRfY2xvY2tfd2FybiAiY2xvY2siICRrZXlzKC1jbG9jayldCiAgfQogIAogIGlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1zZXR1cCldICYmICFbaW5mbyBleGlzdHMgZmxhZ3MoLWhvbGQpXSB9IHsKICAgIHNldCBzZXR1cF9ob2xkICJzZXR1cCIKICB9IGVsc2VpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtaG9sZCldICYmICFbaW5mbyBleGlzdHMgZmxhZ3MoLXNldHVwKV0gfSB7CiAgICBzZXQgc2V0dXBfaG9sZCAiaG9sZCIKICB9IGVsc2UgewogICAgc2V0IHNldHVwX2hvbGQgInNldHVwX2hvbGQiCiAgfQogIAogIHNldF9kYXRhX2NoZWNrX2NtZCAkZnJvbSAkZnJvbV9yZiAkdG8gJHRvX3JmICRjbGsgJHNldHVwX2hvbGQgJG1hcmdpbgp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInVuc2V0X2RhdGFfY2hlY2siIFwKICB7Wy1mcm9tIGZyb21fcGluXSBbLXJpc2VfZnJvbSBmcm9tX3Bpbl0gWy1mYWxsX2Zyb20gZnJvbV9waW5dXAogICAgIFstdG8gdG9fcGluXSBbLXJpc2VfdG8gdG9fcGluXSBbLWZhbGxfdG8gdG9fcGluXVwKICAgICBbLXNldHVwIHwgLWhvbGRdIFstY2xvY2sgY2xvY2tdfQoKcHJvYyB1bnNldF9kYXRhX2NoZWNrIHsgYXJncyB9IHsKICB1bnNldF9kYXRhX2NoZWNrc19jbWQgInVuc2V0X2RhdGFfY2hlY2siICRhcmdzCn0KCnByb2MgdW5zZXRfZGF0YV9jaGVja3NfY21kIHsgY21kIGNtZF9hcmdzIH0gewogIHBhcnNlX2tleV9hcmdzIGNtZCBjbWRfYXJncyBcCiAgICBrZXlzIHstZnJvbSAtcmlzZV9mcm9tIC1mYWxsX2Zyb20gLXRvIC1yaXNlX3RvIC1mYWxsX3RvIC1jbG9ja30gXAogICAgZmxhZ3Mgey1zZXR1cCAtaG9sZH0KICBjaGVja19hcmdjX2VxMCAkY21kICRjbWRfYXJncwoKICBzZXQgZnJvbV9yZiAicmlzZV9mYWxsIgogIHNldCB0b19yZiAicmlzZV9mYWxsIgogIHNldCBjbGsgIk5VTEwiCiAgc2V0IHNldHVwX2hvbGQgIm1heCIKICBpZiBbaW5mbyBleGlzdHMga2V5cygtZnJvbSldIHsKICAgIHNldCBmcm9tIFtnZXRfcG9ydF9waW5fZXJyb3IgImZyb21fcGluIiAka2V5cygtZnJvbSldCiAgfSBlbHNlaWYgW2luZm8gZXhpc3RzIGtleXMoLXJpc2VfZnJvbSldIHsKICAgIHNldCBmcm9tIFtnZXRfcG9ydF9waW5fZXJyb3IgImZyb21fcGluIiAka2V5cygtcmlzZV9mcm9tKV0KICAgIHNldCBmcm9tX3JmICJyaXNlIgogIH0gZWxzZWlmIFtpbmZvIGV4aXN0cyBrZXlzKC1mYWxsX2Zyb20pXSB7CiAgICBzZXQgZnJvbSBbZ2V0X3BvcnRfcGluX2Vycm9yICJmcm9tX3BpbiIgJGtleXMoLWZhbGxfZnJvbSldCiAgICBzZXQgZnJvbV9yZiAiZmFsbCIKICB9IGVsc2UgewogICAgc3RhX2Vycm9yIDQyNyAibWlzc2luZyAtZnJvbSwgLXJpc2VfZnJvbSBvciAtZmFsbF9mcm9tIGFyZ3VtZW50LiIKICB9CgogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC10byldIHsKICAgIHNldCB0byBbZ2V0X3BvcnRfcGluX2Vycm9yICJ0b19waW4iICRrZXlzKC10byldCiAgfSBlbHNlaWYgW2luZm8gZXhpc3RzIGtleXMoLXJpc2VfdG8pXSB7CiAgICBzZXQgdG8gW2dldF9wb3J0X3Bpbl9lcnJvciAidG9fcGluIiAka2V5cygtcmlzZV90byldCiAgICBzZXQgdG9fcmYgInJpc2UiCiAgfSBlbHNlaWYgW2luZm8gZXhpc3RzIGtleXMoLWZhbGxfdG8pXSB7CiAgICBzZXQgdG8gW2dldF9wb3J0X3Bpbl9lcnJvciAidG9fcGluIiAka2V5cygtZmFsbF90byldCiAgICBzZXQgdG9fcmYgImZhbGwiCiAgfSBlbHNlIHsKICAgIHN0YV9lcnJvciA0MjggIm1pc3NpbmcgLXRvLCAtcmlzZV90byBvciAtZmFsbF90byBhcmd1bWVudC4iCiAgfQoKICBpZiBbaW5mbyBleGlzdHMga2V5cygtY2xvY2spXSB7CiAgICBzZXQgY2xrIFtnZXRfY2xvY2tfd2FybiAiY2xvY2siICRrZXlzKC1jbG9jayldCiAgfQoKICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtc2V0dXApXSAmJiAhW2luZm8gZXhpc3RzIGZsYWdzKC1ob2xkKV0gfSB7CiAgICBzZXQgc2V0dXBfaG9sZCAic2V0dXAiCiAgfSBlbHNlaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLWhvbGQpXSAmJiAhW2luZm8gZXhpc3RzIGZsYWdzKC1zZXR1cCldIH0gewogICAgc2V0IHNldHVwX2hvbGQgImhvbGQiCiAgfSBlbHNlIHsKICAgIHNldCBzZXR1cF9ob2xkICJzZXR1cF9ob2xkIgogIH0KCiAgdW5zZXRfZGF0YV9jaGVja19jbWQgJGZyb20gJGZyb21fcmYgJHRvICR0b19yZiAkY2xrICRzZXR1cF9ob2xkCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAic2V0X2Rpc2FibGVfdGltaW5nIiBcCiAge1stZnJvbSBmcm9tX3BvcnRdIFstdG8gdG9fcG9ydF0gb2JqZWN0c30KCiMgUGFyYWxsYXggc3VwcG9ydHMgLWZyb20gb3IgLXRvIGFsb25lLgojIE9UIHJlcXVpcmVzIGJvdGggLWZyb20gYW5kIC10byBhcmdzLgpwcm9jIHNldF9kaXNhYmxlX3RpbWluZyB7IGFyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgInNldF9kaXNhYmxlX3RpbWluZyIgYXJncyBrZXlzIHstZnJvbSAtdG99IGZsYWdzIHt9CiAgY2hlY2tfYXJnY19lcTEgInNldF9kaXNhYmxlX3RpbWluZyIgJGFyZ3MKICAKICBzZXQgZnJvbSB7fQogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLWZyb20pXSB9IHsKICAgIHNldCBmcm9tICRrZXlzKC1mcm9tKQogIH0KICBzZXQgdG8ge30KICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC10byldIH0gewogICAgc2V0IHRvICRrZXlzKC10bykKICB9CiAgcGFyc2VfbGliY2VsbF9saWJwb3J0X2luc3RfcG9ydF9waW5fZWRnZV90aW1pbmdfYXJjX3NldF9hcmcgJGFyZ3MgXAogICAgbGliY2VsbHMgbGlicG9ydHMgaW5zdHMgcG9ydHMgcGlucyBlZGdlcyB0aW1pbmdfYXJjX3NldHMKICAKICBpZiB7IChbaW5mbyBleGlzdHMga2V5cygtZnJvbSldIHx8IFtpbmZvIGV4aXN0cyBrZXlzKC10byldKSBcCgkgJiYgKCRsaWJwb3J0cyAhPSB7fSB8fCAkcGlucyAhPSB7fSB8fCAkcG9ydHMgIT0ge30pIH0gewogICAgc3RhX3dhcm4gNDI5ICItZnJvbS8tdG8ga2V5d29yZHMgaWdub3JlZCBmb3IgbGliX3BpbiwgcG9ydCBhbmQgcGluIGFyZ3VtZW50cy4iCiAgfQogIAogIGZvcmVhY2ggbGliY2VsbCAkbGliY2VsbHMgewogICAgc2V0X2Rpc2FibGVfdGltaW5nX2NlbGwgJGxpYmNlbGwgJGZyb20gJHRvCiAgfQogIGZvcmVhY2ggbGlicG9ydCAkbGlicG9ydHMgewogICAgZGlzYWJsZV9saWJfcG9ydCAkbGlicG9ydAogIH0KICBmb3JlYWNoIGluc3QgJGluc3RzIHsKICAgIHNldF9kaXNhYmxlX3RpbWluZ19pbnN0YW5jZSAkaW5zdCAkZnJvbSAkdG8KICB9CiAgZm9yZWFjaCBwaW4gJHBpbnMgewogICAgZGlzYWJsZV9waW4gJHBpbgogIH0KICBmb3JlYWNoIHBvcnQgJHBvcnRzIHsKICAgIGRpc2FibGVfcG9ydCAkcG9ydAogIH0KICBmb3JlYWNoIGVkZ2UgJGVkZ2VzIHsKICAgIGRpc2FibGVfZWRnZSAkZWRnZQogIH0KICBmb3JlYWNoIHRpbWluZ19hcmNfc2V0ICR0aW1pbmdfYXJjX3NldHMgewogICAgZGlzYWJsZV90aW1pbmdfYXJjX3NldCAkdGltaW5nX2FyY19zZXQKICB9Cn0KCnByb2Mgc2V0X2Rpc2FibGVfdGltaW5nX2luc3RhbmNlIHsgaW5zdCBmcm9tIHRvIH0gewogIHNldCBmcm9tX3BvcnRzIFtwYXJzZV9kaXNhYmxlX2luc3RfcG9ydHMgJGluc3QgJGZyb21dCiAgc2V0IHRvX3BvcnRzIFtwYXJzZV9kaXNhYmxlX2luc3RfcG9ydHMgJGluc3QgJHRvXQogIGlmIHsgIVskaW5zdCBpc19sZWFmXSB9IHsKICAgIHN0YV9lcnJvciA0MzAgIi1mcm9tLy10byBoaWVyYXJjaGljYWwgaW5zdGFuY2Ugbm90IHN1cHBvcnRlZC4iCiAgfQogIGlmIHsgJGZyb21fcG9ydHMgPT0gIk5VTEwiICYmICR0b19wb3J0cyA9PSAiTlVMTCIgfSB7CiAgICBkaXNhYmxlX2luc3RhbmNlICRpbnN0ICJOVUxMIiAiTlVMTCIKICB9IGVsc2VpZiB7ICRmcm9tX3BvcnRzID09ICJOVUxMIiB9IHsKICAgIGZvcmVhY2ggdG9fcG9ydCAkdG9fcG9ydHMgewogICAgICBkaXNhYmxlX2luc3RhbmNlICRpbnN0ICJOVUxMIiAkdG9fcG9ydAogICAgfQogIH0gZWxzZWlmIHsgJHRvX3BvcnRzID09ICJOVUxMIiB9IHsKICAgIGZvcmVhY2ggZnJvbV9wb3J0ICRmcm9tX3BvcnRzIHsKICAgICAgZGlzYWJsZV9pbnN0YW5jZSAkaW5zdCAkZnJvbV9wb3J0ICJOVUxMIgogICAgfQogIH0gZWxzZSB7CiAgICBmb3JlYWNoIGZyb21fcG9ydCAkZnJvbV9wb3J0cyB7CiAgICAgIGZvcmVhY2ggdG9fcG9ydCAkdG9fcG9ydHMgewoJZGlzYWJsZV9pbnN0YW5jZSAkaW5zdCAkZnJvbV9wb3J0ICR0b19wb3J0CiAgICAgIH0KICAgIH0KICB9Cn0KCiMgRmluZCBwb3J0cyBpbiBpbnN0J3MgY2VsbCB0aGF0IGhhdmUgcGlucy4KIyBCdXMgcG9ydHMgYXJlIGV4cGFuZGVkIGludG8gYSBsaXN0Lgpwcm9jIHBhcnNlX2Rpc2FibGVfaW5zdF9wb3J0cyB7IGluc3QgcG9ydF9uYW1lIH0gewogIGdsb2JhbCBoaWVyYXJjaHlfc2VwYXJhdG9yCiAgCiAgaWYgeyAkcG9ydF9uYW1lID09ICIiIH0gewogICAgc2V0IHBvcnRzICJOVUxMIgogIH0gZWxzZSB7CiAgICBzZXQgY2VsbCBbaW5zdGFuY2VfcHJvcGVydHkgJGluc3QgY2VsbF0KICAgIHNldCBwb3J0IFskY2VsbCBmaW5kX3BvcnQgJHBvcnRfbmFtZV0KICAgIGlmIHsgJHBvcnQgPT0gIk5VTEwiIH0gewogICAgICBzdGFfZXJyb3IgNDMxICJwaW4gJ1tnZXRfZnVsbF9uYW1lICRpbnN0XSR7aGllcmFyY2h5X3NlcGFyYXRvcn0ke3BvcnRfbmFtZX0nIG5vdCBmb3VuZC4iCiAgICB9IGVsc2UgewogICAgICBzZXQgbGliX3BvcnQgW2dldF9wcm9wZXJ0eSAkcG9ydCBsaWJlcnR5X3BvcnRdCiAgICAgIHNldCBwb3J0cyBbcG9ydF9tZW1iZXJzICRsaWJfcG9ydF0KICAgIH0KICB9CiAgcmV0dXJuICRwb3J0cwp9Cgpwcm9jIHBvcnRfbWVtYmVycyB7IHBvcnQgfSB7CiAgaWYgWyRwb3J0IGlzX2J1c10gewogICAgIyBFeHBhbmQgYnVzIHBvcnRzLgogICAgc2V0IHBvcnRzIHt9CiAgICBzZXQgbWVtYmVyX2l0ZXIgWyRwb3J0IG1lbWJlcl9pdGVyYXRvcl0KICAgIHdoaWxlIHtbJG1lbWJlcl9pdGVyIGhhc19uZXh0XX0gewogICAgICBzZXQgYml0X3BvcnQgWyRtZW1iZXJfaXRlciBuZXh0XQogICAgICBsYXBwZW5kIHBvcnRzICRiaXRfcG9ydAogICAgfQogICAgJG1lbWJlcl9pdGVyIGZpbmlzaAogICAgcmV0dXJuICRwb3J0cwogIH0gZWxzZSB7CiAgICByZXR1cm4gJHBvcnQKICB9Cn0KCnByb2Mgc2V0X2Rpc2FibGVfdGltaW5nX2NlbGwgeyBjZWxsIGZyb20gdG8gfSB7CiAgc2V0IGZyb21fcG9ydHMgW3BhcnNlX2Rpc2FibGVfY2VsbF9wb3J0cyAkY2VsbCAkZnJvbV0KICBzZXQgdG9fcG9ydHMgW3BhcnNlX2Rpc2FibGVfY2VsbF9wb3J0cyAkY2VsbCAkdG9dCiAgaWYgeyAkZnJvbV9wb3J0cyA9PSAiTlVMTCIgJiYgJHRvX3BvcnRzID09ICJOVUxMIiB9IHsKICAgIGRpc2FibGVfY2VsbCAkY2VsbCAiTlVMTCIgIk5VTEwiCiAgfSBlbHNlaWYgeyAkZnJvbV9wb3J0cyA9PSAiTlVMTCIgfSB7CiAgICBmb3JlYWNoIHRvX3BvcnQgJHRvX3BvcnRzIHsKICAgICAgZGlzYWJsZV9jZWxsICRjZWxsICJOVUxMIiAkdG9fcG9ydAogICAgfQogIH0gZWxzZWlmIHsgJHRvX3BvcnRzID09ICJOVUxMIiB9IHsKICAgIGZvcmVhY2ggZnJvbV9wb3J0ICRmcm9tX3BvcnRzIHsKICAgICAgZGlzYWJsZV9jZWxsICRjZWxsICRmcm9tX3BvcnQgIk5VTEwiCiAgICB9CiAgfSBlbHNlIHsKICAgIGZvcmVhY2ggZnJvbV9wb3J0ICRmcm9tX3BvcnRzIHsKICAgICAgZm9yZWFjaCB0b19wb3J0ICR0b19wb3J0cyB7CiAgICAgICAgZGlzYWJsZV9jZWxsICRjZWxsICRmcm9tX3BvcnQgJHRvX3BvcnQKICAgICAgfQogICAgfQogIH0KfQoKIyBGaW5kIGNlbGwgcG9ydHMuCiMgQnVzIHBvcnRzIGFyZSBleHBhbmRlZCBpbnRvIGEgbGlzdC4KcHJvYyBwYXJzZV9kaXNhYmxlX2NlbGxfcG9ydHMgeyBjZWxsIHBvcnRfbmFtZSB9IHsKICBnbG9iYWwgaGllcmFyY2h5X3NlcGFyYXRvcgogIAogIGlmIHsgJHBvcnRfbmFtZSA9PSAiIiB9IHsKICAgIHNldCBwb3J0cyAiTlVMTCIKICB9IGVsc2UgewogICAgc2V0IHBvcnQgWyRjZWxsIGZpbmRfbGliZXJ0eV9wb3J0ICRwb3J0X25hbWVdCiAgICBpZiB7ICRwb3J0ID09ICJOVUxMIiB9IHsKICAgICAgc3RhX2Vycm9yIDQzMiAicGluICdbZ2V0X25hbWUgJGNlbGxdJHtoaWVyYXJjaHlfc2VwYXJhdG9yfSR7cG9ydF9uYW1lfScgbm90IGZvdW5kLiIKICAgIH0gZWxzZSB7CiAgICAgIHNldCBwb3J0cyBbcG9ydF9tZW1iZXJzICRwb3J0XQogICAgfQogIH0KICByZXR1cm4gJHBvcnRzCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAidW5zZXRfZGlzYWJsZV90aW1pbmciIFwKICB7Wy1mcm9tIGZyb21fcG9ydF0gWy10byB0b19wb3J0XSBvYmplY3RzfQoKcHJvYyB1bnNldF9kaXNhYmxlX3RpbWluZyB7IGFyZ3MgfSB7CiAgdW5zZXRfZGlzYWJsZV9jbWQgInVuc2V0X2Rpc2FibGVfdGltaW5nIiAkYXJncwp9Cgpwcm9jIHVuc2V0X2Rpc2FibGVfY21kIHsgY21kIGNtZF9hcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICRjbWQgY21kX2FyZ3Mga2V5cyB7LWZyb20gLXRvfSBmbGFncyB7fQogIGNoZWNrX2FyZ2NfZXExICRjbWQgJGNtZF9hcmdzCiAgCiAgc2V0IGZyb20gIiIKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1mcm9tKV0gfSB7CiAgICBzZXQgZnJvbSAka2V5cygtZnJvbSkKICB9CiAgc2V0IHRvICIiCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtdG8pXSB9IHsKICAgIHNldCB0byAka2V5cygtdG8pCiAgfQogIHBhcnNlX2xpYmNlbGxfbGlicG9ydF9pbnN0X3BvcnRfcGluX2VkZ2VfdGltaW5nX2FyY19zZXRfYXJnICRjbWRfYXJncyBcCiAgICBsaWJjZWxscyBsaWJwb3J0cyBpbnN0cyBwb3J0cyBwaW5zIGVkZ2VzIHRpbWluZ19hcmNfc2V0cwogIAogIGlmIHsgKFtpbmZvIGV4aXN0cyBrZXlzKC1mcm9tKV0gfHwgW2luZm8gZXhpc3RzIGtleXMoLXRvKV0pIFwKICAgICAgICAgJiYgKCRsaWJwb3J0cyAhPSB7fSB8fCAkcGlucyAhPSB7fSB8fCAkcG9ydHMgIT0ge30pIH0gewogICAgc3RhX3dhcm4gNDM0ICItZnJvbS8tdG8ga2V5d29yZHMgaWdub3JlZCBmb3IgbGliX3BpbiwgcG9ydCBhbmQgcGluIGFyZ3VtZW50cy4iCiAgfQogIAogIGZvcmVhY2ggbGliY2VsbCAkbGliY2VsbHMgewogICAgdW5zZXRfZGlzYWJsZV90aW1pbmdfY2VsbCAkbGliY2VsbCAkZnJvbSAkdG8KICB9CiAgZm9yZWFjaCBsaWJwb3J0ICRsaWJwb3J0cyB7CiAgICB1bnNldF9kaXNhYmxlX2xpYl9wb3J0ICRsaWJwb3J0CiAgfQogIGZvcmVhY2ggaW5zdCAkaW5zdHMgewogICAgdW5zZXRfZGlzYWJsZV90aW1pbmdfaW5zdGFuY2UgJGluc3QgJGZyb20gJHRvCiAgfQogIGZvcmVhY2ggcGluICRwaW5zIHsKICAgIHVuc2V0X2Rpc2FibGVfcGluICRwaW4KICB9CiAgZm9yZWFjaCBwb3J0ICRwb3J0cyB7CiAgICB1bnNldF9kaXNhYmxlX3BvcnQgJHBvcnQKICB9CiAgZm9yZWFjaCBlZGdlICRlZGdlcyB7CiAgICB1bnNldF9kaXNhYmxlX2VkZ2UgJGVkZ2UKICB9CiAgZm9yZWFjaCB0aW1pbmdfYXJjX3NldCAkdGltaW5nX2FyY19zZXRzIHsKICAgIHVuc2V0X2Rpc2FibGVfdGltaW5nX2FyY19zZXQgJHRpbWluZ19hcmNfc2V0CiAgfQp9Cgpwcm9jIHVuc2V0X2Rpc2FibGVfdGltaW5nX2NlbGwgeyBjZWxsIGZyb20gdG8gfSB7CiAgc2V0IGZyb21fcG9ydHMgW3BhcnNlX2Rpc2FibGVfY2VsbF9wb3J0cyAkY2VsbCAkZnJvbV0KICBzZXQgdG9fcG9ydHMgW3BhcnNlX2Rpc2FibGVfY2VsbF9wb3J0cyAkY2VsbCAkdG9dCiAgaWYgeyAkZnJvbV9wb3J0cyA9PSAiTlVMTCIgJiYgJHRvX3BvcnRzID09ICJOVUxMIiB9IHsKICAgIHVuc2V0X2Rpc2FibGVfY2VsbCAkY2VsbCAiTlVMTCIgIk5VTEwiCiAgfSBlbHNlaWYgeyAkZnJvbV9wb3J0cyA9PSAiTlVMTCIgfSB7CiAgICBmb3JlYWNoIHRvX3BvcnQgJHRvX3BvcnRzIHsKICAgICAgdW5zZXRfZGlzYWJsZV9jZWxsICRjZWxsICJOVUxMIiAkdG9fcG9ydAogICAgfQogIH0gZWxzZWlmIHsgJHRvX3BvcnRzID09ICJOVUxMIiB9IHsKICAgIGZvcmVhY2ggZnJvbV9wb3J0ICRmcm9tX3BvcnRzIHsKICAgICAgdW5zZXRfZGlzYWJsZV9jZWxsICRjZWxsICRmcm9tX3BvcnQgIk5VTEwiCiAgICB9CiAgfSBlbHNlIHsKICAgIGZvcmVhY2ggZnJvbV9wb3J0ICRmcm9tX3BvcnRzIHsKICAgICAgZm9yZWFjaCB0b19wb3J0ICR0b19wb3J0cyB7CiAgICAgICAgdW5zZXRfZGlzYWJsZV9jZWxsICRjZWxsICRmcm9tX3BvcnQgJHRvX3BvcnQKICAgICAgfQogICAgfQogIH0KfQoKcHJvYyB1bnNldF9kaXNhYmxlX3RpbWluZ19pbnN0YW5jZSB7IGluc3QgZnJvbSB0byB9IHsKICBzZXQgZnJvbV9wb3J0cyBbcGFyc2VfZGlzYWJsZV9pbnN0X3BvcnRzICRpbnN0ICRmcm9tXQogIHNldCB0b19wb3J0cyBbcGFyc2VfZGlzYWJsZV9pbnN0X3BvcnRzICRpbnN0ICR0b10KICBpZiB7ICFbJGluc3QgaXNfbGVhZl0gfSB7CiAgICBzdGFfZXJyb3IgNDM1ICItZnJvbS8tdG8gaGllcmFyY2hpY2FsIGluc3RhbmNlIG5vdCBzdXBwb3J0ZWQuIgogIH0KICBpZiB7ICRmcm9tX3BvcnRzID09ICJOVUxMIiAmJiAkdG9fcG9ydHMgPT0gIk5VTEwiIH0gewogICAgdW5zZXRfZGlzYWJsZV9pbnN0YW5jZSAkaW5zdCAiTlVMTCIgIk5VTEwiCiAgfSBlbHNlaWYgeyAkZnJvbV9wb3J0cyA9PSAiTlVMTCIgfSB7CiAgICBmb3JlYWNoIHRvX3BvcnQgJHRvX3BvcnRzIHsKICAgICAgdW5zZXRfZGlzYWJsZV9pbnN0YW5jZSAkaW5zdCAiTlVMTCIgJHRvX3BvcnQKICAgIH0KICB9IGVsc2VpZiB7ICR0b19wb3J0cyA9PSAiTlVMTCIgfSB7CiAgICBmb3JlYWNoIGZyb21fcG9ydCAkZnJvbV9wb3J0cyB7CiAgICAgIHVuc2V0X2Rpc2FibGVfaW5zdGFuY2UgJGluc3QgJGZyb21fcG9ydCAiTlVMTCIKICAgIH0KICB9IGVsc2UgewogICAgZm9yZWFjaCBmcm9tX3BvcnQgJGZyb21fcG9ydHMgewogICAgICBmb3JlYWNoIHRvX3BvcnQgJHRvX3BvcnRzIHsKICAgICAgICB1bnNldF9kaXNhYmxlX2luc3RhbmNlICRpbnN0ICRmcm9tX3BvcnQgJHRvX3BvcnQKICAgICAgfQogICAgfQogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJzZXRfZmFsc2VfcGF0aCIgXAogIHtbLXNldHVwXSBbLWhvbGRdIFstcmlzZV0gWy1mYWxsXSBbLXJlc2V0X3BhdGhdIFstY29tbWVudCBjb21tZW50XVwKICAgICBbLWZyb20gZnJvbV9saXN0XSBbLXJpc2VfZnJvbSBmcm9tX2xpc3RdIFstZmFsbF9mcm9tIGZyb21fbGlzdF1cCiAgICAgWy10aHJvdWdoIHRocm91Z2hfbGlzdF0gWy1yaXNlX3Rocm91Z2ggdGhyb3VnaF9saXN0XVwKICAgICBbLWZhbGxfdGhyb3VnaCB0aHJvdWdoX2xpc3RdIFstdG8gdG9fbGlzdF0gWy1yaXNlX3RvIHRvX2xpc3RdXAogICAgIFstZmFsbF90byB0b19saXN0XX0KCnByb2Mgc2V0X2ZhbHNlX3BhdGggeyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJzZXRfZmFsc2VfcGF0aCIgYXJncyBcCiAgICBrZXlzIHstZnJvbSAtcmlzZV9mcm9tIC1mYWxsX2Zyb20gLXRvIC1yaXNlX3RvIC1mYWxsX3RvIC1jb21tZW50fSBcCiAgICBmbGFncyB7LXNldHVwIC1ob2xkIC1yaXNlIC1mYWxsIC1yZXNldF9wYXRofSAwCiAgCiAgc2V0IG1pbl9tYXggIm1pbl9tYXgiCiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLXNldHVwKV0gJiYgIVtpbmZvIGV4aXN0cyBmbGFncygtaG9sZCldIH0gewogICAgc2V0IG1pbl9tYXggIm1heCIKICB9CiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLWhvbGQpXSAmJiAhW2luZm8gZXhpc3RzIGZsYWdzKC1zZXR1cCldIH0gewogICAgc2V0IG1pbl9tYXggIm1pbiIKICB9CiAgCiAgc2V0IGNtZCAic2V0X2ZhbHNlX3BhdGgiCiAgc2V0IGFyZ19lcnJvciAwCiAgc2V0IGZyb20gW3BhcnNlX2Zyb21fYXJnIGtleXMgYXJnX2Vycm9yXQogIHNldCB0aHJ1cyBbcGFyc2VfdGhydXNfYXJnIGFyZ3MgYXJnX2Vycm9yXQogIHNldCB0byBbcGFyc2VfdG9fYXJnIGtleXMgZmxhZ3MgYXJnX2Vycm9yXQogIGNoZWNrX2V4Y2VwdGlvbl9waW5zICRmcm9tICR0bwogIGlmIHsgJGFyZ19lcnJvciB9IHsKICAgIGRlbGV0ZV9mcm9tX3RocnVzX3RvICRmcm9tICR0aHJ1cyAkdG8KICB9IGVsc2UgewogICAgY2hlY2tfZm9yX2tleV9hcmdzICRjbWQgYXJncwogICAgaWYgeyAkYXJncyAhPSB7fSB9IHsKICAgICAgc3RhX3dhcm4gNDM2ICInJGFyZ3MnIGlnbm9yZWQuIgogICAgfQogICAgaWYgeyAoJGZyb20gPT0gIk5VTEwiICYmICR0aHJ1cyA9PSAiIiAmJiAkdG8gPT0gIk5VTEwiKSB9IHsKICAgICAgZGVsZXRlX2Zyb21fdGhydXNfdG8gJGZyb20gJHRocnVzICR0bwogICAgICBzdGFfd2FybiA0MzcgIi1mcm9tLCAtdGhyb3VnaCBvciAtdG8gcmVxdWlyZWQuIgogICAgfSBlbHNlIHsKICAgICAgaWYgW2luZm8gZXhpc3RzIGZsYWdzKC1yZXNldF9wYXRoKV0gewogICAgICAgIHJlc2V0X3BhdGhfY21kICRmcm9tICR0aHJ1cyAkdG8gJG1pbl9tYXgKICAgICAgfQogICAgICAKICAgICAgc2V0IGNvbW1lbnQgW3BhcnNlX2NvbW1lbnRfa2V5IGtleXNdCiAgICAgIAogICAgICBtYWtlX2ZhbHNlX3BhdGggJGZyb20gJHRocnVzICR0byAkbWluX21heCAkY29tbWVudAogICAgfQogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJzZXRfaWRlYWxfbGF0ZW5jeSIgXAogIHtbLXJpc2VdIFstZmFsbF0gWy1taW5dIFstbWF4XSBkZWxheSBvYmplY3RzfQoKcHJvYyBzZXRfaWRlYWxfbGF0ZW5jeSB7IGFyZ3MgfSB7CiAgIyBpZ25vcmVkCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiMgU3BlY2lmaWVzIG5ldCBoYXMgemVybyB3ZWlnaHQgZm9yIHBsYWNlbWVudC4KZGVmaW5lX2NtZF9hcmdzICJzZXRfaWRlYWxfbmV0IiB7IG5ldHMgfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJzZXRfaWRlYWxfbmV0d29yayIge1stbm9fcHJvcGFnYXRpb25dIG9iamVjdHN9Cgpwcm9jIHNldF9pZGVhbF9uZXR3b3JrIHsgYXJncyB9IHsKICAjIGlnbm9yZWQKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJzZXRfaWRlYWxfdHJhbnNpdGlvbiIgXAogIHtbLXJpc2VdIFstZmFsbF0gWy1taW5dIFstbWF4XSB0cmFuc2l0aW9uX3RpbWUgb2JqZWN0c30KCnByb2Mgc2V0X2lkZWFsX3RyYW5zaXRpb24geyBhcmdzIH0gewogICMgaWdub3JlZAp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF9pbnB1dF9kZWxheSIgXAogIHtbLXJpc2VdIFstZmFsbF0gWy1tYXhdIFstbWluXVwKICAgICBbLWNsb2NrIGNsb2NrXSBbLWNsb2NrX2ZhbGxdXAogICAgIFstcmVmZXJlbmNlX3BpbiByZWZfcGluXVwKICAgICBbLXNvdXJjZV9sYXRlbmN5X2luY2x1ZGVkXSBbLW5ldHdvcmtfbGF0ZW5jeV9pbmNsdWRlZF1cCiAgICAgWy1hZGRfZGVsYXldIGRlbGF5IHBvcnRfcGluX2xpc3R9Cgpwcm9jIHNldF9pbnB1dF9kZWxheSB7IGFyZ3MgfSB7CiAgc2V0X3BvcnRfZGVsYXkgInNldF9pbnB1dF9kZWxheSIgInNldF9pbnB1dF9kZWxheV9jbWQiICRhcmdzIFwKICAgIHsiaW5wdXQiICJiaWRpcmVjdCJ9Cn0KCnByb2Mgc2V0X3BvcnRfZGVsYXkgeyBjbWQgc3RhX2NtZCBjbWRfYXJncyBwb3J0X2RpcnMgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgJGNtZCBjbWRfYXJncyBcCiAgICBrZXlzIHstY2xvY2sgLXJlZmVyZW5jZV9waW59IFwKICAgIGZsYWdzIHstcmlzZSAtZmFsbCAtbWF4IC1taW4gLWNsb2NrX2ZhbGwgLWFkZF9kZWxheSBcCiAgICAgICAgICAgICAtc291cmNlX2xhdGVuY3lfaW5jbHVkZWQgLW5ldHdvcmtfbGF0ZW5jeV9pbmNsdWRlZH0KICBjaGVja19hcmdjX2VxMiAkY21kICRjbWRfYXJncwogIAogIHNldCBkZWxheV9hcmcgW2xpbmRleCAkY21kX2FyZ3MgMF0KICBjaGVja19mbG9hdCAiZGVsYXkiICRkZWxheV9hcmcKICBzZXQgZGVsYXkgW3RpbWVfdWlfc3RhICRkZWxheV9hcmddCiAgc2V0IHBpbnMgW2dldF9wb3J0X3BpbnNfZXJyb3IgInBpbnMiIFtsaW5kZXggJGNtZF9hcmdzIDFdXQogIAogIHNldCBjbGsgIk5VTEwiCiAgaWYgW2luZm8gZXhpc3RzIGtleXMoLWNsb2NrKV0gewogICAgc2V0IGNsayBbZ2V0X2Nsb2NrX3dhcm4gImNsb2NrIiAka2V5cygtY2xvY2spXQogIH0KICAKICBzZXQgcmVmX3BpbiAiTlVMTCIKICBpZiBbaW5mbyBleGlzdHMga2V5cygtcmVmZXJlbmNlX3BpbildIHsKICAgIHNldCByZWZfcGluIFtnZXRfcG9ydF9waW5fZXJyb3IgInJlZl9waW4iICRrZXlzKC1yZWZlcmVuY2VfcGluKV0KICAgIGlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1zb3VyY2VfbGF0ZW5jeV9pbmNsdWRlZCldIH0gewogICAgICBzdGFfd2FybiA0MzggIi1zb3VyY2VfbGF0ZW5jeV9pbmNsdWRlZCBpZ25vcmVkIHdpdGggLXJlZmVyZW5jZV9waW4uIgogICAgfQogICAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLW5ldHdvcmtfbGF0ZW5jeV9pbmNsdWRlZCldIH0gewogICAgICBzdGFfd2FybiA0MzkgIi1uZXR3b3JrX2xhdGVuY3lfaW5jbHVkZWQgaWdub3JlZCB3aXRoIC1yZWZlcmVuY2VfcGluLiIKICAgIH0KICB9CiAgCiAgaWYgW2luZm8gZXhpc3RzIGZsYWdzKC1jbG9ja19mYWxsKV0gewogICAgc2V0IGNsa19yZiAiZmFsbCIKICB9IGVsc2UgewogICAgc2V0IGNsa19yZiAicmlzZSIKICB9CiAgCiAgc2V0IHJmIFtwYXJzZV9yaXNlX2ZhbGxfZmxhZ3MgZmxhZ3NdCiAgc2V0IG1pbl9tYXggW3BhcnNlX21pbl9tYXhfYWxsX2ZsYWdzIGZsYWdzXQogIHNldCBhZGQgW2luZm8gZXhpc3RzIGZsYWdzKC1hZGRfZGVsYXkpXQogIHNldCBzb3VyY2VfbGF0ZW5jeV9pbmNsdWRlZCBbaW5mbyBleGlzdHMgZmxhZ3MoLXNvdXJjZV9sYXRlbmN5X2luY2x1ZGVkKV0KICBzZXQgbmV0d29ya19sYXRlbmN5X2luY2x1ZGVkIFtpbmZvIGV4aXN0cyBmbGFncygtbmV0d29ya19sYXRlbmN5X2luY2x1ZGVkKV0KICAKICBmb3JlYWNoIHBpbiAkcGlucyB7CiAgICBpZiB7IFskcGluIGlzX3RvcF9sZXZlbF9wb3J0XSBcCiAgICAgICAgICAgJiYgW2xzZWFyY2ggJHBvcnRfZGlycyBbcGluX2RpcmVjdGlvbiAkcGluXV0gPT0gLTEgfSB7CiAgICAgIHN0YV93YXJuIDQ0MCAiJGNtZCBub3QgYWxsb3dlZCBvbiBbcGluX2RpcmVjdGlvbiAkcGluXSBwb3J0ICdbZ2V0X2Z1bGxfbmFtZSAkcGluXScuIgogICAgfSBlbHNlaWYgeyAkY2xrICE9ICJOVUxMIiAmJiBbbHNlYXJjaCBbJGNsayBzb3VyY2VzXSAkcGluXSAhPSAtMSB9IHsKICAgICAgc3RhX3dhcm4gNDQxICIkY21kIHJlbGF0aXZlIHRvIGEgY2xvY2sgZGVmaW5lZCBvbiB0aGUgc2FtZSBwb3J0L3BpbiBub3QgYWxsb3dlZC4iCiAgICB9IGVsc2UgewogICAgICAkc3RhX2NtZCAkcGluICRyZiAkY2xrICRjbGtfcmYgJHJlZl9waW5cCiAgICAgICAgJHNvdXJjZV9sYXRlbmN5X2luY2x1ZGVkICRuZXR3b3JrX2xhdGVuY3lfaW5jbHVkZWQgXAogICAgICAgICRtaW5fbWF4ICRhZGQgJGRlbGF5CiAgICB9CiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInVuc2V0X2lucHV0X2RlbGF5IiBcCiAge1stcmlzZV0gWy1mYWxsXSBbLW1heF0gWy1taW5dXAogICAgIFstY2xvY2sgY2xvY2tdIFstY2xvY2tfZmFsbF1cCiAgICAgcG9ydF9waW5fbGlzdH0KCnByb2MgdW5zZXRfaW5wdXRfZGVsYXkgeyBhcmdzIH0gewogIHVuc2V0X3BvcnRfZGVsYXkgInVuc2V0X2lucHV0X2RlbGF5IiAidW5zZXRfaW5wdXRfZGVsYXlfY21kIiAkYXJncwp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF9tYXhfZGVsYXkiIFwKICB7Wy1yaXNlXSBbLWZhbGxdIFstaWdub3JlX2Nsb2NrX2xhdGVuY3ldIFstcmVzZXRfcGF0aF1cCiAgICAgWy1wcm9iZV0gWy1jb21tZW50IGNvbW1lbnRdXAogICAgIFstZnJvbSBmcm9tX2xpc3RdIFstcmlzZV9mcm9tIGZyb21fbGlzdF0gWy1mYWxsX2Zyb20gZnJvbV9saXN0XVwKICAgICBbLXRocm91Z2ggdGhyb3VnaF9saXN0XSBbLXJpc2VfdGhyb3VnaCB0aHJvdWdoX2xpc3RdXAogICAgIFstZmFsbF90aHJvdWdoIHRocm91Z2hfbGlzdF1cCiAgICAgWy10byB0b19saXN0XSBbLXJpc2VfdG8gdG9fbGlzdF0gWy1mYWxsX3RvIHRvX2xpc3RdIGRlbGF5fQoKcHJvYyBzZXRfbWF4X2RlbGF5IHsgYXJncyB9IHsKICBzZXRfcGF0aF9kZWxheSAic2V0X21heF9kZWxheSIgJGFyZ3MgbWF4Cn0KCnByb2Mgc2V0X3BhdGhfZGVsYXkgeyBjbWQgYXJncyBtaW5fbWF4IH0gewogIHBhcnNlX2tleV9hcmdzICRjbWQgYXJncyBcCiAgICBrZXlzIHstZnJvbSAtcmlzZV9mcm9tIC1mYWxsX2Zyb20gLXRvIC1yaXNlX3RvIC1mYWxsX3RvIC1jb21tZW50fSBcCiAgICBmbGFncyB7LXJpc2UgLWZhbGwgLWlnbm9yZV9jbG9ja19sYXRlbmN5IC1yZXNldF9wYXRoIC1wcm9iZX0gMAogIAogIHNldCBhcmdfZXJyb3IgMAogIHNldCBmcm9tIFtwYXJzZV9mcm9tX2FyZyBrZXlzIGFyZ19lcnJvcl0KICBzZXQgdGhydXMgW3BhcnNlX3RocnVzX2FyZyBhcmdzIGFyZ19lcnJvcl0KICBzZXQgdG8gW3BhcnNlX3RvX2FyZyBrZXlzIGZsYWdzIGFyZ19lcnJvcl0KICBjaGVja19leGNlcHRpb25fcGlucyAkZnJvbSAkdG8KICBpZiB7ICRhcmdfZXJyb3IgfSB7CiAgICBkZWxldGVfZnJvbV90aHJ1c190byAkZnJvbSAkdGhydXMgJHRvCiAgfSBlbHNlIHsKICAgIGNoZWNrX2Zvcl9rZXlfYXJncyAkY21kIGFyZ3MKICAgIGlmIHsgW2xsZW5ndGggJGFyZ3NdID09IDAgfSB7CiAgICAgIGRlbGV0ZV9mcm9tX3RocnVzX3RvICRmcm9tICR0aHJ1cyAkdG8KICAgICAgc3RhX2Vycm9yIDQ0MiAibWlzc2luZyBkZWxheSBhcmd1bWVudC4iCiAgICB9IGVsc2VpZiB7IFtsbGVuZ3RoICRhcmdzXSA9PSAxIH0gewogICAgICBzZXQgZGVsYXkgJGFyZ3MKICAgICAgY2hlY2tfZmxvYXQgIiRjbWQgZGVsYXkiICRkZWxheQogICAgICBzZXQgZGVsYXkgW3RpbWVfdWlfc3RhICRkZWxheV0KICAgIH0gZWxzZSB7CiAgICAgIHN0YV93YXJuIDQ0MyAiJyRhcmdzJyBpZ25vcmVkLiIKICAgIH0KICAgIAogICAgc2V0IGlnbm9yZV9jbGtfbGF0ZW5jeSBbaW5mbyBleGlzdHMgZmxhZ3MoLWlnbm9yZV9jbG9ja19sYXRlbmN5KV0KICAgIHNldCBicmVha19wYXRoIFtleHByIHshW2luZm8gZXhpc3RzIGZsYWdzKC1wcm9iZSldfV0KICAgIAogICAgaWYgW2luZm8gZXhpc3RzIGZsYWdzKC1yZXNldF9wYXRoKV0gewogICAgICByZXNldF9wYXRoX2NtZCAkZnJvbSAkdGhydXMgJHRvICJhbGwiCiAgICB9CiAgICAKICAgIHNldCBjb21tZW50IFtwYXJzZV9jb21tZW50X2tleSBrZXlzXQogICAgCiAgICBtYWtlX3BhdGhfZGVsYXkgJGZyb20gJHRocnVzICR0byAkbWluX21heCBcCiAgICAgICRpZ25vcmVfY2xrX2xhdGVuY3kgJGJyZWFrX3BhdGggJGRlbGF5ICRjb21tZW50CiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF9tYXhfdGltZV9ib3Jyb3ciIHtsaW1pdCBvYmplY3RzfQoKcHJvYyBzZXRfbWF4X3RpbWVfYm9ycm93IHsgbGltaXQgb2JqZWN0cyB9IHsKICBjaGVja19wb3NpdGl2ZV9mbG9hdCAiYm9ycm93X2xpbWl0IiAkbGltaXQKICBzZXQgbGltaXQgW3RpbWVfdWlfc3RhICRsaW1pdF0KICBwYXJzZV9jbGtfaW5zdF9waW5fYXJnICRvYmplY3RzIGNsa3MgaW5zdHMgcGlucwogIGZvcmVhY2ggcGluICRwaW5zIHsKICAgIHNldF9sYXRjaF9ib3Jyb3dfbGltaXRfcGluICRwaW4gJGxpbWl0CiAgfQogIGZvcmVhY2ggaW5zdCAkaW5zdHMgewogICAgc2V0X2xhdGNoX2JvcnJvd19saW1pdF9pbnN0ICRpbnN0ICRsaW1pdAogIH0KICBmb3JlYWNoIGNsayAkY2xrcyB7CiAgICBzZXRfbGF0Y2hfYm9ycm93X2xpbWl0X2NsayAkY2xrICRsaW1pdAogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJzZXRfbWluX2RlbGF5IiBcCiAge1stcmlzZV0gWy1mYWxsXSBbLWlnbm9yZV9jbG9ja19sYXRlbmN5XSBbLXJlc2V0X3BhdGhdXAogICAgIFstcHJvYmVdIFstY29tbWVudCBjb21tZW50XVwKICAgICBbLWZyb20gZnJvbV9saXN0XSBbLXJpc2VfZnJvbSBmcm9tX2xpc3RdIFstZmFsbF9mcm9tIGZyb21fbGlzdF1cCiAgICAgWy10aHJvdWdoIHRocm91Z2hfbGlzdF0gWy1yaXNlX3Rocm91Z2ggdGhyb3VnaF9saXN0XVwKICAgICBbLWZhbGxfdGhyb3VnaCB0aHJvdWdoX2xpc3RdXAogICAgIFstdG8gdG9fbGlzdF0gWy1yaXNlX3RvIHRvX2xpc3RdIFstZmFsbF90byB0b19saXN0XSBkZWxheX0KCnByb2Mgc2V0X21pbl9kZWxheSB7IGFyZ3MgfSB7CiAgc2V0X3BhdGhfZGVsYXkgInNldF9taW5fZGVsYXkiICRhcmdzIG1pbgp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF9taW5fcHVsc2Vfd2lkdGgiIHtbLWxvd10gWy1oaWdoXSB2YWx1ZSBbb2JqZWN0c119Cgpwcm9jIHNldF9taW5fcHVsc2Vfd2lkdGggeyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJzZXRfbWluX3B1bHNlX3dpZHRoIiBhcmdzIGtleXMge30gZmxhZ3Mgey1sb3cgLWhpZ2h9CiAgY2hlY2tfYXJnY19lcTFvcjIgInNldF9taW5fcHVsc2Vfd2lkdGgiICRhcmdzCiAgCiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLWxvdyldIH0gewogICAgc2V0IGhpX2xvdyAiZmFsbCIKICB9IGVsc2VpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtaGlnaCldIH0gewogICAgc2V0IGhpX2xvdyAicmlzZSIKICB9IGVsc2UgewogICAgc2V0IGhpX2xvdyAicmlzZV9mYWxsIgogIH0KICAKICBzZXQgbWluX3dpZHRoIFtsaW5kZXggJGFyZ3MgMF0KICBjaGVja19wb3NpdGl2ZV9mbG9hdCAibWluIHB1bHNlIHdpZHRoIiAkbWluX3dpZHRoCiAgc2V0IG1pbl93aWR0aCBbdGltZV91aV9zdGEgJG1pbl93aWR0aF0KICAKICBpZiB7IFtsbGVuZ3RoICRhcmdzXSA9PSAyIH0gewogICAgc2V0IG9iamVjdHMgW2xpbmRleCAkYXJncyAxXQogICAgcGFyc2VfY2xrX2luc3RfcGluX2FyZyAkb2JqZWN0cyBjbGtzIGluc3RzIHBpbnMKICAgIGZvcmVhY2ggcGluICRwaW5zIHsKICAgICAgc2V0X21pbl9wdWxzZV93aWR0aF9waW4gJHBpbiAkaGlfbG93ICRtaW5fd2lkdGgKICAgIH0KICAgIGZvcmVhY2ggaW5zdCAkaW5zdHMgewogICAgICBzZXRfbWluX3B1bHNlX3dpZHRoX2luc3QgJGluc3QgJGhpX2xvdyAkbWluX3dpZHRoCiAgICB9CiAgICBmb3JlYWNoIGNsayAkY2xrcyB7CiAgICAgIHNldF9taW5fcHVsc2Vfd2lkdGhfY2xrICRjbGsgJGhpX2xvdyAkbWluX3dpZHRoCiAgICB9CiAgfSBlbHNlIHsKICAgIHNldF9taW5fcHVsc2Vfd2lkdGhfZ2xvYmFsICRoaV9sb3cgJG1pbl93aWR0aAogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJzZXRfbXVsdGljeWNsZV9wYXRoIiBcCiAge1stc2V0dXBdIFstaG9sZF0gWy1yaXNlXSBbLWZhbGxdIFstc3RhcnRdIFstZW5kXVwKICAgICBbLXJlc2V0X3BhdGhdIFstY29tbWVudCBjb21tZW50XVwKICAgICBbLWZyb20gZnJvbV9saXN0XSBbLXJpc2VfZnJvbSBmcm9tX2xpc3RdXAogICAgIFstZmFsbF9mcm9tIGZyb21fbGlzdF0gWy10aHJvdWdoIHRocm91Z2hfbGlzdF1cCiAgICAgWy1yaXNlX3Rocm91Z2ggdGhyb3VnaF9saXN0XSBbLWZhbGxfdGhyb3VnaCB0aHJvdWdoX2xpc3RdXAogICAgIFstdG8gdG9fbGlzdF0gWy1yaXNlX3RvIHRvX2xpc3RdIFstZmFsbF90byB0b19saXN0XSBwYXRoX211bHRpcGxpZXJ9Cgpwcm9jIHNldF9tdWx0aWN5Y2xlX3BhdGggeyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJzZXRfbXVsdGljeWNsZV9wYXRoIiBhcmdzIFwKICAgIGtleXMgey1mcm9tIC1yaXNlX2Zyb20gLWZhbGxfZnJvbSAtdG8gLXJpc2VfdG8gLWZhbGxfdG8gLWNvbW1lbnR9IFwKICAgIGZsYWdzIHstc2V0dXAgLWhvbGQgLXJpc2UgLWZhbGwgLXN0YXJ0IC1lbmQgLXJlc2V0X3BhdGh9IDAKICAKICBzZXQgbWluX21heCAibWluX21heCIKICBzZXQgdXNlX2VuZF9jbGsgMQogIGlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1zZXR1cCldICYmICFbaW5mbyBleGlzdHMgZmxhZ3MoLWhvbGQpXSB9IHsKICAgICMgLXNldHVwCiAgICBzZXQgbWluX21heCAibWF4IgogICAgc2V0IHVzZV9lbmRfY2xrIDEKICB9CiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLWhvbGQpXSAmJiAhW2luZm8gZXhpc3RzIGZsYWdzKC1zZXR1cCldIH0gewogICAgIyAtaG9sZAogICAgc2V0IG1pbl9tYXggIm1pbiIKICAgIHNldCB1c2VfZW5kX2NsayAwCiAgfQogIAogIHNldCBjbWQgInNldF9tdWx0aWN5Y2xlX3BhdGgiCiAgc2V0IGFyZ19lcnJvciAwCiAgc2V0IGZyb20gW3BhcnNlX2Zyb21fYXJnIGtleXMgYXJnX2Vycm9yXQogIHNldCB0aHJ1cyBbcGFyc2VfdGhydXNfYXJnIGFyZ3MgYXJnX2Vycm9yXQogIHNldCB0byBbcGFyc2VfdG9fYXJnIGtleXMgZmxhZ3MgYXJnX2Vycm9yXQogIGNoZWNrX2V4Y2VwdGlvbl9waW5zICRmcm9tICR0bwogIGlmIHsgJGFyZ19lcnJvciB9IHsKICAgIGRlbGV0ZV9mcm9tX3RocnVzX3RvICRmcm9tICR0aHJ1cyAkdG8KICB9IGVsc2UgewogICAgY2hlY2tfZm9yX2tleV9hcmdzICRjbWQgYXJncwogICAgaWYgeyBbbGxlbmd0aCAkYXJnc10gPT0gMCB9IHsKICAgICAgZGVsZXRlX2Zyb21fdGhydXNfdG8gJGZyb20gJHRocnVzICR0bwogICAgICBzdGFfZXJyb3IgNDQ0ICJtaXNzaW5nIHBhdGggbXVsdGlwbGllciBhcmd1bWVudC4iCiAgICB9IGVsc2VpZiB7IFtsbGVuZ3RoICRhcmdzXSA9PSAxIH0gewogICAgICBzZXQgcGF0aF9tdWx0aXBsaWVyICRhcmdzCiAgICAgIGNoZWNrX2ludGVnZXIgInBhdGggbXVsdGlwbGllciIgJHBhdGhfbXVsdGlwbGllcgogICAgfSBlbHNlIHsKICAgICAgc3RhX3dhcm4gNDQ1ICInJGFyZ3MnIGlnbm9yZWQuIgogICAgfQogICAgCiAgICBzZXQgc3RhcnQgW2luZm8gZXhpc3RzIGZsYWdzKC1zdGFydCldCiAgICBzZXQgZW5kIFtpbmZvIGV4aXN0cyBmbGFncygtZW5kKV0KICAgIGlmIHsgJHN0YXJ0ICYmICRlbmQgfSB7CiAgICAgIGRlbGV0ZV9mcm9tX3RocnVzX3RvICRmcm9tICR0aHJ1cyAkdG8KICAgICAgc3RhX2Vycm9yIDQ0NiAiY2Fubm90IHVzZSAtc3RhcnQgd2l0aCAtZW5kLiIKICAgIH0gZWxzZWlmIHsgJHN0YXJ0IH0gewogICAgICBzZXQgdXNlX2VuZF9jbGsgMAogICAgfSBlbHNlaWYgeyAkZW5kIH0gewogICAgICBzZXQgdXNlX2VuZF9jbGsgMQogICAgfQogICAgCiAgICBpZiBbaW5mbyBleGlzdHMgZmxhZ3MoLXJlc2V0X3BhdGgpXSB7CiAgICAgIHJlc2V0X3BhdGhfY21kICRmcm9tICR0aHJ1cyAkdG8gJG1pbl9tYXgKICAgIH0KICAgIAogICAgc2V0IGNvbW1lbnQgW3BhcnNlX2NvbW1lbnRfa2V5IGtleXNdCiAgICAKICAgIG1ha2VfbXVsdGljeWNsZV9wYXRoICRmcm9tICR0aHJ1cyAkdG8gJG1pbl9tYXggJHVzZV9lbmRfY2xrIFwKICAgICAgJHBhdGhfbXVsdGlwbGllciAkY29tbWVudAogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJ1bnNldF9wYXRoX2V4Y2VwdGlvbnMiIFwKICB7Wy1zZXR1cF0gWy1ob2xkXSBbLXJpc2VdIFstZmFsbF0gWy1mcm9tIGZyb21fbGlzdF1cCiAgICAgWy1yaXNlX2Zyb20gZnJvbV9saXN0XSBbLWZhbGxfZnJvbSBmcm9tX2xpc3RdXAogICAgIFstdGhyb3VnaCB0aHJvdWdoX2xpc3RdIFstcmlzZV90aHJvdWdoIHRocm91Z2hfbGlzdF1cCiAgICAgWy1mYWxsX3Rocm91Z2ggdGhyb3VnaF9saXN0XSBbLXRvIHRvX2xpc3RdIFstcmlzZV90byB0b19saXN0XVwKICAgICBbLWZhbGxfdG8gdG9fbGlzdF19Cgpwcm9jIHVuc2V0X3BhdGhfZXhjZXB0aW9ucyB7IGFyZ3MgfSB7CiAgdW5zZXRfcGF0aF9leGNlcHRpb25zX2NtZCAidW5zZXRfcGF0aF9leGNlcHRpb25zIiAkYXJncwp9Cgpwcm9jIHVuc2V0X3BhdGhfZXhjZXB0aW9uc19jbWQgeyBjbWQgY21kX2FyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgJGNtZCBjbWRfYXJncyBcCiAgICBrZXlzIHstZnJvbSAtcmlzZV9mcm9tIC1mYWxsX2Zyb20gLXRvIC1yaXNlX3RvIC1mYWxsX3RvfSBcCiAgICBmbGFncyB7LXNldHVwIC1ob2xkIC1yaXNlIC1mYWxsfSAwCiAgCiAgc2V0IG1pbl9tYXggIm1pbl9tYXgiCiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLXNldHVwKV0gJiYgIVtpbmZvIGV4aXN0cyBmbGFncygtaG9sZCldIH0gewogICAgc2V0IG1pbl9tYXggIm1heCIKICB9CiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLWhvbGQpXSAmJiAhW2luZm8gZXhpc3RzIGZsYWdzKC1zZXR1cCldIH0gewogICAgc2V0IG1pbl9tYXggIm1pbiIKICB9CiAgCiAgc2V0IGFyZ19lcnJvciAwCiAgc2V0IGZyb20gW3BhcnNlX2Zyb21fYXJnIGtleXMgYXJnX2Vycm9yXQogIHNldCB0aHJ1cyBbcGFyc2VfdGhydXNfYXJnIGNtZF9hcmdzIGFyZ19lcnJvcl0KICBzZXQgdG8gW3BhcnNlX3RvX2FyZyBrZXlzIGZsYWdzIGFyZ19lcnJvcl0KICBpZiB7ICRhcmdfZXJyb3IgfSB7CiAgICBkZWxldGVfZnJvbV90aHJ1c190byAkZnJvbSAkdGhydXMgJHRvCiAgICBzdGFfZXJyb3IgNDQ3ICIkY21kIGNvbW1hbmQgZmFpbGVkLiIKICAgIHJldHVybiAwCiAgfQogIAogIGNoZWNrX2Zvcl9rZXlfYXJncyAkY21kIGNtZF9hcmdzCiAgaWYgeyAkY21kX2FyZ3MgIT0ge30gfSB7CiAgICBkZWxldGVfZnJvbV90aHJ1c190byAkZnJvbSAkdGhydXMgJHRvCiAgICBzdGFfZXJyb3IgNDQ4ICJwb3NpdGlvbmFsIGFyZ3VtZW50cyBub3Qgc3VwcG9ydGVkLiIKICB9CiAgaWYgeyAoJGZyb20gPT0gIk5VTEwiICYmICR0aHJ1cyA9PSAiIiAmJiAkdG8gPT0gIk5VTEwiKSB9IHsKICAgIGRlbGV0ZV9mcm9tX3RocnVzX3RvICRmcm9tICR0aHJ1cyAkdG8KICAgIHN0YV9lcnJvciA0NDkgIi1mcm9tLCAtdGhyb3VnaCBvciAtdG8gcmVxdWlyZWQuIgogIH0KICAKICByZXNldF9wYXRoX2NtZCAkZnJvbSAkdGhydXMgJHRvICRtaW5fbWF4CiAgZGVsZXRlX2Zyb21fdGhydXNfdG8gJGZyb20gJHRocnVzICR0bwp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF9vdXRwdXRfZGVsYXkiIFwKICB7Wy1yaXNlXSBbLWZhbGxdIFstbWF4XSBbLW1pbl1cCiAgICAgWy1jbG9jayBjbG9ja10gWy1jbG9ja19mYWxsXVwKICAgICBbLXJlZmVyZW5jZV9waW4gcmVmX3Bpbl1cCiAgICAgWy1zb3VyY2VfbGF0ZW5jeV9pbmNsdWRlZF0gWy1uZXR3b3JrX2xhdGVuY3lfaW5jbHVkZWRdXAogICAgIFstYWRkX2RlbGF5XSBkZWxheSBwb3J0X3Bpbl9saXN0fQoKcHJvYyBzZXRfb3V0cHV0X2RlbGF5IHsgYXJncyB9IHsKICBzZXRfcG9ydF9kZWxheSAic2V0X291dHB1dF9kZWxheSIgInNldF9vdXRwdXRfZGVsYXlfY21kIiAkYXJncyBcCiAgICB7Im91dHB1dCIgInRyaXN0YXRlIiAiYmlkaXJlY3QifQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInVuc2V0X291dHB1dF9kZWxheSIgXAogIHtbLXJpc2VdIFstZmFsbF0gWy1tYXhdIFstbWluXVwKICAgICBbLWNsb2NrIGNsb2NrXSBbLWNsb2NrX2ZhbGxdXAogICAgIHBvcnRfcGluX2xpc3R9Cgpwcm9jIHVuc2V0X291dHB1dF9kZWxheSB7IGFyZ3MgfSB7CiAgdW5zZXRfcG9ydF9kZWxheSAidW5zZXRfb3V0cHV0X2RlbGF5IiAidW5zZXRfb3V0cHV0X2RlbGF5X2NtZCIgJGFyZ3MKfQoKcHJvYyB1bnNldF9wb3J0X2RlbGF5IHsgY21kIHN3aWdfY21kIGNtZF9hcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICRjbWQgY21kX2FyZ3MgXAogICAga2V5cyB7LWNsb2NrIC1yZWZlcmVuY2VfcGlufSBcCiAgICBmbGFncyB7LXJpc2UgLWZhbGwgLW1heCAtbWluIC1jbG9ja19mYWxsIH0KICBjaGVja19hcmdjX2VxMSAkY21kICRjbWRfYXJncwogIAogIHNldCBwaW5zIFtnZXRfcG9ydF9waW5zX2Vycm9yICJwaW5zIiBbbGluZGV4ICRjbWRfYXJncyAwXV0KICAKICBzZXQgY2xrICJOVUxMIgogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1jbG9jayldIHsKICAgIHNldCBjbGsgW2dldF9jbG9ja193YXJuICJjbG9jayIgJGtleXMoLWNsb2NrKV0KICB9CiAgCiAgaWYgW2luZm8gZXhpc3RzIGZsYWdzKC1jbG9ja19mYWxsKV0gewogICAgc2V0IGNsa19yZiAiZmFsbCIKICB9IGVsc2UgewogICAgc2V0IGNsa19yZiAicmlzZSIKICB9CiAgCiAgc2V0IHJmIFtwYXJzZV9yaXNlX2ZhbGxfZmxhZ3MgZmxhZ3NdCiAgc2V0IG1pbl9tYXggW3BhcnNlX21pbl9tYXhfYWxsX2ZsYWdzIGZsYWdzXQogIAogIGZvcmVhY2ggcGluICRwaW5zIHsKICAgICRzd2lnX2NtZCAkcGluICRyZiAkY2xrICRjbGtfcmYgJG1pbl9tYXgKICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAic2V0X3Byb3BhZ2F0ZWRfY2xvY2siIHtvYmplY3RzfQoKcHJvYyBzZXRfcHJvcGFnYXRlZF9jbG9jayB7IG9iamVjdHMgfSB7CiAgcGFyc2VfY2xrX3BvcnRfcGluX2FyZyAkb2JqZWN0cyBjbGtzIHBpbnMKICBmb3JlYWNoIGNsayAkY2xrcyB7CiAgICBpZiB7IFskY2xrIGlzX3ZpcnR1YWxdIH0gewogICAgICBzdGFfd2FybiA0NTAgInZpcnR1YWwgY2xvY2sgW2dldF9uYW1lICRjbGtdIGNhbiBub3QgYmUgcHJvcGFnYXRlZC4iCiAgICB9IGVsc2UgewogICAgICBzZXRfcHJvcGFnYXRlZF9jbG9ja19jbWQgJGNsawogICAgfQogIH0KICBmb3JlYWNoIHBpbiAkcGlucyB7CiAgICBzZXRfcHJvcGFnYXRlZF9jbG9ja19waW5fY21kICRwaW4KICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAidW5zZXRfcHJvcGFnYXRlZF9jbG9jayIge29iamVjdHN9Cgpwcm9jIHVuc2V0X3Byb3BhZ2F0ZWRfY2xvY2sgeyBvYmplY3RzIH0gewogIHBhcnNlX2Nsa19wb3J0X3Bpbl9hcmcgJG9iamVjdHMgY2xrcyBwaW5zCiAgZm9yZWFjaCBjbGsgJGNsa3MgewogICAgdW5zZXRfcHJvcGFnYXRlZF9jbG9ja19jbWQgJGNsawogIH0KICBmb3JlYWNoIHBpbiAkcGlucyB7CiAgICB1bnNldF9wcm9wYWdhdGVkX2Nsb2NrX3Bpbl9jbWQgJHBpbgogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj",
"IyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojCiMgRW52aXJvbm1lbnQgQ29tbWFuZHMKIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF9jYXNlX2FuYWx5c2lzIiBcCiAgezB8MXx6ZXJvfG9uZXxyaXNlfHJpc2luZ3xmYWxsfGZhbGxpbmcgcGluc30KCnByb2Mgc2V0X2Nhc2VfYW5hbHlzaXMgeyB2YWx1ZSBwaW5zIH0gewogIGlmIHsgISgkdmFsdWUgPT0gIjAiIFwKICAgICAgICAgICB8fCAkdmFsdWUgPT0gIjEiIFwKICAgICAgICAgICB8fCAkdmFsdWUgPT0gInplcm8iIFwKICAgICAgICAgICB8fCAkdmFsdWUgPT0gIm9uZSIgXAogICAgICAgICAgIHx8ICR2YWx1ZSA9PSAicmlzZSIgXAogICAgICAgICAgIHx8ICR2YWx1ZSA9PSAicmlzaW5nIiBcCiAgICAgICAgICAgfHwgJHZhbHVlID09ICJmYWxsIiBcCiAgICAgICAgICAgfHwgJHZhbHVlID09ICJmYWxsaW5nIikgfSB7CiAgICBzdGFfZXJyb3IgNDUxICJ2YWx1ZSBtdXN0IGJlIDAsIHplcm8sIDEsIG9uZSwgcmlzZSwgcmlzaW5nLCBmYWxsLCBvciBmYWxsaW5nLiIKICB9CiAgc2V0IHBpbnMxIFtnZXRfcG9ydF9waW5zX2Vycm9yICJwaW5zIiAkcGluc10KICBmb3JlYWNoIHBpbiAkcGluczEgewogICAgc2V0X2Nhc2VfYW5hbHlzaXNfY21kICRwaW4gJHZhbHVlCiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInVuc2V0X2Nhc2VfYW5hbHlzaXMiIHtwaW5zfQoKcHJvYyB1bnNldF9jYXNlX2FuYWx5c2lzIHsgcGlucyB9IHsKICBzZXQgcGluczEgW2dldF9wb3J0X3BpbnNfZXJyb3IgInBpbnMiICRwaW5zXQogIGZvcmVhY2ggcGluICRwaW5zMSB7CiAgICB1bnNldF9jYXNlX2FuYWx5c2lzX2NtZCAkcGluCiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF9kcml2ZSIge1stcmlzZV0gWy1mYWxsXSBbLW1pbl0gWy1tYXhdIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2lzdGFuY2UgcG9ydHN9Cgpwcm9jIHNldF9kcml2ZSB7IGFyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgInNldF9kcml2ZSIgYXJncyBrZXlzIHt9IGZsYWdzIHstcmlzZSAtZmFsbCAtbWluIC1tYXh9CiAgc2V0IHJmIFtwYXJzZV9yaXNlX2ZhbGxfZmxhZ3MgZmxhZ3NdCiAgc2V0IG1pbl9tYXggW3BhcnNlX21pbl9tYXhfYWxsX2NoZWNrX2ZsYWdzIGZsYWdzXQogIAogIGNoZWNrX2FyZ2NfZXEyICJzZXRfZHJpdmUiICRhcmdzCiAgCiAgc2V0IHJlcyBbbGluZGV4ICRhcmdzIDBdCiAgY2hlY2tfcG9zaXRpdmVfZmxvYXQgInJlc2lzdGFuY2UiICRyZXMKICBzZXQgcmVzIFtyZXNpc3RhbmNlX3VpX3N0YSAkcmVzXQogIHNldCBwb3J0cyBbZ2V0X3BvcnRzX2Vycm9yICJwb3J0cyIgW2xpbmRleCAkYXJncyAxXV0KICBmb3JlYWNoIHBvcnQgJHBvcnRzIHsKICAgIHNldF9kcml2ZV9yZXNpc3RhbmNlX2NtZCAkcG9ydCAkcmYgJG1pbl9tYXggJHJlcwogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJzZXRfZHJpdmluZ19jZWxsIiBcCiAge1stbGliX2NlbGwgY2VsbF0gWy1saWJyYXJ5IGxpYnJhcnldXAogICAgIFstcmlzZV0gWy1mYWxsXSBbLW1pbl0gWy1tYXhdXAogICAgIFstcGluIHBpbl0gWy1mcm9tX3BpbiBmcm9tX3Bpbl1cCiAgICAgWy1pbnB1dF90cmFuc2l0aW9uX3Jpc2UgdHJhbnNfcmlzZV0gWy1pbnB1dF90cmFuc2l0aW9uX2ZhbGwgdHJhbnNfZmFsbF1cCiAgICAgWy1tdWx0aXBseV9ieSBmYWN0b3JdIFstZG9udF9zY2FsZV0gWy1ub19kZXNpZ25fcnVsZV0gcG9ydHN9Cgpwcm9jIHNldF9kcml2aW5nX2NlbGwgeyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJzZXRfZHJpdmluZ19jZWxsIiBhcmdzIFwKICAgIGtleXMgey1saWJfY2VsbCAtY2VsbCAtbGlicmFyeSAtcGluIC1mcm9tX3BpbiAtbXVsdGlwbHlfYnkgXAogICAgICAgICAgICAtaW5wdXRfdHJhbnNpdGlvbl9yaXNlIC1pbnB1dF90cmFuc2l0aW9uX2ZhbGx9IFwKICAgIGZsYWdzIHstcmlzZSAtZmFsbCAtbWluIC1tYXggLWRvbnRfc2NhbGUgLW5vX2Rlc2lnbl9ydWxlfQogIAogIHNldCByZiBbcGFyc2VfcmlzZV9mYWxsX2ZsYWdzIGZsYWdzXQogIHNldCBtaW5fbWF4IFtwYXJzZV9taW5fbWF4X2FsbF9mbGFncyBmbGFnc10KICAKICAjIC1jZWxsIGlzIGFuIHVuZG9jdW1lbnRlZCBub24tc2RjIGFsaWFzIGZvciAtbGliX2NlbGwuCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtY2VsbCldIH0gewogICAgc2V0IGtleXMoLWxpYl9jZWxsKSAka2V5cygtY2VsbCkKICB9CiAgCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtbGliX2NlbGwpXSB9IHsKICAgIHNldCBjZWxsX25hbWUgJGtleXMoLWxpYl9jZWxsKQogICAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtbGlicmFyeSldIH0gewogICAgICBzZXQgbGlicmFyeSBbZ2V0X2xpYmVydHlfZXJyb3IgImxpYnJhcnkiICRrZXlzKC1saWJyYXJ5KV0KICAgICAgc2V0IGNlbGwgWyRsaWJyYXJ5IGZpbmRfbGliZXJ0eV9jZWxsICRjZWxsX25hbWVdCiAgICAgIGlmIHsgJGNlbGwgPT0gIk5VTEwiIH0gewogICAgICAgIHN0YV9lcnJvciA0NTIgImNlbGwgJyRsaWJfbmFtZTokY2VsbF9uYW1lJyBub3QgZm91bmQuIgogICAgICB9CiAgICB9IGVsc2UgewogICAgICBzZXQgbGlicmFyeSAiTlVMTCIKICAgICAgaWYgeyBbaXNfb2JqZWN0ICRjZWxsX25hbWVdIH0gewoJaWYgeyBbb2JqZWN0X3R5cGUgJGNlbGxfbmFtZV0gIT0gIkxpYmVydHlDZWxsIiB9IHsKCSAgc3RhX2Vycm9yIDMzNCAib2JqZWN0ICckY2VsbF9uYW1lJyBpcyBub3QgYSBsaWJlcnR5IGNlbGwuIgoJfQoJc2V0IGNlbGwgJGNlbGxfbmFtZQogICAgICB9IGVsc2UgewogICAgICAgIHNldCBjZWxsIFtmaW5kX2xpYmVydHlfY2VsbCAkY2VsbF9uYW1lXQogICAgICB9CiAgICAgIGlmIHsgJGNlbGwgPT0gIk5VTEwiIH0gewogICAgICAgIHN0YV9lcnJvciA0NTMgIickY2VsbF9uYW1lJyBub3QgZm91bmQuIgogICAgICB9CiAgICB9CiAgfSBlbHNlIHsKICAgIHN0YV9lcnJvciA0NTQgIm1pc3NpbmcgLWxpYl9jZWxsIGFyZ3VtZW50LiIKICB9CiAgCiAgc2V0IHRvX3BvcnQgIk5VTEwiCiAgaWYgW2luZm8gZXhpc3RzIGtleXMoLXBpbildIHsKICAgIHNldCB0b19wb3J0X25hbWUgJGtleXMoLXBpbikKICAgIHNldCB0b19wb3J0IFskY2VsbCBmaW5kX2xpYmVydHlfcG9ydCAkdG9fcG9ydF9uYW1lXQogICAgaWYgeyAkdG9fcG9ydCA9PSAiTlVMTCIgfSB7CiAgICAgIHN0YV9lcnJvciA0NTUgInBvcnQgJyR0b19wb3J0X25hbWUnIG5vdCBmb3VuZC4iCiAgICB9CiAgfSBlbHNlIHsKICAgIHNldCBwb3J0X2l0ZXIgWyRjZWxsIGxpYmVydHlfcG9ydF9pdGVyYXRvcl0KICAgIHNldCBvdXRwdXRfY291bnQgMAogICAgd2hpbGUge1skcG9ydF9pdGVyIGhhc19uZXh0XX0gewogICAgICBzZXQgcG9ydCBbJHBvcnRfaXRlciBuZXh0XQogICAgICBzZXQgZGlyIFtsaWJlcnR5X3BvcnRfZGlyZWN0aW9uICRwb3J0XQogICAgICBpZiB7IFtwb3J0X2RpcmVjdGlvbl9hbnlfb3V0cHV0ICRkaXJdIH0gewogICAgICAgIGluY3Igb3V0cHV0X2NvdW50CiAgICAgICAgaWYgeyAkb3V0cHV0X2NvdW50ID4gMSB9IHsKICAgICAgICAgICRwb3J0X2l0ZXIgZmluaXNoCiAgICAgICAgICBzdGFfZXJyb3IgNDU2ICItcGluIGFyZ3VtZW50IHJlcXVpcmVkIGZvciBjZWxscyB3aXRoIG11bHRpcGxlIG91dHB1dHMuIgogICAgICAgIH0KICAgICAgICBzZXQgdG9fcG9ydCAkcG9ydAogICAgICAgICMgTm8gYnJlYWsuICBLZWVwIGxvb2tpbmcgZm9yIG91dHB1dCBwb3J0cyB0byBtYWtlIHN1cmUgdGhlcmUKICAgICAgICAjIGlzIG9ubHkgb25lLgogICAgICB9CiAgICB9CiAgICAkcG9ydF9pdGVyIGZpbmlzaAogIH0KICAKICBzZXQgZnJvbV9wb3J0ICJOVUxMIgogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1mcm9tX3BpbildIHsKICAgIHNldCBmcm9tX3BvcnRfbmFtZSAka2V5cygtZnJvbV9waW4pCiAgICBzZXQgZnJvbV9wb3J0IFskY2VsbCBmaW5kX2xpYmVydHlfcG9ydCAkZnJvbV9wb3J0X25hbWVdCiAgICBpZiB7ICRmcm9tX3BvcnQgPT0gIk5VTEwiIH0gewogICAgICBzdGFfZXJyb3IgNDU3ICJwb3J0ICckZnJvbV9wb3J0X25hbWUnIG5vdCBmb3VuZC4iCiAgICB9CiAgfQogIAogIHNldCBmcm9tX3NsZXdfcmlzZSAwCiAgaWYgW2luZm8gZXhpc3RzIGtleXMoLWlucHV0X3RyYW5zaXRpb25fcmlzZSldIHsKICAgIHNldCBmcm9tX3NsZXdfcmlzZSAka2V5cygtaW5wdXRfdHJhbnNpdGlvbl9yaXNlKQogICAgY2hlY2tfcG9zaXRpdmVfZmxvYXQgIi1pbnB1dF90cmFuc2l0aW9uX3Jpc2UiICRmcm9tX3NsZXdfcmlzZQogICAgc2V0IGZyb21fc2xld19yaXNlIFt0aW1lX3VpX3N0YSAkZnJvbV9zbGV3X3Jpc2VdCiAgfQogIHNldCBmcm9tX3NsZXdfZmFsbCAwCiAgaWYgW2luZm8gZXhpc3RzIGtleXMoLWlucHV0X3RyYW5zaXRpb25fZmFsbCldIHsKICAgIHNldCBmcm9tX3NsZXdfZmFsbCAka2V5cygtaW5wdXRfdHJhbnNpdGlvbl9mYWxsKQogICAgY2hlY2tfcG9zaXRpdmVfZmxvYXQgIi1pbnB1dF90cmFuc2l0aW9uX2ZhbGwiICRmcm9tX3NsZXdfZmFsbAogICAgc2V0IGZyb21fc2xld19mYWxsIFt0aW1lX3VpX3N0YSAkZnJvbV9zbGV3X2ZhbGxdCiAgfQogIAogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1tdWx0aXBseV9ieSldIHsKICAgIHN0YV93YXJuIDQ1OCAiLW11bHRpcGx5X2J5IGlnbm9yZWQuIgogIH0KICBpZiBbaW5mbyBleGlzdHMgZmxhZ3MoLWRvbnRfc2NhbGUpXSB7CiAgICBzdGFfd2FybiA0NTkgIi1kb250X3NjYWxlIGlnbm9yZWQuIgogIH0KICBpZiBbaW5mbyBleGlzdHMgZmxhZ3MoLW5vX2Rlc2lnbl9ydWxlKV0gewogICAgc3RhX3dhcm4gNDYwICItbm9fZGVzaWduX3J1bGUgaWdub3JlZC4iCiAgfQogIAogIGNoZWNrX2FyZ2NfZXExICJzZXRfZHJpdmluZ19jZWxsIiAkYXJncwogIAogIHNldCBwb3J0cyBbZ2V0X3BvcnRzX2Vycm9yICJwb3J0cyIgW2xpbmRleCAkYXJncyAwXV0KICBmb3JlYWNoIHBvcnQgJHBvcnRzIHsKICAgIHNldF9kcml2ZV9jZWxsX2NtZCAkbGlicmFyeSAkY2VsbCAkcG9ydCAkZnJvbV9wb3J0IFwKICAgICAgJGZyb21fc2xld19yaXNlICRmcm9tX3NsZXdfZmFsbCAkdG9fcG9ydCAkcmYgJG1pbl9tYXgKICB9Cn0KCnByb2MgcG9ydF9kaXJlY3Rpb25fYW55X291dHB1dCB7IGRpciB9IHsKICByZXR1cm4gW2V4cHIgeyAkZGlyID09ICJvdXRwdXQiIFwKICAgICAgICAgICAgICAgICAgIHx8ICRkaXIgPT0gImJpZGlyZWN0IiBcCiAgICAgICAgICAgICAgICAgICB8fCAkZGlyID09ICJ0cmlzdGF0ZSIgfSBdCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAic2V0X2Zhbm91dF9sb2FkIiB7ZmFub3V0IHBvcnRzfQoKcHJvYyBzZXRfZmFub3V0X2xvYWQgeyBmYW5vdXQgcG9ydF9saXN0IH0gewogIHN0YV93YXJuIDQ2MSAic2V0X2Zhbm91dF9sb2FkIG5vdCBzdXBwb3J0ZWQuIgp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF9pbnB1dF90cmFuc2l0aW9uIiBcCiAge1stcmlzZV0gWy1mYWxsXSBbLW1pbl0gWy1tYXhdIHRyYW5zaXRpb24gcG9ydHN9Cgpwcm9jIHNldF9pbnB1dF90cmFuc2l0aW9uIHsgYXJncyB9IHsKICBwYXJzZV9rZXlfYXJncyAic2V0X2lucHV0X3RyYW5zaXRpb24iIGFyZ3Mga2V5cyB7LWNsb2NrfSBcCiAgICBmbGFncyB7LXJpc2UgLWZhbGwgLW1heCAtbWluIC1jbG9ja19mYWxsfQogIAogIHNldCByZiBbcGFyc2VfcmlzZV9mYWxsX2ZsYWdzIGZsYWdzXQogIHNldCBtaW5fbWF4IFtwYXJzZV9taW5fbWF4X2FsbF9mbGFncyBmbGFnc10KICAKICAKICBjaGVja19hcmdjX2VxMiAic2V0X2lucHV0X3RyYW5zaXRpb24iICRhcmdzCiAgCiAgc2V0IHNsZXcgW2xpbmRleCAkYXJncyAwXQogIGNoZWNrX3Bvc2l0aXZlX2Zsb2F0ICJ0cmFuc2l0aW9uIiAkc2xldwogIHNldCBzbGV3IFt0aW1lX3VpX3N0YSAkc2xld10KICBzZXQgcG9ydHMgW2dldF9wb3J0c19lcnJvciAicG9ydHMiIFtsaW5kZXggJGFyZ3MgMV1dCiAgCiAgaWYgW2luZm8gZXhpc3RzIGtleXMoLWNsb2NrKV0gewogICAgc3RhX3dhcm4gNDYyICItY2xvY2sgbm90IHN1cHBvcnRlZC4iCiAgfQogIGlmIFtpbmZvIGV4aXN0cyBmbGFncygtY2xvY2tfZmFsbCldIHsKICAgIHN0YV93YXJuIDQ2MyAiLWNsb2NrX2ZhbGwgbm90IHN1cHBvcnRlZC4iCiAgfQogIAogIGZvcmVhY2ggcG9ydCAkcG9ydHMgewogICAgc2V0X2lucHV0X3NsZXdfY21kICRwb3J0ICRyZiAkbWluX21heCAkc2xldwogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKIyBzZXRfbG9hZCAtd2lyZV9sb2FkIHBvcnQgIGV4dGVybmFsIHdpcmUgbG9hZAojIHNldF9sb2FkIC1waW5fbG9hZCBwb3J0ICAgZXh0ZXJuYWwgcGluIGxvYWQKIyBzZXRfbG9hZCBwb3J0ICAgICAgICAgICAgIHNhbWUgYXMgLXBpbl9sb2FkCiMgc2V0X2xvYWQgbmV0ICAgICAgICAgICAgICBvdmVycmlkZXMgcGFyYXNpdGljcwpkZWZpbmVfY21kX2FyZ3MgInNldF9sb2FkIiBcCiAge1stY29ybmVyIGNvcm5lcl0gWy1yaXNlXSBbLWZhbGxdIFstbWF4XSBbLW1pbl0gWy1zdWJ0cmFjdF9waW5fbG9hZF1cCiAgICAgWy1waW5fbG9hZF0gWy13aXJlX2xvYWRdIGNhcGFjaXRhbmNlIG9iamVjdHN9Cgpwcm9jIHNldF9sb2FkIHsgYXJncyB9IHsKICBwYXJzZV9rZXlfYXJncyAic2V0X2xvYWQiIGFyZ3Mga2V5cyB7LWNvcm5lcn0gXAogICAgZmxhZ3Mgey1yaXNlIC1mYWxsIC1taW4gLW1heCAtc3VidHJhY3RfcGluX2xvYWQgLXBpbl9sb2FkIC13aXJlX2xvYWR9XAogICAgCiAgY2hlY2tfYXJnY19lcTIgInNldF9sb2FkIiAkYXJncwogIAogIHNldCBwaW5fbG9hZCBbaW5mbyBleGlzdHMgZmxhZ3MoLXBpbl9sb2FkKV0KICBzZXQgd2lyZV9sb2FkIFtpbmZvIGV4aXN0cyBmbGFncygtd2lyZV9sb2FkKV0KICBzZXQgc3VidHJhY3RfcGluX2xvYWQgW2luZm8gZXhpc3RzIGZsYWdzKC1zdWJ0cmFjdF9waW5fbG9hZCldCiAgc2V0IGNvcm5lciBbcGFyc2VfY29ybmVyX29yX2FsbCBrZXlzXQogIHNldCBtaW5fbWF4IFtwYXJzZV9taW5fbWF4X2FsbF9jaGVja19mbGFncyBmbGFnc10KICBzZXQgcmYgW3BhcnNlX3Jpc2VfZmFsbF9mbGFncyBmbGFnc10KICAKICBzZXQgY2FwIFtsaW5kZXggJGFyZ3MgMF0KICBjaGVja19wb3NpdGl2ZV9mbG9hdCAiY2FwYWNpdGFuY2UiICRjYXAKICBzZXQgY2FwIFtjYXBhY2l0YW5jZV91aV9zdGEgJGNhcF0KICBwYXJzZV9wb3J0X25ldF9hcmdzIFtsaW5kZXggJGFyZ3MgMV0gcG9ydHMgbmV0cwogIAogIGlmIHsgJHBvcnRzICE9IHt9IH0gewogICAgaWYgeyAkc3VidHJhY3RfcGluX2xvYWQgfSB7CiAgICAgIHN0YV93YXJuIDQ4NiAiLXN1YnRyYWN0X3Bpbl9sb2FkIG5vdCBhbGxvd2VkIGZvciBwb3J0IG9iamVjdHMuIgogICAgfQogICAgIyAtcGluX2xvYWQgaXMgdGhlIGRlZmF1bHQuCiAgICBpZiB7ICRwaW5fbG9hZCB8fCAoISRwaW5fbG9hZCAmJiAhJHdpcmVfbG9hZCkgfSB7CiAgICAgIGZvcmVhY2ggcG9ydCAkcG9ydHMgewogICAgICAgIHNldF9wb3J0X2V4dF9waW5fY2FwICRwb3J0ICRyZiAkY29ybmVyICRtaW5fbWF4ICRjYXAKICAgICAgfQogICAgfSBlbHNlaWYgeyAkd2lyZV9sb2FkIH0gewogICAgICBmb3JlYWNoIHBvcnQgJHBvcnRzIHsKICAgICAgICBzZXRfcG9ydF9leHRfd2lyZV9jYXAgJHBvcnQgMCAkcmYgJGNvcm5lciAkbWluX21heCAkY2FwCiAgICAgIH0KICAgIH0KICB9CiAgaWYgeyAkbmV0cyAhPSB7fSB9IHsKICAgIGlmIHsgJHBpbl9sb2FkIH0gewogICAgICBzdGFfd2FybiA0NjQgIi1waW5fbG9hZCBub3QgYWxsb3dlZCBmb3IgbmV0IG9iamVjdHMuIgogICAgfQogICAgaWYgeyAkd2lyZV9sb2FkIH0gewogICAgICBzdGFfd2FybiA0NjUgIi13aXJlX2xvYWQgbm90IGFsbG93ZWQgZm9yIG5ldCBvYmplY3RzLiIKICAgIH0KICAgIGlmIHsgJHJmICE9ICJyaXNlX2ZhbGwiIH0gewogICAgICBzdGFfd2FybiA0NjYgIi1yaXNlLy1mYWxsIG5vdCBhbGxvd2VkIGZvciBuZXQgb2JqZWN0cy4iCiAgICB9CiAgICBmb3JlYWNoIG5ldCAkbmV0cyB7CiAgICAgIHNldF9uZXRfd2lyZV9jYXAgJG5ldCAkc3VidHJhY3RfcGluX2xvYWQgJGNvcm5lciAkbWluX21heCAkY2FwCiAgICB9CiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF9sb2dpY19kYyIge3BvcnRfbGlzdH0KCnByb2Mgc2V0X2xvZ2ljX2RjIHsgcG9ydF9saXN0IH0gewogIHNldF9sb2dpY192YWx1ZSAkcG9ydF9saXN0ICJYIgp9CgojIE9UIHN1cHBvcnRzIHNldF9sb2dpYyBjbWRzIG9uIHBpbnMuCiMgT0Mgb25seSBzdXBwb3J0cyB0aGVtIG9uIHBvcnRzLgpwcm9jIHNldF9sb2dpY192YWx1ZSB7IHBvcnRfbGlzdCB2YWx1ZSB9IHsKICBzZXQgcGlucyBbZ2V0X3BvcnRfcGluc19lcnJvciAicGlucyIgJHBvcnRfbGlzdF0KICBmb3JlYWNoIHBpbiAkcGlucyB7CiAgICBzZXRfbG9naWNfdmFsdWVfY21kICRwaW4gJHZhbHVlCiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF9sb2dpY19vbmUiIHtwb3J0X2xpc3R9Cgpwcm9jIHNldF9sb2dpY19vbmUgeyBwb3J0X2xpc3QgfSB7CiAgc2V0X2xvZ2ljX3ZhbHVlICRwb3J0X2xpc3QgIjEiCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAic2V0X2xvZ2ljX3plcm8iIHtwb3J0X2xpc3R9Cgpwcm9jIHNldF9sb2dpY196ZXJvIHsgcG9ydF9saXN0IH0gewogIHNldF9sb2dpY192YWx1ZSAkcG9ydF9saXN0ICIwIgp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF9tYXhfYXJlYSIge2FyZWF9Cgpwcm9jIHNldF9tYXhfYXJlYSB7IGFyZWEgfSB7CiAgY2hlY2tfcG9zaXRpdmVfZmxvYXQgImFyZWEiICRhcmVhCiAgc2V0X21heF9hcmVhX2NtZCAkYXJlYQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF9tYXhfY2FwYWNpdGFuY2UiIHtjYXAgb2JqZWN0c30KCnByb2Mgc2V0X21heF9jYXBhY2l0YW5jZSB7IGNhcCBvYmplY3RzIH0gewogIHNldF9jYXBhY2l0YW5jZV9saW1pdCAkY2FwICJtYXgiICRvYmplY3RzCn0KCnByb2Mgc2V0X2NhcGFjaXRhbmNlX2xpbWl0IHsgY2FwIG1pbl9tYXggb2JqZWN0cyB9IHsKICBwYXJzZV9jZWxsX3BvcnRfcGluX2FyZ3MgJG9iamVjdHMgY2VsbHMgcG9ydHMgcGlucwogIGNoZWNrX3Bvc2l0aXZlX2Zsb2F0ICJsaW1pdCIgJGNhcAogIHNldCBjYXAgW2NhcGFjaXRhbmNlX3VpX3N0YSAkY2FwXQogIGZvcmVhY2ggY2VsbCAkY2VsbHMgewogICAgc2V0X2NlbGxfY2FwYWNpdGFuY2VfbGltaXQgJGNlbGwgJG1pbl9tYXggJGNhcAogIH0KICBmb3JlYWNoIHBvcnQgJHBvcnRzIHsKICAgIHNldF9wb3J0X2NhcGFjaXRhbmNlX2xpbWl0ICRwb3J0ICRtaW5fbWF4ICRjYXAKICB9CiAgZm9yZWFjaCBwaW4gJHBpbnMgewogICAgc2V0X3Bpbl9jYXBhY2l0YW5jZV9saW1pdCAkcGluICRtaW5fbWF4ICRjYXAKICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAic2V0X21heF9mYW5vdXQiIHtmYW5vdXQgb2JqZWN0c30KCnByb2Mgc2V0X21heF9mYW5vdXQgeyBmYW5vdXQgb2JqZWN0cyB9IHsKICBzZXRfZmFub3V0X2xpbWl0ICRmYW5vdXQgIm1heCIgJG9iamVjdHMKfQoKcHJvYyBzZXRfZmFub3V0X2xpbWl0IHsgZmFub3V0IG1pbl9tYXggb2JqZWN0cyB9IHsKICBjaGVja19wb3NpdGl2ZV9mbG9hdCAibGltaXQiICRmYW5vdXQKICBwYXJzZV9jZWxsX3BvcnRfYXJncyAkb2JqZWN0cyBjZWxscyBwb3J0cwogIGZvcmVhY2ggcG9ydCAkcG9ydHMgewogICAgc2V0IGRpciBbcG9ydF9kaXJlY3Rpb24gJHBvcnRdCiAgICBpZiB7ICEoJGRpciA9PSAiaW5wdXQiIHx8ICRkaXIgPT0gImJpZGlyZWN0IikgfSB7CiAgICAgIHN0YV9lcnJvciA0NjcgInBvcnQgJ1tnZXRfbmFtZSAkcG9ydF0nIGlzIG5vdCBhbiBpbnB1dC4iCiAgICB9CiAgICBzZXRfcG9ydF9mYW5vdXRfbGltaXQgJHBvcnQgJG1pbl9tYXggJGZhbm91dAogIH0KICBmb3JlYWNoIGNlbGwgJGNlbGxzIHsKICAgIHNldF9jZWxsX2Zhbm91dF9saW1pdCAkY2VsbCAkbWluX21heCAkZmFub3V0CiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF9tYXhfdHJhbnNpdGlvbiIgXAogIHtbLWNsb2NrX3BhdGhdIFstZGF0YV9wYXRoXSBbLXJpc2VdIFstZmFsbF0gc2xldyBvYmplY3RzfQoKcHJvYyBzZXRfbWF4X3RyYW5zaXRpb24geyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJzZXRfbWF4X3RyYW5zaXRpb24iIGFyZ3Mga2V5cyB7fSBcCiAgICBmbGFncyB7LWNsb2NrX3BhdGggLWRhdGFfcGF0aCAtcmlzZSAtZmFsbH0KICBjaGVja19hcmdjX2VxMiAic2V0X21heF90cmFuc2l0aW9uIiAkYXJncwogIAogIHNldCBzbGV3IFtsaW5kZXggJGFyZ3MgMF0KICBjaGVja19wb3NpdGl2ZV9mbG9hdCAidHJhbnNpdGlvbiIgJHNsZXcKICBzZXQgc2xldyBbdGltZV91aV9zdGEgJHNsZXddCiAgCiAgc2V0IG9iamVjdHMgW2xpbmRleCAkYXJncyAxXQogIHBhcnNlX2Nsa19jZWxsX3BvcnRfYXJncyAkb2JqZWN0cyBjbGtzIGNlbGxzIHBvcnRzCiAgCiAgc2V0IHJmIFtwYXJzZV9yaXNlX2ZhbGxfZmxhZ3MgZmxhZ3NdCiAgCiAgc2V0IHBhdGhfdHlwZXMge30KICBpZiB7ICFbaW5mbyBleGlzdHMgZmxhZ3MoLWNsb2NrX3BhdGgpXSBcCiAgICAgICAgICYmICFbaW5mbyBleGlzdHMgZmxhZ3MoLWRhdGFfcGF0aCldIH0gewogICAgIyBEZXJhdGUgY2xrIGFuZCBkYXRhIGlmIG5laXRoZXIgLWNsb2NrX3BhdGggb3IgLWRhdGFfcGF0aC4KICAgIHNldCBwYXRoX3R5cGVzIHsiY2xrIiAiZGF0YSJ9CiAgfQogIGlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1jbG9ja19wYXRoKV0gfSB7CiAgICBsYXBwZW5kIHBhdGhfdHlwZXMgImNsayIKICB9CiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLWRhdGFfcGF0aCldIH0gewogICAgbGFwcGVuZCBwYXRoX3R5cGVzICJkYXRhIgogIH0KICAKICBpZiB7ICgkcG9ydHMgIT0ge30gfHwgJGNlbGxzICE9IHt9KSBcCiAgICAgICAgICYmIChbaW5mbyBleGlzdHMgZmxhZ3MoLWNsb2NrX3BhdGgpXSBcCiAgICAgICAgICAgICAgIHx8IFtpbmZvIGV4aXN0cyBmbGFncygtZGF0YV9wYXRoKV0KICAgICAgICAgICAgIHx8IFtpbmZvIGV4aXN0cyBmbGFncygtcmlzZSldCiAgICAgICAgICAgICB8fCBbaW5mbyBleGlzdHMgZmxhZ3MoLWZhbGwpXSkgfSB7CiAgICBzdGFfd2FybiA0NjggIi1kYXRhX3BhdGgsIC1jbG9ja19wYXRoLCAtcmlzZSwgLWZhbGwgaWdub3JlZCBmb3IgcG9ydHMgYW5kIGRlc2lnbnMuIgogIH0KICAKICAjIC1jbG9ja19wYXRoLy1kYXRhX3BhdGggYW5kIHRyYW5zaXRpb24gb25seSBhcHBseSB0byBjbG9jayBvYmplY3RzLgogIGZvcmVhY2ggcGF0aF90eXBlICRwYXRoX3R5cGVzIHsKICAgIGZvcmVhY2ggY2xrICRjbGtzIHsKICAgICAgc2V0X3NsZXdfbGltaXRfY2xrICRjbGsgJHJmICRwYXRoX3R5cGUgIm1heCIgJHNsZXcKICAgIH0KICB9CiAgZm9yZWFjaCBjZWxsICRjZWxscyB7CiAgICBzZXRfc2xld19saW1pdF9jZWxsICRjZWxsICJtYXgiICRzbGV3CiAgfQogIGZvcmVhY2ggcG9ydCAkcG9ydHMgewogICAgc2V0X3NsZXdfbGltaXRfcG9ydCAkcG9ydCAibWF4IiAkc2xldwogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJzZXRfcG9ydF9mYW5vdXRfbnVtYmVyIiBcCiAge1stY29ybmVyIGNvcm5lcl0gWy1tYXhdIFstbWluXSBmYW5vdXQgcG9ydHN9Cgpwcm9jIHNldF9wb3J0X2Zhbm91dF9udW1iZXIgeyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJzZXRfcG9ydF9mYW5vdXRfbnVtYmVyIiBhcmdzIGtleXMgey1jb3JuZXJ9IGZsYWdzIHstbWF4IC1taW59CiAgc2V0IG1pbl9tYXggW3BhcnNlX21pbl9tYXhfYWxsX2NoZWNrX2ZsYWdzIGZsYWdzXQogIAogIGNoZWNrX2FyZ2NfZXEyICJzZXRfcG9ydF9mYW5vdXRfbnVtYmVyIiAkYXJncwogIAogIHNldCBmYW5vdXQgW2xpbmRleCAkYXJncyAwXQogIGNoZWNrX3Bvc2l0aXZlX2ludGVnZXIgImZhbm91dCIgJGZhbm91dAogIHNldCBwb3J0cyBbZ2V0X3BvcnRzX2Vycm9yICJwb3J0cyIgW2xpbmRleCAkYXJncyAxXV0KICBzZXQgY29ybmVyIFtwYXJzZV9jb3JuZXJfb3JfYWxsIGtleXNdCiAgZm9yZWFjaCBwb3J0ICRwb3J0cyB7CiAgICBzZXRfcG9ydF9leHRfZmFub3V0X2NtZCAkcG9ydCAkZmFub3V0ICRjb3JuZXIgJG1pbl9tYXgKICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAic2V0X3Jlc2lzdGFuY2UiIHtbLW1pbl0gWy1tYXhdIHJlc2lzdGFuY2UgbmV0c30KCnByb2Mgc2V0X3Jlc2lzdGFuY2UgeyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJzZXRfcmVzaXN0YW5jZSIgYXJncyBrZXlzIHt9IGZsYWdzIHstbWF4IC1taW59CiAgc2V0IG1pbl9tYXggW3BhcnNlX21pbl9tYXhfYWxsX2NoZWNrX2ZsYWdzIGZsYWdzXQogIAogIGNoZWNrX2FyZ2NfZXEyICJzZXRfcmVzaXN0YW5jZSIgJGFyZ3MKICAKICBzZXQgcmVzIFtsaW5kZXggJGFyZ3MgMF0KICBjaGVja19wb3NpdGl2ZV9mbG9hdCAicmVzaXN0YW5jZSIgJHJlcwogIHNldCByZXMgW3Jlc2lzdGFuY2VfdWlfc3RhICRyZXNdCiAgc2V0IG5ldHMgW2dldF9uZXRzX2FyZyAibmV0cyIgW2xpbmRleCAkYXJncyAxXV0KICBmb3JlYWNoIG5ldCAkbmV0cyB7CiAgICBzZXRfbmV0X3Jlc2lzdGFuY2UgJG5ldCAkbWluX21heCAkcmVzCiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF90aW1pbmdfZGVyYXRlIiBcCiAgey1lYXJseXwtbGF0ZSBbLXJpc2VdIFstZmFsbF0gWy1jbG9ja10gWy1kYXRhXSBcCiAgICAgWy1uZXRfZGVsYXldIFstY2VsbF9kZWxheV0gWy1jZWxsX2NoZWNrXSBkZXJhdGUgW29iamVjdHNdfQoKcHJvYyBzZXRfdGltaW5nX2RlcmF0ZSB7IGFyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgInNldF90aW1pbmdfZGVyYXRlIiBhcmdzIGtleXMge30gXAogICAgZmxhZ3Mgey1yaXNlIC1mYWxsIC1lYXJseSAtbGF0ZSAtY2xvY2sgLWRhdGEgXAogICAgICAgICAgICAgLW5ldF9kZWxheSAtY2VsbF9kZWxheSAtY2VsbF9jaGVja30KICBjaGVja19hcmdjX2VxMW9yMiAic2V0X3RpbWluZ19kZXJhdGUiICRhcmdzCiAgCiAgc2V0IGRlcmF0ZSBbbGluZGV4ICRhcmdzIDBdCiAgY2hlY2tfZmxvYXQgImRlcmF0ZSIgJGRlcmF0ZQogIGlmIHsgJGRlcmF0ZSA+IDIuMCB9IHsKICAgIHN0YV93YXJuIDQ2OSAiZGVyYXRpbmcgZmFjdG9yIGdyZWF0ZXIgdGhhbiAyLjAuIgogIH0KICAKICBzZXQgcmYgW3BhcnNlX3Jpc2VfZmFsbF9mbGFncyBmbGFnc10KICBzZXQgZWFybHlfbGF0ZSBbcGFyc2VfZWFybHlfbGF0ZV9mbGFncyBmbGFnc10KICAKICBzZXQgcGF0aF90eXBlcyB7fQogIGlmIHsgIVtpbmZvIGV4aXN0cyBmbGFncygtY2xvY2spXSBcCiAgICAgICAgICYmICFbaW5mbyBleGlzdHMgZmxhZ3MoLWRhdGEpXSB9IHsKICAgICMgRGVyYXRlIGNsayBhbmQgZGF0YSBpZiBuZWl0aGVyIC1jbG9jayBvciAtZGF0YS4KICAgIGxhcHBlbmQgcGF0aF90eXBlcyAiY2xrIgogICAgbGFwcGVuZCBwYXRoX3R5cGVzICJkYXRhIgogIH0KICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtY2xvY2spXSB9IHsKICAgIGxhcHBlbmQgcGF0aF90eXBlcyAiY2xrIgogIH0KICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtZGF0YSldIH0gewogICAgbGFwcGVuZCBwYXRoX3R5cGVzICJkYXRhIgogIH0KICAKICBzZXQgZGVyYXRlX3R5cGVzIHt9CiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLW5ldF9kZWxheSldIH0gewogICAgbGFwcGVuZCBkZXJhdGVfdHlwZXMgIm5ldF9kZWxheSIKICB9CiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLWNlbGxfZGVsYXkpXSB9IHsKICAgIGxhcHBlbmQgZGVyYXRlX3R5cGVzICJjZWxsX2RlbGF5IgogIH0KICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtY2VsbF9jaGVjayldIH0gewogICAgbGFwcGVuZCBkZXJhdGVfdHlwZXMgImNlbGxfY2hlY2siCiAgfQogIAogIGlmIHsgW2xsZW5ndGggJGFyZ3NdID09IDIgfSB7CiAgICBzZXQgb2JqZWN0cyBbbGluZGV4ICRhcmdzIDFdCiAgICBwYXJzZV9saWJjZWxsX2luc3RfbmV0X2FyZyAkb2JqZWN0cyBsaWJjZWxscyBpbnN0cyBuZXRzCiAgICBpZiB7ICRuZXRzICE9IHt9IH0gewogICAgICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtY2VsbF9kZWxheSldIFwKICAgICAgICAgICAgIHx8IFtpbmZvIGV4aXN0cyBmbGFncygtY2VsbF9jaGVjayldIH0gewogICAgICAgIHN0YV93YXJuIDQ3MCAiLWNlbGxfZGVsYXkgYW5kIC1jZWxsX2NoZWNrIGZsYWdzIGlnbm9yZWQgZm9yIG5ldCBvYmplY3RzLiIKICAgICAgfQogICAgICBmb3JlYWNoIG5ldCAkbmV0cyB7CiAgICAgICAgZm9yZWFjaCBwYXRoX3R5cGUgJHBhdGhfdHlwZXMgewogICAgICAgICAgc2V0X3RpbWluZ19kZXJhdGVfbmV0X2NtZCAkbmV0ICRwYXRoX3R5cGUgJHJmICRlYXJseV9sYXRlICRkZXJhdGUKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGlmIHsgIVtpbmZvIGV4aXN0cyBmbGFncygtY2VsbF9kZWxheSldIFwKICAgICAgICAgICAmJiAhW2luZm8gZXhpc3RzIGZsYWdzKC1jZWxsX2NoZWNrKV0gfSB7CiAgICAgICMgQ2VsbCBjaGVja3MgYXJlIG5vdCBkZXJhdGVkIGlmIG5vIGZsYWdzIGFyZSBzcGVjaWZpZWQuCiAgICAgIHNldCBkZXJhdGVfdHlwZXMge2NlbGxfZGVsYXl9CiAgICB9CiAgICBmb3JlYWNoIGRlcmF0ZV90eXBlICRkZXJhdGVfdHlwZXMgewogICAgICBmb3JlYWNoIHBhdGhfdHlwZSAkcGF0aF90eXBlcyB7CiAgICAgICAgZm9yZWFjaCBpbnN0ICRpbnN0cyB7CiAgICAgICAgICBzZXRfdGltaW5nX2RlcmF0ZV9pbnN0X2NtZCAkaW5zdCAkZGVyYXRlX3R5cGUgJHBhdGhfdHlwZSBcCiAgICAgICAgICAgICRyZiAkZWFybHlfbGF0ZSAkZGVyYXRlCiAgICAgICAgfQogICAgICAgIGZvcmVhY2ggbGliY2VsbCAkbGliY2VsbHMgewogICAgICAgICAgc2V0X3RpbWluZ19kZXJhdGVfY2VsbF9jbWQgJGxpYmNlbGwgJGRlcmF0ZV90eXBlICRwYXRoX3R5cGUgXAogICAgICAgICAgICAkcmYgJGVhcmx5X2xhdGUgJGRlcmF0ZQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0gZWxzZSB7CiAgICBpZiB7ICFbaW5mbyBleGlzdHMgZmxhZ3MoLW5ldF9kZWxheSldIFwKICAgICAgICAgICAmJiAhW2luZm8gZXhpc3RzIGZsYWdzKC1jZWxsX2RlbGF5KV0gXAogICAgICAgICAgICYmICFbaW5mbyBleGlzdHMgZmxhZ3MoLWNlbGxfY2hlY2spXSB9IHsKICAgICAgIyBDZWxsIGNoZWNrcyBhcmUgbm90IGRlcmF0ZWQgaWYgbm8gZmxhZ3MgYXJlIHNwZWNpZmllZC4KICAgICAgc2V0IGRlcmF0ZV90eXBlcyB7bmV0X2RlbGF5IGNlbGxfZGVsYXl9CiAgICB9CiAgICBmb3JlYWNoIGRlcmF0ZV90eXBlICRkZXJhdGVfdHlwZXMgewogICAgICBmb3JlYWNoIHBhdGhfdHlwZSAkcGF0aF90eXBlcyB7CiAgICAgICAgc2V0X3RpbWluZ19kZXJhdGVfY21kICRkZXJhdGVfdHlwZSAkcGF0aF90eXBlICRyZiAkZWFybHlfbGF0ZSAkZGVyYXRlCiAgICAgIH0KICAgIH0KICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAidW5zZXRfdGltaW5nX2RlcmF0ZSIge30KCnByb2MgdW5zZXRfdGltaW5nX2RlcmF0ZSB7IGFyZ3MgfSB7CiAgY2hlY2tfYXJnY19lcTAgInVuc2V0X3RpbWluZ19kZXJhdGUiICRhcmdzCiAgdW5zZXRfdGltaW5nX2RlcmF0ZV9jbWQKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKcHJvYyBwYXJzZV9mcm9tX2FyZyB7IGtleXNfdmFyIGFyZ19lcnJvcl92YXIgfSB7CiAgdXB2YXIgMSAka2V5c192YXIga2V5cwogIAogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1mcm9tKV0gewogICAgc2V0IGtleSAiLWZyb20iCiAgICBzZXQgcmYgInJpc2VfZmFsbCIKICB9IGVsc2VpZiBbaW5mbyBleGlzdHMga2V5cygtcmlzZV9mcm9tKV0gewogICAgc2V0IGtleSAiLXJpc2VfZnJvbSIKICAgIHNldCByZiAicmlzZSIKICB9IGVsc2VpZiBbaW5mbyBleGlzdHMga2V5cygtZmFsbF9mcm9tKV0gewogICAgc2V0IGtleSAiLWZhbGxfZnJvbSIKICAgIHNldCByZiAiZmFsbCIKICB9IGVsc2UgewogICAgcmV0dXJuICJOVUxMIgogIH0KICBwYXJzZV9jbGtfaW5zdF9wb3J0X3Bpbl9hcmcgJGtleXMoJGtleSkgZnJvbV9jbGtzIGZyb21faW5zdHMgZnJvbV9waW5zCiAgaWYgeyRmcm9tX3BpbnMgPT0ge30gJiYgJGZyb21faW5zdHMgPT0ge30gJiYgJGZyb21fY2xrcyA9PSB7fX0gewogICAgdXB2YXIgMSAkYXJnX2Vycm9yX3ZhciBhcmdfZXJyb3IKICAgIHNldCBhcmdfZXJyb3IgMQogICAgc3RhX3dhcm4gNDcxICJubyB2YWxpZCBvYmplY3RzIHNwZWNpZmllZCBmb3IgJGtleS4iCiAgICByZXR1cm4gIk5VTEwiCiAgfQogIHJldHVybiBbbWFrZV9leGNlcHRpb25fZnJvbSAkZnJvbV9waW5zICRmcm9tX2Nsa3MgJGZyb21faW5zdHMgJHJmXQp9CgojICJhcmdfZXJyb3IiIGlzIHNldCB0byBub3RpZnkgdGhlIGNhbGxlciB0byBjbGVhbnVwIGFuZCBwb3N0IGVycm9yLgpwcm9jIHBhcnNlX3RocnVzX2FyZyB7IGFyZ3NfdmFyIGFyZ19lcnJvcl92YXIgfSB7CiAgdXB2YXIgMSAkYXJnc192YXIgYXJncwogIAogIHNldCB0aHJ1cyB7fQogIHNldCBhcmdzX3J0biB7fQogIHdoaWxlIHsgJGFyZ3MgIT0ge30gfSB7CiAgICBzZXQgYXJnIFtsaW5kZXggJGFyZ3MgMF0KICAgIHNldCByZiAiIgogICAgaWYgeyAkYXJnID09ICItdGhyb3VnaCIgfSB7CiAgICAgIHNldCByZiAicmlzZV9mYWxsIgogICAgICBzZXQga2V5ICItdGhyb3VnaCIKICAgIH0gZWxzZWlmIHsgJGFyZyA9PSAiLXJpc2VfdGhyb3VnaCIgfSB7CiAgICAgIHNldCByZiAicmlzZSIKICAgICAgc2V0IGtleSAiLXJpc2VfdGhyb3VnaCIKICAgIH0gZWxzZWlmIHsgJGFyZyA9PSAiLWZhbGxfdGhyb3VnaCIgfSB7CiAgICAgIHNldCByZiAiZmFsbCIKICAgICAgc2V0IGtleSAiLWZhbGxfdGhyb3VnaCIKICAgIH0KICAgIGlmIHsgJHJmICE9ICIiIH0gewogICAgICBpZiB7IFtsbGVuZ3RoICRhcmdzXSA+IDEgfSB7CiAgICAgICAgc2V0IGFyZ3MgW2xyYW5nZSAkYXJncyAxIGVuZF0KICAgICAgICBzZXQgYXJnIFtsaW5kZXggJGFyZ3MgMF0KICAgICAgICBwYXJzZV9pbnN0X3BvcnRfcGluX25ldF9hcmcgJGFyZyBpbnN0cyBwaW5zIG5ldHMKICAgICAgICBpZiB7JHBpbnMgPT0ge30gJiYgJGluc3RzID09IHt9ICYmICRuZXRzID09IHt9fSB7CiAgICAgICAgICB1cHZhciAxICRhcmdfZXJyb3JfdmFyIGFyZ19lcnJvcgogICAgICAgICAgc2V0IGFyZ19lcnJvciAxCiAgICAgICAgICBzdGFfd2FybiA0NzIgIm5vIHZhbGlkIG9iamVjdHMgc3BlY2lmaWVkIGZvciAka2V5IgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBsYXBwZW5kIHRocnVzIFttYWtlX2V4Y2VwdGlvbl90aHJ1ICRwaW5zICRuZXRzICRpbnN0cyAkcmZdCiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICBsYXBwZW5kIGFyZ3NfcnRuICRhcmcKICAgIH0KICAgIHNldCBhcmdzIFtscmFuZ2UgJGFyZ3MgMSBlbmRdCiAgfQogIHNldCBhcmdzICRhcmdzX3J0bgogIHJldHVybiAkdGhydXMKfQoKIyBQYXJzZSAtdG98LXJpc2VfdG98LWZhbGxfdG8ga2V5d29yZHMuCnByb2MgcGFyc2VfdG9fYXJnIHsga2V5c192YXIgZmxhZ3NfdmFyIGFyZ19lcnJvcl92YXIgfSB7CiAgdXB2YXIgMSAka2V5c192YXIga2V5cwogIHVwdmFyIDEgJGZsYWdzX3ZhciBmbGFncwogIHVwdmFyIDEgJGFyZ19lcnJvcl92YXIgYXJnX2Vycm9yCiAgCiAgc2V0IGVuZF9yZiBbcGFyc2VfcmlzZV9mYWxsX2ZsYWdzIGZsYWdzXQogIHJldHVybiBbcGFyc2VfdG9fYXJnMSBrZXlzICRlbmRfcmYgYXJnX2Vycm9yXQp9Cgpwcm9jIHBhcnNlX3RvX2FyZzEgeyBrZXlzX3ZhciBlbmRfcmYgYXJnX2Vycm9yX3ZhciB9IHsKICB1cHZhciAxICRrZXlzX3ZhciBrZXlzCiAgdXB2YXIgMSAkYXJnX2Vycm9yX3ZhciBhcmdfZXJyb3IKICAKICBpZiBbaW5mbyBleGlzdHMga2V5cygtdG8pXSB7CiAgICBzZXQga2V5ICItdG8iCiAgICBzZXQgdG9fcmYgInJpc2VfZmFsbCIKICB9IGVsc2VpZiBbaW5mbyBleGlzdHMga2V5cygtcmlzZV90byldIHsKICAgIHNldCBrZXkgIi1yaXNlX3RvIgogICAgc2V0IHRvX3JmICJyaXNlIgogIH0gZWxzZWlmIFtpbmZvIGV4aXN0cyBrZXlzKC1mYWxsX3RvKV0gewogICAgc2V0IGtleSAiLWZhbGxfdG8iCiAgICBzZXQgdG9fcmYgImZhbGwiCiAgfSBlbHNlIHsKICAgICMgLXJpc2UvLWZhbGwgd2l0aG91dCAtdG8vLXJpc2VfdG8vLWZhbGxfdG8gKG5vIG9iamVjdHMpLgogICAgaWYgeyAkZW5kX3JmICE9ICJyaXNlX2ZhbGwiIH0gewogICAgICByZXR1cm4gW21ha2VfZXhjZXB0aW9uX3RvIHt9IHt9IHt9ICJyaXNlX2ZhbGwiICRlbmRfcmZdCiAgICB9IGVsc2UgewogICAgICByZXR1cm4gIk5VTEwiCiAgICB9CiAgfQogIHBhcnNlX2Nsa19pbnN0X3BvcnRfcGluX2FyZyAka2V5cygka2V5KSB0b19jbGtzIHRvX2luc3RzIHRvX3BpbnMKICBpZiB7JHRvX3BpbnMgPT0ge30gJiYgJHRvX2luc3RzID09IHt9ICYmICR0b19jbGtzID09IHt9fSB7CiAgICB1cHZhciAxICRhcmdfZXJyb3JfdmFyIGFyZ19lcnJvcgogICAgc2V0IGFyZ19lcnJvciAxCiAgICBzdGFfd2FybiA0NzMgIm5vIHZhbGlkIG9iamVjdHMgc3BlY2lmaWVkIGZvciAka2V5LiIKICAgIHJldHVybiAiTlVMTCIKICB9CiAgcmV0dXJuIFttYWtlX2V4Y2VwdGlvbl90byAkdG9fcGlucyAkdG9fY2xrcyAkdG9faW5zdHMgJHRvX3JmICRlbmRfcmZdCn0KCnByb2MgZGVsZXRlX2Zyb21fdGhydXNfdG8geyBmcm9tIHRocnVzIHRvIH0gewogIGlmIHsgJGZyb20gIT0gIk5VTEwiIH0gewogICAgZGVsZXRlX2V4Y2VwdGlvbl9mcm9tICRmcm9tCiAgfQogIGlmIHsgJHRocnVzICE9IHt9IH0gewogICAgZm9yZWFjaCB0aHJ1ICR0aHJ1cyB7CiAgICAgIGRlbGV0ZV9leGNlcHRpb25fdGhydSAkdGhydQogICAgfQogIH0KICBpZiB7ICR0byAhPSAiTlVMTCIgfSB7CiAgICBkZWxldGVfZXhjZXB0aW9uX3RvICR0bwogIH0KfQoKcHJvYyBwYXJzZV9jb21tZW50X2tleSB7IGtleXNfdmFyIH0gewogIHVwdmFyIDEgJGtleXNfdmFyIGtleXMKICAKICBzZXQgY29tbWVudCAiIgogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLWNvbW1lbnQpXSB9IHsKICAgIHNldCBjb21tZW50ICRrZXlzKC1jb21tZW50KQogIH0KICByZXR1cm4gJGNvbW1lbnQKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJzZXRfbWluX2NhcGFjaXRhbmNlIiB7Y2FwIG9iamVjdHN9Cgpwcm9jIHNldF9taW5fY2FwYWNpdGFuY2UgeyBjYXAgb2JqZWN0cyB9IHsKICBzZXRfY2FwYWNpdGFuY2VfbGltaXQgJGNhcCAibWluIiAkb2JqZWN0cwp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF9vcGVyYXRpbmdfY29uZGl0aW9ucyIgXAogIHtbLWFuYWx5c2lzX3R5cGUgc2luZ2xlfGJjX3djfG9uX2NoaXBfdmFyaWF0aW9uXSBbLWxpYnJhcnkgbGliXVwKICAgICBbY29uZGl0aW9uXSBbLW1pbiBtaW5fY29uZGl0aW9uXSBbLW1heCBtYXhfY29uZGl0aW9uXVwKICAgICBbLW1pbl9saWJyYXJ5IG1pbl9saWJdIFstbWF4X2xpYnJhcnkgbWF4X2xpYl19Cgpwcm9jIHNldF9vcGVyYXRpbmdfY29uZGl0aW9ucyB7IGFyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgInNldF9vcGVyYXRpbmdfY29uZGl0aW9ucyIgYXJncyBcCiAgICBrZXlzIHstYW5hbHlzaXNfdHlwZSAtbGlicmFyeSAtbWluIC1tYXggLW1pbl9saWJyYXJ5IC1tYXhfbGlicmFyeX0gZmxhZ3Mge30KICBwYXJzZV9vcF9jb25kX2FuYWx5c2lzX3R5cGUga2V5cwogIGNoZWNrX2FyZ2NfZXEwb3IxIHNldF9vcGVyYXRpbmdfY29uZGl0aW9ucyAkYXJncwogIGlmIHsgW2xsZW5ndGggJGFyZ3NdID09IDEgfSB7CiAgICBzZXQgb3BfY29uZF9uYW1lICRhcmdzCiAgICBwYXJzZV9vcF9jb25kICRvcF9jb25kX25hbWUgIi1saWJyYXJ5IiAiYWxsIiBrZXlzCiAgfQogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1taW4pXSB7CiAgICBwYXJzZV9vcF9jb25kICRrZXlzKC1taW4pICItbWluX2xpYnJhcnkiICJtaW4iIGtleXMKICB9CiAgaWYgW2luZm8gZXhpc3RzIGtleXMoLW1heCldIHsKICAgIHBhcnNlX29wX2NvbmQgJGtleXMoLW1heCkgIi1tYXhfbGlicmFyeSIgIm1heCIga2V5cwogIH0KfQoKcHJvYyBwYXJzZV9vcF9jb25kIHsgb3BfY29uZF9uYW1lIGxpYl9rZXkgbWluX21heCBrZXlfdmFyIH0gewogIHVwdmFyIDEgJGtleV92YXIga2V5cwogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKCRsaWJfa2V5KV0gewogICAgc2V0IGxpYmVydHkgW2dldF9saWJlcnR5X2Vycm9yICRsaWJfa2V5ICRrZXlzKCRsaWJfa2V5KV0KICAgIHNldCBvcF9jb25kIFskbGliZXJ0eSBmaW5kX29wZXJhdGluZ19jb25kaXRpb25zICRvcF9jb25kX25hbWVdCiAgICBpZiB7ICRvcF9jb25kID09ICJOVUxMIiB9IHsKICAgICAgc3RhX2Vycm9yIDQ3NCAib3BlcmF0aW5nIGNvbmRpdGlvbiAnJG9wX2NvbmRfbmFtZScgbm90IGZvdW5kLiIKICAgIH0gZWxzZSB7CiAgICAgIHNldF9vcGVyYXRpbmdfY29uZGl0aW9uc19jbWQgJG9wX2NvbmQgJG1pbl9tYXgKICAgIH0KICB9IGVsc2UgewogICAgc2V0IGZvdW5kIDAKICAgIHNldCBsaWJfaXRlciBbbGliZXJ0eV9saWJyYXJ5X2l0ZXJhdG9yXQogICAgd2hpbGUge1skbGliX2l0ZXIgaGFzX25leHRdfSB7CiAgICAgIHNldCBsaWIgWyRsaWJfaXRlciBuZXh0XQogICAgICBzZXQgb3BfY29uZCBbJGxpYiBmaW5kX29wZXJhdGluZ19jb25kaXRpb25zICRvcF9jb25kX25hbWVdCiAgICAgIGlmIHsgJG9wX2NvbmQgIT0gIk5VTEwiIH0gewogICAgICAgIHNldF9vcGVyYXRpbmdfY29uZGl0aW9uc19jbWQgJG9wX2NvbmQgJG1pbl9tYXgKICAgICAgICBzZXQgZm91bmQgMQogICAgICAgIGJyZWFrCiAgICAgIH0KICAgIH0KICAgICRsaWJfaXRlciBmaW5pc2gKICAgIGlmIHsgISRmb3VuZCB9IHsKICAgICAgc3RhX2Vycm9yIDQ3NSAib3BlcmF0aW5nIGNvbmRpdGlvbiAnJG9wX2NvbmRfbmFtZScgbm90IGZvdW5kLiIKICAgIH0KICB9Cn0KCnByb2MgcGFyc2Vfb3BfY29uZF9hbmFseXNpc190eXBlIHsga2V5X3ZhciB9IHsKICB1cHZhciAxICRrZXlfdmFyIGtleXMKICBpZiBbaW5mbyBleGlzdHMga2V5cygtYW5hbHlzaXNfdHlwZSldIHsKICAgIHNldCBhbmFseXNpc190eXBlICRrZXlzKC1hbmFseXNpc190eXBlKQogICAgaWYgeyAkYW5hbHlzaXNfdHlwZSA9PSAic2luZ2xlIiBcCiAgICAgICAgICAgfHwgJGFuYWx5c2lzX3R5cGUgPT0gImJjX3djIiBcCiAgICAgICAgICAgfHwgJGFuYWx5c2lzX3R5cGUgPT0gIm9uX2NoaXBfdmFyaWF0aW9uIiB9IHsKICAgICAgc2V0X2FuYWx5c2lzX3R5cGVfY21kICRhbmFseXNpc190eXBlCiAgICB9IGVsc2UgewogICAgICBzdGFfZXJyb3IgNDc2ICItYW5hbHlzaXNfdHlwZSBtdXN0IGJlIHNpbmdsZSwgYmNfd2Mgb3Igb25fY2hpcF92YXJpYXRpb24uIgogICAgfQogIH0gZWxzZWlmIHsgW2luZm8gZXhpc3RzIGtleXMoLW1pbildICYmIFtpbmZvIGV4aXN0cyBrZXlzKC1tYXgpXSB9IHsKICAgIHNldF9hbmFseXNpc190eXBlX2NtZCAiYmNfd2MiCiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF93aXJlX2xvYWRfbWluX2Jsb2NrX3NpemUiIHtibG9ja19zaXplfQoKcHJvYyBzZXRfd2lyZV9sb2FkX21pbl9ibG9ja19zaXplIHsgYmxvY2tfc2l6ZSB9IHsKICBzdGFfd2FybiA0NzcgInNldF93aXJlX2xvYWRfbWluX2Jsb2NrX3NpemUgbm90IHN1cHBvcnRlZC4iCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAic2V0X3dpcmVfbG9hZF9tb2RlIiAidG9wfGVuY2xvc2VkfHNlZ21lbnRlZCIKCnByb2Mgc2V0X3dpcmVfbG9hZF9tb2RlIHsgbW9kZSB9IHsKICBpZiB7ICRtb2RlID09ICJ0b3AiIFwKICAgICAgICAgfHwgJG1vZGUgPT0gImVuY2xvc2VkIiBcCiAgICAgICAgIHx8ICRtb2RlID09ICJzZWdtZW50ZWQiIH0gewogICAgc2V0X3dpcmVfbG9hZF9tb2RlX2NtZCAkbW9kZQogIH0gZWxzZSB7CiAgICBzdGFfZXJyb3IgNDc4ICJtb2RlIG11c3QgYmUgdG9wLCBlbmNsb3NlZCBvciBzZWdtZW50ZWQuIgogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJzZXRfd2lyZV9sb2FkX21vZGVsIiBcCiAgey1uYW1lIG1vZGVsX25hbWUgWy1saWJyYXJ5IGxpYl9uYW1lXSBbLW1pbl0gWy1tYXhdIFtvYmplY3RzXX0KCnByb2Mgc2V0X3dpcmVfbG9hZF9tb2RlbCB7IGFyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgInNldF93aXJlX2xvYWRfbW9kZWwiIGFyZ3Mga2V5cyB7LW5hbWUgLWxpYnJhcnl9IFwKICAgIGZsYWdzIHstbWluIC1tYXh9CiAgCiAgY2hlY2tfYXJnY19lcTBvcjEgInNldF93aXJlX2xvYWRfbW9kZWwiICRhcmdzCiAgaWYgeyAhW2luZm8gZXhpc3RzIGtleXMoLW5hbWUpXSB9IHsKICAgIHN0YV9lcnJvciA0NzkgIm5vIHdpcmUgbG9hZCBtb2RlbCBzcGVjaWZpZWQuIgogIH0KICAKICBzZXQgbW9kZWxfbmFtZSAka2V5cygtbmFtZSkKICBzZXQgbWluX21heCBbcGFyc2VfbWluX21heF9hbGxfY2hlY2tfZmxhZ3MgZmxhZ3NdCiAgCiAgc2V0IHdpcmVsb2FkICJOVUxMIgogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1saWJyYXJ5KV0gewogICAgc2V0IGxpYnJhcnkgW2dldF9saWJlcnR5X2Vycm9yICJsaWJyYXJ5IiAka2V5cygtbGlicmFyeSldCiAgICBzZXQgd2lyZWxvYWQgWyRsaWJyYXJ5IGZpbmRfd2lyZWxvYWQgJG1vZGVsX25hbWVdCiAgfSBlbHNlIHsKICAgIHNldCBsaWJfaXRlciBbbGliZXJ0eV9saWJyYXJ5X2l0ZXJhdG9yXQogICAgd2hpbGUge1skbGliX2l0ZXIgaGFzX25leHRdfSB7CiAgICAgIHNldCBsaWIgWyRsaWJfaXRlciBuZXh0XQogICAgICBzZXQgd2lyZWxvYWQgWyRsaWIgZmluZF93aXJlbG9hZCAkbW9kZWxfbmFtZV0KICAgICAgaWYgeyR3aXJlbG9hZCAhPSAiTlVMTCJ9IHsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogICAgJGxpYl9pdGVyIGZpbmlzaAogIH0KICBpZiB7JHdpcmVsb2FkID09ICJOVUxMIn0gewogICAgc3RhX2Vycm9yIDQ4MCAid2lyZSBsb2FkIG1vZGVsICckbW9kZWxfbmFtZScgbm90IGZvdW5kLiIKICB9CiAgc2V0IG9iamVjdHMgJGFyZ3MKICBzZXRfd2lyZV9sb2FkX2NtZCAkd2lyZWxvYWQgJG1pbl9tYXgKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJzZXRfd2lyZV9sb2FkX3NlbGVjdGlvbl9ncm91cCIgXAogIHtbLWxpYnJhcnkgbGliXSBbLW1pbl0gWy1tYXhdIGdyb3VwX25hbWUgW29iamVjdHNdfQoKcHJvYyBzZXRfd2lyZV9sb2FkX3NlbGVjdGlvbl9ncm91cCB7IGFyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgInNldF93aXJlX2xvYWRfc2VsZWN0aW9uX2dyb3VwIiBhcmdzIGtleXMgey1saWJyYXJ5fSBcCiAgICBmbGFncyB7LW1pbiAtbWF4fQogIAogIHNldCBhcmdjIFtsbGVuZ3RoICRhcmdzXQogIGNoZWNrX2FyZ2NfZXExb3IyICJ3aXJlX2xvYWRfc2VsZWN0aW9uX2dyb3VwIiAkYXJncwogIAogIHNldCBzZWxlY3Rpb25fbmFtZSBbbGluZGV4ICRhcmdzIDBdCiAgc2V0IG9iamVjdHMgW2xpbmRleCAkYXJncyAxXQogIAogIHNldCBtaW5fbWF4IFtwYXJzZV9taW5fbWF4X2FsbF9jaGVja19mbGFncyBmbGFnc10KICAKICBzZXQgc2VsZWN0aW9uICJOVUxMIgogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1saWJyYXJ5KV0gewogICAgc2V0IGxpYnJhcnkgW2dldF9saWJlcnR5X2Vycm9yICJsaWJyYXJ5IiAka2V5cygtbGlicmFyeSldCiAgICBzZXQgc2VsZWN0aW9uIFskbGlicmFyeSBmaW5kX3dpcmVsb2FkX3NlbGVjdGlvbiAkc2VsZWN0aW9uX25hbWVdCiAgfSBlbHNlIHsKICAgIHNldCBsaWJfaXRlciBbbGliZXJ0eV9saWJyYXJ5X2l0ZXJhdG9yXQogICAgd2hpbGUge1skbGliX2l0ZXIgaGFzX25leHRdfSB7CiAgICAgIHNldCBsaWIgWyRsaWJfaXRlciBuZXh0XQogICAgICBzZXQgc2VsZWN0aW9uIFskbGliIGZpbmRfd2lyZWxvYWRfc2VsZWN0aW9uICRzZWxlY3Rpb25fbmFtZV0KICAgICAgaWYgeyRzZWxlY3Rpb24gIT0gIk5VTEwifSB7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgICRsaWJfaXRlciBmaW5pc2gKICB9CiAgaWYgeyRzZWxlY3Rpb24gPT0gIk5VTEwifSB7CiAgICBzdGFfZXJyb3IgNDgxICJ3aXJlIGxvYWQgc2VsZWN0aW9uIGdyb3VwICckc2VsZWN0aW9uX25hbWUnIG5vdCBmb3VuZC4iCiAgfQogIHNldF93aXJlX2xvYWRfc2VsZWN0aW9uX2dyb3VwX2NtZCAkc2VsZWN0aW9uICRtaW5fbWF4Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIwojIE11bHRpdm9sdGFnZSBhbmQgUG93ZXIgT3B0aW1pemF0aW9uIENvbW1hbmRzCiMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJzZXRfdm9sdGFnZSIgXAogIHtbLW1pbiBtaW5fY2FzZV92YWx1ZV0gWy1vYmplY3RfbGlzdCBwb3dlcl9uZXRzXSBtYXhfY2FzZV92b2x0YWdlfQoKcHJvYyBzZXRfdm9sdGFnZSB7IGFyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgInNldF92b2x0YWdlIiBhcmdzIGtleXMgey1taW4gLW9iamVjdF9saXN0fSBmbGFncyB7fQogIGNoZWNrX2FyZ2NfZXExICJzZXRfdm9sdGFnZSIgJGFyZ3MKICBzZXQgbWF4X2Nhc2Vfdm9sdGFnZSBbbGluZGV4ICRhcmdzIDBdCiAgY2hlY2tfZmxvYXQgIm1heF9jYXNlX3ZvbHRhZ2UiICRtYXhfY2FzZV92b2x0YWdlCiAgCiAgc2V0IG5ldHMge30KICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1vYmplY3RfbGlzdCldIH0gewogICAgc2V0IG5ldHMgW2dldF9uZXRzX2FyZyAiLW9iamVjdF9saXN0IiAka2V5cygtb2JqZWN0X2xpc3QpXQogIH0KICBzZXRfdm9sdGFnZV9nbG9iYWwgIm1heCIgJG1heF9jYXNlX3ZvbHRhZ2UKICBmb3JlYWNoIG5ldCAkbmV0cyB7CiAgICBzZXRfdm9sdGFnZV9uZXQgJG5ldCAibWF4IiAkbWF4X2Nhc2Vfdm9sdGFnZQogIH0KICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1taW4pXSB9IHsKICAgIHNldCBtaW5fY2FzZV92b2x0YWdlICRrZXlzKC1taW4pCiAgICBjaGVja19mbG9hdCAiLW1pbiIgJG1pbl9jYXNlX3ZvbHRhZ2UKICAgIHNldF92b2x0YWdlX2dsb2JhbCAibWluIiAkbWluX2Nhc2Vfdm9sdGFnZQogICAgZm9yZWFjaCBuZXQgJG5ldHMgewogICAgICBzZXRfdm9sdGFnZV9uZXQgJG5ldCAibWluIiAkbWluX2Nhc2Vfdm9sdGFnZQogICAgfQogIH0KfQoKZGVmaW5lX2NtZF9hcmdzICJjcmVhdGVfdm9sdGFnZV9hcmVhIiBcCiAge1stbmFtZSBuYW1lXSBbLWNvb3JkaW5hdGUgY29vcmRpbmF0ZXNdIFstZ3VhcmRfYmFuZF94IGd1YXJkX3hdXAogICAgIFstZ3VhcmRfYmFuZF95IGd1YXJkX3ldIGNlbGxzIH0KCnByb2MgY3JlYXRlX3ZvbHRhZ2VfYXJlYSB7IGFyZ3MgfSB7CiAgIyBpZ25vcmVkCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAic2V0X2xldmVsX3NoaWZ0ZXJfc3RyYXRlZ3kiIHtbLXJ1bGUgcnVsZV90eXBlXX0KCnByb2Mgc2V0X2xldmVsX3NoaWZ0ZXJfc3RyYXRlZ3kgeyBhcmdzIH0gewogICMgaWdub3JlZAp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF9sZXZlbF9zaGlmdGVyX3RocmVzaG9sZCIge1stdm9sdGFnZSB2b2x0XX0KCnByb2Mgc2V0X2xldmVsX3NoaWZ0ZXJfdGhyZXNob2xkIHsgYXJncyB9IHsKICAjIGlnbm9yZWQKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJzZXRfbWF4X2R5bmFtaWNfcG93ZXIiIHtwb3dlciBbdW5pdF19Cgpwcm9jIHNldF9tYXhfZHluYW1pY19wb3dlciB7IHBvd2VyIHt1bml0IHt9fSB9IHsKICAjIGlnbm9yZWQKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJzZXRfbWF4X2xlYWthZ2VfcG93ZXIiIHtwb3dlciBbdW5pdF19Cgpwcm9jIHNldF9tYXhfbGVha2FnZV9wb3dlciB7IHBvd2VyIHt1bml0IHt9fSB9IHsKICAjIGlnbm9yZWQKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojCiMgTm9uLVNEQyBjb21tYW5kcwojCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAiZGVmaW5lX2Nvcm5lcnMiIHsgY29ybmVyMSBbY29ybmVyMl0uLi4gfQoKcHJvYyBkZWZpbmVfY29ybmVycyB7IGFyZ3MgfSB7CiAgaWYgeyBbZ2V0X2xpYnMgLXF1aWV0ICpdICE9IHt9IH0gewogICAgc3RhX2Vycm9yIDQ4MiAiZGVmaW5lX2Nvcm5lcnMgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIHJlYWRfbGliZXJ0eS4iCiAgfQogIGlmIHsgW2xsZW5ndGggJGFyZ3NdID09IDAgfSB7IAogICAgc3RhX2Vycm9yIDU3NyAiZGVmaW5lX2Nvcm5lcnMgbXVzdCBkZWZpbmUgYXQgbGVhc3Qgb25lIGNvcm5lci4iCiAgfQogIGRlZmluZV9jb3JuZXJzX2NtZCAkYXJncwp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF9wdnQiXAogIHtpbnN0cyBbLW1pbl0gWy1tYXhdIFstcHJvY2VzcyBwcm9jZXNzXSBbLXZvbHRhZ2Ugdm9sdGFnZV1cCiAgICAgWy10ZW1wZXJhdHVyZSB0ZW1wZXJhdHVyZV19Cgpwcm9jIHNldF9wdnQgeyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJzZXRfcHZ0IiBhcmdzIFwKICAgIGtleXMgey1wcm9jZXNzIC12b2x0YWdlIC10ZW1wZXJhdHVyZX0gZmxhZ3Mgey1taW4gLW1heH0KICAKICBzZXQgbWluX21heCBbcGFyc2VfbWluX21heF9hbGxfZmxhZ3MgZmxhZ3NdCiAgY2hlY2tfYXJnY19lcTEgInNldF9wdnQiICRhcmdzCiAgc2V0IGluc3RzIFtnZXRfaW5zdGFuY2VzX2Vycm9yICJpbnN0YW5jZXMiIFtsaW5kZXggJGFyZ3MgMF1dCiAgCiAgaWYgeyAkbWluX21heCA9PSAibWluX21heCIgfSB7CiAgICBzZXRfcHZ0X21pbl9tYXggJGluc3RzICJtaW4iIGtleXMKICAgIHNldF9wdnRfbWluX21heCAkaW5zdHMgIm1heCIga2V5cwogIH0gZWxzZSB7CiAgICBzZXRfcHZ0X21pbl9tYXggJGluc3RzICRtaW5fbWF4IGtleXMKICB9Cn0KCnByb2Mgc2V0X3B2dF9taW5fbWF4IHsgaW5zdHMgbWluX21heCBrZXlzX3ZhciB9IHsKICB1cHZhciAxICRrZXlzX3ZhciBrZXlzCiAgc2V0IG9wX2NvbmQgW29wZXJhdGluZ19jb25kaXRpb25zICRtaW5fbWF4XQogIGlmIHsgJG9wX2NvbmQgPT0gIk5VTEwiIH0gewogICAgc2V0IG9wX2NvbmQgW2RlZmF1bHRfb3BlcmF0aW5nX2NvbmRpdGlvbnNdCiAgfQogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1wcm9jZXNzKV0gewogICAgc2V0IHByb2Nlc3MgJGtleXMoLXByb2Nlc3MpCiAgICBjaGVja19mbG9hdCAiLXByb2Nlc3MiICRwcm9jZXNzCiAgfSBlbHNlIHsKICAgIHNldCBwcm9jZXNzIFskb3BfY29uZCBwcm9jZXNzXQogIH0KICBpZiBbaW5mbyBleGlzdHMga2V5cygtdm9sdGFnZSldIHsKICAgIHNldCB2b2x0YWdlICRrZXlzKC12b2x0YWdlKQogICAgY2hlY2tfZmxvYXQgIi12b2x0YWdlIiAkdm9sdGFnZQogIH0gZWxzZSB7CiAgICBzZXQgdm9sdGFnZSBbJG9wX2NvbmQgdm9sdGFnZV0KICB9CiAgaWYgW2luZm8gZXhpc3RzIGtleXMoLXRlbXBlcmF0dXJlKV0gewogICAgc2V0IHRlbXBlcmF0dXJlICRrZXlzKC10ZW1wZXJhdHVyZSkKICAgIGNoZWNrX2Zsb2F0ICItdGVtcGVyYXR1cmUiICR0ZW1wZXJhdHVyZQogIH0gZWxzZSB7CiAgICBzZXQgdGVtcGVyYXR1cmUgWyRvcF9jb25kIHRlbXBlcmF0dXJlXQogIH0KICAKICBmb3JlYWNoIGluc3QgJGluc3RzIHsKICAgIHNldF9pbnN0YW5jZV9wdnQgJGluc3QgJG1pbl9tYXggJHByb2Nlc3MgJHZvbHRhZ2UgJHRlbXBlcmF0dXJlCiAgfQp9Cgpwcm9jIGRlZmF1bHRfb3BlcmF0aW5nX2NvbmRpdGlvbnMge30gewogIHNldCBmb3VuZCAwCiAgc2V0IGxpYl9pdGVyIFtsaWJlcnR5X2xpYnJhcnlfaXRlcmF0b3JdCiAgd2hpbGUge1skbGliX2l0ZXIgaGFzX25leHRdfSB7CiAgICBzZXQgbGliIFskbGliX2l0ZXIgbmV4dF0KICAgIHNldCBvcF9jb25kIFskbGliIGRlZmF1bHRfb3BlcmF0aW5nX2NvbmRpdGlvbnNdCiAgICBpZiB7ICRvcF9jb25kICE9ICJOVUxMIiB9IHsKICAgICAgc2V0IGZvdW5kIDEKICAgICAgYnJlYWsKICAgIH0KICB9CiAgJGxpYl9pdGVyIGZpbmlzaAogIGlmIHsgISRmb3VuZCB9IHsKICAgIHN0YV9lcnJvciA1MDAgIm5vIGRlZmF1bHQgb3BlcmF0aW5nIGNvbmRpdGlvbnMgZm91bmQuIgogIH0KICByZXR1cm4gJG9wX2NvbmQKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKcHJvYyBjZWxsX3JlZ2V4cCB7fSB7CiAgZ2xvYmFsIGhpZXJhcmNoeV9zZXBhcmF0b3IKICByZXR1cm4gW2NlbGxfcmVnZXhwX2hzYyAkaGllcmFyY2h5X3NlcGFyYXRvcl0KfQoKcHJvYyBjZWxsX3JlZ2V4cF9oc2MgeyBoc2MgfSB7CiAgcmV0dXJuICJeKFxbXiR7aHNjfVxdKykke2hzY30oXFteJHtoc2N9XF0rKSQiCn0KCnByb2MgcG9ydF9yZWdleHAge30gewogIGdsb2JhbCBoaWVyYXJjaHlfc2VwYXJhdG9yCiAgcmV0dXJuIFtwb3J0X3JlZ2V4cF9oc2MgJGhpZXJhcmNoeV9zZXBhcmF0b3JdCn0KCnByb2MgcG9ydF9yZWdleHBfaHNjIHsgaHNjIH0gewogIHJldHVybiAiXihcW14ke2hzY31cXSspJHtoc2N9KFxbXiR7aHNjfVxdKykke2hzY30oXFteJHtoc2N9XF0rKSQiCn0KCiMgc3RhIG5hbWVzcGFjZSBlbmQuCn0KIyBPcGVuU1RBLCBTdGF0aWMgVGltaW5nIEFuYWx5emVyCiMgQ29weXJpZ2h0IChjKSAyMDI1LCBQYXJhbGxheCBTb2Z0d2FyZSwgSW5jLgojIAojIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5CiMgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkKIyB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvcgojIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCiMgCiMgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiMgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKIyBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGUKIyBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgojIAojIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCiMgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCiMgCiMgVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QKIyBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiMgCiMgQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUKIyBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiMgCiMgVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4KCm5hbWVzcGFjZSBldmFsIHN0YSB7CgpkZWZpbmVfY21kX2FyZ3MgInJlYWRfc2RmIiBcCiAge1stcGF0aCBwYXRoXSBbLWNvcm5lciBjb3JuZXJdXAogICAgIFstY29uZF91c2UgbWlufG1heHxtaW5fbWF4XVwKICAgICBbLXVuZXNjYXBlZF9kaXZpZGVyc10gZmlsZW5hbWV9Cgpwcm9jX3JlZGlyZWN0IHJlYWRfc2RmIHsKICBwYXJzZV9rZXlfYXJncyAicmVhZF9zZGYiIGFyZ3MgXAogICAga2V5cyB7LXBhdGggLWNvcm5lciAtY29uZF91c2UgLWFuYWx5c2lzX3R5cGV9IFwKICAgIGZsYWdzIHstdW5lc2NhcGVkX2RpdmlkZXJzIC1pbmNyZW1lbnRhbF9vbmx5fQoKICBjaGVja19hcmdjX2VxMSAicmVhZF9zZGYiICRhcmdzCiAgc2V0IGZpbGVuYW1lIFtmaWxlIG5hdGl2ZW5hbWUgW2xpbmRleCAkYXJncyAwXV0KICBzZXQgcGF0aCAiIgogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1wYXRoKV0gewogICAgc2V0IHBhdGggJGtleXMoLXBhdGgpCiAgfQogIHNldCBjb3JuZXIgW3BhcnNlX2Nvcm5lciBrZXlzXQoKICBzZXQgY29uZF91c2UgIk5VTEwiCiAgaWYgW2luZm8gZXhpc3RzIGtleXMoLWNvbmRfdXNlKV0gewogICAgc2V0IGNvbmRfdXNlICRrZXlzKC1jb25kX3VzZSkKICAgIGlmIHsgJGNvbmRfdXNlICE9ICJtaW4iICYmICRjb25kX3VzZSAhPSAibWF4IiAmJiAkY29uZF91c2UgIT0gIm1pbl9tYXgiIH0gewogICAgICBzdGFfd2FybiA2MjAgIi1jb25kX3VzZSBtdXN0IGJlIG1pbiwgbWF4IG9yIG1pbl9tYXguIgogICAgICBzZXQgY29uZF91c2UgIk5VTEwiCiAgICB9CiAgICBpZiB7ICRjb25kX3VzZSA9PSAibWluX21heCIgXAoJICAgJiYgeyBbb3BlcmF0aW5nX2NvbmRpdGlvbl9hbmFseXNpc190eXBlXSA9PSAic2luZ2xlIiB9fSB7CiAgICAgIHN0YV9lcnJvciA2MjEgIi1jb25kX3VzZSBtaW5fbWF4IGNhbm5vdCBiZSB1c2VkIHdpdGggYW5hbHlzaXMgdHlwZSBzaW5nbGUuIgogICAgfQogIH0KCiAgc2V0IHVuZXNjYXBlZF9kaXZpZGVycyBbaW5mbyBleGlzdHMgZmxhZ3MoLXVuZXNjYXBlZF9kaXZpZGVycyldCiAgc2V0IGluY3JlbWVudGFsX29ubHkgW2luZm8gZXhpc3RzIGZsYWdzKC1pbmNyZW1lbnRhbF9vbmx5KV0KICByZWFkX3NkZl9maWxlICRmaWxlbmFtZSAkcGF0aCAkY29ybmVyICR1bmVzY2FwZWRfZGl2aWRlcnMgXAogICAgJGluY3JlbWVudGFsX29ubHkgJGNvbmRfdXNlCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAicmVwb3J0X2Fubm90YXRlZF9kZWxheSIgXAogIHtbLWNlbGxdIFstbmV0XSBbLWZyb21faW5fcG9ydHNdIFstdG9fb3V0X3BvcnRzXSBbLW1heF9saW5lcyBsaW5lc11cCiAgICAgWy1yZXBvcnRfYW5ub3RhdGVkXSBbLXJlcG9ydF91bmFubm90YXRlZF0gWy1jb25zdGFudF9hcmNzXX0KCnByb2NfcmVkaXJlY3QgcmVwb3J0X2Fubm90YXRlZF9kZWxheSB7CiAgcGFyc2Vfa2V5X2FyZ3MgInJlcG9ydF9hbm5vdGF0ZWRfZGVsYXkiIGFyZ3Mga2V5cyB7LW1heF9saW5lc30gXAogICAgZmxhZ3Mgey1jZWxsIC1uZXQgLWZyb21faW5fcG9ydHMgLXRvX291dF9wb3J0cyAgXAogICAgICAgICAgICAgLXJlcG9ydF9hbm5vdGF0ZWQgLXJlcG9ydF91bmFubm90YXRlZCAtY29uc3RhbnRfYXJjcyBcCiAgICAgICAgICAgICAtbGlzdF9ub3RfYW5ub3RhdGVkIC1saXN0X2Fubm90YXRlZH0KICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtY2VsbCldIHx8IFtpbmZvIGV4aXN0cyBmbGFncygtbmV0KV0gXAoJIHx8IFtpbmZvIGV4aXN0cyBmbGFncygtZnJvbV9pbl9wb3J0cyldIFwKCSB8fCBbaW5mbyBleGlzdHMgZmxhZ3MoLXRvX291dF9wb3J0cyldIH0gewogICAgc2V0IHJlcG9ydF9jZWxscyBbaW5mbyBleGlzdHMgZmxhZ3MoLWNlbGwpXQogICAgc2V0IHJlcG9ydF9uZXRzIFtpbmZvIGV4aXN0cyBmbGFncygtbmV0KV0KICAgIHNldCByZXBvcnRfaW5fbmV0cyBbaW5mbyBleGlzdHMgZmxhZ3MoLWZyb21faW5fcG9ydHMpXQogICAgc2V0IHJlcG9ydF9vdXRfbmV0cyBbaW5mbyBleGlzdHMgZmxhZ3MoLXRvX291dF9wb3J0cyldCiAgfSBlbHNlIHsKICAgIHNldCByZXBvcnRfY2VsbHMgMQogICAgc2V0IHJlcG9ydF9uZXRzIDEKICAgIHNldCByZXBvcnRfaW5fbmV0cyAxCiAgICBzZXQgcmVwb3J0X291dF9uZXRzIDEKICB9CgogIHNldCBtYXhfbGluZXMgMAogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLW1heF9saW5lcyldIH0gewogICAgc2V0IG1heF9saW5lcyAka2V5cygtbWF4X2xpbmVzKQogICAgY2hlY2tfcG9zaXRpdmVfaW50ZWdlciAiLW1heF9saW5lcyIgJG1heF9saW5lcwogIH0KCiAgc2V0IHJlcG9ydF9hbm5vdGF0ZWQgW2luZm8gZXhpc3RzIGZsYWdzKC1yZXBvcnRfYW5ub3RhdGVkKV0KICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtbGlzdF9hbm5vdGF0ZWQpXSB9IHsKICAgICMgRGVwcmVjYXRlZCAwNS8yNi8yMDI1CiAgICBzdGFfd2FybiA2MjQgIi1saXN0X2Fubm90YXRlZCBpcyBkZXByZWNhdGVkLiBVc2UgLXJlcG9ydF9hbm5vdGF0ZWQuIgogICAgc2V0IHJlcG9ydF9hbm5vdGF0ZWQgMQogIH0KICBzZXQgcmVwb3J0X3VuYW5ub3RhdGVkIFtpbmZvIGV4aXN0cyBmbGFncygtcmVwb3J0X3VuYW5ub3RhdGVkKV0KICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtbGlzdF9ub3RfYW5ub3RhdGVkKV0gfSB7CiAgICAjIERlcHJlY2F0ZWQgMDUvMjYvMjAyNQogICAgc3RhX3dhcm4gNjI1ICAiLWxpc3Rfbm90X2Fubm90YXRlZCBpcyBkZXByZWNhdGVkLiBVc2UgLXJlcG9ydF91bmFubm90YXRlZC4iCiAgICBzZXQgcmVwb3J0X3VuYW5ub3RhdGVkIDEKICB9CgogIHJlcG9ydF9hbm5vdGF0ZWRfZGVsYXlfY21kICRyZXBvcnRfY2VsbHMgJHJlcG9ydF9uZXRzIFwKICAgICRyZXBvcnRfaW5fbmV0cyAkcmVwb3J0X291dF9uZXRzIFwKICAgICRtYXhfbGluZXMgJHJlcG9ydF9hbm5vdGF0ZWQgJHJlcG9ydF91bmFubm90YXRlZCBcCiAgICBbaW5mbyBleGlzdHMgZmxhZ3MoLWNvbnN0YW50X2FyY3MpXQp9CgpkZWZpbmVfY21kX2FyZ3MgInJlcG9ydF9hbm5vdGF0ZWRfY2hlY2siIFwKICB7Wy1zZXR1cF0gWy1ob2xkXSBbLXJlY292ZXJ5XSBbLXJlbW92YWxdIFstbm9jaGFuZ2VdIFstd2lkdGhdIFstcGVyaW9kXVwKICAgICBbLW1heF9za2V3XSBbLW1heF9saW5lcyBsaW5lc10gWy1yZXBvcnRfYW5ub3RhdGVkXSBbLXJlcG9ydF91bmFubm90YXRlZF1cCiAgICAgWy1jb25zdGFudF9hcmNzXX0KCnByb2NfcmVkaXJlY3QgcmVwb3J0X2Fubm90YXRlZF9jaGVjayB7CiAgcGFyc2Vfa2V5X2FyZ3MgInJlcG9ydF9hbm5vdGF0ZWRfY2hlY2siIGFyZ3Mga2V5cyB7LW1heF9saW5lc30gXAogICAgZmxhZ3Mgey1zZXR1cCAtaG9sZCAtcmVjb3ZlcnkgLXJlbW92YWwgLW5vY2hhbmdlIC13aWR0aCAtcGVyaW9kIFwKCSAgICAgLW1heF9za2V3IC1yZXBvcnRfYW5ub3RhdGVkIC1yZXBvcnRfdW5hbm5vdGF0ZWQgLWNvbnN0YW50X2FyY3MgXAogICAgICAgICAgICAgLWxpc3RfYW5ub3RhdGVkIC1saXN0X25vdF9hbm5vdGF0ZWR9CiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLXNldHVwKV0gfHwgW2luZm8gZXhpc3RzIGZsYWdzKC1ob2xkKV0gXAoJIHx8IFtpbmZvIGV4aXN0cyBmbGFncygtcmVjb3ZlcnkpXSB8fCBbaW5mbyBleGlzdHMgZmxhZ3MoLXJlbW92YWwpXSBcCgkgfHwgW2luZm8gZXhpc3RzIGZsYWdzKC1ub2NoYW5nZSldIHx8IFtpbmZvIGV4aXN0cyBmbGFncygtd2lkdGgpXSBcCgkgfHwgW2luZm8gZXhpc3RzIGZsYWdzKC1wZXJpb2QpXSB8fCBbaW5mbyBleGlzdHMgZmxhZ3MoLW1heF9za2V3KV0gfSB7CiAgICBzZXQgcmVwb3J0X3NldHVwIFtpbmZvIGV4aXN0cyBmbGFncygtc2V0dXApXQogICAgc2V0IHJlcG9ydF9ob2xkIFtpbmZvIGV4aXN0cyBmbGFncygtaG9sZCldCiAgICBzZXQgcmVwb3J0X3JlY292ZXJ5IFtpbmZvIGV4aXN0cyBmbGFncygtcmVjb3ZlcnkpXQogICAgc2V0IHJlcG9ydF9yZW1vdmFsIFtpbmZvIGV4aXN0cyBmbGFncygtcmVtb3ZhbCldCiAgICBzZXQgcmVwb3J0X25vY2hhbmdlIFtpbmZvIGV4aXN0cyBmbGFncygtbm9jaGFuZ2UpXQogICAgc2V0IHJlcG9ydF93aWR0aCBbaW5mbyBleGlzdHMgZmxhZ3MoLXdpZHRoKV0KICAgIHNldCByZXBvcnRfcGVyaW9kIFtpbmZvIGV4aXN0cyBmbGFncygtcGVyaW9kKV0KICAgIHNldCByZXBvcnRfbWF4X3NrZXcgW2luZm8gZXhpc3RzIGZsYWdzKC1tYXhfc2tldyldCiAgfSBlbHNlIHsKICAgIHNldCByZXBvcnRfc2V0dXAgMQogICAgc2V0IHJlcG9ydF9ob2xkIDEKICAgIHNldCByZXBvcnRfcmVjb3ZlcnkgMQogICAgc2V0IHJlcG9ydF9yZW1vdmFsIDEKICAgIHNldCByZXBvcnRfbm9jaGFuZ2UgMQogICAgc2V0IHJlcG9ydF93aWR0aCAxCiAgICBzZXQgcmVwb3J0X3BlcmlvZCAxCiAgICBzZXQgcmVwb3J0X21heF9za2V3IDEKICB9CgogIHNldCBtYXhfbGluZXMgMAogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLW1heF9saW5lcyldIH0gewogICAgc2V0IG1heF9saW5lcyAka2V5cygtbWF4X2xpbmVzKQogICAgY2hlY2tfcG9zaXRpdmVfaW50ZWdlciAiLW1heF9saW5lcyIgJG1heF9saW5lcwogIH0KCiAgc2V0IHJlcG9ydF9hbm5vdGF0ZWQgW2luZm8gZXhpc3RzIGZsYWdzKC1yZXBvcnRfYW5ub3RhdGVkKV0KICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtbGlzdF9hbm5vdGF0ZWQpXSB9IHsKICAgICMgRGVwcmVjYXRlZCAwNS8yNi8yMDI1CiAgICBzdGFfd2FybiA2MjYgIi1saXN0X2Fubm90YXRlZCBpcyBkZXByZWNhdGVkLiBVc2UgLXJlcG9ydF9hbm5vdGF0ZWQuIgogICAgc2V0IHJlcG9ydF9hbm5vdGF0ZWQgMQogIH0KICBzZXQgcmVwb3J0X3VuYW5ub3RhdGVkIFtpbmZvIGV4aXN0cyBmbGFncygtcmVwb3J0X3VuYW5ub3RhdGVkKV0KICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtbGlzdF9ub3RfYW5ub3RhdGVkKV0gfSB7CiAgICAjIERlcHJlY2F0ZWQgMDUvMjYvMjAyNQogICAgc3RhX3dhcm4gNjI3ICItbGlzdF9ub3RfYW5ub3RhdGVkIGlzIGRlcHJlY2F0ZWQuIFVzZSAtcmVwb3J0X3VuYW5ub3RhdGVkLiIKICAgIHNldCByZXBvcnRfdW5hbm5vdGF0ZWQgMQogIH0KCiAgcmVwb3J0X2Fubm90YXRlZF9jaGVja19jbWQgJHJlcG9ydF9zZXR1cCAkcmVwb3J0X2hvbGQgXAogICAgJHJlcG9ydF9yZWNvdmVyeSAkcmVwb3J0X3JlbW92YWwgJHJlcG9ydF9ub2NoYW5nZSBcCiAgICAkcmVwb3J0X3dpZHRoICRyZXBvcnRfcGVyaW9kICRyZXBvcnRfbWF4X3NrZXcgXAogICAgJG1heF9saW5lcyAkcmVwb3J0X2Fubm90YXRlZCAkcmVwb3J0X3VuYW5ub3RhdGVkIFwKICAgIFtpbmZvIGV4aXN0cyBmbGFncygtY29uc3RhbnRfYXJjcyldCn0KCmRlZmluZV9jbWRfYXJncyAid3JpdGVfc2RmIiBcCiAge1stY29ybmVyIGNvcm5lcl0gWy1kaXZpZGVyIC98Ll0gWy1pbmNsdWRlX3R5cF1cCiAgICAgWy1kaWdpdHMgZGlnaXRzXSBbLWd6aXBdIFstbm9fdGltZXN0YW1wXSBbLW5vX3ZlcnNpb25dIGZpbGVuYW1lfQoKcHJvY19yZWRpcmVjdCB3cml0ZV9zZGYgewogIHBhcnNlX2tleV9hcmdzICJ3cml0ZV9zZGYiIGFyZ3MgXAogICAga2V5cyB7LWNvcm5lciAtZGl2aWRlciAtZGlnaXRzIC1zaWduaWZpY2FudF9kaWdpdHN9IFwKICAgIGZsYWdzIHstaW5jbHVkZV90eXAgLWd6aXAgLW5vX3RpbWVzdGFtcCAtbm9fdmVyc2lvbn0KICBjaGVja19hcmdjX2VxMSAid3JpdGVfc2RmIiAkYXJncwogIHNldCBjb3JuZXIgW3BhcnNlX2Nvcm5lciBrZXlzXQogIHNldCBmaWxlbmFtZSBbZmlsZSBuYXRpdmVuYW1lIFtsaW5kZXggJGFyZ3MgMF1dCiAgc2V0IGRpdmlkZXIgIi8iCiAgaWYgW2luZm8gZXhpc3RzIGtleXMoLWRpdmlkZXIpXSB7CiAgICBzZXQgZGl2aWRlciAka2V5cygtZGl2aWRlcikKICAgIGlmIHsgISgkZGl2aWRlciA9PSAiLyIgfHwgJGRpdmlkZXIgPT0gIi4iKSB9IHsKICAgICAgc3RhX2Vycm9yIDYyMyAiU0RGIC1kaXZpZGVyIG11c3QgYmUgLyBvciAuIgogICAgfQogIH0KICBzZXQgZGlnaXRzIDMKICBpZiBbaW5mbyBleGlzdHMga2V5cygtZGlnaXRzKV0gewogICAgc2V0IGRpZ2l0cyAka2V5cygtZGlnaXRzKQogICAgY2hlY2tfcG9zaXRpdmVfaW50ZWdlciAiLWRpZ2l0cyIgJGRpZ2l0cwogIH0KCiAgc2V0IGluY2x1ZGVfdHlwIFtpbmZvIGV4aXN0cyBmbGFncygtaW5jbHVkZV90eXApXQogIHNldCBub190aW1lc3RhbXAgW2luZm8gZXhpc3RzIGZsYWdzKC1ub190aW1lc3RhbXApXQogIHNldCBub192ZXJzaW9uIFtpbmZvIGV4aXN0cyBmbGFncygtbm9fdmVyc2lvbildCiAgc2V0IGd6aXAgW2luZm8gZXhpc3RzIGZsYWdzKC1nemlwKV0KICB3cml0ZV9zZGZfY21kICRmaWxlbmFtZSAkY29ybmVyICRkaXZpZGVyICRpbmNsdWRlX3R5cCAkZGlnaXRzICRnemlwIFwKICAgICRub190aW1lc3RhbXAgJG5vX3ZlcnNpb24KfQoKIyBzdGEgbmFtZXNwYWNlIGVuZAp9CiMgT3BlblNUQSwgU3RhdGljIFRpbWluZyBBbmFseXplcgojIENvcHlyaWdodCAoYykgMjAyNSwgUGFyYWxsYXggU29mdHdhcmUsIEluYy4KIyAKIyBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeQojIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CiMgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3IKIyAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLgojIAojIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAojIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiMgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiBTZWUgdGhlCiMgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KIyAKIyBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQojIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiBJZiBub3QsIHNlZSA8aHR0cHM6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LgojIAojIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90CiMgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgojIAojIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlCiMgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLgojIAojIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uCgpuYW1lc3BhY2UgZXZhbCBzdGEgewoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojCiMgU2VhcmNoIGRlYnVnZ2luZy9wcm9iaW5nIGNvbW1hbmRzCiMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJjaGVja19zZXR1cCIgXAogIHsgWy12ZXJib3NlXSBbLW5vX2lucHV0X2RlbGF5XSBbLW5vX291dHB1dF9kZWxheV1cCiAgICAgIFstbXVsdGlwbGVfY2xvY2tdIFstbm9fY2xvY2tdXAogICAgICBbLXVuY29uc3RyYWluZWRfZW5kcG9pbnRzXSBbLWxvb3BzXSBbLWdlbmVyYXRlZF9jbG9ja3NdXAogICAgICBbPiBmaWxlbmFtZV0gWz4+IGZpbGVuYW1lXSB9Cgpwcm9jX3JlZGlyZWN0IGNoZWNrX3NldHVwIHsKICBjaGVja19zZXR1cF9jbWQgImNoZWNrX3NldHVwIiAkYXJncwp9Cgpwcm9jIGNoZWNrX3NldHVwX2NtZCB7IGNtZCBjbWRfYXJncyB9IHsKICBwYXJzZV9rZXlfYXJncyAkY21kIGNtZF9hcmdzIGtleXMge30gZmxhZ3Mgey12ZXJib3NlfSAwCiAgIyBXaGVuIG5vdGhpbmcgaXMgZXZlcnl0aGluZy4KICBpZiB7ICRjbWRfYXJncyA9PSB7fSB9IHsKICAgIHNldCB1bmNvbnN0cmFpbmVkX2VuZHBvaW50cyAxCiAgICBzZXQgbXVsdGlwbGVfY2xvY2sgMQogICAgc2V0IG5vX2Nsb2NrIDEKICAgIHNldCBub19pbnB1dF9kZWxheSAxCiAgICBzZXQgbm9fb3V0cHV0X2RlbGF5IDEKICAgIHNldCBsb29wcyAxCiAgICBzZXQgZ2VuZXJhdGVkX2Nsb2NrcyAxCiAgfSBlbHNlIHsKICAgIHBhcnNlX2tleV9hcmdzICRjbWQgY21kX2FyZ3Mga2V5cyB7fSBcCiAgICAgIGZsYWdzIHstbm9faW5wdXRfZGVsYXkgLW5vX291dHB1dF9kZWxheSAtbXVsdGlwbGVfY2xvY2sgLW5vX2Nsb2NrIFwKCSAgICAgICAgLXVuY29uc3RyYWluZWRfZW5kcG9pbnRzIC1sb29wcyAtZ2VuZXJhdGVkX2Nsb2Nrc30KICAgIHNldCBub19pbnB1dF9kZWxheSBbaW5mbyBleGlzdHMgZmxhZ3MoLW5vX2lucHV0X2RlbGF5KV0KICAgIHNldCBub19vdXRwdXRfZGVsYXkgW2luZm8gZXhpc3RzIGZsYWdzKC1ub19vdXRwdXRfZGVsYXkpXQogICAgc2V0IG11bHRpcGxlX2Nsb2NrIFtpbmZvIGV4aXN0cyBmbGFncygtbXVsdGlwbGVfY2xvY2spXQogICAgc2V0IG5vX2Nsb2NrIFtpbmZvIGV4aXN0cyBmbGFncygtbm9fY2xvY2spXQogICAgc2V0IHVuY29uc3RyYWluZWRfZW5kcG9pbnRzIFtpbmZvIGV4aXN0cyBmbGFncygtdW5jb25zdHJhaW5lZF9lbmRwb2ludHMpXQogICAgc2V0IGxvb3BzIFtpbmZvIGV4aXN0cyBmbGFncygtbG9vcHMpXQogICAgc2V0IGdlbmVyYXRlZF9jbG9ja3MgW2luZm8gZXhpc3RzIGZsYWdzKC1nZW5lcmF0ZWRfY2xvY2tzKV0KICB9CiAgc2V0IHZlcmJvc2UgW2luZm8gZXhpc3RzIGZsYWdzKC12ZXJib3NlKV0KICBzZXQgZXJyb3JzIFtjaGVja190aW1pbmdfY21kICRub19pbnB1dF9kZWxheSAkbm9fb3V0cHV0X2RlbGF5IFwKCQkkbXVsdGlwbGVfY2xvY2sgJG5vX2Nsb2NrIFwKCQkkdW5jb25zdHJhaW5lZF9lbmRwb2ludHMgJGxvb3BzIFwKCQkkZ2VuZXJhdGVkX2Nsb2Nrc10KICBmb3JlYWNoIGVycm9yICRlcnJvcnMgewogICAgIyBGaXJzdCBsaW5lIGlzIHRoZSBlcnJvciBtc2cuCiAgICByZXBvcnRfbGluZSBbbGluZGV4ICRlcnJvciAwXQogICAgaWYgeyAkdmVyYm9zZSB9IHsKICAgICAgZm9yZWFjaCBvYmogW2xyYW5nZSAkZXJyb3IgMSBlbmRdIHsKCXJlcG9ydF9saW5lICIgICRvYmoiCiAgICAgIH0KICAgIH0KICB9CiAgIyByZXR1cm4gdmFsdWUKICBleHByIFtsbGVuZ3RoICRlcnJvcnNdID09IDAKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKIyBOb3QgYSBjb21tYW5kIGJlY2F1c2UgdXNlcnMgaGF2ZSBubyByZWFzb24gdG8gZXZlciBjYWxsIHRoaXMuCiMgSXQgaXMgb25seSB1c2VmdWwgZm9yIGRlYnVnZ2luZyBpbmNyZW1lbnRhbCB0aW1pbmcgdXBkYXRlcy4KcHJvYyBmaW5kX3RpbWluZyB7IGFyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgImZpbmRfdGltaW5nIiBhcmdzIGtleXMge30gZmxhZ3Mgey1mdWxsX3VwZGF0ZX0KICBmaW5kX3RpbWluZ19jbWQgW2luZm8gZXhpc3RzIGZsYWdzKC1mdWxsX3VwZGF0ZSldCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAiZmluZF90aW1pbmdfcGF0aHMiIFwKICB7Wy1mcm9tIGZyb21fbGlzdHwtcmlzZV9mcm9tIGZyb21fbGlzdHwtZmFsbF9mcm9tIGZyb21fbGlzdF1cCiAgICAgWy10aHJvdWdoIHRocm91Z2hfbGlzdHwtcmlzZV90aHJvdWdoIHRocm91Z2hfbGlzdHwtZmFsbF90aHJvdWdoIHRocm91Z2hfbGlzdF1cCiAgICAgWy10byB0b19saXN0fC1yaXNlX3RvIHRvX2xpc3R8LWZhbGxfdG8gdG9fbGlzdF1cCiAgICAgWy1wYXRoX2RlbGF5IG1pbnxtaW5fcmlzZXxtaW5fZmFsbHxtYXh8bWF4X3Jpc2V8bWF4X2ZhbGx8bWluX21heF1cCiAgICAgWy11bmNvbnN0cmFpbmVkXQogICAgIFstY29ybmVyIGNvcm5lcl1cCiAgICAgWy1ncm91cF9wYXRoX2NvdW50IHBhdGhfY291bnRdIFwKICAgICBbLWVuZHBvaW50X3BhdGhfY291bnQgcGF0aF9jb3VudF1cCiAgICAgWy11bmlxdWVfcGF0aHNfdG9fZW5kcG9pbnRdXAogICAgIFstc2xhY2tfbWF4IHNsYWNrX21heF1cCiAgICAgWy1zbGFja19taW4gc2xhY2tfbWluXVwKICAgICBbLXNvcnRfYnlfc2xhY2tdXAogICAgIFstcGF0aF9ncm91cCBncm91cF9uYW1lXX0KCnByb2MgZmluZF90aW1pbmdfcGF0aHMgeyBhcmdzIH0gewogIHNldCBwYXRoX2VuZHMgW2ZpbmRfdGltaW5nX3BhdGhzX2NtZCAiZmluZF90aW1pbmdfcGF0aHMiIGFyZ3NdCiAgcmV0dXJuICRwYXRoX2VuZHMKfQoKcHJvYyBmaW5kX3RpbWluZ19wYXRoc19jbWQgeyBjbWQgYXJnc192YXIgfSB7CiAgZ2xvYmFsIHN0YV9yZXBvcnRfdW5jb25zdHJhaW5lZF9wYXRocwogIHVwdmFyIDEgJGFyZ3NfdmFyIGFyZ3MKCiAgcGFyc2Vfa2V5X2FyZ3MgJGNtZCBhcmdzIFwKICAgIGtleXMgey1mcm9tIC1yaXNlX2Zyb20gLWZhbGxfZnJvbSAtdG8gLXJpc2VfdG8gLWZhbGxfdG8gXAoJICAgIC1wYXRoX2RlbGF5IC1jb3JuZXIgLWdyb3VwX2NvdW50IC1lbmRwb2ludF9jb3VudCBcCgkgICAgLWdyb3VwX3BhdGhfY291bnQgLWVuZHBvaW50X3BhdGhfY291bnQgXAoJICAgIC1zbGFja19tYXggLXNsYWNrX21pbiAtcGF0aF9ncm91cH0gXAogICAgZmxhZ3Mgey11bmNvbnN0cmFpbmVkIC1zb3J0X2J5X3NsYWNrIC11bmlxdWVfcGF0aHNfdG9fZW5kcG9pbnR9IDAKCiAgc2V0IG1pbl9tYXggIm1heCIKICBzZXQgZW5kX3JmICJyaXNlX2ZhbGwiCiAgaWYgW2luZm8gZXhpc3RzIGtleXMoLXBhdGhfZGVsYXkpXSB7CiAgICBzZXQgbW1fa2V5ICRrZXlzKC1wYXRoX2RlbGF5KQogICAgaWYgeyAkbW1fa2V5ID09ICJtYXhfcmlzZSIgfSB7CiAgICAgIHNldCBtaW5fbWF4ICJtYXgiCiAgICAgIHNldCBlbmRfcmYgInJpc2UiCiAgICB9IGVsc2VpZiB7ICRtbV9rZXkgPT0gIm1heF9mYWxsIiB9IHsKICAgICAgc2V0IG1pbl9tYXggIm1heCIKICAgICAgc2V0IGVuZF9yZiAiZmFsbCIKICAgIH0gZWxzZWlmIHsgJG1tX2tleSA9PSAibWluX3Jpc2UiIH0gewogICAgICBzZXQgbWluX21heCAibWluIgogICAgICBzZXQgZW5kX3JmICJyaXNlIgogICAgfSBlbHNlaWYgeyAkbW1fa2V5ID09ICJtaW5fZmFsbCIgfSB7CiAgICAgIHNldCBtaW5fbWF4ICJtaW4iCiAgICAgIHNldCBlbmRfcmYgImZhbGwiCiAgICB9IGVsc2VpZiB7ICRtbV9rZXkgPT0gIm1pbiIgfHwgJG1tX2tleSA9PSAibWF4IiB8fCAkbW1fa2V5ID09ICJtaW5fbWF4IiB9IHsKICAgICAgc2V0IG1pbl9tYXggJG1tX2tleQogICAgfSBlbHNlIHsKICAgICAgc3RhX2Vycm9yIDUxMCAiJGNtZCAtcGF0aF9kZWxheSBtdXN0IGJlIG1pbiwgbWluX3Jpc2UsIG1pbl9mYWxsLCBtYXgsIG1heF9yaXNlLCBtYXhfZmFsbCBvciBtaW5fbWF4LiIKICAgIH0KICB9CgogIHNldCBhcmdfZXJyb3IgMAogIHNldCBmcm9tIFtwYXJzZV9mcm9tX2FyZyBrZXlzIGFyZ19lcnJvcl0KICBzZXQgdGhydXMgW3BhcnNlX3RocnVzX2FyZyBhcmdzIGFyZ19lcnJvcl0KICBzZXQgdG8gW3BhcnNlX3RvX2FyZzEga2V5cyAkZW5kX3JmIGFyZ19lcnJvcl0KICBpZiB7ICRhcmdfZXJyb3IgfSB7CiAgICBkZWxldGVfZnJvbV90aHJ1c190byAkZnJvbSAkdGhydXMgJHRvCiAgICBzdGFfZXJyb3IgNTExICIkY21kIGNvbW1hbmQgZmFpbGVkLiIKICB9CgogIGNoZWNrX2Zvcl9rZXlfYXJncyAkY21kIGFyZ3MKCiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLXVuY29uc3RyYWluZWQpXSB9IHsKICAgIHNldCB1bmNvbnN0cmFpbmVkIDEKICB9IGVsc2VpZiB7IFtpbmZvIGV4aXN0cyBzdGFfcmVwb3J0X3VuY29uc3RyYWluZWRfcGF0aHNdIH0gewogICAgc2V0IHVuY29uc3RyYWluZWQgJHN0YV9yZXBvcnRfdW5jb25zdHJhaW5lZF9wYXRocwogIH0gZWxzZSB7CiAgICBzZXQgdW5jb25zdHJhaW5lZCAwCiAgfQoKICBzZXQgY29ybmVyIFtwYXJzZV9jb3JuZXJfb3JfYWxsIGtleXNdCgogIHNldCBlbmRwb2ludF9wYXRoX2NvdW50IDEKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1lbmRwb2ludF9jb3VudCldIH0gewogICAgIyBkZXByZWNhdGVkIDIwMjQtMTEtMjIKICAgIHN0YV93YXJuIDUwMiAiJGNtZCAtZW5kcG9pbnRfY291bnQgaXMgZGVwcmVjYXRlZC4gVXNlIC1lbmRwb2ludF9wYXRoX2NvdW50IGluc3RlYWQuIgogICAgc2V0IGVuZHBvaW50X3BhdGhfY291bnQgJGtleXMoLWVuZHBvaW50X2NvdW50KQogIH0KICBpZiBbaW5mbyBleGlzdHMga2V5cygtZW5kcG9pbnRfcGF0aF9jb3VudCldIHsKICAgIHNldCBlbmRwb2ludF9wYXRoX2NvdW50ICRrZXlzKC1lbmRwb2ludF9wYXRoX2NvdW50KQogIH0KICBpZiB7ICRlbmRwb2ludF9wYXRoX2NvdW50IDwgMSB9IHsKICAgIHN0YV9lcnJvciA1MTIgIi1lbmRwb2ludF9wYXRoX2NvdW50IG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLiIKICB9CgogIHNldCBncm91cF9wYXRoX2NvdW50ICRlbmRwb2ludF9wYXRoX2NvdW50CiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtZ3JvdXBfY291bnQpXSB9IHsKICAgICMgZGVwcmVjYXRlZCAyMDI0LTExLTIyCiAgICBzdGFfd2FybiA1MDMgIiRjbWQgLWdyb3VwX2NvdW50IGlzIGRlcHJlY2F0ZWQuIFVzZSAtZ3JvdXBfcGF0aF9jb3VudCBpbnN0ZWFkLiIKICAgIHNldCBncm91cF9wYXRoX2NvdW50ICRrZXlzKC1ncm91cF9jb3VudCkKICB9CiAgaWYgW2luZm8gZXhpc3RzIGtleXMoLWdyb3VwX3BhdGhfY291bnQpXSB7CiAgICBzZXQgZ3JvdXBfcGF0aF9jb3VudCAka2V5cygtZ3JvdXBfcGF0aF9jb3VudCkKICB9CiAgY2hlY2tfcG9zaXRpdmVfaW50ZWdlciAiLWdyb3VwX3BhdGhfY291bnQiICRncm91cF9wYXRoX2NvdW50CiAgaWYgeyAkZ3JvdXBfcGF0aF9jb3VudCA8IDEgfSB7CiAgICBzdGFfZXJyb3IgNTEzICItZ3JvdXBfcGF0aF9jb3VudCBtdXN0IGJlID49IDEuIgogIH0KCiAgc2V0IHVuaXF1ZV9waW5zIFtpbmZvIGV4aXN0cyBmbGFncygtdW5pcXVlX3BhdGhzX3RvX2VuZHBvaW50KV0KCiAgc2V0IHNsYWNrX21pbiAiLTFlKzMwIgogIGlmIFtpbmZvIGV4aXN0IGtleXMoLXNsYWNrX21pbildIHsKICAgIHNldCBzbGFja19taW4gJGtleXMoLXNsYWNrX21pbikKICAgIGNoZWNrX2Zsb2F0ICItc2xhY2tfbWluIiAkc2xhY2tfbWluCiAgICBzZXQgc2xhY2tfbWluIFt0aW1lX3VpX3N0YSAkc2xhY2tfbWluXQogIH0KCiAgc2V0IHNsYWNrX21heCAiMWUrMzAiCiAgaWYgW2luZm8gZXhpc3Qga2V5cygtc2xhY2tfbWF4KV0gewogICAgc2V0IHNsYWNrX21heCAka2V5cygtc2xhY2tfbWF4KQogICAgY2hlY2tfZmxvYXQgIi1zbGFja19tYXgiICRzbGFja19tYXgKICAgIHNldCBzbGFja19tYXggW3RpbWVfdWlfc3RhICRzbGFja19tYXhdCiAgfQoKICBzZXQgc29ydF9ieV9zbGFjayBbaW5mbyBleGlzdHMgZmxhZ3MoLXNvcnRfYnlfc2xhY2spXQoKICBzZXQgZ3JvdXBzIHt9CiAgaWYgW2luZm8gZXhpc3RzIGtleXMoLXBhdGhfZ3JvdXApXSB7CiAgICBzZXQgZ3JvdXBzIFtwYXJzZV9wYXRoX2dyb3VwX2FyZyAka2V5cygtcGF0aF9ncm91cCldCiAgfQoKICBpZiB7IFtsbGVuZ3RoICRhcmdzXSAhPSAwIH0gewogICAgZGVsZXRlX2Zyb21fdGhydXNfdG8gJGZyb20gJHRocnVzICR0bwogICAgc2V0IGFyZyBbbGluZGV4ICRhcmdzIDBdCiAgICBpZiB7IFtpc19rZXl3b3JkX2FyZyAkYXJnXSB9IHsKICAgICAgc3RhX2Vycm9yIDUxNCAiJyRhcmcnIGlzIG5vdCBhIGtub3duIGtleXdvcmQgb3IgZmxhZy4iCiAgICB9IGVsc2UgewogICAgICBzdGFfZXJyb3IgNTE1ICJwb3NpdGlvbmFsIGFyZ3VtZW50cyBub3Qgc3VwcG9ydGVkLiIKICAgIH0KICB9CgogIHNldCBwYXRoX2VuZHMgW2ZpbmRfcGF0aF9lbmRzICRmcm9tICR0aHJ1cyAkdG8gJHVuY29uc3RyYWluZWQgXAoJCSAgICRjb3JuZXIgJG1pbl9tYXggXAoJCSAgICRncm91cF9wYXRoX2NvdW50ICRlbmRwb2ludF9wYXRoX2NvdW50ICR1bmlxdWVfcGlucyBcCgkJICAgJHNsYWNrX21pbiAkc2xhY2tfbWF4IFwKCQkgICAkc29ydF9ieV9zbGFjayAkZ3JvdXBzIFwKCQkgICAxIDEgMSAxIDEgMV0KICByZXR1cm4gJHBhdGhfZW5kcwp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInJlcG9ydF9hcnJpdmFsIiB7cGlufQoKcHJvYyByZXBvcnRfYXJyaXZhbCB7IHBpbiB9IHsKICByZXBvcnRfZGVsYXlzX3dydF9jbGtzICRwaW4gImFycml2YWxzX2Nsa19kZWxheXMiCn0KCnByb2MgcmVwb3J0X2RlbGF5c193cnRfY2xrcyB7IHBpbl9hcmcgd2hhdCB9IHsKICBzZXQgcGluIFtnZXRfcG9ydF9waW5fZXJyb3IgInBpbiIgJHBpbl9hcmddCiAgZm9yZWFjaCB2ZXJ0ZXggWyRwaW4gdmVydGljZXNdIHsKICAgIGlmIHsgJHZlcnRleCAhPSAiTlVMTCIgfSB7CiAgICAgIHJlcG9ydF9kZWxheXNfd3J0X2NsayAkdmVydGV4ICR3aGF0ICJOVUxMIiAicmlzZSIKICAgICAgcmVwb3J0X2RlbGF5c193cnRfY2xrICR2ZXJ0ZXggJHdoYXQgW2RlZmF1bHRfYXJyaXZhbF9jbG9ja10gInJpc2UiCiAgICAgIGZvcmVhY2ggY2xrIFthbGxfY2xvY2tzXSB7CglyZXBvcnRfZGVsYXlzX3dydF9jbGsgJHZlcnRleCAkd2hhdCAkY2xrICJyaXNlIgoJcmVwb3J0X2RlbGF5c193cnRfY2xrICR2ZXJ0ZXggJHdoYXQgJGNsayAiZmFsbCIKICAgICAgfQogICAgfQogIH0KfQoKcHJvYyByZXBvcnRfZGVsYXlzX3dydF9jbGsgeyB2ZXJ0ZXggd2hhdCBjbGsgY2xrX3JmIH0gewogIGdsb2JhbCBzdGFfcmVwb3J0X2RlZmF1bHRfZGlnaXRzCgogIHNldCByaXNlIFskdmVydGV4ICR3aGF0IHJpc2UgJGNsayAkY2xrX3JmICRzdGFfcmVwb3J0X2RlZmF1bHRfZGlnaXRzXQogIHNldCBmYWxsIFskdmVydGV4ICR3aGF0IGZhbGwgJGNsayAkY2xrX3JmICRzdGFfcmVwb3J0X2RlZmF1bHRfZGlnaXRzXQogICMgRmlsdGVyIElORi8tSU5GIGFycml2YWxzLgogIGlmIHsgIShbZGVsYXlzX2FyZV9pbmYgJHJpc2VdICYmIFtkZWxheXNfYXJlX2luZiAkZmFsbF0pIH0gewogICAgc2V0IHJpc2VfZm10IFtmb3JtYXRfZGVsYXlzICRyaXNlXQogICAgc2V0IGZhbGxfZm10IFtmb3JtYXRfZGVsYXlzICRmYWxsXQogICAgaWYgeyRjbGsgIT0gIk5VTEwifSB7CiAgICAgIHNldCBjbGtfc3RyICIgKFtnZXRfbmFtZSAkY2xrXSBbcmZfc2hvcnRfbmFtZSAkY2xrX3JmXSkiCiAgICB9IGVsc2UgewogICAgICBzZXQgY2xrX3N0ciAiIgogICAgfQogICAgcmVwb3J0X2xpbmUgIiRjbGtfc3RyIHIgJHJpc2VfZm10IGYgJGZhbGxfZm10IgogIH0KfQoKcHJvYyByZXBvcnRfd3J0X2Nsa3MgeyBwaW5fYXJnIHdoYXQgfSB7CiAgc2V0IHBpbiBbZ2V0X3BvcnRfcGluX2Vycm9yICJwaW4iICRwaW5fYXJnXQogIGZvcmVhY2ggdmVydGV4IFskcGluIHZlcnRpY2VzXSB7CiAgICBpZiB7ICR2ZXJ0ZXggIT0gIk5VTEwiIH0gewogICAgICByZXBvcnRfd3J0X2NsayAkdmVydGV4ICR3aGF0ICJOVUxMIiAicmlzZSIKICAgICAgcmVwb3J0X3dydF9jbGsgJHZlcnRleCAkd2hhdCBbZGVmYXVsdF9hcnJpdmFsX2Nsb2NrXSAicmlzZSIKICAgICAgZm9yZWFjaCBjbGsgW2FsbF9jbG9ja3NdIHsKCXJlcG9ydF93cnRfY2xrICR2ZXJ0ZXggJHdoYXQgJGNsayAicmlzZSIKCXJlcG9ydF93cnRfY2xrICR2ZXJ0ZXggJHdoYXQgJGNsayAiZmFsbCIKICAgICAgfQogICAgfQogIH0KfQoKcHJvYyByZXBvcnRfd3J0X2NsayB7IHZlcnRleCB3aGF0IGNsayBjbGtfcmYgfSB7CiAgZ2xvYmFsIHN0YV9yZXBvcnRfZGVmYXVsdF9kaWdpdHMKCiAgc2V0IHJpc2UgWyR2ZXJ0ZXggJHdoYXQgcmlzZSAkY2xrICRjbGtfcmZdCiAgc2V0IGZhbGwgWyR2ZXJ0ZXggJHdoYXQgZmFsbCAkY2xrICRjbGtfcmZdCiAgIyBGaWx0ZXIgSU5GLy1JTkYgYXJyaXZhbHMuCiAgaWYgeyAhKFt0aW1lc19hcmVfaW5mICRyaXNlXSAmJiBbdGltZXNfYXJlX2luZiAkZmFsbF0pIH0gewogICAgc2V0IHJpc2VfZm10IFtmb3JtYXRfdGltZXMgJHJpc2UgJHN0YV9yZXBvcnRfZGVmYXVsdF9kaWdpdHNdCiAgICBzZXQgZmFsbF9mbXQgW2Zvcm1hdF90aW1lcyAkZmFsbCAkc3RhX3JlcG9ydF9kZWZhdWx0X2RpZ2l0c10KICAgIGlmIHskY2xrICE9ICJOVUxMIn0gewogICAgICBzZXQgY2xrX3N0ciAiIChbZ2V0X25hbWUgJGNsa10gW3JmX3Nob3J0X25hbWUgJGNsa19yZl0pIgogICAgfSBlbHNlIHsKICAgICAgc2V0IGNsa19zdHIgIiIKICAgIH0KICAgIHJlcG9ydF9saW5lICIkY2xrX3N0ciByICRyaXNlX2ZtdCBmICRmYWxsX2ZtdCIKICB9Cn0KCnByb2MgdGltZXNfYXJlX2luZiB7IHRpbWVzIH0gewogIGZvcmVhY2ggdGltZSAkdGltZXMgewogICAgaWYgeyAkdGltZSA8IDFlKzEwICYmICR0aW1lID4gLTFlKzEwIH0gewogICAgICByZXR1cm4gMAogICAgfQogIH0KICByZXR1cm4gMQp9Cgpwcm9jIGRlbGF5c19hcmVfaW5mIHsgZGVsYXlzIH0gewogIGZvcmVhY2ggZGVsYXkgJGRlbGF5cyB7CiAgICBpZiB7ICEoW3N0cmluZyBtYXRjaCAiSU5GKiIgJGRlbGF5XSBcCgkgICAgIHx8IFtzdHJpbmcgbWF0Y2ggIi1JTkYqIiAkZGVsYXldKSB9IHsKICAgICAgcmV0dXJuIDAKICAgIH0KICB9CiAgcmV0dXJuIDEKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJyZXBvcnRfY2xvY2tfc2tldyIge1stc2V0dXB8LWhvbGRdXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLWNsb2NrIGNsb2Nrc11cCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstY29ybmVyIGNvcm5lcl1cCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstaW5jbHVkZV9pbnRlcm5hbF9sYXRlbmN5XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLWRpZ2l0cyBkaWdpdHNdfQoKcHJvY19yZWRpcmVjdCByZXBvcnRfY2xvY2tfc2tldyB7CiAgZ2xvYmFsIHN0YV9yZXBvcnRfZGVmYXVsdF9kaWdpdHMKCiAgcGFyc2Vfa2V5X2FyZ3MgInJlcG9ydF9jbG9ja19za2V3IiBhcmdzIFwKICAgIGtleXMgey1jbG9jayAtY29ybmVyIC1kaWdpdHN9IFwKICAgIGZsYWdzIHstc2V0dXAgLWhvbGQgLWluY2x1ZGVfaW50ZXJuYWxfbGF0ZW5jeX0KICBjaGVja19hcmdjX2VxMCAicmVwb3J0X2Nsb2NrX3NrZXciICRhcmdzCgogIGlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1zZXR1cCldICYmIFtpbmZvIGV4aXN0cyBmbGFncygtaG9sZCldIH0gewogICAgc3RhX2Vycm9yIDUxNiAicmVwb3J0X2Nsb2NrX3NrZXcgLXNldHVwIGFuZCAtaG9sZCBhcmUgbXV0dWFsbHkgZXhjbHVzaXZlIG9wdGlvbnMuIgogIH0gZWxzZWlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1zZXR1cCldIH0gewogICAgc2V0IHNldHVwX2hvbGQgInNldHVwIgogIH0gZWxzZWlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1ob2xkKV0gfSB7CiAgICBzZXQgc2V0dXBfaG9sZCAiaG9sZCIKICB9IGVsc2UgewogICAgc2V0IHNldHVwX2hvbGQgInNldHVwIgogIH0KCiAgaWYgW2luZm8gZXhpc3RzIGtleXMo",
"LWNsb2NrKV0gewogICAgc2V0IGNsa3MgW2dldF9jbG9ja3Nfd2FybiAiLWNsb2NrcyIgJGtleXMoLWNsb2NrKV0KICB9IGVsc2UgewogICAgc2V0IGNsa3MgW2FsbF9jbG9ja3NdCiAgfQogIHNldCBjb3JuZXIgW3BhcnNlX2Nvcm5lcl9vcl9hbGwga2V5c10KICBzZXQgaW5jbHVkZV9pbnRlcm5hbF9sYXRlbmN5IFtpbmZvIGV4aXN0cyBmbGFncygtaW5jbHVkZV9pbnRlcm5hbF9sYXRlbmN5KV0KICBpZiBbaW5mbyBleGlzdHMga2V5cygtZGlnaXRzKV0gewogICAgc2V0IGRpZ2l0cyAka2V5cygtZGlnaXRzKQogICAgY2hlY2tfcG9zaXRpdmVfaW50ZWdlciAiLWRpZ2l0cyIgJGRpZ2l0cwogIH0gZWxzZSB7CiAgICBzZXQgZGlnaXRzICRzdGFfcmVwb3J0X2RlZmF1bHRfZGlnaXRzCiAgfQogIGlmIHsgJGNsa3MgIT0ge30gfSB7CiAgICByZXBvcnRfY2xrX3NrZXcgJGNsa3MgJGNvcm5lciAkc2V0dXBfaG9sZCAkaW5jbHVkZV9pbnRlcm5hbF9sYXRlbmN5ICRkaWdpdHMKICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAicmVwb3J0X2Nsb2NrX2xhdGVuY3kiIHtbLWNsb2NrIGNsb2Nrc11cCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstY29ybmVyIGNvcm5lcl1cCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstaW5jbHVkZV9pbnRlcm5hbF9sYXRlbmN5XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLWRpZ2l0cyBkaWdpdHNdfQoKcHJvY19yZWRpcmVjdCByZXBvcnRfY2xvY2tfbGF0ZW5jeSB7CiAgZ2xvYmFsIHN0YV9yZXBvcnRfZGVmYXVsdF9kaWdpdHMKCiAgcGFyc2Vfa2V5X2FyZ3MgInJlcG9ydF9jbG9ja18iIGFyZ3MgXAogICAga2V5cyB7LWNsb2NrIC1jb3JuZXIgLWRpZ2l0c30gXAogICAgZmxhZ3Mgey1pbmNsdWRlX2ludGVybmFsX2xhdGVuY3l9CiAgY2hlY2tfYXJnY19lcTAgInJlcG9ydF9jbG9ja19sYXRlbmN5IiAkYXJncwoKICBpZiBbaW5mbyBleGlzdHMga2V5cygtY2xvY2spXSB7CiAgICBzZXQgY2xrcyBbZ2V0X2Nsb2Nrc193YXJuICItY2xvY2tzIiAka2V5cygtY2xvY2spXQogIH0gZWxzZSB7CiAgICBzZXQgY2xrcyBbYWxsX2Nsb2Nrc10KICB9CiAgc2V0IGNvcm5lciBbcGFyc2VfY29ybmVyX29yX2FsbCBrZXlzXQogIHNldCBpbmNsdWRlX2ludGVybmFsX2xhdGVuY3kgW2luZm8gZXhpc3RzIGZsYWdzKC1pbmNsdWRlX2ludGVybmFsX2xhdGVuY3kpXQogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1kaWdpdHMpXSB7CiAgICBzZXQgZGlnaXRzICRrZXlzKC1kaWdpdHMpCiAgICBjaGVja19wb3NpdGl2ZV9pbnRlZ2VyICItZGlnaXRzIiAkZGlnaXRzCiAgfSBlbHNlIHsKICAgIHNldCBkaWdpdHMgJHN0YV9yZXBvcnRfZGVmYXVsdF9kaWdpdHMKICB9CiAgaWYgeyAkY2xrcyAhPSB7fSB9IHsKICAgIHJlcG9ydF9jbGtfbGF0ZW5jeSAkY2xrcyAkY29ybmVyICRpbmNsdWRlX2ludGVybmFsX2xhdGVuY3kgJGRpZ2l0cwogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJyZXBvcnRfY2hlY2tzIiBcCiAge1stZnJvbSBmcm9tX2xpc3R8LXJpc2VfZnJvbSBmcm9tX2xpc3R8LWZhbGxfZnJvbSBmcm9tX2xpc3RdXAogICAgIFstdGhyb3VnaCB0aHJvdWdoX2xpc3R8LXJpc2VfdGhyb3VnaCB0aHJvdWdoX2xpc3R8LWZhbGxfdGhyb3VnaCB0aHJvdWdoX2xpc3RdXAogICAgIFstdG8gdG9fbGlzdHwtcmlzZV90byB0b19saXN0fC1mYWxsX3RvIHRvX2xpc3RdXAogICAgIFstdW5jb25zdHJhaW5lZF1cCiAgICAgWy1wYXRoX2RlbGF5IG1pbnxtaW5fcmlzZXxtaW5fZmFsbHxtYXh8bWF4X3Jpc2V8bWF4X2ZhbGx8bWluX21heF1cCiAgICAgWy1jb3JuZXIgY29ybmVyXVwKICAgICBbLWdyb3VwX3BhdGhfY291bnQgcGF0aF9jb3VudF0gXAogICAgIFstZW5kcG9pbnRfcGF0aF9jb3VudCBwYXRoX2NvdW50XVwKICAgICBbLXVuaXF1ZV9wYXRoc190b19lbmRwb2ludF1cCiAgICAgWy1zbGFja19tYXggc2xhY2tfbWF4XVwKICAgICBbLXNsYWNrX21pbiBzbGFja19taW5dXAogICAgIFstc29ydF9ieV9zbGFja11cCiAgICAgWy1wYXRoX2dyb3VwIGdyb3VwX25hbWVdXAogICAgIFstZm9ybWF0IGZ1bGx8ZnVsbF9jbG9ja3xmdWxsX2Nsb2NrX2V4cGFuZGVkfHNob3J0fGVuZHxzbGFja19vbmx5fHN1bW1hcnl8anNvbl1cCiAgICAgWy1maWVsZHMgY2FwYWNpdGFuY2V8c2xld3xmYW5vdXR8aW5wdXRfcGlufG5ldHxzcmNfYXR0cl1cCiAgICAgWy1kaWdpdHMgZGlnaXRzXVwKICAgICBbLW5vX2xpbmVfc3BsaXRzXVwKICAgICBbPiBmaWxlbmFtZV0gWz4+IGZpbGVuYW1lXX0KCnByb2NfcmVkaXJlY3QgcmVwb3J0X2NoZWNrcyB7CiAgZ2xvYmFsIHN0YV9yZXBvcnRfdW5jb25zdHJhaW5lZF9wYXRocwogIHBhcnNlX3JlcG9ydF9wYXRoX29wdGlvbnMgInJlcG9ydF9jaGVja3MiIGFyZ3MgImZ1bGwiIDAKICBzZXQgcGF0aF9lbmRzIFtmaW5kX3RpbWluZ19wYXRoc19jbWQgInJlcG9ydF9jaGVja3MiIGFyZ3NdCiAgcmVwb3J0X3BhdGhfZW5kcyAkcGF0aF9lbmRzCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAicmVwb3J0X2NoZWNrX3R5cGVzIiBcCiAge1stdmlvbGF0b3JzXSBbLXZlcmJvc2VdXAogICAgIFstY29ybmVyIGNvcm5lcl1cCiAgICAgWy1mb3JtYXQgc2xhY2tfb25seXxlbmRdXAogICAgIFstbWF4X2RlbGF5XSBbLW1pbl9kZWxheV1cCiAgICAgWy1yZWNvdmVyeV0gWy1yZW1vdmFsXVwKICAgICBbLWNsb2NrX2dhdGluZ19zZXR1cF0gWy1jbG9ja19nYXRpbmdfaG9sZF1cCiAgICAgWy1tYXhfc2xld10gWy1taW5fc2xld11cCiAgICAgWy1tYXhfZmFub3V0XSBbLW1pbl9mYW5vdXRdXAogICAgIFstbWF4X2NhcGFjaXRhbmNlXSBbLW1pbl9jYXBhY2l0YW5jZV1cCiAgICAgWy1taW5fcHVsc2Vfd2lkdGhdIFstbWluX3BlcmlvZF0gWy1tYXhfc2tld11cCiAgICAgWy1uZXQgbmV0XVwKICAgICBbLWRpZ2l0cyBkaWdpdHNdIFstbm9fbGluZV9zcGxpdHNdXAogICAgIFs+IGZpbGVuYW1lXSBbPj4gZmlsZW5hbWVdfQoKcHJvY19yZWRpcmVjdCByZXBvcnRfY2hlY2tfdHlwZXMgewogIHZhcmlhYmxlIHBhdGhfb3B0aW9ucwoKICBwYXJzZV9rZXlfYXJncyAicmVwb3J0X2NoZWNrX3R5cGVzIiBhcmdzIGtleXMgey1uZXQgLWNvcm5lcn1cCiAgICBmbGFncyB7LXZpb2xhdG9ycyAtdmVyYm9zZSAtbm9fbGluZV9zcGxpdHN9IDAKCiAgc2V0IHZpb2xhdG9ycyBbaW5mbyBleGlzdHMgZmxhZ3MoLXZpb2xhdG9ycyldCiAgc2V0IHZlcmJvc2UgW2luZm8gZXhpc3RzIGZsYWdzKC12ZXJib3NlKV0KICBzZXQgbm9zcGxpdCBbaW5mbyBleGlzdHMgZmxhZ3MoLW5vX2xpbmVfc3BsaXRzKV0KCiAgaWYgeyAkdmVyYm9zZSB9IHsKICAgIHNldCBkZWZhdWx0X2Zvcm1hdCAiZnVsbCIKICB9IGVsc2UgewogICAgc2V0IGRlZmF1bHRfZm9ybWF0ICJzbGFja19vbmx5IgogIH0KICBwYXJzZV9yZXBvcnRfcGF0aF9vcHRpb25zICJyZXBvcnRfY2hlY2tfdHlwZXMiIGFyZ3MgJGRlZmF1bHRfZm9ybWF0IDAKCiAgc2V0IG1pbl9tYXggIm1pbl9tYXgiCiAgaWYgeyBbb3BlcmF0aW5nX2NvbmRpdGlvbl9hbmFseXNpc190eXBlXSA9PSAic2luZ2xlIiB9IHsKICAgIHNldCBtaW5fbWF4ICJtYXgiCiAgfQoKICBzZXQgY29ybmVyIFtwYXJzZV9jb3JuZXJfb3JfYWxsIGtleXNdCgogIHNldCBuZXQgIk5VTEwiCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtbmV0KV0gfSB7CiAgICBzZXQgbmV0IFtnZXRfbmV0X2FyZyAiLW5ldCIgJGtleXMoLW5ldCldCiAgfQoKICBpZiB7ICRhcmdzID09IHt9IH0gewogICAgaWYgeyAkbWluX21heCA9PSAibWF4IiB8fCAkbWluX21heCA9PSAibWluX21heCIgfSB7CiAgICAgIHNldCBzZXR1cCAxCiAgICAgIHNldCByZWNvdmVyeSAxCiAgICAgIHNldCBjbGtfZ2F0aW5nX3NldHVwIDEKICAgICAgc2V0IG1heF9zbGV3IDEKICAgICAgc2V0IG1heF9mYW5vdXQgMQogICAgICBzZXQgbWF4X2NhcGFjaXRhbmNlIDEKICAgIH0gZWxzZSB7CiAgICAgIHNldCBzZXR1cCAwCiAgICAgIHNldCByZWNvdmVyeSAwCiAgICAgIHNldCBjbGtfZ2F0aW5nX3NldHVwIDAKICAgICAgc2V0IG1heF9zbGV3IDAKICAgICAgc2V0IG1heF9mYW5vdXQgMAogICAgICBzZXQgbWF4X2NhcGFjaXRhbmNlIDAKICAgIH0KICAgIGlmIHsgJG1pbl9tYXggPT0gIm1pbiIgfHwgJG1pbl9tYXggPT0gIm1pbl9tYXgiIH0gewogICAgICBzZXQgaG9sZCAxCiAgICAgIHNldCByZW1vdmFsIDEKICAgICAgc2V0IGNsa19nYXRpbmdfaG9sZCAxCiAgICAgIHNldCBtaW5fc2xldyAxCiAgICAgIHNldCBtaW5fZmFub3V0IDEKICAgICAgc2V0IG1pbl9jYXBhY2l0YW5jZSAxCiAgICB9IGVsc2UgewogICAgICBzZXQgaG9sZCAwCiAgICAgIHNldCBtaW5fZGVsYXkgMAogICAgICBzZXQgcmVtb3ZhbCAwCiAgICAgIHNldCBjbGtfZ2F0aW5nX2hvbGQgMAogICAgICBzZXQgbWluX3NsZXcgMAogICAgICBzZXQgbWluX2Zhbm91dCAwCiAgICAgIHNldCBtaW5fY2FwYWNpdGFuY2UgMAogICAgfQogICAgc2V0IG1pbl9wdWxzZV93aWR0aCAxCiAgICBzZXQgbWluX3BlcmlvZCAxCiAgICBzZXQgbWF4X3NrZXcgMQogIH0gZWxzZSB7CiAgICBwYXJzZV9rZXlfYXJncyAicmVwb3J0X2NoZWNrX3R5cGVzIiBhcmdzIGtleXMge30gXAogICAgICBmbGFncyB7LW1heF9kZWxheSAtbWluX2RlbGF5IC1yZWNvdmVyeSAtcmVtb3ZhbCBcCgkgICAgICAgLWNsb2NrX2dhdGluZ19zZXR1cCAtY2xvY2tfZ2F0aW5nX2hvbGQgXAoJICAgICAgIC1tYXhfc2xldyAtbWluX3NsZXcgXAoJICAgICAgIC1tYXhfZmFub3V0IC1taW5fZmFub3V0IFwKCSAgICAgICAtbWF4X2NhcGFjaXRhbmNlIC1taW5fY2FwYWNpdGFuY2UgXAoJICAgICAgIC1taW5fcHVsc2Vfd2lkdGggXAoJICAgICAgIC1taW5fcGVyaW9kIC1tYXhfc2tld30gMQoKICAgIHNldCBzZXR1cCBbaW5mbyBleGlzdHMgZmxhZ3MoLW1heF9kZWxheSldCiAgICBzZXQgaG9sZCBbaW5mbyBleGlzdHMgZmxhZ3MoLW1pbl9kZWxheSldCiAgICBzZXQgcmVjb3ZlcnkgW2luZm8gZXhpc3RzIGZsYWdzKC1yZWNvdmVyeSldCiAgICBzZXQgcmVtb3ZhbCBbaW5mbyBleGlzdHMgZmxhZ3MoLXJlbW92YWwpXQogICAgc2V0IGNsa19nYXRpbmdfc2V0dXAgW2luZm8gZXhpc3RzIGZsYWdzKC1jbG9ja19nYXRpbmdfc2V0dXApXQogICAgc2V0IGNsa19nYXRpbmdfaG9sZCBbaW5mbyBleGlzdHMgZmxhZ3MoLWNsb2NrX2dhdGluZ19ob2xkKV0KICAgIHNldCBtYXhfc2xldyBbaW5mbyBleGlzdHMgZmxhZ3MoLW1heF9zbGV3KV0KICAgIHNldCBtaW5fc2xldyBbaW5mbyBleGlzdHMgZmxhZ3MoLW1pbl9zbGV3KV0KICAgIHNldCBtYXhfZmFub3V0IFtpbmZvIGV4aXN0cyBmbGFncygtbWF4X2Zhbm91dCldCiAgICBzZXQgbWluX2Zhbm91dCBbaW5mbyBleGlzdHMgZmxhZ3MoLW1pbl9mYW5vdXQpXQogICAgc2V0IG1heF9jYXBhY2l0YW5jZSBbaW5mbyBleGlzdHMgZmxhZ3MoLW1heF9jYXBhY2l0YW5jZSldCiAgICBzZXQgbWluX2NhcGFjaXRhbmNlIFtpbmZvIGV4aXN0cyBmbGFncygtbWluX2NhcGFjaXRhbmNlKV0KICAgIHNldCBtaW5fcHVsc2Vfd2lkdGggW2luZm8gZXhpc3RzIGZsYWdzKC1taW5fcHVsc2Vfd2lkdGgpXQogICAgc2V0IG1pbl9wZXJpb2QgW2luZm8gZXhpc3RzIGZsYWdzKC1taW5fcGVyaW9kKV0KICAgIHNldCBtYXhfc2tldyBbaW5mbyBleGlzdHMgZmxhZ3MoLW1heF9za2V3KV0KICAgIGlmIHsgW29wZXJhdGluZ19jb25kaXRpb25fYW5hbHlzaXNfdHlwZV0gPT0gInNpbmdsZSIgXAoJICAgJiYgKCgkc2V0dXAgJiYgJGhvbGQpIFwKCQkgfHwgKCRyZWNvdmVyeSAmJiAkcmVtb3ZhbCkgXAoJCSB8fCAoJGNsa19nYXRpbmdfc2V0dXAgJiYgJGNsa19nYXRpbmdfaG9sZCkpIH0gewogICAgICBzdGFfZXJyb3IgNTIwICJhbmFseXNpcyB0eXBlIHNpbmdsZSBpcyBub3QgY29uc2lzdGVudCB3aXRoIGRvaW5nIGJvdGggc2V0dXAvbWF4IGFuZCBob2xkL21pbiBjaGVja3MuIgogICAgfQogIH0KCiAgaWYgeyAkYXJncyAhPSB7fSB9IHsKICAgIHN0YV9lcnJvciA1MjEgInBvc2l0aW9uYWwgYXJndW1lbnRzIG5vdCBzdXBwb3J0ZWQuIgogIH0KCiAgc2V0IGNvcm5lciBbcGFyc2VfY29ybmVyX29yX2FsbCBrZXlzXQoKICBpZiB7ICRzZXR1cCB8fCAkaG9sZCB8fCAkcmVjb3ZlcnkgfHwgJHJlbW92YWwgXAoJIHx8ICRjbGtfZ2F0aW5nX3NldHVwIHx8ICRjbGtfZ2F0aW5nX2hvbGQgfSB7CiAgICBpZiB7ICgkc2V0dXAgJiYgJGhvbGQpIFwKCSAgIHx8ICgkcmVjb3ZlcnkgJiYgJHJlbW92YWwpIFwKCSAgIHx8ICgkY2xrX2dhdGluZ19zZXR1cCAmJiAkY2xrX2dhdGluZ19ob2xkKSB9IHsKICAgICAgc2V0IHBhdGhfbWluX21heCAibWluX21heCIKICAgIH0gZWxzZWlmIHsgJHNldHVwIHx8ICRyZWNvdmVyeSB8fCAkY2xrX2dhdGluZ19zZXR1cCB9IHsKICAgICAgc2V0IHBhdGhfbWluX21heCAibWF4IgogICAgfSBlbHNlaWYgeyAkaG9sZCB8fCAkcmVtb3ZhbCB8fCAkY2xrX2dhdGluZ19ob2xkIH0gewogICAgICBzZXQgcGF0aF9taW5fbWF4ICJtaW4iCiAgICB9CiAgICBpZiB7ICR2aW9sYXRvcnMgfSB7CiAgICAgIHNldCBncm91cF9wYXRoX2NvdW50ICRzdGE6Omdyb3VwX3BhdGhfY291bnRfbWF4CiAgICAgIHNldCBzbGFja19taW4gW2V4cHIgLSRzdGE6OmZsb2F0X2luZl0KICAgICAgc2V0IHNsYWNrX21heCAwLjAKICAgIH0gZWxzZSB7CiAgICAgIHNldCBncm91cF9wYXRoX2NvdW50IDEKICAgICAgc2V0IHNsYWNrX21pbiBbZXhwciAtJHN0YTo6ZmxvYXRfaW5mXQogICAgICBzZXQgc2xhY2tfbWF4ICRzdGE6OmZsb2F0X2luZgogICAgfQogICAgc2V0IHBhdGhfZW5kcyBbZmluZF9wYXRoX2VuZHMgIk5VTEwiIHt9ICJOVUxMIiAwIFwKCQkgICAgICRjb3JuZXIgJHBhdGhfbWluX21heCAkZ3JvdXBfcGF0aF9jb3VudCAxIDAgXAoJCSAgICAgJHNsYWNrX21pbiAkc2xhY2tfbWF4IFwKCQkgICAgIDAge30gXAoJCSAgICAgJHNldHVwICRob2xkIFwKCQkgICAgICRyZWNvdmVyeSAkcmVtb3ZhbCBcCgkJICAgICAkY2xrX2dhdGluZ19zZXR1cCAkY2xrX2dhdGluZ19ob2xkXQogICAgcmVwb3J0X3BhdGhfZW5kcyAkcGF0aF9lbmRzCiAgfQoKICBpZiB7ICRtYXhfc2xldyB9IHsKICAgIHJlcG9ydF9zbGV3X2xpbWl0cyAkbmV0ICRjb3JuZXIgIm1heCIgJHZpb2xhdG9ycyAkdmVyYm9zZSAkbm9zcGxpdAogIH0KICBpZiB7ICRtaW5fc2xldyB9IHsKICAgIHJlcG9ydF9zbGV3X2xpbWl0cyAkbmV0ICRjb3JuZXIgIm1pbiIgJHZpb2xhdG9ycyAkdmVyYm9zZSAkbm9zcGxpdAogIH0KICBpZiB7ICRtYXhfZmFub3V0IH0gewogICAgcmVwb3J0X2Zhbm91dF9saW1pdHMgJG5ldCAibWF4IiAkdmlvbGF0b3JzICR2ZXJib3NlICRub3NwbGl0CiAgfQogIGlmIHsgJG1pbl9mYW5vdXQgfSB7CiAgICByZXBvcnRfZmFub3V0X2xpbWl0cyAkbmV0ICJtaW4iICR2aW9sYXRvcnMgJHZlcmJvc2UgJG5vc3BsaXQKICB9CiAgaWYgeyAkbWF4X2NhcGFjaXRhbmNlIH0gewogICAgcmVwb3J0X2NhcGFjaXRhbmNlX2xpbWl0cyAkbmV0ICRjb3JuZXIgIm1heCIgJHZpb2xhdG9ycyAkdmVyYm9zZSAkbm9zcGxpdAogIH0KICBpZiB7ICRtaW5fY2FwYWNpdGFuY2UgfSB7CiAgICByZXBvcnRfY2FwYWNpdGFuY2VfbGltaXRzICRuZXQgJGNvcm5lciAibWluIiAkdmlvbGF0b3JzICR2ZXJib3NlICRub3NwbGl0CiAgfQogIGlmIHsgJG1pbl9wdWxzZV93aWR0aCB9IHsKICAgIGlmIHsgJHZpb2xhdG9ycyB9IHsKICAgICAgc2V0IGNoZWNrcyBbbWluX3B1bHNlX3dpZHRoX3Zpb2xhdGlvbnMgJGNvcm5lcl0KICAgICAgcmVwb3J0X21wd19jaGVja3MgJGNoZWNrcyAkdmVyYm9zZQogICAgfSBlbHNlIHsKICAgICAgc2V0IGNoZWNrIFttaW5fcHVsc2Vfd2lkdGhfY2hlY2tfc2xhY2sgJGNvcm5lcl0KICAgICAgaWYgeyAkY2hlY2sgIT0gIk5VTEwiIH0gewoJcmVwb3J0X21wd19jaGVjayAkY2hlY2sgJHZlcmJvc2UKICAgICAgfQogICAgfQogIH0KICBpZiB7ICRtaW5fcGVyaW9kIH0gewogICAgaWYgeyAkdmlvbGF0b3JzIH0gewogICAgICBzZXQgY2hlY2tzIFttaW5fcGVyaW9kX3Zpb2xhdGlvbnNdCiAgICAgIHJlcG9ydF9taW5fcGVyaW9kX2NoZWNrcyAkY2hlY2tzICR2ZXJib3NlCiAgICB9IGVsc2UgewogICAgICBzZXQgY2hlY2sgW21pbl9wZXJpb2RfY2hlY2tfc2xhY2tdCiAgICAgIGlmIHsgJGNoZWNrICE9ICJOVUxMIiB9IHsKCXJlcG9ydF9taW5fcGVyaW9kX2NoZWNrICRjaGVjayAkdmVyYm9zZQogICAgICB9CiAgICB9CiAgfQogIGlmIHsgJG1heF9za2V3IH0gewogICAgaWYgeyAkdmlvbGF0b3JzIH0gewogICAgICBzZXQgY2hlY2tzIFttYXhfc2tld192aW9sYXRpb25zXQogICAgICByZXBvcnRfbWF4X3NrZXdfY2hlY2tzICRjaGVja3MgJHZlcmJvc2UKICAgIH0gZWxzZSB7CiAgICAgIHNldCBjaGVjayBbbWF4X3NrZXdfY2hlY2tfc2xhY2tdCiAgICAgIGlmIHsgJGNoZWNrICE9ICJOVUxMIiB9IHsKCXJlcG9ydF9tYXhfc2tld19jaGVjayAkY2hlY2sgJHZlcmJvc2UKICAgICAgfQogICAgfQogIH0KfQoKcHJvYyByZXBvcnRfc2xld19saW1pdHMgeyBuZXQgY29ybmVyIG1pbl9tYXggdmlvbGF0b3JzIHZlcmJvc2Ugbm9zcGxpdCB9IHsKICBzZXQgcGlucyBbY2hlY2tfc2xld19saW1pdHMgJG5ldCAkdmlvbGF0b3JzICRjb3JuZXIgJG1pbl9tYXhdCiAgaWYgeyAkcGlucyAhPSB7fSB9IHsKICAgIHJlcG9ydF9saW5lICIke21pbl9tYXh9IHNsZXciCiAgICByZXBvcnRfbGluZSAiIgogICAgaWYgeyAkdmVyYm9zZSB9IHsKICAgICAgZm9yZWFjaCBwaW4gJHBpbnMgewogICAgICAgIHJlcG9ydF9zbGV3X2xpbWl0X3ZlcmJvc2UgJHBpbiAkY29ybmVyICRtaW5fbWF4CiAgICAgICAgcmVwb3J0X2xpbmUgIiIKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcmVwb3J0X3NsZXdfbGltaXRfc2hvcnRfaGVhZGVyCiAgICAgIGZvcmVhY2ggcGluICRwaW5zIHsKICAgICAgICByZXBvcnRfc2xld19saW1pdF9zaG9ydCAkcGluICRjb3JuZXIgJG1pbl9tYXgKICAgICAgfQogICAgICByZXBvcnRfbGluZSAiIgogICAgfQogIH0KfQoKcHJvYyByZXBvcnRfZmFub3V0X2xpbWl0cyB7IG5ldCBtaW5fbWF4IHZpb2xhdG9ycyB2ZXJib3NlIG5vc3BsaXQgfSB7CiAgc2V0IHBpbnMgW2NoZWNrX2Zhbm91dF9saW1pdHMgJG5ldCAkdmlvbGF0b3JzICRtaW5fbWF4XQogIGlmIHsgJHBpbnMgIT0ge30gfSB7CiAgICByZXBvcnRfbGluZSAiJHttaW5fbWF4fSBmYW5vdXQiCiAgICByZXBvcnRfbGluZSAiIgogICAgaWYgeyAkdmVyYm9zZSB9IHsKICAgICAgZm9yZWFjaCBwaW4gJHBpbnMgewogICAgICAgIHJlcG9ydF9mYW5vdXRfbGltaXRfdmVyYm9zZSAkcGluICRtaW5fbWF4CiAgICAgICAgcmVwb3J0X2xpbmUgIiIKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcmVwb3J0X2Zhbm91dF9saW1pdF9zaG9ydF9oZWFkZXIKICAgICAgZm9yZWFjaCBwaW4gJHBpbnMgewogICAgICAgIHJlcG9ydF9mYW5vdXRfbGltaXRfc2hvcnQgJHBpbiAkbWluX21heAogICAgICB9CiAgICAgIHJlcG9ydF9saW5lICIiCiAgICB9CiAgfQp9Cgpwcm9jIHJlcG9ydF9jYXBhY2l0YW5jZV9saW1pdHMgeyBuZXQgY29ybmVyIG1pbl9tYXggdmlvbGF0b3JzIHZlcmJvc2Ugbm9zcGxpdCB9IHsKICBzZXQgcGlucyBbY2hlY2tfY2FwYWNpdGFuY2VfbGltaXRzICRuZXQgJHZpb2xhdG9ycyAkY29ybmVyICRtaW5fbWF4XQogIGlmIHsgJHBpbnMgIT0ge30gfSB7CiAgICByZXBvcnRfbGluZSAiJHttaW5fbWF4fSBjYXBhY2l0YW5jZSIKICAgIHJlcG9ydF9saW5lICIiCiAgICBpZiB7ICR2ZXJib3NlIH0gewogICAgICBmb3JlYWNoIHBpbiAkcGlucyB7CiAgICAgICAgcmVwb3J0X2NhcGFjaXRhbmNlX2xpbWl0X3ZlcmJvc2UgJHBpbiAkY29ybmVyICRtaW5fbWF4CiAgICAgICAgcmVwb3J0X2xpbmUgIiIKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcmVwb3J0X2NhcGFjaXRhbmNlX2xpbWl0X3Nob3J0X2hlYWRlcgogICAgICBmb3JlYWNoIHBpbiAkcGlucyB7CiAgICAgICAgcmVwb3J0X2NhcGFjaXRhbmNlX2xpbWl0X3Nob3J0ICRwaW4gJGNvcm5lciAkbWluX21heAogICAgICB9CiAgICAgIHJlcG9ydF9saW5lICIiCiAgICB9CiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInJlcG9ydF9kaXNhYmxlZF9lZGdlcyIge30KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAicmVwb3J0X3RucyIge1stbWluXSBbLW1heF0gWy1kaWdpdHMgZGlnaXRzXX0KCnByb2NfcmVkaXJlY3QgcmVwb3J0X3RucyB7CiAgZ2xvYmFsIHN0YV9yZXBvcnRfZGVmYXVsdF9kaWdpdHMKCiAgcGFyc2Vfa2V5X2FyZ3MgInJlcG9ydF90bnMiIGFyZ3Mga2V5cyB7LWRpZ2l0c30gZmxhZ3Mgey1taW4gLW1heH0KICBzZXQgbWluX21heCAibWF4IgogIGlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1taW4pXSB9IHsKICAgIHNldCBtaW5fbWF4ICJtaW4iCiAgfQogIGlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1tYXgpXSB9IHsKICAgIHNldCBtaW5fbWF4ICJtYXgiCiAgfQogIGlmIFtpbmZvIGV4aXN0cyBrZXlzKC1kaWdpdHMpXSB7CiAgICBzZXQgZGlnaXRzICRrZXlzKC1kaWdpdHMpCiAgICBjaGVja19wb3NpdGl2ZV9pbnRlZ2VyICItZGlnaXRzIiAkZGlnaXRzCiAgfSBlbHNlIHsKICAgIHNldCBkaWdpdHMgJHN0YV9yZXBvcnRfZGVmYXVsdF9kaWdpdHMKICB9CgogIHJlcG9ydF9saW5lICJ0bnMgJG1pbl9tYXggW2Zvcm1hdF90aW1lIFt0b3RhbF9uZWdhdGl2ZV9zbGFja19jbWQgJG1pbl9tYXhdICRkaWdpdHNdIgp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInJlcG9ydF93bnMiIHtbLW1pbl0gWy1tYXhdIFstZGlnaXRzIGRpZ2l0c119Cgpwcm9jX3JlZGlyZWN0IHJlcG9ydF93bnMgewogIGdsb2JhbCBzdGFfcmVwb3J0X2RlZmF1bHRfZGlnaXRzCgogIHBhcnNlX2tleV9hcmdzICJyZXBvcnRfd25zIiBhcmdzIGtleXMgey1kaWdpdHN9IGZsYWdzIHstbWluIC1tYXh9CiAgc2V0IG1pbl9tYXggIm1heCIKICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtbWluKV0gfSB7CiAgICBzZXQgbWluX21heCAibWluIgogIH0KICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtbWF4KV0gfSB7CiAgICBzZXQgbWluX21heCAibWF4IgogIH0KICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1kaWdpdHMpXSB9IHsKICAgIHNldCBkaWdpdHMgJGtleXMoLWRpZ2l0cykKICAgIGNoZWNrX3Bvc2l0aXZlX2ludGVnZXIgIi1kaWdpdHMiICRkaWdpdHMKICB9IGVsc2UgewogICAgc2V0IGRpZ2l0cyAkc3RhX3JlcG9ydF9kZWZhdWx0X2RpZ2l0cwogIH0KCiAgc2V0IHNsYWNrIFt3b3JzdF9zbGFja19jbWQgJG1pbl9tYXhdCiAgaWYgeyAkc2xhY2sgPiAwLjAgfSB7CiAgICBzZXQgc2xhY2sgMC4wCiAgfQogIHJlcG9ydF9saW5lICJ3bnMgJG1pbl9tYXggW2Zvcm1hdF90aW1lICRzbGFjayAkZGlnaXRzXSIKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyAjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAicmVwb3J0X3dvcnN0X3NsYWNrIiB7Wy1taW5dIFstbWF4XSBbLWRpZ2l0cyBkaWdpdHNdfQoKcHJvY19yZWRpcmVjdCByZXBvcnRfd29yc3Rfc2xhY2sgewogIGdsb2JhbCBzdGFfcmVwb3J0X2RlZmF1bHRfZGlnaXRzCgogIHBhcnNlX2tleV9hcmdzICJyZXBvcnRfd29yc3Rfc2xhY2siIGFyZ3Mga2V5cyB7LWRpZ2l0c30gZmxhZ3Mgey1taW4gLW1heH0KICBzZXQgbWluX21heCBbcGFyc2VfbWluX21heF9mbGFncyBmbGFnc10KICBpZiBbaW5mbyBleGlzdHMga2V5cygtZGlnaXRzKV0gewogICAgc2V0IGRpZ2l0cyAka2V5cygtZGlnaXRzKQogICAgY2hlY2tfcG9zaXRpdmVfaW50ZWdlciAiLWRpZ2l0cyIgJGRpZ2l0cwogIH0gZWxzZSB7CiAgICBzZXQgZGlnaXRzICRzdGFfcmVwb3J0X2RlZmF1bHRfZGlnaXRzCiAgfQoKICByZXBvcnRfbGluZSAid29yc3Qgc2xhY2sgJG1pbl9tYXggW2Zvcm1hdF90aW1lIFt3b3JzdF9zbGFja19jbWQgJG1pbl9tYXhdICRkaWdpdHNdIgp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInJlcG9ydF9wdWxzZV93aWR0aF9jaGVja3MiIFwKICB7Wy12ZXJib3NlXSBbLWNvcm5lciBjb3JuZXJdIFstZGlnaXRzIGRpZ2l0c10gWy1ub19saW5lX3NwbGl0c10gW3BpbnNdXAogICAgIFs+IGZpbGVuYW1lXSBbPj4gZmlsZW5hbWVdfQoKcHJvY19yZWRpcmVjdCByZXBvcnRfcHVsc2Vfd2lkdGhfY2hlY2tzIHsKICB2YXJpYWJsZSBwYXRoX29wdGlvbnMKCiAgcGFyc2Vfa2V5X2FyZ3MgInJlcG9ydF9wdWxzZV93aWR0aF9jaGVja3MiIGFyZ3Mga2V5cyB7LWNvcm5lcn0gXAogICAgZmxhZ3Mgey12ZXJib3NlfSAwCiAgIyBPbmx5IC1kaWdpdHMgYW5kIC1ub19saW5lX3NwbGl0cyBhcmUgcmVzcGVjdGVkLgogIHBhcnNlX3JlcG9ydF9wYXRoX29wdGlvbnMgInJlcG9ydF9wdWxzZV93aWR0aF9jaGVja3MiIGFyZ3MgImZ1bGwiIDAKICBjaGVja19hcmdjX2VxMG9yMSAicmVwb3J0X3B1bHNlX3dpZHRoX2NoZWNrcyIgJGFyZ3MKICBzZXQgY29ybmVyIFtwYXJzZV9jb3JuZXJfb3JfYWxsIGtleXNdCiAgc2V0IHZlcmJvc2UgW2luZm8gZXhpc3RzIGZsYWdzKC12ZXJib3NlKV0KICBpZiB7IFtsbGVuZ3RoICRhcmdzXSA9PSAxIH0gewogICAgc2V0IHBpbnMgW2dldF9wb3J0X3BpbnNfZXJyb3IgInBpbnMiIFtsaW5kZXggJGFyZ3MgMF1dCiAgICBzZXQgY2hlY2tzIFttaW5fcHVsc2Vfd2lkdGhfY2hlY2tfcGlucyAkcGlucyAkY29ybmVyXQogIH0gZWxzZSB7CiAgICBzZXQgY2hlY2tzIFttaW5fcHVsc2Vfd2lkdGhfY2hlY2tzICRjb3JuZXJdCiAgfQogIGlmIHsgJGNoZWNrcyAhPSB7fSB9IHsKICAgIHJlcG9ydF9tcHdfY2hlY2tzICRjaGVja3MgJHZlcmJvc2UKICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiMgTm90ZSB0aGF0IC1hbGwgYW5kIC10YWdzIGFyZSBpbnRlbnRpb25hbGx5ICJoaWRkZW4iLgpkZWZpbmVfY21kX2FyZ3MgInJlcG9ydF9wYXRoIiBcCiAge1stbWlufC1tYXhdXAogICAgIFstZm9ybWF0IGZ1bGx8ZnVsbF9jbG9ja3xmdWxsX2Nsb2NrX2V4cGFuZGVkfHNob3J0fGVuZHxzdW1tYXJ5XVwKICAgICBbLWZpZWxkcyBjYXBhY2l0YW5jZXxzbGV3fGlucHV0X3BpbnxuZXR8c3JjX2F0dHJdXAogICAgIFstZGlnaXRzIGRpZ2l0c10gWy1ub19saW5lX3NwbGl0c11cCiAgICAgWz4gZmlsZW5hbWVdIFs+PiBmaWxlbmFtZV1cCiAgICAgcGluIF58cnxyaXNlfHZ8ZnxmYWxsfQoKcHJvY19yZWRpcmVjdCByZXBvcnRfcGF0aCB7CiAgcGFyc2Vfa2V5X2FyZ3MgInJlcG9ydF9wYXRoIiBhcmdzIGtleXMge30gXAogICAgZmxhZ3Mgey1tYXggLW1pbiAtYWxsIC10YWdzfSAwCgogIGlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1taW4pXSAmJiBbaW5mbyBleGlzdHMgZmxhZ3MoLW1heCldIH0gewogICAgc3RhX2Vycm9yIDUyMiAiLW1pbiBhbmQgLW1heCBjYW5ub3QgYm90aCBiZSBzcGVjaWZpZWQuIgogIH0gZWxzZWlmIFtpbmZvIGV4aXN0cyBmbGFncygtbWluKV0gewogICAgc2V0IG1pbl9tYXggIm1pbiIKICB9IGVsc2VpZiBbaW5mbyBleGlzdHMgZmxhZ3MoLW1heCldIHsKICAgIHNldCBtaW5fbWF4ICJtYXgiCiAgfSBlbHNlIHsKICAgICMgRGVmYXVsdCB0byBtYXggcGF0aC4KICAgIHNldCBtaW5fbWF4ICJtYXgiCiAgfQogIHNldCByZXBvcnRfdGFncyBbaW5mbyBleGlzdHMgZmxhZ3MoLXRhZ3MpXQogIHNldCByZXBvcnRfYWxsIFtpbmZvIGV4aXN0cyBmbGFncygtYWxsKV0KCiAgcGFyc2VfcmVwb3J0X3BhdGhfb3B0aW9ucyAicmVwb3J0X3BhdGgiIGFyZ3MgImZ1bGwiIDEKICBjaGVja19hcmdjX2VxMiAicmVwb3J0X3BhdGgiICRhcmdzCgogIHNldCBwaW5fYXJnIFtsaW5kZXggJGFyZ3MgMF0KICBzZXQgcmYgW3BhcnNlX3Jpc2VfZmFsbF9hcmcgW2xpbmRleCAkYXJncyAxXV0KCiAgc2V0IHBpbiBbZ2V0X3BvcnRfcGluX2Vycm9yICJwaW4iICRwaW5fYXJnXQogIGlmIHsgWyRwaW4gaXNfaGllcmFyY2hpY2FsXSB9IHsKICAgIHN0YV9lcnJvciA1MjMgInBpbiAnJHBpbl9hcmcnIGlzIGhpZXJhcmNoaWNhbC4iCiAgfSBlbHNlIHsKICAgIGZvcmVhY2ggdmVydGV4IFskcGluIHZlcnRpY2VzXSB7CiAgICAgIGlmIHsgJHZlcnRleCAhPSAiTlVMTCIgfSB7CglpZiB7ICRyZXBvcnRfYWxsIH0gewoJICBzZXQgZmlyc3QgMQoJICBzZXQgcGF0aF9pdGVyIFskdmVydGV4IHBhdGhfaXRlcmF0b3IgJHJmICRtaW5fbWF4XQoJICB3aGlsZSB7WyRwYXRoX2l0ZXIgaGFzX25leHRdfSB7CgkgICAgc2V0IHBhdGggWyRwYXRoX2l0ZXIgbmV4dF0KCSAgICBpZiB7ICRmaXJzdCB9ICB7CgkgICAgICByZXBvcnRfbGluZSAiVGFnIGdyb3VwOiBbJHZlcnRleCB0YWdfZ3JvdXBfaW5kZXhdIgoJICAgIH0gZWxzZSB7CgkgICAgICByZXBvcnRfbGluZSAiIgoJICAgIH0KCSAgICBpZiB7ICRyZXBvcnRfdGFncyB9IHsKCSAgICAgIHJlcG9ydF9saW5lICJUYWc6IFskcGF0aCB0YWddIgoJICAgIH0KCSAgICByZXBvcnRfcGF0aF9jbWQgJHBhdGgKCSAgICBzZXQgZmlyc3QgMAoJICB9CgkgICRwYXRoX2l0ZXIgZmluaXNoCgl9IGVsc2UgewoJICBzZXQgd29yc3RfcGF0aCBbdmVydGV4X3dvcnN0X2Fycml2YWxfcGF0aF9yZiAkdmVydGV4ICRyZiAkbWluX21heF0KCSAgaWYgeyAkd29yc3RfcGF0aCAhPSAiTlVMTCIgfSB7CgkgICAgaWYgeyAkcmVwb3J0X3RhZ3MgfSB7CgkgICAgICByZXBvcnRfbGluZSAiVGFnOiBbJHdvcnN0X3BhdGggdGFnXSIKCSAgICB9CgkgICAgcmVwb3J0X3BhdGhfY21kICR3b3JzdF9wYXRoCgkgIH0KCX0KICAgICAgfQogICAgfQogIH0KfQoKcHJvYyBwYXJzZV9yZXBvcnRfcGF0aF9vcHRpb25zIHsgY21kIGFyZ3NfdmFyIGRlZmF1bHRfZm9ybWF0CgkJCQkgdW5rbm93bl9rZXlfaXNfZXJyb3IgfSB7CiAgdmFyaWFibGUgcGF0aF9vcHRpb25zCiAgdmFyaWFibGUgcmVwb3J0X3BhdGhfZmllbGRfd2lkdGhfZXh0cmEKICBnbG9iYWwgc3RhX3JlcG9ydF9kZWZhdWx0X2RpZ2l0cwoKICB1cHZhciAxICRhcmdzX3ZhciBhcmdzCiAgaWYgW2luZm8gZXhpc3RzIHBhdGhfb3B0aW9uc10gewogICAgdW5zZXQgcGF0aF9vcHRpb25zCiAgfQogIHBhcnNlX2tleV9hcmdzICRjbWQgYXJncyBwYXRoX29wdGlvbnMgey1mb3JtYXQgLWRpZ2l0cyAtZmllbGRzfSBcCiAgICBwYXRoX29wdGlvbnMgey1ub19saW5lX3NwbGl0cyAtcmVwb3J0X3NpZ21hc30gJHVua25vd25fa2V5X2lzX2Vycm9yCgogIHNldCBmb3JtYXQgJGRlZmF1bHRfZm9ybWF0CiAgaWYgW2luZm8gZXhpc3RzIHBhdGhfb3B0aW9ucygtZm9ybWF0KV0gewogICAgc2V0IGZvcm1hdCAkcGF0aF9vcHRpb25zKC1mb3JtYXQpCiAgICBzZXQgZm9ybWF0cyB7ZnVsbCBmdWxsX2Nsb2NrIGZ1bGxfY2xvY2tfZXhwYW5kZWQgc2hvcnQgXAoJCSAgIGVuZCBzbGFja19vbmx5IHN1bW1hcnkganNvbn0KICAgIGlmIHsgW2xzZWFyY2ggJGZvcm1hdHMgJGZvcm1hdF0gPT0gLTEgfSB7CiAgICAgIHN0YV9lcnJvciA1MjQgIi1mb3JtYXQgJGZvcm1hdCBub3QgcmVjb2duaXplZC4iCiAgICB9CiAgfSBlbHNlIHsKICAgIHNldCBwYXRoX29wdGlvbnMoLWZvcm1hdCkgJGRlZmF1bHRfZm9ybWF0CiAgfQogIHNldF9yZXBvcnRfcGF0aF9mb3JtYXQgJGZvcm1hdAoKICBzZXQgZGlnaXRzICRzdGFfcmVwb3J0X2RlZmF1bHRfZGlnaXRzCiAgaWYgW2luZm8gZXhpc3RzIHBhdGhfb3B0aW9ucygtZGlnaXRzKV0gewogICAgc2V0IGRpZ2l0cyAkcGF0aF9vcHRpb25zKC1kaWdpdHMpCiAgICBjaGVja19wb3NpdGl2ZV9pbnRlZ2VyICItZGlnaXRzIiAkZGlnaXRzCiAgfQoKICBzZXQgcmVwb3J0X3NpZ21hcyBbaW5mbyBleGlzdHMgcGF0aF9vcHRpb25zKC1yZXBvcnRfc2lnbWFzKV0KICBzZXRfcmVwb3J0X3BhdGhfc2lnbWFzICRyZXBvcnRfc2lnbWFzCgogIHNldCBwYXRoX29wdGlvbnMobnVtX2ZtdCkgIiUuJHtkaWdpdHN9ZiIKICBzZXRfcmVwb3J0X3BhdGhfZGlnaXRzICRkaWdpdHMKICAjIE51bWVyaWMgZmllbGQgd2lkdGggZXhwYW5kcyB3aXRoIGRpZ2l0cy4KICBzZXQgZmllbGRfd2lkdGggW2V4cHIgJGRpZ2l0cyArICRyZXBvcnRfcGF0aF9maWVsZF93aWR0aF9leHRyYV0KICBpZiB7ICRyZXBvcnRfc2lnbWFzIH0gewogICAgc2V0IGRlbGF5X2ZpZWxkX3dpZHRoIFtleHByICRmaWVsZF93aWR0aCAqIDMgKyAkcmVwb3J0X3BhdGhfZmllbGRfd2lkdGhfZXh0cmFdCiAgfSBlbHNlIHsKICAgIHNldCBkZWxheV9maWVsZF93aWR0aCAkZmllbGRfd2lkdGgKICB9CiAgZm9yZWFjaCBmaWVsZCB7dG90YWwgaW5jcn0gewogICAgc2V0X3JlcG9ydF9wYXRoX2ZpZWxkX3dpZHRoICRmaWVsZCAkZGVsYXlfZmllbGRfd2lkdGgKICB9CiAgZm9yZWFjaCBmaWVsZCB7Y2FwYWNpdGFuY2Ugc2xld30gewogICAgc2V0X3JlcG9ydF9wYXRoX2ZpZWxkX3dpZHRoICRmaWVsZCAkZmllbGRfd2lkdGgKICB9CgogIHNldCByZXBvcnRfaW5wdXRfcGluIDAKICBzZXQgcmVwb3J0X2hpZXJfcGlucyAwCiAgc2V0IHJlcG9ydF9jYXAgMAogIHNldCByZXBvcnRfbmV0IDAKICBzZXQgcmVwb3J0X3NsZXcgMAogIHNldCByZXBvcnRfZmFub3V0IDAKICBzZXQgcmVwb3J0X3NyY19hdHRyIDAKICBpZiB7IFtpbmZvIGV4aXN0cyBwYXRoX29wdGlvbnMoLWZpZWxkcyldIH0gewogICAgZm9yZWFjaCBmaWVsZCAkcGF0aF9vcHRpb25zKC1maWVsZHMpIHsKICAgICAgaWYgeyBbc3RyaW5nIG1hdGNoICJpbnB1dCoiICRmaWVsZF0gfSB7CiAgICAgICAgc2V0IHJlcG9ydF9pbnB1dF9waW4gMQogICAgICB9IGVsc2VpZiB7IFtzdHJpbmcgbWF0Y2ggImhpZXIqIiAkZmllbGRdIH0gewogICAgICAgIHNldCByZXBvcnRfaGllcl9waW5zIDEKICAgICAgfSBlbHNlaWYgeyBbc3RyaW5nIG1hdGNoICJjYXAqIiAkZmllbGRdIH0gewogICAgICAgIHNldCByZXBvcnRfY2FwIDEKICAgICAgfSBlbHNlaWYgeyBbc3RyaW5nIG1hdGNoICJuZXQiICRmaWVsZF0gfSB7CiAgICAgICAgc2V0IHJlcG9ydF9uZXQgMQogICAgICB9IGVsc2VpZiB7IFtzdHJpbmcgbWF0Y2ggInNsZXciICRmaWVsZF0gfSB7CiAgICAgICAgc2V0IHJlcG9ydF9zbGV3IDEKICAgICAgfSBlbHNlaWYgeyBbc3RyaW5nIG1hdGNoICJmYW5vdXQiICRmaWVsZF0gfSB7CiAgICAgICAgc2V0IHJlcG9ydF9mYW5vdXQgMQogICAgICB9IGVsc2VpZiB7IFtzdHJpbmcgbWF0Y2ggInNyYyoiICRmaWVsZF0gfSB7CiAgICAgICAgc2V0IHJlcG9ydF9zcmNfYXR0ciAxCiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhX3dhcm4gMTY4ICJ1bmtub3duIGZpZWxkICRmaWVsZC4iCiAgICAgIH0KICAgIH0KICB9CiAgc2V0X3JlcG9ydF9wYXRoX2ZpZWxkcyAkcmVwb3J0X2lucHV0X3BpbiAkcmVwb3J0X2hpZXJfcGlucyAkcmVwb3J0X25ldCBcCiAgICAkcmVwb3J0X2NhcCAkcmVwb3J0X3NsZXcgJHJlcG9ydF9mYW5vdXQgJHJlcG9ydF9zcmNfYXR0cgoKICBzZXRfcmVwb3J0X3BhdGhfbm9fc3BsaXQgW2luZm8gZXhpc3RzIHBhdGhfb3B0aW9ucygtbm9fbGluZV9zcGxpdHMpXQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInJlcG9ydF9yZXF1aXJlZCIge3Bpbn0KCnByb2MgcmVwb3J0X3JlcXVpcmVkIHsgcGluIH0gewogIHJlcG9ydF9kZWxheXNfd3J0X2Nsa3MgJHBpbiAicmVxdWlyZWRzX2Nsa19kZWxheXMiCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAicmVwb3J0X3NsYWNrIiB7cGlufQoKcHJvYyByZXBvcnRfc2xhY2sgeyBwaW4gfSB7CiAgcmVwb3J0X2RlbGF5c193cnRfY2xrcyAkcGluICJzbGFja3NfY2xrX2RlbGF5cyIKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKIyBJbnRlcm5hbCBkZWJ1Z2dpbmcgY29tbWFuZC4KcHJvYyByZXBvcnRfdGFnX2Fycml2YWxzIHsgcGluIH0gewogIHNldCBwaW4gW2dldF9wb3J0X3Bpbl9lcnJvciAicGluIiAkcGluXQogIGZvcmVhY2ggdmVydGV4IFskcGluIHZlcnRpY2VzXSB7CiAgICByZXBvcnRfdGFnX2Fycml2YWxzX2NtZCAkdmVydGV4IDEKICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9oaWRkZW5fY21kX2FyZ3MgInRvdGFsX25lZ2F0aXZlX3NsYWNrIiBcCiAge1stY29ybmVyIGNvcm5lcl0gWy1taW5dfFstbWF4XX0KCnByb2MgdG90YWxfbmVnYXRpdmVfc2xhY2sgeyBhcmdzIH0gewogIHBhcnNlX2tleV9hcmdzICJ0b3RhbF9uZWdhdGl2ZV9zbGFjayIgYXJncyBcCiAgICBrZXlzIHstY29ybmVyfSBmbGFncyB7LW1pbiAtbWF4fQogIGNoZWNrX2FyZ2NfZXEwICJ0b3RhbF9uZWdhdGl2ZV9zbGFjayIgJGFyZ3MKICBzZXQgbWluX21heCBbcGFyc2VfbWluX21heF9mbGFncyBmbGFnc10KICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1jb3JuZXIpXSB9IHsKICAgIHNldCBjb3JuZXIgW3BhcnNlX2Nvcm5lcl9yZXF1aXJlZCBrZXlzXQogICAgc2V0IHRucyBbdG90YWxfbmVnYXRpdmVfc2xhY2tfY29ybmVyX2NtZCAkY29ybmVyICRtaW5fbWF4XQogIH0gZWxzZSB7CiAgICBzZXQgdG5zIFt0b3RhbF9uZWdhdGl2ZV9zbGFja19jbWQgJG1pbl9tYXhdCiAgfQogIHJldHVybiBbdGltZV9zdGFfdWkgJHRuc10KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2hpZGRlbl9jbWRfYXJncyAid29yc3RfbmVnYXRpdmVfc2xhY2siIFwKICB7Wy1jb3JuZXIgY29ybmVyXSBbLW1pbl18Wy1tYXhdfQoKcHJvYyB3b3JzdF9uZWdhdGl2ZV9zbGFjayB7IGFyZ3MgfSB7CiAgc2V0IHdvcnN0X3NsYWNrIFt3b3JzdF9zbGFjazEgIndvcnN0X25lZ2F0aXZlX3NsYWNrIiAkYXJnc10KICBpZiB7ICR3b3JzdF9zbGFjayA8IDAuMCB9IHsKICAgIHJldHVybiAkd29yc3Rfc2xhY2sKICB9IGVsc2UgewogICAgcmV0dXJuIDAuMAogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2hpZGRlbl9jbWRfYXJncyAid29yc3Rfc2xhY2siIFwKICB7Wy1jb3JuZXIgY29ybmVyXSBbLW1pbl18Wy1tYXhdfQoKcHJvYyB3b3JzdF9zbGFjayB7IGFyZ3MgfSB7CiAgcmV0dXJuIFt3b3JzdF9zbGFjazEgIndvcnN0X3NsYWNrIiAkYXJnc10KfQoKIyBhcmcgcGFyc2luZyBjb21tb24gdG8gd29yc3Rfc2xhY2svd29yc3RfbmVnYXRpdmVfc2xhY2sKcHJvYyB3b3JzdF9zbGFjazEgeyBjbWQgYXJnczEgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgJGNtZCBhcmdzMSBcCiAgICBrZXlzIHstY29ybmVyfSBmbGFncyB7LW1pbiAtbWF4fQogIGNoZWNrX2FyZ2NfZXEwICRjbWQgJGFyZ3MxCiAgc2V0IG1pbl9tYXggW3BhcnNlX21pbl9tYXhfZmxhZ3MgZmxhZ3NdCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtY29ybmVyKV0gfSB7CiAgICBzZXQgY29ybmVyIFtwYXJzZV9jb3JuZXJfcmVxdWlyZWQga2V5c10KICAgIHNldCB3b3JzdF9zbGFjayBbd29yc3Rfc2xhY2tfY29ybmVyICRjb3JuZXIgJG1pbl9tYXhdCiAgfSBlbHNlIHsKICAgIHNldCB3b3JzdF9zbGFjayBbd29yc3Rfc2xhY2tfY21kICRtaW5fbWF4XQogIH0KICByZXR1cm4gW3RpbWVfc3RhX3VpICR3b3JzdF9zbGFja10KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2hpZGRlbl9jbWRfYXJncyAid29yc3RfY2xvY2tfc2tldyIgXAogIHtbLXNldHVwXXxbLWhvbGRdWy1pbmNsdWRlX2ludGVybmFsX2xhdGVuY3ldfQoKcHJvYyB3b3JzdF9jbG9ja19za2V3IHsgYXJncyB9IHsKICBwYXJzZV9rZXlfYXJncyAid29yc3RfY2xvY2tfc2tldyIgYXJncyBrZXlzIHt9IFwKICAgIGZsYWdzIHstc2V0dXAgLWhvbGQgLWluY2x1ZGVfaW50ZXJuYWxfbGF0ZW5jeX0KICBjaGVja19hcmdjX2VxMCAid29yc3RfY2xvY2tfc2tldyIgJGFyZ3MKICBpZiB7IChbaW5mbyBleGlzdHMgZmxhZ3MoLXNldHVwKV0gJiYgW2luZm8gZXhpc3RzIGZsYWdzKC1ob2xkKV0pIFwKICAgICAgICAgfHwgKCFbaW5mbyBleGlzdHMgZmxhZ3MoLXNldHVwKV0gJiYgIVtpbmZvIGV4aXN0cyBmbGFncygtaG9sZCldKSB9IHsKICAgIHN0YV9lcnJvciA1MjYgInNwZWNpZnkgb25lIG9mIC1zZXR1cCBhbmQgLWhvbGQuIgogIH0gZWxzZWlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1zZXR1cCldIH0gewogICAgc2V0IHNldHVwX2hvbGQgInNldHVwIgogIH0gZWxzZWlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1ob2xkKV0gfSB7CiAgICBzZXQgc2V0dXBfaG9sZCAiaG9sZCIKICB9CiAgc2V0IGluY2x1ZGVfaW50ZXJuYWxfbGF0ZW5jeSBbaW5mbyBleGlzdHMgZmxhZ3MoLWluY2x1ZGVfaW50ZXJuYWxfbGF0ZW5jeSldCiByZXR1cm4gW3RpbWVfc3RhX3VpIFt3b3JzdF9jbGtfc2tld19jbWQgJHNldHVwX2hvbGQgJGluY2x1ZGVfaW50ZXJuYWxfbGF0ZW5jeV1dCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmRlZmluZV9jbWRfYXJncyAid3JpdGVfdGltaW5nX21vZGVsIiB7Wy1jb3JuZXIgY29ybmVyXSBcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLWxpYnJhcnlfbmFtZSBsaWJfbmFtZV1cCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLWNlbGxfbmFtZSBjZWxsX25hbWVdXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWV9Cgpwcm9jIHdyaXRlX3RpbWluZ19tb2RlbCB7IGFyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgIndyaXRlX3RpbWluZ19tb2RlbCIgYXJncyBcCiAgICBrZXlzIHstbGlicmFyeV9uYW1lIC1jZWxsX25hbWUgLWNvcm5lcn0gZmxhZ3Mge30KICBjaGVja19hcmdjX2VxMSAid3JpdGVfdGltaW5nX21vZGVsIiAkYXJncwoKICBzZXQgZmlsZW5hbWUgW2ZpbGUgbmF0aXZlbmFtZSBbbGluZGV4ICRhcmdzIDBdXQogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLWNlbGxfbmFtZSldIH0gewogICAgc2V0IGNlbGxfbmFtZSAka2V5cygtY2VsbF9uYW1lKQogIH0gZWxzZSB7CiAgICBzZXQgY2VsbF9uYW1lIFtnZXRfbmFtZSBbW3RvcF9pbnN0YW5jZV0gY2VsbF1dCiAgfQogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLWxpYnJhcnlfbmFtZSldIH0gewogICAgc2V0IGxpYl9uYW1lICRrZXlzKC1saWJyYXJ5X25hbWUpCiAgfSBlbHNlIHsKICAgIHNldCBsaWJfbmFtZSAkY2VsbF9uYW1lCiAgfQogIHNldCBjb3JuZXIgW3BhcnNlX2Nvcm5lciBrZXlzXQogIHdyaXRlX3RpbWluZ19tb2RlbF9jbWQgJGxpYl9uYW1lICRjZWxsX25hbWUgJGZpbGVuYW1lICRjb3JuZXIKICAgIAp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMKIyBIZWxwZXIgZnVuY3Rpb25zCiMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKcHJvYyBwYXJzZV9wYXRoX2dyb3VwX2FyZyB7IGdyb3VwX25hbWVzIH0gewogIHNldCBuYW1lcyB7fQogIGZvcmVhY2ggbmFtZSAkZ3JvdXBfbmFtZXMgewogICAgaWYgeyBbaXNfcGF0aF9ncm91cF9uYW1lICRuYW1lXSB9IHsKICAgICAgbGFwcGVuZCBuYW1lcyAkbmFtZQogICAgfSBlbHNlIHsKICAgICAgc3RhX3dhcm4gNTI3ICJ1bmtub3duIHBhdGggZ3JvdXAgJyRuYW1lJy4iCiAgICB9CiAgfQogIHJldHVybiAkbmFtZXMKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJyZXBvcnRfY2xvY2tfbWluX3BlcmlvZCIgXAogIHsgWy1jbG9ja3MgY2xvY2tzXSBbLWluY2x1ZGVfcG9ydF9wYXRoc10gfQoKcHJvY19yZWRpcmVjdCByZXBvcnRfY2xvY2tfbWluX3BlcmlvZCB7CiAgcGFyc2Vfa2V5X2FyZ3MgInJlcG9ydF9taW5fY2xvY2tfcGVyaW9kIiBhcmdzIFwKICAgIGtleXMgey1jbG9ja3N9IGZsYWdzIHstaW5jbHVkZV9wb3J0X3BhdGhzfSAwCiAgCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtY2xvY2tzKV0gfSB7CiAgICBzZXQgY2xrcyBbZ2V0X2Nsb2NrcyAka2V5cygtY2xvY2tzKV0KICB9IGVsc2UgewogICAgc2V0IGNsa3MgW3NvcnRfYnlfbmFtZSBbYWxsX2Nsb2Nrc11dCiAgfQogIHNldCBpbmNsdWRlX3BvcnRfcGF0aHMgW2luZm8gZXhpc3RzIGZsYWdzKC1pbmNsdWRlX3BvcnRfcGF0aHMpXQoKICBmb3JlYWNoIGNsayAkY2xrcyB7CiAgICBzZXQgbWluX3BlcmlvZCBbc3RhOjpmaW5kX2Nsa19taW5fcGVyaW9kICRjbGsgJGluY2x1ZGVfcG9ydF9wYXRoc10KICAgIGlmIHsgJG1pbl9wZXJpb2QgPT0gMC4wIH0gewogICAgICBzZXQgbWluX3BlcmlvZCAwCiAgICAgIHNldCBmbWF4ICJJTkYiCiAgICB9IGVsc2UgewogICAgICAjIG1heCBmcmVxdWVuY3kgaW4gTUh6CiAgICAgIHNldCBmbWF4IFtleHByIDEuMGUtNiAvICRtaW5fcGVyaW9kXQogICAgfQogICAgcmVwb3J0X2xpbmUgIltnZXRfbmFtZSAkY2xrXSBwZXJpb2RfbWluID0gW3N0YTo6Zm9ybWF0X3RpbWUgJG1pbl9wZXJpb2QgMl0gZm1heCA9IFtmb3JtYXQgJS4yZiAkZm1heF0iCiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpkZWZpbmVfY21kX2FyZ3MgInNldF9kaXNhYmxlX2luZmVycmVkX2Nsb2NrX2dhdGluZyIgeyBvYmplY3RzIH0KCnByb2Mgc2V0X2Rpc2FibGVfaW5mZXJyZWRfY2xvY2tfZ2F0aW5nIHsgb2JqZWN0cyB9IHsKICBzZXRfZGlzYWJsZV9pbmZlcnJlZF9jbG9ja19nYXRpbmdfY21kICRvYmplY3RzCn0KCnByb2Mgc2V0X2Rpc2FibGVfaW5mZXJyZWRfY2xvY2tfZ2F0aW5nX2NtZCB7IG9iamVjdHMgfSB7CiAgcGFyc2VfaW5zdF9wb3J0X3Bpbl9hcmcgJG9iamVjdHMgaW5zdHMgcGlucwogIGZvcmVhY2ggaW5zdCAkaW5zdHMgewogICAgZGlzYWJsZV9jbG9ja19nYXRpbmdfY2hlY2tfaW5zdCAkaW5zdAogIH0KICBmb3JlYWNoIHBpbiAkcGlucyB7CiAgICBkaXNhYmxlX2Nsb2NrX2dhdGluZ19jaGVja19waW4gJHBpbgogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZGVmaW5lX2NtZF9hcmdzICJ1bnNldF9kaXNhYmxlX2luZmVycmVkX2Nsb2NrX2dhdGluZyIgeyBvYmplY3RzIH0KCnByb2MgdW5zZXRfZGlzYWJsZV9pbmZlcnJlZF9jbG9ja19nYXRpbmcgeyBvYmplY3RzIH0gewogIHVuc2V0X2Rpc2FibGVfaW5mZXJyZWRfY2xvY2tfZ2F0aW5nX2NtZCAkb2JqZWN0cwp9Cgpwcm9jIHVuc2V0X2Rpc2FibGVfaW5mZXJyZWRfY2xvY2tfZ2F0aW5nX2NtZCB7IG9iamVjdHMgfSB7CiAgcGFyc2VfaW5zdF9wb3J0X3Bpbl9hcmcgJG9iamVjdHMgaW5zdHMgcGlucwogIGZvcmVhY2ggaW5zdCAkaW5zdHMgewogICAgdW5zZXRfZGlzYWJsZV9jbG9ja19nYXRpbmdfY2hlY2tfaW5zdCAkaW5zdAogIH0KICBmb3JlYWNoIHBpbiAkcGlucyB7CiAgICB1bnNldF9kaXNhYmxlX2Nsb2NrX2dhdGluZ19jaGVja19waW4gJHBpbgogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKIyBtYXggc2xldyBzbGFjayAvIGxpbWl0CnByb2MgbWF4X3NsZXdfY2hlY2tfc2xhY2tfbGltaXQge30gewogIHJldHVybiBbZXhwciAiW3N0YTo6bWF4X3NsZXdfY2hlY2tfc2xhY2tdIC8gW3N0YTo6bWF4X3NsZXdfY2hlY2tfbGltaXRdIl0KfQoKIyBtYXggY2FwIHNsYWNrIC8gbGltaXQKcHJvYyBtYXhfY2FwYWNpdGFuY2VfY2hlY2tfc2xhY2tfbGltaXQge30gewogIHJldHVybiBbZXhwciBbc3RhOjptYXhfY2FwYWNpdGFuY2VfY2hlY2tfc2xhY2tdIC8gW3N0YTo6bWF4X2NhcGFjaXRhbmNlX2NoZWNrX2xpbWl0XV0KfQoKIyBtYXggZmFub3V0IHNsYWNrIC8gbGltaXQKcHJvYyBtYXhfZmFub3V0X2NoZWNrX3NsYWNrX2xpbWl0IHt9IHsKICByZXR1cm4gW2V4cHIgW3N0YTo6bWF4X2Zhbm91dF9jaGVja19zbGFja10gLyBbc3RhOjptYXhfZmFub3V0X2NoZWNrX2xpbWl0XV0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKcHJvYyByZl9zaG9ydF9uYW1lIHsgcmYgfSB7CiAgaWYgeyBbcmZfaXNfcmlzZSAkcmZdIH0gewogICAgcmV0dXJuIFtyaXNlX3Nob3J0X25hbWVdCiAgfSBlbHNlaWYgeyBbcmZfaXNfZmFsbCAkcmZdIH0gewogICAgcmV0dXJuIFtmYWxsX3Nob3J0X25hbWVdCiAgfSBlbHNlIHsKICAgIGVycm9yICJ1bmtub3duIHRyYW5zaXRpb24gbmFtZSAkcmYiCiAgfQp9Cgpwcm9jIG9wcG9zaXRlX3JmIHsgcmYgfSB7CiAgaWYgeyBbcmZfaXNfcmlzZSAkcmZdIH0gewogICAgcmV0dXJuICJmYWxsIgogIH0gZWxzZWlmIHsgW3JmX2lzX2ZhbGwgJHJmXSB9IHsKICAgIHJldHVybiAicmlzZSIKICB9IGVsc2UgewogICAgZXJyb3IgIm9wcG9zaXRlX3JmIHVua25vd24gdHJhbnNpdGlvbiAkcmYiCiAgfQp9Cgpwcm9jIHJmX2lzX3Jpc2UgeyByZiB9IHsKICBpZiB7ICRyZiA9PSAicmlzZSIgfHwgJHJmID09ICJeIiB8fCAkcmYgPT0gInIifSB7CiAgICByZXR1cm4gMQogIH0gZWxzZSB7CiAgICByZXR1cm4gMAogIH0KfQoKcHJvYyByZl9pc19mYWxsIHsgcmYgfSB7CiAgaWYgeyAkcmYgPT0gImZhbGwiIHx8ICRyZiA9PSAidiIgfHwgJHJmID09ICJmIn0gewogICAgcmV0dXJuIDEKICB9IGVsc2UgewogICAgcmV0dXJuIDAKICB9Cn0KCiMgc3RhIG5hbWVzcGFjZSBlbmQuCn0KIyBPcGVuU1RBLCBTdGF0aWMgVGltaW5nIEFuYWx5emVyCiMgQ29weXJpZ2h0IChjKSAyMDI1LCBQYXJhbGxheCBTb2Z0d2FyZSwgSW5jLgojIAojIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5CiMgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkKIyB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvcgojIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCiMgCiMgVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiMgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKIyBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGUKIyBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgojIAojIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCiMgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uIElmIG5vdCwgc2VlIDxodHRwczovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCiMgCiMgVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QKIyBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiMgCiMgQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUKIyBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuCiMgCiMgVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4KCiMgVGhlIHN0YSBuYW1lc3BhY2UgaXMgdXNlZCBmb3IgYWxsIGNvbW1hbmRzIGRlZmluZWQgYnkgdGhlIHN0YS4KIyBVc2UgZGVmaW5lX2NtZF9hcmdzIHRvIGRlZmluZSBjb21tYW5kIGFyZ3VtZW50cyBmb3IgdGhlIGhlbHAKIyBjb21tYW5kLCBhbmQgZXhwb3J0IHRoZSBjb21tYW5kIG5hbWUgdG8gdGhlIGdsb2JhbCBuYW1lc3BhY2UuCiMgR2xvYmFsIHZhcmlhYmxlcyBtdXN0IGJlIGRlZmluZWQgYXMKIyAgc2V0IGdsb2JhbF92YXIgaW5pdF92YWx1ZQojIEZpbGUgbG9jYWwgdmFyaWFibGVzIG11c3QgYmUgZGVmaW5lZCBhcwojICB2YXJpYWJsZSBzdGFfdmFyIGluaXRfdmFsdWUKCm5hbWVzcGFjZSBldmFsIHN0YSB7CgojIFBhcnNlIGFyZ192YXIgZm9yIGtleXdvcmQvdmFsdWVzIHBhaXJzIGFuZCBmbGFncy4KIyAka2V5X3ZhcihrZXkpIC0+IGtleV92YWx1ZQojICRmbGFnX3ZhcihmbGFnKSAtPiAxIGlmIHRoZSBmbGFnIGlzIHByZXNlbnQKIyBLZXlzIGFuZCBmbGFncyBhcmUgcmVtb3ZlZCBmcm9tIGFyZ192YXIgaW4gdGhlIGNhbGxlci4KcHJvYyBwYXJzZV9rZXlfYXJncyB7IGNtZCBhcmdfdmFyIGtleV92YXIga2V5cyB7ZmxhZ192YXIgIiJ9IHtmbGFncyB7fX0gXAoJCQl7dW5rbm93bl9rZXlfaXNfZXJyb3IgMX0gfSB7CiAgdXB2YXIgMSAkYXJnX3ZhciBhcmdzCiAgdXB2YXIgMSAka2V5X3ZhciBrZXlfdmFsdWUKICB1cHZhciAxICRmbGFnX3ZhciBmbGFnX3ByZXNlbnQKICBzZXQgYXJnc19ydG4ge30KICB3aGlsZSB7ICRhcmdzICE9ICIiIH0gewogICAgc2V0IGFyZyBbbGluZGV4ICRhcmdzIDBdCiAgICBpZiB7IFtpc19rZXl3b3JkX2FyZyAkYXJnXSB9IHsKICAgICAgc2V0IGtleV9pbmRleCBbbHNlYXJjaCAtZXhhY3QgJGtleXMgJGFyZ10KICAgICAgaWYgeyAka2V5X2luZGV4ID49IDAgfSB7CglzZXQga2V5ICRhcmcKCWlmIHsgW2xsZW5ndGggJGFyZ3NdID09IDEgfSB7CgkgIHN0YV9lcnJvciA1NjAgIiRjbWQgJGtleSBtaXNzaW5nIHZhbHVlLiIKCX0KCXNldCBrZXlfdmFsdWUoJGtleSkgW2xpbmRleCAkYXJncyAxXQoJc2V0IGFyZ3MgW2xyYW5nZSAkYXJncyAxIGVuZF0KICAgICAgfSBlbHNlIHsKCXNldCBmbGFnX2luZGV4IFtsc2VhcmNoIC1leGFjdCAkZmxhZ3MgJGFyZ10KCWlmIHsgJGZsYWdfaW5kZXggPj0gMCB9IHsKCSAgc2V0IGZsYWdfcHJlc2VudCgkYXJnKSAxCgl9IGVsc2UgewoJICAjIE5vIGV4YWN0IGtleXdvcmQvZmxhZyBtYXRjaCBmb3VuZC4KCSAgIyBUcnkgZmluZGluZyBhIGtleXdvcmQvZmxhZyB0aGF0IGJlZ2lucyB3aXRoCgkgICMgdGhlIHNhbWUgc3Vic3RyaW5nLgoJICBzZXQgd2lsZF9hcmcgIiR7YXJnfSoiCgkgIHNldCBrZXlfaW5kZXggW2xzZWFyY2ggLWdsb2IgJGtleXMgJHdpbGRfYXJnXQoJICBpZiB7ICRrZXlfaW5kZXggPj0gMCB9IHsKCSAgICBzZXQga2V5IFtsaW5kZXggJGtleXMgJGtleV9pbmRleF0KCSAgICBpZiB7IFtsbGVuZ3RoICRhcmdzXSA9PSAxIH0gewoJICAgICAgc3RhX2Vycm9yIDU2MSAiJGNtZCAka2V5IG1pc3NpbmcgdmFsdWUuIgoJICAgIH0KCSAgICBzZXQga2V5X3ZhbHVlKCRrZXkpIFtsaW5kZXggJGFyZ3MgMV0KCSAgICBzZXQgYXJncyBbbHJhbmdlICRhcmdzIDEgZW5kXQoJICB9IGVsc2UgewoJICAgIHNldCBmbGFnX2luZGV4IFtsc2VhcmNoIC1nbG9iICRmbGFncyAkd2lsZF9hcmddCgkgICAgaWYgeyAkZmxhZ19pbmRleCA+PSAwIH0gewoJICAgICAgc2V0IGZsYWcgW2xpbmRleCAkZmxhZ3MgJGZsYWdfaW5kZXhdCgkgICAgICBzZXQgZmxhZ19wcmVzZW50KCRmbGFnKSAxCgkgICAgfSBlbHNlaWYgeyAkdW5rbm93bl9rZXlfaXNfZXJyb3IgfSB7CgkgICAgICBzdGFfZXJyb3IgNTYyICIkY21kICRhcmcgaXMgbm90IGEga25vd24ga2V5d29yZCBvciBmbGFnLiIKCSAgICB9IGVsc2UgewoJICAgICAgbGFwcGVuZCBhcmdzX3J0biAkYXJnCgkgICAgfQoJICB9Cgl9CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGxhcHBlbmQgYXJnc19ydG4gJGFyZwogICAgfQogICAgc2V0IGFyZ3MgW2xyYW5nZSAkYXJncyAxIGVuZF0KICB9CiAgc2V0IGFyZ3MgJGFyZ3NfcnRuCn0KCiMgQ2hlY2sgZm9yIGtleXdvcmQgYXJncyBpbiBhcmdfdmFyLgpwcm9jIGNoZWNrX2Zvcl9rZXlfYXJncyB7IGNtZCBhcmdfdmFyIH0gewogIHVwdmFyIDEgJGFyZ192YXIgYXJncwogIHNldCBhcmdzX3J0biB7fQogIHdoaWxlIHsgJGFyZ3MgIT0gIiIgfSB7CiAgICBzZXQgYXJnIFtsaW5kZXggJGFyZ3MgMF0KICAgIGlmIHsgW2lzX2tleXdvcmRfYXJnICRhcmddIH0gewogICAgICBzdGFfZXJyb3IgNTYzICIkY21kICRhcmcgaXMgbm90IGEga25vd24ga2V5d29yZCBvciBmbGFnLiIKICAgIH0gZWxzZSB7CiAgICAgIGxhcHBlbmQgYXJnc19ydG4gJGFyZwogICAgfQogICAgc2V0IGFyZ3MgW2xyYW5nZSAkYXJncyAxIGVuZF0KICB9CiAgc2V0IGFyZ3MgJGFyZ3NfcnRuCn0KCnByb2MgaXNfa2V5d29yZF9hcmcgeyBhcmcgfSB7CiAgaWYgeyBbc3RyaW5nIGxlbmd0aCAkYXJnXSA+PSAyIFwKCSAmJiBbc3RyaW5nIGluZGV4ICRhcmcgMF0gPT0gIi0iIFwKCSAmJiBbc3RyaW5nIGlzIGFscGhhIFtzdHJpbmcgaW5kZXggJGFyZyAxXV0gfSB7CiAgICByZXR1cm4gMQogIH0gZWxzZSB7CiAgICByZXR1cm4gMAogIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKIyBEZWZpbmUgYSBwcm9jZWR1cmUgdGhhdCBjaGVja3MgdGhlIGFyZ3MgZm9yIHJlZGlyZWN0aW9uIHVzaW5nIHVuaXgKIyBzaGVsbCByZWRpcmVjdGlvbiBzeW50YXguCiMgVGhlIHZhbHVlIG9mIHRoZSBsYXN0IGV4cHJlc3Npb24gaW4gdGhlIGJvZHkgaXMgcmV0dXJuZWQuCnByb2MgcHJvY19yZWRpcmVjdCB7IHByb2NfbmFtZSBib2R5IH0gewogIHNldCBwcm9jX2JvZHkgW2NvbmNhdCAicHJvYyAkcHJvY19uYW1lIHsgYXJncyB9IHsiIFwKCQkgICAiZ2xvYmFsIGVycm9yQ29kZSBlcnJvckluZm87IiBcCgkJICAgInNldCByZWRpcmVjdCBcW3BhcnNlX3JlZGlyZWN0X2FyZ3MgYXJnc1xdOyIgXAoJCSAgICJzZXQgY29kZSBcW2NhdGNoIHsiICRib2R5ICJ9IHJldCBcXTsiIFwKCQkgICAiaWYge1wkcmVkaXJlY3R9IHsgcmVkaXJlY3RfZmlsZV9lbmQgfTsiIFwKCQkgICAiaWYge1wkY29kZSA9PSAxfSB7cmV0dXJuIC1jb2RlIFwkY29kZSAtZXJyb3Jjb2RlIFwkZXJyb3JDb2RlIC1lcnJvcmluZm8gXCRlcnJvckluZm8gXCRyZXR9IGVsc2Uge3JldHVybiBcJHJldH0gfSIgXQogIGV2YWwgJHByb2NfYm9keQp9Cgpwcm9jIHBhcnNlX3JlZGlyZWN0X2FyZ3MgeyBhcmdfdmFyIH0gewogIHVwdmFyIDEgJGFyZ192YXIgYXJncwogIHNldCBhcmdjIFtsbGVuZ3RoICRhcmdzXQogIGlmIHsgJGFyZ2MgPj0gMSB9IHsKICAgIHNldCBsYXN0X2FyZyBbbGluZGV4ICRhcmdzIFtleHByICRhcmdjIC0gMV1dCiAgICAjIGFyZyA+PmZpbGVuYW1lCiAgICBpZiB7IFtzdHJpbmcgcmFuZ2UgJGxhc3RfYXJnIDAgMV0gPT0gIj4+IiB9IHsKICAgICAgc2V0IHJlZGlyZWN0X2ZpbGUgW2ZpbGUgbmF0aXZlbmFtZSBbc3RyaW5nIHJhbmdlICRsYXN0X2FyZyAyIGVuZF1dCiAgICAgIHNldCBhcmdzIFtscmFuZ2UgJGFyZ3MgMCBbZXhwciAkYXJnYyAtIDJdXQogICAgICByZWRpcmVjdF9maWxlX2FwcGVuZF9iZWdpbiAkcmVkaXJlY3RfZmlsZQogICAgICByZXR1cm4gMQogICAgIyBhcmcgPmZpbGVuYW1lCiAgICB9IGVsc2VpZiB7IFtzdHJpbmcgcmFuZ2UgJGxhc3RfYXJnIDAgMF0gPT0gIj4iIH0gewogICAgICBzZXQgcmVkaXJlY3RfZmlsZSBbZmlsZSBuYXRpdmVuYW1lIFtzdHJpbmcgcmFuZ2UgJGxhc3RfYXJnIDEgZW5kXV0KICAgICAgc2V0IGFyZ3MgW2xyYW5nZSAkYXJncyAwIFtleHByICRhcmdjIC0gMl1dCiAgICAgIHJlZGlyZWN0X2ZpbGVfYmVnaW4gJHJlZGlyZWN0X2ZpbGUKICAgICAgcmV0dXJuIDEKICAgIH0KICB9CiAgaWYgeyAkYXJnYyA+PSAyIH0gewogICAgc2V0IG5leHRfbGFzdF9hcmcgW2xpbmRleCAkYXJncyBbZXhwciAkYXJnYyAtIDJdXQogICAgIyBhcmcgPiBmaWxlbmFtZQogICAgaWYgeyAkbmV4dF9sYXN0X2FyZyA9PSAiPiIgfSB7CiAgICAgIHNldCByZWRpcmVjdF9maWxlIFtmaWxlIG5hdGl2ZW5hbWUgW2xpbmRleCAkYXJncyBlbmRdXQogICAgICBzZXQgYXJncyBbbHJhbmdlICRhcmdzIDAgW2V4cHIgJGFyZ2MgLSAzXV0KICAgICAgcmVkaXJlY3RfZmlsZV9iZWdpbiAkcmVkaXJlY3RfZmlsZQogICAgICByZXR1cm4gMQogICAgIyBhcmcgPj4gZmlsZW5hbWUKICAgIH0gZWxzZWlmIHsgJG5leHRfbGFzdF9hcmcgPT0gIj4+IiB9IHsKICAgICAgc2V0IHJlZGlyZWN0X2ZpbGUgW2ZpbGUgbmF0aXZlbmFtZSBbbGluZGV4ICRhcmdzIGVuZF1dCiAgICAgIHNldCBhcmdzIFtscmFuZ2UgJGFyZ3MgMCBbZXhwciAkYXJnYyAtIDNdXQogICAgICByZWRpcmVjdF9maWxlX2FwcGVuZF9iZWdpbiAkcmVkaXJlY3RfZmlsZQogICAgICByZXR1cm4gMQogICAgfQogIH0KICByZXR1cm4gMAp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpwcm9jIGRlZmluZV9jbWRfYXJncyB7IGNtZCBhcmdsaXN0IH0gewogIHZhcmlhYmxlIGNtZF9hcmdzCgogIHNldCBjbWRfYXJncygkY21kKSAkYXJnbGlzdAogIG5hbWVzcGFjZSBleHBvcnQgJGNtZAp9CgojIEhpZGRlbiBjb21tYW5kcyBhcmUgZXhwb3J0ZWQgdG8gdGhlIGdsb2JhbCBuYW1lc3BhY2UgYnV0IGFyZSBub3QKIyBzaG93biBieSB0aGUgImhlbHAiIGNvbW1hbmQuCnByb2MgZGVmaW5lX2hpZGRlbl9jbWRfYXJncyB7IGNtZCBhcmdsaXN0IH0gewogIG5hbWVzcGFjZSBleHBvcnQgJGNtZAp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpwcm9jIHN0YV93YXJuIHsgbXNnX2lkIG1zZyB9IHsKICBpZiB7IFtzZGNfZmlsZW5hbWVdICE9ICIiIH0gewogICAgcmVwb3J0X2ZpbGVfd2FybiAkbXNnX2lkIFtmaWxlIHRhaWwgW3NkY19maWxlbmFtZV1dIFtzZGNfZmlsZV9saW5lXSAkbXNnCiAgfSBlbHNlIHsKICAgIHJlcG9ydF93YXJuICRtc2dfaWQgJG1zZwogIH0KfQoKcHJvYyBzdGFfZXJyb3IgeyBtc2dfaWQgbXNnIH0gewogIGlmIHsgISBbaXNfc3VwcHJlc3NlZCAkbXNnX2lkXSB9IHsKICAgIGlmIHsgW3NkY19maWxlbmFtZV0gIT0gIiIgfSB7CiAgICAgIGVycm9yICJFcnJvcjogW2ZpbGUgdGFpbCBbc2RjX2ZpbGVuYW1lXV0gbGluZSBbc2RjX2ZpbGVfbGluZV0sICRtc2ciCiAgICB9IGVsc2UgewogICAgICBlcnJvciAiRXJyb3I6ICRtc2ciCiAgICB9CiAgfQp9Cgpwcm9jIHNkY19maWxlbmFtZSB7fSB7CiAgcmV0dXJuIFtpbmZvIHNjcmlwdF0KfQoKcHJvYyBzZGNfZmlsZV9saW5lIHsgfSB7CiAgdmFyaWFibGUgaW5jbHVkZV9saW5lCiAgZm9yIHsgc2V0IGZyIFtpbmZvIGZyYW1lXSB9IHsgJGZyID49IDAgfSB7IGluY3IgZnIgLTEgfSB7CiAgICBzZXQgdHlwZSBbZGljdCBnZXQgW2luZm8gZnJhbWUgJGZyXSB0eXBlXQogICAgaWYgeyAkdHlwZSA9PSAic291cmNlIiB9IHsKICAgICAgcmV0dXJuIFtkaWN0IGdldCBbaW5mbyBmcmFtZSAkZnJdIGxpbmVdCiAgICB9CiAgICBpZiB7ICR0eXBlID09ICJwcm9jIiBcCiAgICAgICAgICAgJiYgW2xpbmRleCBbZGljdCBnZXQgW2luZm8gZnJhbWUgJGZyXSBjbWRdIDBdID09ICJpbmNsdWRlX2ZpbGUiIH0gewogICAgICByZXR1cm4gJGluY2x1ZGVfbGluZQogICAgfQogIH0KICByZXR1cm4gMQp9Cgpwcm9jIHN0YV93YXJuX2Vycm9yIHsgbXNnX2lkIHdhcm5fZXJyb3IgbXNnIH0gewogIGlmIHsgJHdhcm5fZXJyb3IgPT0gIndhcm4iIH0gewogICAgc3RhX3dhcm4gJG1zZ19pZCAkbXNnCiAgfSBlbHNlIHsKICAgIHN0YV9lcnJvciAkbXNnX2lkICRtc2cKICB9Cn0KCmRlZmluZV9jbWRfYXJncyAic3VwcHJlc3NfbXNnIiBtc2dfaWRzCgpwcm9jIHN1cHByZXNzX21zZyB7IGFyZ3MgfSB7CiAgZm9yZWFjaCBtc2dfaWQgJGFyZ3MgewogICAgY2hlY2tfaW50ZWdlciAibXNnX2lkIiAkbXNnX2lkCiAgICBzdXBwcmVzc19tc2dfaWQgJG1zZ19pZAogIH0KfQoKZGVmaW5lX2NtZF9hcmdzICJ1bnN1cHByZXNzX21zZyIgbXNnX2lkcwoKcHJvYyB1bnN1cHByZXNzX21zZyB7IGFyZ3MgfSB7CiAgZm9yZWFjaCBtc2dfaWQgJGFyZ3MgewogICAgY2hlY2tfaW50ZWdlciAibXNnX2lkIiAkbXNnX2lkCiAgICB1bnN1cHByZXNzX21zZ19pZCAkbXNnX2lkCiAgfQp9CgojIERlZmluZWQgYnkgU3RhVGNsLmkKZGVmaW5lX2NtZF9hcmdzICJlbGFwc2VkX3J1bl90aW1lIiB7fQpkZWZpbmVfY21kX2FyZ3MgInVzZXJfcnVuX3RpbWUiIHt9CgojIFdyaXRlIHJ1biB0aW1lIHN0YXRpc3RpY3MgdG8gZmlsZW5hbWUuCnByb2Mgd3JpdGVfc3RhdHMgeyBmaWxlbmFtZSB9IHsKICBpZiB7ICFbY2F0Y2gge29wZW4gJGZpbGVuYW1lIHd9IHN0cmVhbV0gfSB7CiAgICBwdXRzICRzdHJlYW0gIltlbGFwc2VkX3J1bl90aW1lXSBbdXNlcl9ydW5fdGltZV0gW21lbW9yeV91c2FnZV0iCiAgICBjbG9zZSAkc3RyZWFtCiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgojIEJlZ2luL2VuZCBsb2dnaW5nIGFsbCBvdXRwdXQgdG8gYSBmaWxlLgpkZWZpbmVfY21kX2FyZ3MgImxvZ19iZWdpbiIgeyBmaWxlbmFtZSB9Cgpwcm9jIGxvZ19iZWdpbiB7IGZpbGVuYW1lIH0gewogIGxvZ19iZWdpbl9jbWQgW2ZpbGUgbmF0aXZlbmFtZSAkZmlsZW5hbWVdCn0KCiMgRGVmaW5lZCBieSBTdGFUY2wuaQpkZWZpbmVfY21kX2FyZ3MgImxvZ19lbmQiIHt9CgojIHNldF9kZWJ1ZyBpcyBOT1QgaW4gdGhlIGdsb2JhbCBuYW1lc3BhY2UKIyBiZWNhdXNlIGl0IGlzbid0IGludGVuZGVkIGZvciBub3N5IHVzZXJzLgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKcHJvYyBjaGVja19hcmdjX2VxMCB7IGNtZCBhcmdsaXN0IH0gewogIGlmIHsgJGFyZ2xpc3QgIT0ge30gfSB7CiAgICBzdGFfZXJyb3IgNTY0ICIkY21kIHBvc2l0aW9uYWwgYXJndW1lbnRzIG5vdCBzdXBwb3J0ZWQuIgogIH0KfQoKcHJvYyBjaGVja19hcmdjX2VxMSB7IGNtZCBhcmdsaXN0IH0gewogIGlmIHsgW2xsZW5ndGggJGFyZ2xpc3RdICE9IDEgfSB7CiAgICBzdGFfZXJyb3IgNTY1ICIkY21kIHJlcXVpcmVzIG9uZSBwb3NpdGlvbmFsIGFyZ3VtZW50LiIKICB9Cn0KCnByb2MgY2hlY2tfYXJnY19lcTBvcjEgeyBjbWQgYXJnbGlzdCB9IHsKICBzZXQgYXJnYyBbbGxlbmd0aCAkYXJnbGlzdF0KICBpZiB7ICRhcmdjICE9IDAgJiYgJGFyZ2MgIT0gMSB9IHsKICAgIHN0YV9lcnJvciA1NjYgIiRjbWQgcmVxdWlyZXMgemVybyBvciBvbmUgcG9zaXRpb25hbCBhcmd1bWVudHMuIgogIH0KfQoKcHJvYyBjaGVja19hcmdjX2VxMiB7IGNtZCBhcmdsaXN0IH0gewogIGlmIHsgW2xsZW5ndGggJGFyZ2xpc3RdICE9IDIgfSB7CiAgICBzdGFfZXJyb3IgNTY3ICIkY21kIHJlcXVpcmVzIHR3byBwb3NpdGlvbmFsIGFyZ3VtZW50cy4iCiAgfQp9Cgpwcm9jIGNoZWNrX2FyZ2NfZXExb3IyIHsgY21kIGFyZ2xpc3QgfSB7CiAgc2V0IGFyZ2MgW2xsZW5ndGggJGFyZ2xpc3RdCiAgaWYgeyAkYXJnYyAhPSAxICYmICRhcmdjICE9IDIgfSB7CiAgICBzdGFfZXJyb3IgNTY4ICIkY21kIHJlcXVpcmVzIG9uZSBvciB0d28gcG9zaXRpb25hbCBhcmd1bWVudHMuIgogIH0KfQoKcHJvYyBjaGVja19hcmdjX2VxMyB7IGNtZCBhcmdsaXN0IH0gewogIGlmIHsgW2xsZW5ndGggJGFyZ2xpc3RdICE9IDMgfSB7CiAgICBzdGFfZXJyb3IgNTY5ICIkY21kIHJlcXVpcmVzIHRocmVlIHBvc2l0aW9uYWwgYXJndW1lbnRzLiIKICB9Cn0KCnByb2MgY2hlY2tfYXJnY19lcTQgeyBjbWQgYXJnbGlzdCB9IHsKICBpZiB7IFtsbGVuZ3RoICRhcmdsaXN0XSAhPSA0IH0gewogICAgc3RhX2Vycm9yIDU3MCAiJGNtZCByZXF1aXJlcyBmb3VyIHBvc2l0aW9uYWwgYXJndW1lbnRzLiIKICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCnByb2MgY2hlY2tfZmxvYXQgeyBjbWRfYXJnIGFyZyB9IHsKICBpZiB7IVtzdHJpbmcgaXMgZG91YmxlICRhcmddfSB7CiAgICBzdGFfZXJyb3IgNTcxICIkY21kX2FyZyAnJGFyZycgaXMgbm90IGEgZmxvYXQuIgogIH0KfQoKcHJvYyBjaGVja19wb3NpdGl2ZV9mbG9hdCB7IGNtZF9hcmcgYXJnIH0gewogIGlmIHshKFtzdHJpbmcgaXMgZG91YmxlICRhcmddICYmICRhcmcgPj0gMC4wKX0gewogICAgc3RhX2Vycm9yIDU3MiAiJGNtZF9hcmcgJyRhcmcnIGlzIG5vdCBhIHBvc2l0aXZlIGZsb2F0LiIKICB9Cn0KCnByb2MgY2hlY2tfaW50ZWdlciB7IGNtZF9hcmcgYXJnIH0gewogIGlmIHshKFtzdHJpbmcgaXMgaW50ZWdlciAkYXJnXSl9IHsKICAgIHN0YV9lcnJvciA1NzMgIiRjbWRfYXJnICckYXJnJyBpcyBub3QgYW4gaW50ZWdlci4iCiAgfQp9Cgpwcm9jIGNoZWNrX3Bvc2l0aXZlX2ludGVnZXIgeyBjbWRfYXJnIGFyZyB9IHsKICBpZiB7IShbc3RyaW5nIGlzIGludGVnZXIgJGFyZ10gJiYgJGFyZyA+PSAwKX0gewogICAgc3RhX2Vycm9yIDU3NCAiJGNtZF9hcmcgJyRhcmcnIGlzIG5vdCBhIHBvc2l0aXZlIGludGVnZXIuIgogIH0KfQoKcHJvYyBjaGVja19jYXJkaW5hbCB7IGNtZF9hcmcgYXJnIH0gewogIGlmIHshKFtzdHJpbmcgaXMgaW50ZWdlciAkYXJnXSAmJiAkYXJnID49IDEpfSB7CiAgICBzdGFfZXJyb3IgNTc1ICIkY21kX2FyZyAnJGFyZycgaXMgbm90IGFuIGludGVnZXIgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIG9uZS4iCiAgfQp9Cgpwcm9jIGNoZWNrX3BlcmNlbnQgeyBjbWRfYXJnIGFyZyB9IHsKICBpZiB7IShbc3RyaW5nIGlzIGRvdWJsZSAkYXJnXSAmJiAkYXJnID49IDAuMCAmJiAkYXJnIDw9IDEwMC4wKX0gewogICAgc3RhX2Vycm9yIDU3NiAiJGNtZF9hcmcgJyRhcmcnIGlzIG5vdCBiZXR3ZWVuIDAgYW5kIDEwMC4iCiAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpzZXQgOjpzdGFfY29udGludWVfb25fZXJyb3IgMAoKZGVmaW5lX2NtZF9hcmdzICJpbmNsdWRlIiBcCiAge1stZXwtZWNob10gWy12fC12ZXJib3NlXSBmaWxlbmFtZSBbPiBmaWxlbmFtZV0gWz4+IGZpbGVuYW1lXX0KCiMgVGNsICJzb3VyY2UiIGNvbW1hbmQgYW5hbG9nIHRvIHN1cHBvcnQgLWVjaG8gYW5kIC12ZXJib3NlIHJldHVybiB2YWx1ZXMuCnByb2NfcmVkaXJlY3QgaW5jbHVkZSAgewogIHBhcnNlX2tleV9hcmdzICJpbmNsdWRlIiBhcmdzIGtleXMgey1lbmNvZGluZ30gZmxhZ3Mgey1lIC1lY2hvIC12IC12ZXJib3NlfQogIGlmIHsgW2xsZW5ndGggJGFyZ3NdICE9IDEgfSB7CiAgICBjbWRfdXNhZ2VfZXJyb3IgImluY2x1ZGUiCiAgfQogIHNldCBlY2hvIFtleHByIFtpbmZvIGV4aXN0cyBmbGFncygtZWNobyldIHx8IFtpbmZvIGV4aXN0cyBmbGFncygtZSldXQogIHNldCB2ZXJib3NlIFtleHByIFtpbmZvIGV4aXN0cyBmbGFncygtdmVyYm9zZSldIHx8IFtpbmZvIGV4aXN0cyBmbGFncygtdildXQogIHNldCBmaWxlbmFtZSBbZmlsZSBuYXRpdmVuYW1lIFtsaW5kZXggJGFyZ3MgMF1dCiAgaW5jbHVkZV9maWxlICRmaWxlbmFtZSAkZWNobyAkdmVyYm9zZQp9Cgpwcm9jIGluY2x1ZGVfZmlsZSB7IGZpbGVuYW1lIGVjaG8gdmVyYm9zZSB9IHsKICBnbG9iYWwgc3RhX2NvbnRpbnVlX29uX2Vycm9yCiAgdmFyaWFibGUgaW5jbHVkZV9saW5lCiAgCiAgc2V0IHByZXZfZmlsZW5hbWUgW2luZm8gc2NyaXB0XQogIGlmIHsgW2luZm8gZXhpc3RzIGluY2x1ZGVfbGluZV0gfSB7CiAgICBzZXQgcHJldl9saW5lICRpbmNsdWRlX2xpbmUKICB9CiAgdHJ5IHsKICAgICMgc2V0IGZpbGVuYW1lL2xpbmUgZm9yIHN0YV93YXJuL2Vycm9yCiAgICBpbmZvIHNjcmlwdCAkZmlsZW5hbWUKICAgIHNldCBpbmNsdWRlX2xpbmUgMQogICAgaWYgW2NhdGNoIHtvcGVuICRmaWxlbmFtZSByfSBzdHJlYW1dIHsKICAgICAgc3RhX2Vycm9yIDM0MCAiY2Fubm90IG9wZW4gJyRmaWxlbmFtZScuIgogICAgfSBlbHNlIHsKICAgICAgaWYgeyBbZmlsZSBleHRlbnNpb24gJGZpbGVuYW1lXSA9PSAiLmd6IiB9IHsKICAgICAgICBpZiB7IFtpbmZvIGNvbW1hbmRzIHpsaWJdID09ICIiIH0gewogICAgICAgICAgc3RhX2Vycm9yIDMzOSAidGNsIHZlcnNpb24gPiA4LjYgcmVxdWlyZWQgZm9yIHpsaWIgc3VwcG9ydC4iCiAgICAgICAgfQogICAgICAgIHpsaWIgcHVzaCBndW56aXAgJHN0cmVhbQogICAgICB9CiAgICAgIHNldCBjbWQgIiIKICAgICAgc2V0IGVycm9yIHt9CiAgICAgIHdoaWxlIHshW2VvZiAkc3RyZWFtXX0gewogICAgICAgIGdldHMgJHN0cmVhbSBsaW5lCiAgICAgICAgaWYgeyAkbGluZSAhPSAiIiB9IHsKICAgICAgICAgIGlmIHskZWNob30gewogICAgICAgICAgICByZXBvcnRfbGluZSAkbGluZQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBhcHBlbmQgY21kICRsaW5lICJcbiIKICAgICAgICBpZiB7IFtzdHJpbmcgaW5kZXggJGxpbmUgZW5kXSAhPSAiXFwiIFwKICAgICAgICAgICAgICAgJiYgW2luZm8gY29tcGxldGUgJGNtZF0gfSB7CiAgICAgICAgICBzZXQgZXJyb3Ige30KICAgICAgICAgIHNldCBlcnJvcl9jb2RlIFtjYXRjaCB7dXBsZXZlbCBcIzAgJGNtZH0gcmVzdWx0XQogICAgICAgICAgIyBjbWQgY29uc3VtZWQKICAgICAgICAgIHNldCBjbWQgIiIKICAgICAgICAgICMgRmx1c2ggcmVzdWx0cyBwcmludGVkIG91dHNpZGUgdGNsIHRvIHN0ZG91dC9zdGRlcnIuCiAgICAgICAgICBmZmx1c2gKICAgICAgICAgIHN3aXRjaCAkZXJyb3JfY29kZSB7CiAgICAgICAgICAgIDAgeyBpZiB7ICR2ZXJib3NlICYmICRyZXN1bHQgIT0gIiIgfSB7IHJlcG9ydF9saW5lICRyZXN1bHQgfSB9CiAgICAgICAgICAgIDEgeyBzZXQgZXJyb3IgJHJlc3VsdCB9CiAgICAgICAgICAgIDIgeyBzZXQgZXJyb3Ige2ludm9rZWQgInJldHVybiIgb3V0c2lkZSBvZiBhIHByb2MufSB9CiAgICAgICAgICAgIDMgeyBzZXQgZXJyb3Ige2ludm9rZWQgImJyZWFrIiBvdXRzaWRlIG9mIGEgbG9vcC59IH0KICAgICAgICAgICAgNCB7IHNldCBlcnJvciB7aW52b2tlZCAiY29udGludWUiIG91dHNpZGUgb2YgYSBsb29wLn0gfQogICAgICAgICAgfQogICAgICAgICAgaWYgeyAkZXJyb3IgIT0ge30gfSB7CiAgICAgICAgICAgIGlmIHsgJHN0YV9jb250aW51ZV9vbl9lcnJvciB9IHsKICAgICAgICAgICAgICAjIE9ubHkgcHJlcGVuZCBlcnJvciBtZXNzYWdlIHdpdGggZmlsZS9saW5lIG9uY2UuCiAgICAgICAgICAgICAgaWYgeyBbc3RyaW5nIGZpcnN0ICJFcnJvciIgJGVycm9yXSA9PSAwIH0gewogICAgICAgICAgICAgICAgcmVwb3J0X2xpbmUgJGVycm9yCiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlcG9ydF9saW5lICJFcnJvcjogW2ZpbGUgdGFpbCAkZmlsZW5hbWVdLCAkaW5jbHVkZV9saW5lICRlcnJvciIKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc2V0IGVycm9yIHt9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpbmNyIGluY2x1ZGVfbGluZQogICAgICB9CiAgICAgIGNsb3NlICRzdHJlYW0KICAgICAgaWYgeyAkY21kICE9IHt9IH0gewogICAgICAgIHN0YV9lcnJvciAzNDEgImluY29tcGxldGUgY29tbWFuZCBhdCBlbmQgb2YgZmlsZS4iCiAgICAgIH0KICAgICAgaWYgeyAkZXJyb3IgIT0ge30gfSB7CiAgICAgICAgIyBPbmx5IHByZXBlbmQgZXJyb3IgbWVzc2FnZSB3aXRoIGZpbGUvbGluZSBvbmNlLgogICAgICAgIGlmIHsgW3N0cmluZyBmaXJzdCAiRXJyb3IiICRlcnJvcl0gPT0gMCB9IHsKICAgICAgICAgIGVycm9yICRlcnJvcgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBlcnJvciAiRXJyb3I6IFtmaWxlIHRhaWwgJGZpbGVuYW1lXSwgJGluY2x1ZGVfbGluZSAkZXJyb3IiCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSBmaW5hbGx5IHsKICAgIGlmIHsgJHByZXZfZmlsZW5hbWUgIT0gIiIgfSB7CiAgICAgIGluZm8gc2NyaXB0ICRwcmV2X2ZpbGVuYW1lCiAgICB9CiAgICBpZiB7IFtpbmZvIGV4aXN0cyBwcmV2X2xpbmVdIH0gewogICAgICBzZXQgaW5jbHVkZV9saW5lICRwcmV2X2xpbmUKICAgIH0gZWxzZSB7CiAgICAgIHVuc2V0IGluY2x1ZGVfbGluZQogICAgfQogIH0KfQoKIyBzdGEgbmFtZXNwYWNlIGVuZAp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgojIEJ1cyBzaWduYWwgbmFtZXMgbGlrZSBmb29bMl0gb3IgYmFyWzMxOjBdIHVzZSBicmFja2V0cyB0aGF0CiMgbG9vayBsaWtlICJldmFsIiB0byBUQ0wuIENhdGNoIHRoZSBudW1lcmljICJmdW5jdGlvbiIgd2l0aCB0aGUKIyBuYW1lc3BhY2UncyB1bmtub3duIGhhbmRsZXIgYW5kIHJldHVybiB0aGUgdmFsdWUgaW5zdGVhZCBvZiBhbiBlcnJvci4KcHJvYyBzdGFfdW5rbm93biB7IGFyZ3MgfSB7CiAgZ2xvYmFsIGVycm9yQ29kZSBlcnJvckluZm8KICAKICBzZXQgbmFtZSBbbGluZGV4ICRhcmdzIDBdCiAgaWYgeyBbbGxlbmd0aCAkYXJnc10gPT0gMSAmJiBbaXNfYnVzX3N1YnNjcmlwdCAkYXJnc10gfSB7CiAgICByZXR1cm4gIlxbJGFyZ3NcXSIKICB9CiAgCiAgIyBDb21tYW5kIG5hbWUgYWJicmV2aWF0aW9uIHN1cHBvcnQuCiAgc2V0IHJldCBbY2F0Y2gge3NldCBjbWRzIFtpbmZvIGNvbW1hbmRzICRuYW1lKl19IG1zZ10KICBpZiB7W3N0cmluZyBlcXVhbCAkbmFtZSAiOjoiXX0gewogICAgc2V0IG5hbWUgIiIKICB9CiAgaWYgeyAkcmV0ICE9IDAgfSB7CiAgICByZXR1cm4gLWNvZGUgJHJldCAtZXJyb3Jjb2RlICRlcnJvckNvZGUgXAogICAgICAiRXJyb3IgaW4gdW5rbm93biB3aGlsZSBjaGVja2luZyBpZiBcIiRuYW1lXCIgaXMgYSB1bmlxdWUgY29tbWFuZCBhYmJyZXZpYXRpb246ICRtc2cuIgogIH0KICBpZiB7IFtsbGVuZ3RoICRjbWRzXSA9PSAxIH0gewogICAgcmV0dXJuIFt1cGxldmVsIDEgW2xyZXBsYWNlICRhcmdzIDAgMCAkY21kc11dCiAgfQogIGlmIHsgW2xsZW5ndGggJGNtZHNdID4gMSB9IHsKICAgIGlmIHtbc3RyaW5nIGVxdWFsICRuYW1lICIiXX0gewogICAgICByZXR1cm4gLWNvZGUgZXJyb3IgIkVtcHR5IGNvbW1hbmQgbmFtZSBcIlwiIgogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIC1jb2RlIGVycm9yIFwKICAgICAgICAiQW1iaWd1b3VzIGNvbW1hbmQgbmFtZSBcIiRuYW1lXCI6IFtsc29ydCAkY21kc10uIgogICAgfQogIH0KICByZXR1cm4gW3VwbGV2ZWwgMSBbOjp1bmtub3duIHsqfSRhcmdzXV0KfQoKcHJvYyBpc19idXNfc3Vic2NyaXB0IHsgc3Vic2NyaXB0IH0gewogIHJldHVybiBbZXhwciBbc3RyaW5nIGlzIGludGVnZXIgJHN1YnNjcmlwdF0gXAogICAgICAgICAgICB8fCBbc3RyaW5nIG1hdGNoICRzdWJzY3JpcHQgIioiXSBcCiAgICAgICAgICAgIHx8IFtyZWdleHAge1swLTldKzpbMC05XX0gJHN1YnNjcmlwdF1dCn0KCm5hbWVzcGFjZSB1bmtub3duIHN0YV91bmtub3duCiMgU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEJTRC0zLUNsYXVzZQojIENvcHlyaWdodCAoYykgMjAxOS0yMDI1LCBUaGUgT3BlblJPQUQgQXV0aG9ycwoKIyBSZWFkIFZlcmlsb2cgdG8gT3BlbkRCCgpzdGE6OmRlZmluZV9jbWRfYXJncyAicmVhZF92ZXJpbG9nIiB7ZmlsZW5hbWV9Cgpwcm9jIHJlYWRfdmVyaWxvZyB7IGZpbGVuYW1lIH0gewogIG9yZDo6cmVhZF92ZXJpbG9nX2NtZCBbZmlsZSBuYXRpdmVuYW1lICRmaWxlbmFtZV0KfQoKc3RhOjpkZWZpbmVfY21kX2FyZ3MgImxpbmtfZGVzaWduIiB7Wy1oaWVyXSBbLW9taXRfZmlsZW5hbWVfcHJvcF0gdG9wX2NlbGxfbmFtZX0KCnByb2MgbGlua19kZXNpZ24geyBhcmdzIH0gewogIHN0YTo6cGFyc2Vfa2V5X2FyZ3MgImxpbmtfZGVzaWduIiBhcmdzIGtleXMge30gXAogICAgZmxhZ3Mgey1oaWVyIC1vbWl0X2ZpbGVuYW1lX3Byb3B9CgogIHNldCBoaWVyYXJjaHkgW2luZm8gZXhpc3RzIGZsYWdzKC1oaWVyKV0KICBzZXQgb21pdF9maWxlbmFtZV9wcm9wIFtpbmZvIGV4aXN0cyBmbGFncygtb21pdF9maWxlbmFtZV9wcm9wKV0KICBzdGE6OmNoZWNrX2FyZ2NfZXExICJsaW5rX2Rlc2lnbiIgJGFyZ3MKICBzZXQgdG9wX2NlbGxfbmFtZSBbbGluZGV4ICRhcmdzIDBdCgogIGlmIHsgIVtvcmQ6OmRiX2hhc190ZWNoXSB9IHsKICAgIHV0bDo6ZXJyb3IgT1JEIDIwMTAgIm5vIHRlY2hub2xvZ3kgaGFzIGJlZW4gcmVhZC4iCiAgfQogIG9yZDo6bGlua19kZXNpZ25fZGJfY21kICR0b3BfY2VsbF9uYW1lICRoaWVyYXJjaHkgJG9taXRfZmlsZW5hbWVfcHJvcAp9CgpzdGE6OmRlZmluZV9jbWRfYXJncyAid3JpdGVfdmVyaWxvZyIge1stc29ydF0gWy1pbmNsdWRlX3B3cl9nbmRdXAoJCQkJCSAgWy1yZW1vdmVfY2VsbHMgY2VsbHNdIGZpbGVuYW1lfQoKIyBDb3BpZWQgZnJvbSBzdGEvdmVyaWxvZy9WZXJpbG9nLnRjbCBiZWNhdXNlIHdlIGRvbid0IHdhbnQgc3RhOjpyZWFkX3Zlcmlsb2cKIyB0aGF0IGlzIGluIHRoZSBzYW1lIGZpbGUuCnByb2Mgd3JpdGVfdmVyaWxvZyB7IGFyZ3MgfSB7CiAgc3RhOjpwYXJzZV9rZXlfYXJncyAid3JpdGVfdmVyaWxvZyIgYXJncyBrZXlzIHstcmVtb3ZlX2NlbGxzfSBcCiAgICBmbGFncyB7LXNvcnQgLWluY2x1ZGVfcHdyX2duZH0KICBzZXQgcmVtb3ZlX2NlbGxzIHt9CiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtcmVtb3ZlX2NlbGxzKV0gfSB7CiAgICBzZXQgcmVtb3ZlX2NlbGxzIFtzdGE6OnBhcnNlX2NlbGxfYXJnICRrZXlzKC1yZW1vdmVfY2VsbHMpXQogIH0KICBzZXQgc29ydCBbaW5mbyBleGlzdHMgZmxhZ3MoLXNvcnQpXQogIHNldCBpbmNsdWRlX3B3cl9nbmQgW2luZm8gZXhpc3RzIGZsYWdzKC1pbmNsdWRlX3B3cl9nbmQpXQogIHN0YTo6Y2hlY2tfYXJnY19lcTEgIndyaXRlX3Zlcmlsb2ciICRhcmdzCiAgc2V0IGZpbGVuYW1lIFtmaWxlIG5hdGl2ZW5hbWUgW2xpbmRleCAkYXJncyAwXV0KICBzdGE6OndyaXRlX3Zlcmlsb2dfY21kICRmaWxlbmFtZSAkc29ydCAkaW5jbHVkZV9wd3JfZ25kICRyZW1vdmVfY2VsbHMKfQojIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBCU0QtMy1DbGF1c2UKIyBDb3B5cmlnaHQgKGMpIDIwMTktMjAyNSwgVGhlIE9wZW5ST0FEIEF1dGhvcnMKCm5hbWVzcGFjZSBldmFsIHN0YSB7CmRlZmluZV9jbWRfYXJncyAicmVwb3J0X2NlbGxfdXNhZ2UiIHsgXAogIFstdmVyYm9zZV0gW21vZHVsZV9pbnN0XSBbLWZpbGUgZmlsZV0gWy1zdGFnZSBzdGFnZV19Cgpwcm9jIHJlcG9ydF9jZWxsX3VzYWdlIHsgYXJncyB9IHsKICBwYXJzZV9rZXlfYXJncyAiaGlnaGxpZ2h0X3BhdGgiIGFyZ3Mga2V5cyB7LWZpbGUgLXN0YWdlfSBcCiAgICBmbGFncyB7LXZlcmJvc2V9IDAKCiAgY2hlY2tfYXJnY19lcTBvcjEgInJlcG9ydF9jZWxsX3VzYWdlIiAkYXJncwoKICBpZiB7IFtvcmQ6OmdldF9kYl9ibG9ja10gPT0gIk5VTEwiIH0gewogICAgc3RhX2Vycm9yIDEwMDEgIk5vIGRlc2lnbiBibG9jayBmb3VuZC4iCiAgfQoKICBzZXQgbW9kdWxlIFtbb3JkOjpnZXRfZGJfYmxvY2tdIGdldFRvcE1vZHVsZV0KICBpZiB7ICRhcmdzICE9ICIiIH0gewogICAgc2V0IG1vZGluc3QgW1tvcmQ6OmdldF9kYl9ibG9ja10gZmluZE1vZEluc3QgW2xpbmRleCAkYXJncyAwXV0KICAgIGlmIHsgJG1vZGluc3QgPT0gIk5VTEwiIH0gewogICAgICBzdGFfZXJyb3IgMTAwMiAiVW5hYmxlIHRvIGZpbmQgJGFyZ3MiCiAgICB9CiAgICBzZXQgbW9kdWxlIFskbW9kaW5zdCBnZXRNYXN0ZXJdCiAgfQogIHNldCB2ZXJib3NlIFtpbmZvIGV4aXN0cyBmbGFncygtdmVyYm9zZSldCiAgc2V0IGZpbGVfbmFtZSAiIgogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLWZpbGUpXSB9IHsKICAgIHNldCBmaWxlX25hbWUgJGtleXMoLWZpbGUpCiAgfQogIHNldCBzdGFnZV9uYW1lICIiCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtc3RhZ2UpXSB9IHsKICAgIHNldCBzdGFnZV9uYW1lICRrZXlzKC1zdGFnZSkKICB9CgogIHJlcG9ydF9jZWxsX3VzYWdlX2NtZCAkbW9kdWxlICR2ZXJib3NlICRmaWxlX25hbWUgJHN0YWdlX25hbWUKfQoKZGVmaW5lX2NtZF9hcmdzICJyZXBvcnRfdGltaW5nX2hpc3RvZ3JhbSIge1stbnVtX2JpbnMgbnVtX2JpbnNdIFstc2V0dXB8LWhvbGRdfQoKcHJvYyByZXBvcnRfdGltaW5nX2hpc3RvZ3JhbSB7IGFyZ3MgfSB7CiAgcGFyc2Vfa2V5X2FyZ3MgInJlcG9ydF90aW1pbmdfaGlzdG9ncmFtIiBhcmdzIFwKICAgIGtleXMgey1udW1fYmluc30gXAogICAgZmxhZ3Mgey1zZXR1cCAtaG9sZH0KCiAgY2hlY2tfYXJnY19lcTAgInJlcG9ydF90aW1pbmdfaGlzdG9ncmFtIiAkYXJncwoKICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtc2V0dXApXSAmJiBbaW5mbyBleGlzdHMgZmxhZ3MoLWhvbGQpXSB9IHsKICAgIHV0bDo6ZXJyb3IgU1RBIDcgIkJvdGggLXNldHVwIGFuZCAtaG9sZCBjYW5ub3QgYmUgc3BlY2lmaWVkIgogIH0KCiAgc2V0IG51bV9iaW5zIDEwCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtbnVtX2JpbnMpXSB9IHsKICAgIHNldCBudW1fYmlucyAka2V5cygtbnVtX2JpbnMpCiAgfQoKICBzZXQgbWluX21heCBtYXgKICBpZiB7IFtpbmZvIGV4aXN0cyBmbGFncygtaG9sZCldIH0gewogICAgc2V0IG1pbl9tYXggbWluCiAgfQoKICByZXBvcnRfdGltaW5nX2hpc3RvZ3JhbV9jbWQgJG51bV9iaW5zICRtaW5fbWF4Cn0KCmRlZmluZV9jbWRfYXJncyAicmVwb3J0X2xvZ2ljX2RlcHRoX2hpc3RvZ3JhbSIgeyBcCiAgWy1udW1fYmlucyBudW1fYmluc10gWy1leGNsdWRlX2J1ZmZlcnNdIFstZXhjbHVkZV9pbnZlcnRlcnNdfQoKcHJvYyByZXBvcnRfbG9naWNfZGVwdGhfaGlzdG9ncmFtIHsgYXJncyB9IHsKICBwYXJzZV9rZXlfYXJncyAicmVwb3J0X2xvZ2ljX2RlcHRoX2hpc3RvZ3JhbSIgYXJncyBrZXlzIFwKICAgIHstbnVtX2JpbnN9IGZsYWdzIHstZXhjbHVkZV9idWZmZXJzIC1leGNsdWRlX2ludmVydGVyc30KCiAgY2hlY2tfYXJnY19lcTAgInJlcG9ydF9sb2dpY19kZXB0aF9oaXN0b2dyYW0iICRhcmdzCgogIHNldCBudW1fYmlucyAxMAogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLW51bV9iaW5zKV0gfSB7CiAgICBzZXQgbnVtX2JpbnMgJGtleXMoLW51bV9iaW5zKQogIH0KCiAgc2V0IGV4Y2x1ZGVfYnVmZmVycyBmYWxzZQogIGlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC1leGNsdWRlX2J1ZmZlcnMpXSB9IHsKICAgIHNldCBleGNsdWRlX2J1ZmZlcnMgdHJ1ZQogIH0KCiAgc2V0IGV4Y2x1ZGVfaW52ZXJ0ZXJzIGZhbHNlCiAgaWYgeyBbaW5mbyBleGlzdHMgZmxhZ3MoLWV4Y2x1ZGVfaW52ZXJ0ZXJzKV0gfSB7CiAgICBzZXQgZXhjbHVkZV9pbnZlcnRlcnMgdHJ1ZQogIH0KCiAgcmVwb3J0X2xvZ2ljX2RlcHRoX2hpc3RvZ3JhbV9jbWQgJG51bV9iaW5zICRleGNsdWRlX2J1ZmZlcnMgJGV4Y2x1ZGVfaW52ZXJ0ZXJzCn0KCiMgcmVkZWZpbmUgc3RhOjpzdGFfd2Fybi9lcnJvciB0byBjYWxsIHV0bDo6d2Fybi9lcnJvcgpwcm9jIHN0YV9lcnJvciB7IGlkIG1zZyB9IHsKICB1dGw6OmVycm9yIFNUQSAkaWQgJG1zZwp9Cgpwcm9jIHN0YV93YXJuIHsgaWQgbXNnIH0gewogIHV0bDo6d2FybiBTVEEgJGlkICRtc2cKfQoKZGVmaW5lX2NtZF9hcmdzICJyZXBsYWNlX2hpZXJfbW9kdWxlIiB7aW5zdGFuY2UgbW9kdWxlfQpwcm9jIHJlcGxhY2VfaGllcl9tb2R1bGUgeyBpbnN0YW5jZSBtb2R1bGUgfSB7CiAgc2V0IGRlc2lnbiBbZ2V0X2hpZXJfbW9kdWxlICRtb2R1bGVdCiAgaWYgeyAkZGVzaWduICE9ICJOVUxMIiB9IHsKICAgIHNldCBtb2RpbnN0IFtbb3JkOjpnZXRfZGJfYmxvY2tdIGZpbmRNb2RJbnN0ICRpbnN0YW5jZV0KICAgIGlmIHsgJG1vZGluc3QgPT0gIk5VTEwiIH0gewogICAgICBzdGFfZXJyb3IgMTAwMyAiVW5hYmxlIHRvIGZpbmQgJGluc3RhbmNlIgogICAgfQogICAgcmVwbGFjZV9oaWVyX21vZHVsZV9jbWQgJG1vZGluc3QgJGRlc2lnbgogICAgcmV0dXJuIDEKICB9CiAgcmV0dXJuIDAKfQppbnRlcnAgYWxpYXMge30gcmVwbGFjZV9kZXNpZ24ge30gcmVwbGFjZV9oaWVyX21vZHVsZQoKZGVmaW5lX2NtZF9hcmdzICJnZXRfaGllcl9tb2R1bGUiIHtkZXNpZ25fbmFtZX0KcHJvYyBnZXRfaGllcl9tb2R1bGUgeyBhcmcgfSB7CiAgaWYgeyBbbGxlbmd0aCAkYXJnXSA+IDEgfSB7CiAgICBzdGFfZXJyb3IgMjAwICJtb2R1bGUgbXVzdCBiZSBhIHNpbmdsZSBtb2R1bGUuIgogIH0KCiAgc2V0IGJsb2NrIFtvcmQ6OmdldF9kYl9ibG9ja10KICBpZiB7ICRibG9jayA9PSAiTlVMTCIgfSB7CiAgICBzdGFfZXJyb3IgMjAyICJkYXRhYmFzZSBibG9jayBjYW5ub3QgYmUgZm91bmQuIgogIH0KCiAgc2V0IGRlc2lnbiBbJGJsb2NrIGZpbmRNb2R1bGUgJGFyZ10KICBpZiB7ICRkZXNpZ24gPT0gIk5VTEwiIH0gewogICAgc2V0IGNoaWxkX2Jsb2NrIFskYmxvY2sgZmluZENoaWxkICRhcmddCiAgICBpZiB7ICRjaGlsZF9ibG9jayAhPSAiTlVMTCIgfSB7CiAgICAgIHNldCBkZXNpZ24gWyRjaGlsZF9ibG9jayBmaW5kTW9kdWxlICRhcmddCiAgICB9CiAgfQoKICBpZiB7ICRkZXNpZ24gPT0gIk5VTEwiIH0gewogICAgc3RhX2Vycm9yIDIwMSAibW9kdWxlICRhcmcgY2Fubm90IGJlIGZvdW5kLiIKICB9CgogIHJldHVybiAkZGVzaWduCn0KaW50ZXJwIGFsaWFzIHt9IGdldF9kZXNpZ24ge30gZ2V0X2hpZXJfbW9kdWxlCgpkZWZpbmVfY21kX2FyZ3MgImNoZWNrX2F4aW9tcyIge30KcHJvYyBjaGVja19heGlvbXMgeyBhcmdzIH0gewogIGNoZWNrX2FyZ2NfZXEwICJjaGVja19heGlvbXMiICRhcmdzCiAgY2hlY2tfYXhpb21zX2NtZAp9CgojIG5hbWVzcGFjZQp9Cg==",
nullptr};
} // end namespace sta
