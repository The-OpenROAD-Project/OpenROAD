namespace rsz {
const char* rsz_tcl_inits[] = {
"IyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlCiMgQ29weXJpZ2h0IChjKSAyMDE5LTIwMjUsIFRoZSBPcGVuUk9BRCBBdXRob3JzCgpuYW1lc3BhY2UgZXZhbCByc3ogewpwcm9jIHBhcnNlX2J1ZmZlcl9jZWxsIHsga2V5c192YXIgfSB7CiAgdXB2YXIgMSAka2V5c192YXIga2V5cwogIHNldCBidWZmZXJfY2VsbCAiTlVMTCIKCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtYnVmZmVyX2NlbGwpXSB9IHsKICAgIHNldCBidWZmZXJfY2VsbF9uYW1lICRrZXlzKC1idWZmZXJfY2VsbCkKICAgIGlmIHsgJGJ1ZmZlcl9jZWxsX25hbWUgbmUgIiIgfSB7CiAgICAgIHNldCBidWZmZXJfY2VsbCBbc3RhOjpnZXRfbGliX2NlbGxfZXJyb3IgIi1idWZmZXJfY2VsbCIgJGJ1ZmZlcl9jZWxsX25hbWVdCgogICAgICAjIHRoZSBsaWIgY2VsbCBpcyBhIGJ1ZmZlcj8KICAgICAgaWYgeyAkYnVmZmVyX2NlbGwgbmUgIk5VTEwiICYmICFbZ2V0X3Byb3BlcnR5ICRidWZmZXJfY2VsbCBpc19idWZmZXJdIH0gewogICAgICAgIHV0bDo6ZXJyb3IgUlNaIDIxMSAiW2dldF9uYW1lICRidWZmZXJfY2VsbF0gaXMgbm90IGEgYnVmZmVyLiIKICAgICAgfQogICAgfQogIH0KICByZXR1cm4gJGJ1ZmZlcl9jZWxsCn0KCiMgbmFtZXNwYWNlIGV2YWwgcnN6Cn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJzZXRfZG9udF91c2UiIHtsaWJfY2VsbHN9Cgpwcm9jIHNldF9kb250X3VzZSB7IGFyZ3MgfSB7CiAgc3RhOjpwYXJzZV9rZXlfYXJncyAic2V0X2RvbnRfdXNlIiBhcmdzIGtleXMge30gZmxhZ3Mge30KICBzZXRfZG9udF91c2VfY21kICJzZXRfZG9udF91c2UiICRhcmdzIDEKfQoKc3RhOjpkZWZpbmVfY21kX2FyZ3MgInVuc2V0X2RvbnRfdXNlIiB7bGliX2NlbGxzfQoKcHJvYyB1bnNldF9kb250X3VzZSB7IGFyZ3MgfSB7CiAgc3RhOjpwYXJzZV9rZXlfYXJncyAidW5zZXRfZG9udF91c2UiIGFyZ3Mga2V5cyB7fSBmbGFncyB7fQogIHNldF9kb250X3VzZV9jbWQgInVuc2V0X2RvbnRfdXNlIiAkYXJncyAwCn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJyZXNldF9kb250X3VzZSIge30KCnByb2MgcmVzZXRfZG9udF91c2UgeyBhcmdzIH0gewogIHN0YTo6cGFyc2Vfa2V5X2FyZ3MgInJlc2V0X2RvbnRfdXNlIiBhcmdzIGtleXMge30gZmxhZ3Mge30KICByc3o6OnJlc2V0X2RvbnRfdXNlCn0KCnByb2Mgc2V0X2RvbnRfdXNlX2NtZCB7IGNtZCBjbWRfYXJncyBkb250X3VzZSB9IHsKICBzdGE6OmNoZWNrX2FyZ2NfZXExICRjbWQgJGNtZF9hcmdzCiAgZm9yZWFjaCBsaWJfY2VsbCBbc3RhOjpnZXRfbGliX2NlbGxzX2FyZyAkY21kIFtsaW5kZXggJGNtZF9hcmdzIDBdIHN0YTo6c3RhX3dhcm5dIHsKICAgIHJzejo6c2V0X2RvbnRfdXNlICRsaWJfY2VsbCAkZG9udF91c2UKICB9Cn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJzZXRfZG9udF90b3VjaCIge25ldHNfaW5zdGFuY2VzfQoKcHJvYyBzZXRfZG9udF90b3VjaCB7IGFyZ3MgfSB7CiAgc3RhOjpwYXJzZV9rZXlfYXJncyAic2V0X2RvbnRfdG91Y2giIGFyZ3Mga2V5cyB7fSBmbGFncyB7fQogIHNldF9kb250X3RvdWNoX2NtZCAic2V0X2RvbnRfdG91Y2giICRhcmdzIDEKfQoKc3RhOjpkZWZpbmVfY21kX2FyZ3MgInVuc2V0X2RvbnRfdG91Y2giIHtuZXRzX2luc3RhbmNlc30KCnByb2MgdW5zZXRfZG9udF90b3VjaCB7IGFyZ3MgfSB7CiAgc3RhOjpwYXJzZV9rZXlfYXJncyAidW5zZXRfZG9udF90b3VjaCIgYXJncyBrZXlzIHt9IGZsYWdzIHt9CiAgc2V0X2RvbnRfdG91Y2hfY21kICJ1bnNldF9kb250X3RvdWNoIiAkYXJncyAwCn0KCnByb2Mgc2V0X2RvbnRfdG91Y2hfY21kIHsgY21kIGNtZF9hcmdzIGRvbnRfdG91Y2ggfSB7CiAgc3RhOjpjaGVja19hcmdjX2VxMSAkY21kICRjbWRfYXJncwogIHN0YTo6cGFyc2VfaW5zdF9uZXRfYXJnIFtsaW5kZXggJGNtZF9hcmdzIDBdIGluc3RzIG5ldHMKICBmb3JlYWNoIGluc3QgJGluc3RzIHsKICAgIHJzejo6c2V0X2RvbnRfdG91Y2hfaW5zdGFuY2UgJGluc3QgJGRvbnRfdG91Y2gKICB9CiAgZm9yZWFjaCBuZXQgJG5ldHMgewogICAgcnN6OjpzZXRfZG9udF90b3VjaF9uZXQgJG5ldCAkZG9udF90b3VjaAogIH0KfQoKc3RhOjpkZWZpbmVfY21kX2FyZ3MgInJlcG9ydF9kb250X3VzZSIge30KCnByb2MgcmVwb3J0X2RvbnRfdXNlIHsgYXJncyB9IHsKICBzdGE6OnBhcnNlX2tleV9hcmdzICJyZXBvcnRfZG9udF91c2UiIGFyZ3Mga2V5cyB7fSBmbGFncyB7fQogIHN0YTo6Y2hlY2tfYXJnY19lcTAgInJlcG9ydF9kb250X3VzZSIgJGFyZ3MKCiAgcnN6OjpyZXBvcnRfZG9udF91c2UKfQoKc3RhOjpkZWZpbmVfY21kX2FyZ3MgInJlcG9ydF9kb250X3RvdWNoIiB7fQoKcHJvYyByZXBvcnRfZG9udF90b3VjaCB7IGFyZ3MgfSB7CiAgc3RhOjpwYXJzZV9rZXlfYXJncyAicmVwb3J0X2RvbnRfdG91Y2giIGFyZ3Mga2V5cyB7fSBmbGFncyB7fQogIHN0YTo6Y2hlY2tfYXJnY19lcTAgInJlcG9ydF9kb250X3RvdWNoIiAkYXJncwoKICByc3o6OnJlcG9ydF9kb250X3RvdWNoCn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJidWZmZXJfcG9ydHMiIHtbLWlucHV0c10gWy1vdXRwdXRzXVwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstbWF4X3V0aWxpemF0aW9uIHV0aWxdXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1idWZmZXJfY2VsbCBidWZfY2VsbF1cCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLXZlcmJvc2VdfQoKcHJvYyBidWZmZXJfcG9ydHMgeyBhcmdzIH0gewogIHN0YTo6cGFyc2Vfa2V5X2FyZ3MgImJ1ZmZlcl9wb3J0cyIgYXJncyBcCiAgICBrZXlzIHstYnVmZmVyX2NlbGwgLW1heF91dGlsaXphdGlvbn0gXAogICAgZmxhZ3Mgey1pbnB1dHMgLW91dHB1dHMgLXZlcmJvc2V9CgogIHNldCBidWZmZXJfaW5wdXRzIFtpbmZvIGV4aXN0cyBmbGFncygtaW5wdXRzKV0KICBzZXQgYnVmZmVyX291dHB1dHMgW2luZm8gZXhpc3RzIGZsYWdzKC1vdXRwdXRzKV0KICBpZiB7ICEkYnVmZmVyX2lucHV0cyAmJiAhJGJ1ZmZlcl9vdXRwdXRzIH0gewogICAgc2V0IGJ1ZmZlcl9pbnB1dHMgMQogICAgc2V0IGJ1ZmZlcl9vdXRwdXRzIDEKICB9CgogIHNldCB2ZXJib3NlIFtpbmZvIGV4aXN0cyBmbGFncygtdmVyYm9zZSldCgogIHN0YTo6Y2hlY2tfYXJnY19lcTAgImJ1ZmZlcl9wb3J0cyIgJGFyZ3MKCiAgcnN6OjpzZXRfbWF4X3V0aWxpemF0aW9uIFtyc3o6OnBhcnNlX21heF91dGlsIGtleXNdCiAgc2V0IGJ1ZmZlcl9jZWxsIFtyc3o6OnBhcnNlX2J1ZmZlcl9jZWxsIGtleXNdCgogIGlmIHsgJGJ1ZmZlcl9pbnB1dHMgfSB7CiAgICByc3o6OmJ1ZmZlcl9pbnB1dHMgJGJ1ZmZlcl9jZWxsICR2ZXJib3NlCiAgfQogIGlmIHsgJGJ1ZmZlcl9vdXRwdXRzIH0gewogICAgcnN6OjpidWZmZXJfb3V0cHV0cyAkYnVmZmVyX2NlbGwgJHZlcmJvc2UKICB9Cn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJyZW1vdmVfYnVmZmVycyIgeyBpbnN0YW5jZXMgfQoKcHJvYyByZW1vdmVfYnVmZmVycyB7IGFyZ3MgfSB7CiAgc3RhOjpwYXJzZV9rZXlfYXJncyAicmVtb3ZlX2J1ZmZlcnMiIGFyZ3Mga2V5cyB7fSBmbGFncyB7fQogIHJzejo6cmVtb3ZlX2J1ZmZlcnNfY21kIFtnZXRfY2VsbHMgJGFyZ3NdCn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJiYWxhbmNlX3Jvd191c2FnZSIge30KCnByb2MgYmFsYW5jZV9yb3dfdXNhZ2UgeyBhcmdzIH0gewogIHN0YTo6cGFyc2Vfa2V5X2FyZ3MgImJhbGFuY2Vfcm93X3VzYWdlIiBhcmdzIGtleXMge30gZmxhZ3Mge30KICBzdGE6OmNoZWNrX2FyZ2NfZXEwICJiYWxhbmNlX3Jvd191c2FnZSIgJGFyZ3MKICByc3o6OmJhbGFuY2Vfcm93X3VzYWdlX2NtZAp9CgpzdGE6OmRlZmluZV9jbWRfYXJncyAicmVwYWlyX2Rlc2lnbiIge1stbWF4X3dpcmVfbGVuZ3RoIG1heF93aXJlX2xlbmd0aF0gXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstbWF4X3V0aWxpemF0aW9uIHV0aWxdIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLXNsZXdfbWFyZ2luIHNsYWNrX21hcmdpbl0gXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstY2FwX21hcmdpbiBjYXBfbWFyZ2luXSBcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1idWZmZXJfZ2FpbiBnYWluXSBcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1wcmVfcGxhY2VtZW50XSBcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1tYXRjaF9jZWxsX2Zvb3RwcmludF0gXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstdmVyYm9zZV19Cgpwcm9jIHJlcGFpcl9kZXNpZ24geyBhcmdzIH0gewogIHN0YTo6cGFyc2Vfa2V5X2FyZ3MgInJlcGFpcl9kZXNpZ24iIGFyZ3MgXAogICAga2V5cyB7LW1heF93aXJlX2xlbmd0aCAtbWF4X3V0aWxpemF0aW9uIC1zbGV3X21hcmdpbiAtY2FwX21hcmdpbiAtYnVmZmVyX2dhaW59IFwKICAgIGZsYWdzIHstbWF0Y2hfY2VsbF9mb290cHJpbnQgLXZlcmJvc2UgLXByZV9wbGFjZW1lbnR9CgogIHNldCBtYXhfd2lyZV9sZW5ndGggW3Jzejo6cGFyc2VfbWF4X3dpcmVfbGVuZ3RoIGtleXNdCiAgc2V0IHNsZXdfbWFyZ2luIFtyc3o6OnBhcnNlX3BlcmNlbnRfbWFyZ2luX2FyZyAiLXNsZXdfbWFyZ2luIiBrZXlzXQogIHNldCBjYXBfbWFyZ2luIFtyc3o6OnBhcnNlX3BlcmNlbnRfbWFyZ2luX2FyZyAiLWNhcF9tYXJnaW4iIGtleXNdCgogIHNldCBwcmVfcGxhY2VtZW50IFtpbmZvIGV4aXN0cyBmbGFncygtcHJlX3BsYWNlbWVudCldCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtYnVmZmVyX2dhaW4pXSB9IHsKICAgIHNldCBwcmVfcGxhY2VtZW50IHRydWUKICAgIHV0bDo6d2FybiAiUlNaIiAxNDkgIi1idWZmZXJfZ2FpbiBpcyBkZXByZWNhdGVkIgogIH0KICByc3o6OnNldF9tYXhfdXRpbGl6YXRpb24gW3Jzejo6cGFyc2VfbWF4X3V0aWwga2V5c10KCiAgc3RhOjpjaGVja19hcmdjX2VxMCAicmVwYWlyX2Rlc2lnbiIgJGFyZ3MKICBlc3Q6OmNoZWNrX3BhcmFzaXRpY3MKICBzZXQgbWF4X3dpcmVfbGVuZ3RoIFtyc3o6OmNoZWNrX21heF93aXJlX2xlbmd0aCAkbWF4X3dpcmVfbGVuZ3RoIGZhbHNlXQogIHNldCBtYXRjaF9jZWxsX2Zvb3RwcmludCBbaW5mbyBleGlzdHMgZmxhZ3MoLW1hdGNoX2NlbGxfZm9vdHByaW50KV0KICBzZXQgdmVyYm9zZSBbaW5mbyBleGlzdHMgZmxhZ3MoLXZlcmJvc2UpXQogIHJzejo6cmVwYWlyX2Rlc2lnbl9jbWQgJG1heF93aXJlX2xlbmd0aCAkc2xld19tYXJnaW4gJGNhcF9tYXJnaW4gXAogICAgJHByZV9wbGFjZW1lbnQgJG1hdGNoX2NlbGxfZm9vdHByaW50ICR2ZXJib3NlCn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJyZXBhaXJfY2xvY2tfbmV0cyIge1stbWF4X3dpcmVfbGVuZ3RoIG1heF93aXJlX2xlbmd0aF19Cgpwcm9jIHJlcGFpcl9jbG9ja19uZXRzIHsgYXJncyB9IHsKICBzdGE6OnBhcnNlX2tleV9hcmdzICJyZXBhaXJfY2xvY2tfbmV0cyIgYXJncyBcCiAgICBrZXlzIHstbWF4X3dpcmVfbGVuZ3RofSBcCiAgICBmbGFncyB7fQoKICBzZXQgbWF4X3dpcmVfbGVuZ3RoIFtyc3o6OnBhcnNlX21heF93aXJlX2xlbmd0aCBrZXlzXQoKCiAgc3RhOjpjaGVja19hcmdjX2VxMCAicmVwYWlyX2Nsb2NrX25ldHMiICRhcmdzCiAgZXN0OjpjaGVja19wYXJhc2l0aWNzCiAgc2V0IG1heF93aXJlX2xlbmd0aCBbcnN6OjpjaGVja19tYXhfd2lyZV9sZW5ndGggJG1heF93aXJlX2xlbmd0aCB0cnVlXQogIHJzejo6cmVwYWlyX2Nsa19uZXRzX2NtZCAkbWF4X3dpcmVfbGVuZ3RoCn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJyZXBhaXJfY2xvY2tfaW52ZXJ0ZXJzIiB7fQoKcHJvYyByZXBhaXJfY2xvY2tfaW52ZXJ0ZXJzIHsgYXJncyB9IHsKICBzdGE6OnBhcnNlX2tleV9hcmdzICJyZXBhaXJfY2xvY2tfaW52ZXJ0ZXJzIiBhcmdzIGtleXMge30gZmxhZ3Mge30KICBzdGE6OmNoZWNrX2FyZ2NfZXEwICJyZXBhaXJfY2xvY2tfaW52ZXJ0ZXJzIiAkYXJncwogIHJzejo6cmVwYWlyX2Nsa19pbnZlcnRlcnNfY21kCn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJyZXBhaXJfdGllX2Zhbm91dCIge2xpYl9wb3J0XAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstc2VwYXJhdGlvbiBkaXN0XVwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLW1heF9mYW5vdXQgZmFub3V0XVwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLXZlcmJvc2VdfQoKcHJvYyByZXBhaXJfdGllX2Zhbm91dCB7IGFyZ3MgfSB7CiAgc3RhOjpwYXJzZV9rZXlfYXJncyAicmVwYWlyX3RpZV9mYW5vdXQiIGFyZ3Mga2V5cyB7LXNlcGFyYXRpb24gLW1heF9mYW5vdXR9IFwKICAgIGZsYWdzIHstdmVyYm9zZX0KCiAgc2V0IHNlcGFyYXRpb24gMAogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLXNlcGFyYXRpb24pXSB9IHsKICAgIHNldCBzZXBhcmF0aW9uICRrZXlzKC1zZXBhcmF0aW9uKQogICAgc3RhOjpjaGVja19wb3NpdGl2ZV9mbG9hdCAiLXNlcGFyYXRpb24iICRzZXBhcmF0aW9uCiAgICBzZXQgc2VwYXJhdGlvbiBbc3RhOjpkaXN0YW5jZV91aV9zdGEgJHNlcGFyYXRpb25dCiAgfQogIHNldCB2ZXJib3NlIFtpbmZvIGV4aXN0cyBmbGFncygtdmVyYm9zZSldCgogIHN0YTo6Y2hlY2tfYXJnY19lcTEgInJlcGFpcl90aWVfZmFub3V0IiAkYXJncwogIHNldCBsaWJfcG9ydCBbbGluZGV4ICRhcmdzIDBdCiAgaWYgeyAhW3N0YTo6aXNfb2JqZWN0ICRsaWJfcG9ydF0gfSB7CiAgICBzZXQgbGliX3BvcnQgW2dldF9saWJfcGlucyBbbGluZGV4ICRhcmdzIDBdXQogICAgaWYgeyBbbGxlbmd0aCAkbGliX3BvcnRdID4gMSB9IHsKICAgICAgIyBtdWx0aXBsZSBsaWJyYXJpZXMgbWF0Y2ggdGhlIGxpYiBwb3J0IGFyZzsgdXNlIGFueQogICAgICBzZXQgbGliX3BvcnQgW2xpbmRleCAkbGliX3BvcnQgMF0KICAgIH0KICB9CiAgaWYgeyAkbGliX3BvcnQgIT0gIiIgfSB7CiAgICByc3o6OnJlcGFpcl90aWVfZmFub3V0X2NtZCAkbGliX3BvcnQgJHNlcGFyYXRpb24gJHZlcmJvc2UKICB9Cn0KCgojIC1tYXhfcGFzc2VzIGlzIGZvciBkZXZlbG9wZXIgZGVidWdnaW5nIHNvIGludGVudGlvbmFsbHkgbm90IGRvY3VtZW50ZWQKIyBpbiBkZWZpbmVfY21kX2FyZ3MKc3RhOjpkZWZpbmVfY21kX2FyZ3MgInJlcGFpcl90aW1pbmciIHtbLXNldHVwXSBbLWhvbGRdXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1yZWNvdmVyX3Bvd2VyIHBlcmNlbnRfb2ZfcGF0aHNfd2l0aF9zbGFja11cCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLXNldHVwX21hcmdpbiBzZXR1cF9tYXJnaW5dXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1ob2xkX21hcmdpbiBob2xkX21hcmdpbl1cCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLXNsYWNrX21hcmdpbiBzbGFja19tYXJnaW5dXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1saWJyYXJpZXMgbGlic11cCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLWFsbG93X3NldHVwX3Zpb2xhdGlvbnNdXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1zZXF1ZW5jZSBtb3ZlX3N0cmluZ11cCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLXNraXBfcGluX3N3YXBdXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1za2lwX2dhdGVfY2xvbmluZ11cCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLXNraXBfc2l6ZV9kb3duXVwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstc2tpcF9idWZmZXJpbmddXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1za2lwX2J1ZmZlcl9yZW1vdmFsXVwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstc2tpcF9sYXN0X2dhc3BdXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1za2lwX3Z0X3N3YXBdXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1za2lwX2NyaXRfdnRfc3dhcF1cCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLXJlcGFpcl90bnMgdG5zX2VuZF9wZXJjZW50XVwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstbWF4X3Bhc3NlcyBwYXNzZXNdXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1tYXhfaXRlcmF0aW9ucyBpdGVyYXRpb25zXVwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstbWF4X2J1ZmZlcl9wZXJjZW50IGJ1ZmZlcl9wZXJjZW50XVwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstbWF4X3V0aWxpemF0aW9uIHV0aWxdIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstbWF0Y2hfY2VsbF9mb290cHJpbnRdIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstbWF4X3JlcGFpcnNfcGVyX3Bhc3MgbWF4X3JlcGFpcnNfcGVyX3Bhc3NdXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy12ZXJib3NlXX0KCnByb2MgcmVwYWlyX3RpbWluZyB7IGFyZ3MgfSB7CiAgc3RhOjpwYXJzZV9rZXlfYXJncyAicmVwYWlyX3RpbWluZyIgYXJncyBcCiAgICBrZXlzIHstc2V0dXBfbWFyZ2luIC1ob2xkX21hcmdpbiAtc2xhY2tfbWFyZ2luIFwKICAgICAgICAgICAgLWxpYnJhcmllcyAtbWF4X3V0aWxpemF0aW9uIC1tYXhfYnVmZmVyX3BlcmNlbnQgLXNlcXVlbmNlIFwKICAgICAgICAgICAgLXJlY292ZXJfcG93ZXIgLXJlcGFpcl90bnMgLW1heF9wYXNzZXMgLW1heF9pdGVyYXRpb25zIC1tYXhfcmVwYWlyc19wZXJfcGFzc30gXAogICAgZmxhZ3Mgey1zZXR1cCAtaG9sZCAtYWxsb3dfc2V0dXBfdmlvbGF0aW9ucyAtc2tpcF9waW5fc3dhcCAtc2tpcF9nYXRlX2Nsb25pbmcgXAogICAgICAgICAgICAgLXNraXBfc2l6ZV9kb3duIC1za2lwX2J1ZmZlcmluZyAtc2tpcF9idWZmZXJfcmVtb3ZhbCAtc2tpcF9sYXN0X2dhc3AgXAogICAgICAgICAgICAgLXNraXBfdnRfc3dhcCAtc2tpcF9jcml0X3Z0X3N3YXAgLW1hdGNoX2NlbGxfZm9vdHByaW50IC12ZXJib3NlfQoKICBzZXQgc2V0dXAgW2luZm8gZXhpc3RzIGZsYWdzKC1zZXR1cCldCiAgc2V0IGhvbGQgW2luZm8gZXhpc3RzIGZsYWdzKC1ob2xkKV0KCiAgaWYgeyAhJHNldHVwICYmICEkaG9sZCB9IHsKICAgIHNldCBzZXR1cCAxCiAgICBzZXQgaG9sZCAxCiAgfQoKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1zbGFja19tYXJnaW4pXSB9IHsKICAgIHV0bDo6d2FybiBSU1ogNzYgIi1zbGFja19tYXJnaW4gaXMgZGVwcmVjYXRlZC4gVXNlIC1zZXR1cF9tYXJnaW4vLWhvbGRfbWFyZ2luIgogICAgaWYgeyAhJHNldHVwICYmICRob2xkIH0gewogICAgICBzZXQgc2V0dXBfbWFyZ2luIDAuMAogICAgICBzZXQgaG9sZF9tYXJnaW4gW3Jzejo6cGFyc2VfdGltZV9tYXJnaW5fYXJnICItc2xhY2tfbWFyZ2luIiBrZXlzXQogICAgfSBlbHNlIHsKICAgICAgc2V0IHNldHVwX21hcmdpbiBbcnN6OjpwYXJzZV90aW1lX21hcmdpbl9hcmcgIi1zbGFja19tYXJnaW4iIGtleXNdCiAgICAgIHNldCBob2xkX21hcmdpbiAwLjAKICAgIH0KICB9IGVsc2UgewogICAgc2V0IHNldHVwX21hcmdpbiBbcnN6OjpwYXJzZV90aW1lX21hcmdpbl9hcmcgIi1zZXR1cF9tYXJnaW4iIGtleXNdCiAgICBzZXQgaG9sZF9tYXJnaW4gW3Jzejo6cGFyc2VfdGltZV9tYXJnaW5fYXJnICItaG9sZF9tYXJnaW4iIGtleXNdCiAgfQoKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1zZXF1ZW5jZSldIH0gewogICAgc2V0IHNlcXVlbmNlICRrZXlzKC1zZXF1ZW5jZSkKICB9IGVsc2UgewogICAgc2V0IHNlcXVlbmNlICIiCiAgfQoKICBzZXQgYWxsb3dfc2V0dXBfdmlvbGF0aW9ucyBbaW5mbyBleGlzdHMgZmxhZ3MoLWFsbG93X3NldHVwX3Zpb2xhdGlvbnMpXQogIHNldCBza2lwX3Bpbl9zd2FwIFtpbmZvIGV4aXN0cyBmbGFncygtc2tpcF9waW5fc3dhcCldCiAgc2V0IHNraXBfZ2F0ZV9jbG9uaW5nIFtpbmZvIGV4aXN0cyBmbGFncygtc2tpcF9nYXRlX2Nsb25pbmcpXQogIHNldCBza2lwX3NpemVfZG93biBbaW5mbyBleGlzdHMgZmxhZ3MoLXNraXBfc2l6ZV9kb3duKV0KICBzZXQgc2tpcF9idWZmZXJpbmcgW2luZm8gZXhpc3RzIGZsYWdzKC1za2lwX2J1ZmZlcmluZyldCiAgc2V0IHNraXBfYnVmZmVyX3JlbW92YWwgW2luZm8gZXhpc3RzIGZsYWdzKC1za2lwX2J1ZmZlcl9yZW1vdmFsKV0KICBzZXQgc2tpcF9sYXN0X2dhc3AgW2luZm8gZXhpc3RzIGZsYWdzKC1za2lwX2xhc3RfZ2FzcCldCiAgc2V0IHNraXBfdnRfc3dhcCBbaW5mbyBleGlzdHMgZmxhZ3MoLXNraXBfdnRfc3dhcCldCiAgc2V0IHNraXBfY3JpdF92dF9zd2FwIFtpbmZvIGV4aXN0cyBmbGFncygtc2tpcF9jcml0X3Z0X3N3YXApXQogIHJzejo6c2V0X21heF91dGlsaXphdGlvbiBbcnN6OjpwYXJzZV9tYXhfdXRpbCBrZXlzXQoKICBzZXQgbWF4X2J1ZmZlcl9wZXJjZW50IDIwCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtbWF4X2J1ZmZlcl9wZXJjZW50KV0gfSB7CiAgICBzZXQgbWF4X2J1ZmZlcl9wZXJjZW50ICRrZXlzKC1tYXhfYnVmZmVyX3BlcmNlbnQpCiAgICBzdGE6OmNoZWNrX3BlcmNlbnQgIi1tYXhfYnVmZmVyX3BlcmNlbnQiICRtYXhfYnVmZmVyX3BlcmNlbnQKICB9CiAgc2V0IG1heF9idWZmZXJfcGVyY2VudCBbZXhwciAkbWF4X2J1ZmZlcl9wZXJjZW50IC8gMTAwLjBdCgogIHNldCByZXBhaXJfdG5zX2VuZF9wZXJjZW50IDEuMAogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLXJlcGFpcl90bnMpXSB9IHsKICAgIHNldCByZXBhaXJfdG5zX2VuZF9wZXJjZW50ICRrZXlzKC1yZXBhaXJfdG5zKQogICAgc3RhOjpjaGVja19wZXJjZW50ICItcmVwYWlyX3RucyIgJHJlcGFpcl90bnNfZW5kX3BlcmNlbnQKICAgIHNldCByZXBhaXJfdG5zX2VuZF9wZXJjZW50IFtleHByICRyZXBhaXJfdG5zX2VuZF9wZXJjZW50IC8gMTAwLjBdCiAgfQoKICBzZXQgcmVjb3Zlcl9wb3dlcl9wZXJjZW50IC0xCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtcmVjb3Zlcl9wb3dlcildIH0gewogICAgc2V0IHJlY292ZXJfcG93ZXJfcGVyY2VudCAka2V5cygtcmVjb3Zlcl9wb3dlcikKICAgIHN0YTo6Y2hlY2tfcGVyY2VudCAiLXJlY292ZXJfcG93ZXIiICRyZWNvdmVyX3Bvd2VyX3BlcmNlbnQKICAgIHNldCByZWNvdmVyX3Bvd2VyX3BlcmNlbnQgW2V4cHIgJHJlY292ZXJfcG93ZXJfcGVyY2VudCAvIDEwMC4wXQogIH0KCiAgc2V0IHZlcmJvc2UgMAogIGlmIHsgW2luZm8gZXhpc3RzIGZsYWdzKC12ZXJib3NlKV0gfSB7CiAgICBzZXQgdmVyYm9zZSAxCiAgfQoKICBzZXQgbWF4X3Bhc3NlcyAxMDAwMAogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLW1heF9wYXNzZXMpXSB9IHsKICAgIHNldCBtYXhfcGFzc2VzICRrZXlzKC1tYXhfcGFzc2VzKQogIH0KCiAgc2V0IG1heF9pdGVyYXRpb25zIC0xCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtbWF4X2l0ZXJhdGlvbnMpXSB9IHsKICAgIHNldCBtYXhfaXRlcmF0aW9ucyAka2V5cygtbWF4X2l0ZXJhdGlvbnMpCiAgfQoKICBzZXQgbWF0Y2hfY2VsbF9mb290cHJpbnQgW2luZm8gZXhpc3RzIGZsYWdzKC1tYXRjaF9jZWxsX2Zvb3RwcmludCldCiAgaWYgeyBbZGVzaWduX2lzX3JvdXRlZF0gfSB7CiAgICBlc3Q6OnNldF9wYXJhc2l0aWNzX3NyYyAiZGV0YWlsZWRfcm91dGluZyIKICB9CgogIHNldCBtYXhfcmVwYWlyc19wZXJfcGFzcyAxCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtbWF4X3JlcGFpcnNfcGVyX3Bhc3MpXSB9IHsKICAgIHNldCBtYXhfcmVwYWlyc19wZXJfcGFzcyAka2V5cygtbWF4X3JlcGFpcnNfcGVyX3Bhc3MpCiAgfQoKICBzdGE6OmNoZWNrX2FyZ2NfZXEwICJyZXBhaXJfdGltaW5nIiAkYXJncwogIGVzdDo6Y2hlY2tfcGFyYXNpdGljcwoKICBzZXQgcmVjb3ZlcmVkX3Bvd2VyIDAKICBzZXQgcmVwYWlyZWRfc2V0dXAgMAogIHNldCByZXBhaXJlZF9ob2xkIDAKICBpZiB7ICRyZWNvdmVyX3Bvd2VyX3BlcmNlbnQgPj0gMCB9IHsKICAgIHNldCByZWNvdmVyZWRfcG93ZXIgW3Jzejo6cmVjb3Zlcl9wb3dlciAkcmVjb3Zlcl9wb3dlcl9wZXJjZW50ICRtYXRjaF9jZWxsX2Zvb3RwcmludCAkdmVyYm9zZV0KICB9IGVsc2UgewogICAgaWYgeyAkc2V0dXAgfSB7CiAgICAgIHNldCByZXBhaXJlZF9zZXR1cCBbcnN6OjpyZXBhaXJfc2V0dXAgJHNldHVwX21hcmdpbiAkcmVwYWlyX3Ruc19lbmRfcGVyY2VudCAkbWF4X3Bhc3NlcyBcCiAgICAgICAgJG1heF9pdGVyYXRpb25zICRtYXhfcmVwYWlyc19wZXJfcGFzcyAkbWF0Y2hfY2VsbF9mb290cHJpbnQgJHZlcmJvc2UgXAogICAgICAgICRzZXF1ZW5jZSBcCiAgICAgICAgJHNraXBfcGluX3N3YXAgJHNraXBfZ2F0ZV9jbG9uaW5nICRza2lwX3NpemVfZG93biAkc2tpcF9idWZmZXJpbmcgXAogICAgICAgICRza2lwX2J1ZmZlcl9yZW1vdmFsICRza2lwX2xhc3RfZ2FzcCAkc2tpcF92dF9zd2FwICRza2lwX2NyaXRfdnRfc3dhcF0KICAgIH0KICAgIGlmIHsgJGhvbGQgfSB7CiAgICAgIHNldCByZXBhaXJlZF9ob2xkIFtyc3o6OnJlcGFpcl9ob2xkICRzZXR1cF9tYXJnaW4gJGhvbGRfbWFyZ2luIFwKICAgICAgICAkYWxsb3dfc2V0dXBfdmlvbGF0aW9ucyAkbWF4X2J1ZmZlcl9wZXJjZW50ICRtYXhfcGFzc2VzIFwKICAgICAgICAkbWF4X2l0ZXJhdGlvbnMgJG1hdGNoX2NlbGxfZm9vdHByaW50ICR2ZXJib3NlXQogICAgfQogIH0KCiAgcmV0dXJuIFtleHByICRyZWNvdmVyZWRfcG93ZXIgfHwgJHJlcGFpcmVkX3NldHVwIHx8ICRyZXBhaXJlZF9ob2xkXQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpzdGE6OmRlZmluZV9jbWRfYXJncyAicmVwb3J0X2Rlc2lnbl9hcmVhIiB7fQoKcHJvYyByZXBvcnRfZGVzaWduX2FyZWEgeyBhcmdzIH0gewogIHN0YTo6cGFyc2Vfa2V5X2FyZ3MgInJlcG9ydF9kZXNpZ25fYXJlYSIgYXJncyBrZXlzIHt9IGZsYWdzIHt9CiAgc2V0IHV0aWwgW2Zvcm1hdCAlLjBmIFtleHByIFtyc3o6OnV0aWxpemF0aW9uXSAqIDEwMF1dCiAgc2V0IGFyZWEgW2Zvcm1hdCAlLjBmIFtleHByIFtyc3o6OmRlc2lnbl9hcmVhXSAqIDFlNiAqIDFlNl1dCiAgdXRsOjpyZXBvcnQgIkRlc2lnbiBhcmVhICR7YXJlYX0gdW1eMiAke3V0aWx9JSB1dGlsaXphdGlvbi4iCn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJyZXBvcnRfZmxvYXRpbmdfbmV0cyIge1stdmVyYm9zZV0gWz4gZmlsZW5hbWVdIFs+PiBmaWxlbmFtZV19IDsjIGNoZWNrZXIgb2ZmCgpzdGE6OnByb2NfcmVkaXJlY3QgcmVwb3J0X2Zsb2F0aW5nX25ldHMgewogIHN0YTo6cGFyc2Vfa2V5X2FyZ3MgInJlcG9ydF9mbG9hdGluZ19uZXRzIiBhcmdzIGtleXMge30gZmxhZ3Mgey12ZXJib3NlfTsjIGNoZWNrZXIgb2ZmCgogIHNldCB2ZXJib3NlIFtpbmZvIGV4aXN0cyBmbGFncygtdmVyYm9zZSldCiAgc2V0IGZsb2F0aW5nX25ldHMgW3Jzejo6ZmluZF9mbG9hdGluZ19uZXRzXQogIHNldCBmbG9hdGluZ19waW5zIFtyc3o6OmZpbmRfZmxvYXRpbmdfcGluc10KICBzZXQgZmxvYXRpbmdfbmV0X2NvdW50IFtsbGVuZ3RoICRmbG9hdGluZ19uZXRzXQogIHNldCBmbG9hdGluZ19waW5fY291bnQgW2xsZW5ndGggJGZsb2F0aW5nX3BpbnNdCiAgaWYgeyAkZmxvYXRpbmdfbmV0X2NvdW50ID4gMCB9IHsKICAgIHV0bDo6d2FybiBSU1ogMjAgImZvdW5kICRmbG9hdGluZ19uZXRfY291bnQgZmxvYXRpbmcgbmV0cy4iCiAgICBpZiB7ICR2ZXJib3NlIH0gewogICAgICBmb3JlYWNoIG5ldCAkZmxvYXRpbmdfbmV0cyB7CiAgICAgICAgdXRsOjpyZXBvcnQgIiBbZ2V0X2Z1bGxfbmFtZSAkbmV0XSIKICAgICAgfQogICAgfQogIH0KICBpZiB7ICRmbG9hdGluZ19waW5fY291bnQgPiAwIH0gewogICAgdXRsOjp3YXJuIFJTWiA5NSAiZm91bmQgJGZsb2F0aW5nX3Bpbl9jb3VudCBmbG9hdGluZyBwaW5zLiIKICAgIGlmIHsgJHZlcmJvc2UgfSB7CiAgICAgIGZvcmVhY2ggcGluICRmbG9hdGluZ19waW5zIHsKICAgICAgICB1dGw6OnJlcG9ydCAiIFtnZXRfZnVsbF9uYW1lICRwaW5dIgogICAgICB9CiAgICB9CiAgfQoKICB1dGw6Om1ldHJpY19pbnQgInRpbWluZ19fZHJ2X19mbG9hdGluZ19fbmV0cyIgJGZsb2F0aW5nX25ldF9jb3VudAogIHV0bDo6bWV0cmljX2ludCAidGltaW5nX19kcnZfX2Zsb2F0aW5nX19waW5zIiAkZmxvYXRpbmdfcGluX2NvdW50Cn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJyZXBvcnRfb3ZlcmRyaXZlbl9uZXRzIiB7Wy1pbmNsdWRlX3BhcmFsbGVsX2RyaXZlbl0gXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstdmVyYm9zZV0gXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFs+IGZpbGVuYW1lXSBcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWz4+IGZpbGVuYW1lXX0gOyMgY2hlY2tlciBvZmYKCnN0YTo6cHJvY19yZWRpcmVjdCByZXBvcnRfb3ZlcmRyaXZlbl9uZXRzIHsKICBzdGE6OnBhcnNlX2tleV9hcmdzICJyZXBvcnRfb3ZlcmRyaXZlbl9uZXRzIiBhcmdzIFwKICAgIGtleXMge30gXAogICAgZmxhZ3Mgey12ZXJib3NlIC1pbmNsdWRlX3BhcmFsbGVsX2RyaXZlbn07IyBjaGVja2VyIG9mZgoKICBzZXQgdmVyYm9zZSBbaW5mbyBleGlzdHMgZmxhZ3MoLXZlcmJvc2UpXQogIHNldCBvdmVyZHJpdmVuX25ldHMgW3Jzejo6ZmluZF9vdmVyZHJpdmVuX25ldHMgW2luZm8gZXhpc3RzIGZsYWdzKC1pbmNsdWRlX3BhcmFsbGVsX2RyaXZlbildXQogIHNldCBvdmVyZHJpdmVuX25ldF9jb3VudCBbbGxlbmd0aCAkb3ZlcmRyaXZlbl9uZXRzXQogIGlmIHsgJG92ZXJkcml2ZW5fbmV0X2NvdW50ID4gMCB9IHsKICAgIHV0bDo6d2FybiBSU1ogMjQgImZvdW5kICRvdmVyZHJpdmVuX25ldF9jb3VudCBvdmVyZHJpdmVuIG5ldHMuIgogICAgaWYgeyAkdmVyYm9zZSB9IHsKICAgICAgZm9yZWFjaCBuZXQgJG92ZXJkcml2ZW5fbmV0cyB7CiAgICAgICAgdXRsOjpyZXBvcnQgIiBbZ2V0X2Z1bGxfbmFtZSAkbmV0XSIKICAgICAgfQogICAgfQogIH0KCiAgdXRsOjptZXRyaWNfaW50ICJ0aW1pbmdfX2Rydl9fb3ZlcmRyaXZlbl9fbmV0cyIgJG92ZXJkcml2ZW5fbmV0X2NvdW50Cn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJyZXBvcnRfbG9uZ193aXJlcyIge2NvdW50IFs+IGZpbGVuYW1lXSBbPj4gZmlsZW5hbWVdfSA7IyBjaGVja2VyIG9mZgoKc3RhOjpwcm9jX3JlZGlyZWN0IHJlcG9ydF9sb25nX3dpcmVzIHsKICBnbG9iYWwgc3RhX3JlcG9ydF9kZWZhdWx0X2RpZ2l0cwoKICBzdGE6OnBhcnNlX2tleV9hcmdzICJyZXBvcnRfbG9uZ193aXJlcyIgYXJncyBrZXlzIHstZGlnaXRzfSBmbGFncyB7fTsjIGNoZWNrZXIgb2ZmCgogIHNldCBkaWdpdHMgJHN0YV9yZXBvcnRfZGVmYXVsdF9kaWdpdHMKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1kaWdpdHMpXSB9IHsKICAgIHNldCBkaWdpdHMgJGtleXMoLWRpZ2l0cykKICB9CgogIHN0YTo6Y2hlY2tfYXJnY19lcTEgInJlcG9ydF9sb25nX3dpcmVzIiAkYXJncwogIHNldCBjb3VudCBbbGluZGV4ICRhcmdzIDBdCiAgcnN6OjpyZXBvcnRfbG9uZ193aXJlc19jbWQgJGNvdW50ICRkaWdpdHMKfQoKc3RhOjpkZWZpbmVfY21kX2FyZ3MgImVsaW1pbmF0ZV9kZWFkX2xvZ2ljIiB7fQpwcm9jIGVsaW1pbmF0ZV9kZWFkX2xvZ2ljIHsgfSB7CiAgcnN6OjplbGltaW5hdGVfZGVhZF9sb2dpY19jbWQgMQp9CgpuYW1lc3BhY2UgZXZhbCByc3ogewpwcm9jIGdldF9ibG9jayB7IH0gewogIHNldCBkYiBbb3JkOjpnZXRfZGJdCiAgaWYgeyAkZGIgZXEgIk5VTEwiIH0gewogICAgdXRsOjplcnJvciAiUlNaIiAyMDAgImRiIG5lZWRzIHRvIGJlIGRlZmluZWQgZm9yIHNldF9vcHRfY29uZmlnIGFuZCByZWxhdGVkIGNvbW1hbmRzLiIKICB9CiAgc2V0IGNoaXAgWyRkYiBnZXRDaGlwXQogIGlmIHsgJGNoaXAgZXEgIk5VTEwiIH0gewogICAgdXRsOjplcnJvciAiUlNaIiAyMDEgImNoaXAgbmVlZHMgdG8gYmUgZGVmaW5lZCBmb3Igc2V0X29wdF9jb25maWcgYW5kIHJlbGF0ZWQgY29tbWFuZHMuIgogIH0KICBzZXQgYmxvY2sgWyRjaGlwIGdldEJsb2NrXQogIGlmIHsgJGJsb2NrIGVxICJOVUxMIiB9IHsKICAgIHV0bDo6ZXJyb3IgIlJTWiIgMjAyICJibG9jayBuZWVkcyB0byBiZSBkZWZpbmVkIGZvciBzZXRfb3B0X2NvbmZpZyBhbmQgcmVsYXRlZCBjb21tYW5kcy4iCiAgfQogIHJldHVybiAkYmxvY2sKfQoKcHJvYyBzZXRfcG9zaXRpdmVfZG91YmxlX3Byb3AgeyB2YWx1ZSBvcHRfbmFtZSBwcm9wX25hbWUgfSB7CiAgc3RhOjpjaGVja19wb3NpdGl2ZV9mbG9hdCAkb3B0X25hbWUgJHZhbHVlCiAgc2V0IGJsb2NrIFtnZXRfYmxvY2tdCiAgc2V0IHByb3AgW29kYjo6ZGJEb3VibGVQcm9wZXJ0eV9maW5kICRibG9jayAkcHJvcF9uYW1lXQogIGlmIHsgJHByb3AgZXEgIk5VTEwiIH0gewogICAgb2RiOjpkYkRvdWJsZVByb3BlcnR5X2NyZWF0ZSAkYmxvY2sgJHByb3BfbmFtZSAkdmFsdWUKICB9IGVsc2UgewogICAgJHByb3Agc2V0VmFsdWUgJHZhbHVlCiAgfQp9Cgpwcm9jIHNldF9ib29sZWFuX3Byb3AgeyB2YWx1ZSBvcHRfbmFtZSBwcm9wX25hbWUgfSB7CiAgaWYgeyAhW3N0cmluZyBpcyBib29sZWFuICR2YWx1ZV0gfSB7CiAgICB1dGw6OmVycm9yICJSU1oiIDIwOSBcCiAgICAgICIkb3B0X25hbWUgYXJndW1lbnQgc2hvdWxkIGJlIEJvb2xlYW4iCiAgfQogIHNldCBibG9jayBbZ2V0X2Jsb2NrXQogIHNldCBwcm9wIFtvZGI6OmRiQm9vbFByb3BlcnR5X2ZpbmQgJGJsb2NrICRwcm9wX25hbWVdCiAgaWYgeyAkcHJvcCBlcSAiTlVMTCIgfSB7CiAgICBvZGI6OmRiQm9vbFByb3BlcnR5X2NyZWF0ZSAkYmxvY2sgJHByb3BfbmFtZSAkdmFsdWUKICB9IGVsc2UgewogICAgJHByb3Agc2V0VmFsdWUgJHZhbHVlCiAgfQp9Cgpwcm9jIGNsZWFyX2RvdWJsZV9wcm9wIHsgbmFtZSB9IHsKICBzZXQgYmxvY2sgW2dldF9ibG9ja10KICBzZXQgcHJvcCBbb2RiOjpkYkRvdWJsZVByb3BlcnR5X2ZpbmQgJGJsb2NrICRuYW1lXQogIGlmIHsgJHByb3AgbmUgIk5VTEwiICYmICRwcm9wIG5lICIiIH0gewogICAgb2RiOjpkYlByb3BlcnR5X2Rlc3Ryb3kgJHByb3AKICB9Cn0KCnByb2MgY2xlYXJfYm9vbF9wcm9wIHsgbmFtZSB9IHsKICBzZXQgYmxvY2sgW2dldF9ibG9ja10KICBzZXQgcHJvcCBbb2RiOjpkYkJvb2xQcm9wZXJ0eV9maW5kICRibG9jayAkbmFtZV0KICBpZiB7ICRwcm9wIG5lICJOVUxMIiAmJiAkcHJvcCBuZSAiIiB9IHsKICAgIG9kYjo6ZGJQcm9wZXJ0eV9kZXN0cm95ICRwcm9wCiAgfQp9Cn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJzZXRfb3B0X2NvbmZpZyIgeyBbLWxpbWl0X3NpemluZ19hcmVhXSBcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstbGltaXRfc2l6aW5nX2xlYWthZ2VdIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1rZWVwX3NpemluZ19zaXRlXSBcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsta2VlcF9zaXppbmdfdnRdIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1zaXppbmdfYXJlYV9saW1pdF0gXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLXNpemluZ19sZWFrYWdlX2xpbWl0XSBcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstc2V0X2Vhcmx5X3NpemluZ19jYXBfcmF0aW9dIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1zZXRfZWFybHlfYnVmZmVyX3NpemluZ19jYXBfcmF0aW9dIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1kaXNhYmxlX2J1ZmZlcl9wcnVuaW5nXSB9Cgpwcm9jIHNldF9vcHRfY29uZmlnIHsgYXJncyB9IHsKICBzdGE6OnBhcnNlX2tleV9hcmdzICJzZXRfb3B0X2NvbmZpZyIgYXJncyBcCiAgICBrZXlzIHstbGltaXRfc2l6aW5nX2FyZWEgLWxpbWl0X3NpemluZ19sZWFrYWdlIC1zaXppbmdfYXJlYV9saW1pdCBcCiAgICAgIC1zaXppbmdfbGVha2FnZV9saW1pdCAta2VlcF9zaXppbmdfc2l0ZSAta2VlcF9zaXppbmdfdnQgLWRpc2FibGVfYnVmZmVyX3BydW5pbmcgXAogICAgICAtc2V0X2Vhcmx5X3NpemluZ19jYXBfcmF0aW8gLXNldF9lYXJseV9idWZmZXJfc2l6aW5nX2NhcF9yYXRpb30gZmxhZ3Mge30KCiAgc2V0IGFyZWFfbGltaXQgIk5VTEwiCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtbGltaXRfc2l6aW5nX2FyZWEpXSB9IHsKICAgIHNldCBhcmVhX2xpbWl0ICRrZXlzKC1saW1pdF9zaXppbmdfYXJlYSkKICB9IGVsc2VpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1zaXppbmdfYXJlYV9saW1pdCldIH0gewogICAgc2V0IGFyZWFfbGltaXQgJGtleXMoLXNpemluZ19hcmVhX2xpbWl0KQogIH0KICBpZiB7ICRhcmVhX2xpbWl0IG5lICJOVUxMIiB9IHsKICAgIHJzejo6c2V0X3Bvc2l0aXZlX2RvdWJsZV9wcm9wIFwKICAgICAgJGFyZWFfbGltaXQgIi1zaXppbmdfYXJlYV9saW1pdCIgImxpbWl0X3NpemluZ19hcmVhIgogICAgdXRsOjppbmZvIFJTWiAxMDAgXAogICAgICAiQ2VsbHMgd2l0aCBhcmVhID4gJHthcmVhX2xpbWl0fVggY3VycmVudCBjZWxsIHdpbGwgbm90IGJlIGNvbnNpZGVyZWQgZm9yIHNpemluZyIKICB9CgogIHNldCBsZWFrYWdlX2xpbWl0ICJOVUxMIgogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLWxpbWl0X3NpemluZ19sZWFrYWdlKV0gfSB7CiAgICBzZXQgbGVha2FnZV9saW1pdCAka2V5cygtbGltaXRfc2l6aW5nX2xlYWthZ2UpCiAgfSBlbHNlaWYgeyBbaW5mbyBleGlzdHMga2V5cygtc2l6aW5nX2xlYWthZ2VfbGltaXQpXSB9IHsKICAgIHNldCBsZWFrYWdlX2xpbWl0ICRrZXlzKC1zaXppbmdfbGVha2FnZV9saW1pdCkKICB9CiAgaWYgeyAkbGVha2FnZV9saW1pdCBuZSAiTlVMTCIgfSB7CiAgICByc3o6OnNldF9wb3NpdGl2ZV9kb3VibGVfcHJvcCBcCiAgICAgICRsZWFrYWdlX2xpbWl0ICItc2l6aW5nX2xlYWthZ2VfbGltaXQiICJsaW1pdF9zaXppbmdfbGVha2FnZSIKICAgIHV0bDo6aW5mbyBSU1ogMTAxIFwKICAgICAgIkNlbGxzIHdpdGggbGVha2FnZSA+ICR7bGVha2FnZV9saW1pdH1YIGN1cnJlbnQgY2VsbCB3aWxsIG5vdCBiZSBjb25zaWRlcmVkIGZvciBzaXppbmciCiAgfQoKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1rZWVwX3NpemluZ19zaXRlKV0gfSB7CiAgICByc3o6OnNldF9ib29sZWFuX3Byb3AgJGtleXMoLWtlZXBfc2l6aW5nX3NpdGUpICIta2VlcF9zaXppbmdfc2l0ZSIgImtlZXBfc2l6aW5nX3NpdGUiCiAgICB1dGw6OmluZm8gUlNaIDEwNCBcCiAgICAgICJDZWxsJ3Mgc2l0ZSB3aWxsIGJlIHByZXNlcnZlZCBmb3Igc2l6aW5nIgogIH0KCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygta2VlcF9zaXppbmdfdnQpXSB9IHsKICAgIHJzejo6c2V0X2Jvb2xlYW5fcHJvcCAka2V5cygta2VlcF9zaXppbmdfdnQpICIta2VlcF9zaXppbmdfdnQiICJrZWVwX3NpemluZ192dCIKICAgIHV0bDo6aW5mbyBSU1ogMTA2IFwKICAgICAgIkNlbGwncyBWVCB0eXBlIHdpbGwgYmUgcHJlc2VydmVkIGZvciBzaXppbmciCiAgfQoKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1zZXRfZWFybHlfc2l6aW5nX2NhcF9yYXRpbyldIH0gewogICAgc2V0IHZhbHVlICRrZXlzKC1zZXRfZWFybHlfc2l6aW5nX2NhcF9yYXRpbykKICAgIHJzejo6c2V0X3Bvc2l0aXZlX2RvdWJsZV9wcm9wICR2YWx1ZSAiLXNldF9lYXJseV9zaXppbmdfY2FwX3JhdGlvIiAiZWFybHlfc2l6aW5nX2NhcF9yYXRpbyIKICAgIHV0bDo6aW5mbyBSU1ogMTQ1IFwKICAgICAgIkVhcmx5IGNlbGwgc2l6aW5nIHdpbGwgdXNlIGNhcGFjaXRhbmNlIHJhdGlvIG9mIHZhbHVlICR2YWx1ZSIKICB9CgogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLXNldF9lYXJseV9idWZmZXJfc2l6aW5nX2NhcF9yYXRpbyldIH0gewogICAgc2V0IHZhbHVlICRrZXlzKC1zZXRfZWFybHlfYnVmZmVyX3NpemluZ19jYXBfcmF0aW8pCiAgICByc3o6OnNldF9wb3NpdGl2ZV9kb3VibGVfcHJvcCAkdmFsdWUgIi1zZXRfZWFybHlfYnVmZmVyX3NpemluZ19jYXBfcmF0aW8iIFwKICAgICAgImVhcmx5X2J1ZmZlcl9zaXppbmdfY2FwX3JhdGlvIgogICAgdXRsOjppbmZvIFJTWiAxNDcgXAogICAgICAiRWFybHkgYnVmZmVyIHNpemluZyB3aWxsIHVzZSBjYXBhY2l0YW5jZSByYXRpbyBvZiB2YWx1ZSAkdmFsdWUiCiAgfQoKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1kaXNhYmxlX2J1ZmZlcl9wcnVuaW5nKV0gfSB7CiAgICBzZXQgZGlzYWJsZV92YWwgJGtleXMoLWRpc2FibGVfYnVmZmVyX3BydW5pbmcpCiAgICByc3o6OnNldF9ib29sZWFuX3Byb3AgJGRpc2FibGVfdmFsICItZGlzYWJsZV9idWZmZXJfcHJ1bmluZyIgXAogICAgICAiZGlzYWJsZV9idWZmZXJfcHJ1bmluZyIKICAgIGlmIHsgJGRpc2FibGVfdmFsIH0gewogICAgICB1dGw6OmluZm8gUlNaIDE2NSBcCiAgICAgICAgIkJ1ZmZlciBwcnVuaW5nIHdpbGwgYmUgZGlzYWJsZWQgdG8gZW5hYmxlIGFsbCBidWZmZXJzIGZvciByZXBhaXJfZGVzaWduIGFuZCByZXBhaXJfdGltaW5nIgogICAgfSBlbHNlIHsKICAgICAgdXRsOjppbmZvIFJTWiAxNjcgXAogICAgICAgICJCdWZmZXIgcHJ1bmluZyB3aWxsIGJlIGVuYWJsZWQgZm9yIHJlcGFpcl9kZXNpZ24gYW5kIHJlcGFpcl90aW1pbmciCiAgICB9CiAgfQp9CgpzdGE6OmRlZmluZV9jbWRfYXJncyAicmVzZXRfb3B0X2NvbmZpZyIgeyBbLWxpbWl0X3NpemluZ19hcmVhXSBcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1saW1pdF9zaXppbmdfbGVha2FnZV0gXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsta2VlcF9zaXppbmdfc2l0ZV0gXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsta2VlcF9zaXppbmdfdnRdIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLXNpemluZ19hcmVhX2xpbWl0XSBcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWy1zaXppbmdfbGVha2FnZV9saW1pdF0gXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstc2V0X2Vhcmx5X3NpemluZ19jYXBfcmF0aW9dIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLXNldF9lYXJseV9idWZmZXJfc2l6aW5nX2NhcF9yYXRpb10gXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstZGlzYWJsZV9idWZmZXJfcHJ1bmluZ10gfQoKcHJvYyByZXNldF9vcHRfY29uZmlnIHsgYXJncyB9IHsKICBzdGE6OnBhcnNlX2tleV9hcmdzICJyZXNldF9vcHRfY29uZmlnIiBhcmdzIFwKICAgIGtleXMge30gZmxhZ3Mgey1saW1pdF9zaXppbmdfYXJlYSAtbGltaXRfc2l6aW5nX2xlYWthZ2UgLWtlZXBfc2l6aW5nX3NpdGUgXAogICAgICAgICAgICAgICAgICAgICAtc2l6aW5nX2FyZWFfbGltaXQgLXNpemluZ19sZWFrYWdlX2xpbWl0IC1rZWVwX3NpemluZ192dCBcCiAgICAgICAgICAgICAgICAgICAgIC1zZXRfZWFybHlfc2l6aW5nX2NhcF9yYXRpbyAtc2V0X2Vhcmx5X2J1ZmZlcl9zaXppbmdfY2FwX3JhdGlvIFwKICAgICAgICAgICAgICAgICAgICAgLWRpc2FibGVfYnVmZmVyX3BydW5pbmd9CiAgc2V0IHJlc2V0X2FsbCBbZXhwciB7IFthcnJheSBzaXplIGZsYWdzXSA9PSAwIH1dCgogIGlmIHsKICAgICRyZXNldF9hbGwgfHwgW2luZm8gZXhpc3RzIGZsYWdzKC1saW1pdF9zaXppbmdfYXJlYSldCiAgICB8fCBbaW5mbyBleGlzdHMgZmxhZ3MoLXNpemluZ19hcmVhX2xpbWl0KV0KICB9IHsKICAgIHJzejo6Y2xlYXJfZG91YmxlX3Byb3AgImxpbWl0X3NpemluZ19hcmVhIgogICAgdXRsOjppbmZvIFJTWiAxMDIgIkNlbGwgc2l6aW5nIHJlc3RyaWN0aW9uIGJhc2VkIG9uIGFyZWEgaGFzIGJlZW4gcmVtb3ZlZC4iCiAgfQogIGlmIHsKICAgICRyZXNldF9hbGwgfHwgW2luZm8gZXhpc3RzIGZsYWdzKC1saW1pdF9zaXppbmdfbGVha2FnZSldCiAgICB8fCBbaW5mbyBleGlzdHMgZmxhZ3MoLXNpemluZ19sZWFrYWdlX2xpbWl0KV0KICB9IHsKICAgIHJzejo6Y2xlYXJfZG91YmxlX3Byb3AgImxpbWl0X3NpemluZ19sZWFrYWdlIgogICAgdXRsOjppbmZvIFJTWiAxMDMgIkNlbGwgc2l6aW5nIHJlc3RyaWN0aW9uIGJhc2VkIG9uIGxlYWthZ2UgaGFzIGJlZW4gcmVtb3ZlZC4iCiAgfQogIGlmIHsgJHJlc2V0X2FsbCB8fCBbaW5mbyBleGlzdHMgZmxhZ3MoLWtlZXBfc2l6aW5nX3NpdGUpXSB9IHsKICAgIHJzejo6Y2xlYXJfYm9vbF9wcm9wICJrZWVwX3NpemluZ19zaXRlIgogICAgdXRsOjppbmZvIFJTWiAxMDUgIkNlbGwgc2l6aW5nIHJlc3RyaWN0aW9uIGJhc2VkIG9uIHNpdGUgaGFzIGJlZW4gcmVtb3ZlZC4iCiAgfQogIGlmIHsgJHJlc2V0X2FsbCB8fCBbaW5mbyBleGlzdHMgZmxhZ3MoLWtlZXBfc2l6aW5nX3Z0KV0gfSB7CiAgICByc3o6OmNsZWFyX2Jvb2xfcHJvcCAia2VlcF9zaXppbmdfdnQiCiAgICB1dGw6OmluZm8gUlNaIDEwNyAiQ2VsbCBzaXppbmcgcmVzdHJpY3Rpb24gYmFzZWQgb24gVlQgdHlwZSBoYXMgYmVlbiByZW1vdmVkLiIKICB9CiAgaWYgeyAkcmVzZXRfYWxsIHx8IFtpbmZvIGV4aXN0cyBmbGFncygtc2V0X2Vhcmx5X3NpemluZ19jYXBfcmF0aW8pXSB9IHsKICAgIHJzejo6Y2xlYXJfZG91YmxlX3Byb3AgImVhcmx5X3NpemluZ19jYXBfcmF0aW8iCiAgICB1dGw6OmluZm8gUlNaIDE0NiAiQ2FwYWNpdGFuY2UgcmF0aW8gZm9yIGVhcmx5IGNlbGwgc2l6aW5nIGhhcyBiZWVuIHVuc2V0LiIKICB9CiAgaWYgeyAkcmVzZXRfYWxsIHx8IFtpbmZvIGV4aXN0cyBmbGFncygtc2V0X2Vhcmx5X2J1ZmZlcl9zaXppbmdfY2FwX3JhdGlvKV0gfSB7CiAgICByc3o6OmNsZWFyX2RvdWJsZV9wcm9wICJlYXJseV9idWZmZXJfc2l6aW5nX2NhcF9yYXRpbyIKICAgIHV0bDo6aW5mbyBSU1ogMTQ4ICJDYXBhY2l0YW5jZSByYXRpbyBmb3IgZWFybHkgYnVmZmVyIHNpemluZyBoYXMgYmVlbiB1bnNldC4iCiAgfQogIGlmIHsgJHJlc2V0X2FsbCB8fCBbaW5mbyBleGlzdHMgZmxhZ3MoLWRpc2FibGVfYnVmZmVyX3BydW5pbmcpXSB9IHsKICAgIHJzejo6Y2xlYXJfYm9vbF9wcm9wICJkaXNhYmxlX2J1ZmZlcl9wcnVuaW5nIgogICAgdXRsOjppbmZvIFJTWiAxNjYgIkJ1ZmZlciBwcnVuaW5nIGhhcyBiZWVuIGVuYWJsZWQuIgogIH0KfQoKc3RhOjpkZWZpbmVfY21kX2FyZ3MgInJlcG9ydF9vcHRfY29uZmlnIiB7fQoKcHJvYyByZXBvcnRfb3B0X2NvbmZpZyB7IGFyZ3MgfSB7CiAgc3RhOjpwYXJzZV9rZXlfYXJncyAicmVwb3J0X29wdF9jb25maWciIGFyZ3Mga2V5cyB7fSBmbGFncyB7fQogIHNldCBibG9jayBbcnN6OjpnZXRfYmxvY2tdCgogIHNldCBhcmVhX2xpbWl0X3ZhbHVlICJ1bmRlZmluZWQiCiAgc2V0IGFyZWFfbGltaXQgW29kYjo6ZGJEb3VibGVQcm9wZXJ0eV9maW5kICRibG9jayAibGltaXRfc2l6aW5nX2FyZWEiXQogIGlmIHsgJGFyZWFfbGltaXQgbmUgIk5VTEwiICYmICRhcmVhX2xpbWl0IG5lICIiIH0gewogICAgc2V0IGFyZWFfbGltaXRfdmFsdWUgWyRhcmVhX2xpbWl0IGdldFZhbHVlXQogIH0KCiAgc2V0IGxlYWthZ2VfbGltaXRfdmFsdWUgInVuZGVmaW5lZCIKICBzZXQgbGVha2FnZV9saW1pdCBbb2RiOjpkYkRvdWJsZVByb3BlcnR5X2ZpbmQgJGJsb2NrICJsaW1pdF9zaXppbmdfbGVha2FnZSJdCiAgaWYgeyAkbGVha2FnZV9saW1pdCBuZSAiTlVMTCIgJiYgJGxlYWthZ2VfbGltaXQgbmUgIiIgfSB7CiAgICBzZXQgbGVha2FnZV9saW1pdF92YWx1ZSBbJGxlYWthZ2VfbGltaXQgZ2V0VmFsdWVdCiAgfQoKICBzZXQga2VlcF9zaXRlX3ZhbHVlICJmYWxzZSIKICBzZXQga2VlcF9zaXRlIFtvZGI6OmRiQm9vbFByb3BlcnR5X2ZpbmQgJGJsb2NrICJrZWVwX3NpemluZ19zaXRlIl0KICBpZiB7ICRrZWVwX3NpdGUgbmUgIk5VTEwiICYmICRrZWVwX3NpdGUgbmUgIiIgfSB7CiAgICBzZXQga2VlcF9zaXRlX3Jlc3VsdCBbJGtlZXBfc2l0ZSBnZXRWYWx1ZV0KICAgIHNldCBrZWVwX3NpdGVfdmFsdWUgW2V4cHIgeyAka2VlcF9zaXRlX3Jlc3VsdCA/ICJ0cnVlIiA6ICJmYWxzZSIgfV0KICB9CgogIHNldCBrZWVwX3NpemluZ192dCAiZmFsc2UiCiAgc2V0IGtlZXBfdnQgW29kYjo6ZGJCb29sUHJvcGVydHlfZmluZCAkYmxvY2sgImtlZXBfc2l6aW5nX3Z0Il0KICBpZiB7ICRrZWVwX3Z0IG5lICJOVUxMIiAmJiAka2VlcF92dCBuZSAiIiB9IHsKICAgIHNldCBrZWVwX3Z0X3ZhbHVlIFska2VlcF92dCBnZXRWYWx1ZV0KICAgIHNldCBrZWVwX3NpemluZ192dCBbZXhwciB7ICRrZWVwX3Z0X3ZhbHVlID8gInRydWUiIDogImZhbHNlIiB9XQogIH0KCiAgc2V0IHNpemluZ19jYXBfcmF0aW8gInVuc2V0IgogIHNldCBjYXBfcmF0aW9fcHJvcCBbb2RiOjpkYkRvdWJsZVByb3BlcnR5X2ZpbmQgJGJsb2NrICJlYXJseV9zaXppbmdfY2FwX3JhdGlvIl0KICBpZiB7ICRjYXBfcmF0aW9fcHJvcCBuZSAiTlVMTCIgJiYgJGNhcF9yYXRpb19wcm9wIG5lICIiIH0gewogICAgc2V0IHNpemluZ19jYXBfcmF0aW8gWyRjYXBfcmF0aW9fcHJvcCBnZXRWYWx1ZV0KICB9CgogIHNldCBidWZmZXJfY2FwX3JhdGlvICJ1bnNldCIKICBzZXQgYnVmZmVyX2NhcF9yYXRpb19wcm9wIFtvZGI6OmRiRG91YmxlUHJvcGVydHlfZmluZCAkYmxvY2sgImVhcmx5X2J1ZmZlcl9zaXppbmdfY2FwX3JhdGlvIl0KICBpZiB7ICRidWZmZXJfY2FwX3JhdGlvX3Byb3AgbmUgIk5VTEwiICYmICRidWZmZXJfY2FwX3JhdGlvX3Byb3AgbmUgIiIgfSB7CiAgICBzZXQgYnVmZmVyX2NhcF9yYXRpbyBbJGJ1ZmZlcl9jYXBfcmF0aW9fcHJvcCBnZXRWYWx1ZV0KICB9CgogIHNldCBkaXNhYmxlX2J1ZmZlcl9wcnVuaW5nICJmYWxzZSIKICBzZXQgbm9fYnVmZmVyX3BydW5pbmcgW29kYjo6ZGJCb29sUHJvcGVydHlfZmluZCAkYmxvY2sgImRpc2FibGVfYnVmZmVyX3BydW5pbmciXQogIGlmIHsgJG5vX2J1ZmZlcl9wcnVuaW5nIG5lICJOVUxMIiAmJiAkbm9fYnVmZmVyX3BydW5pbmcgbmUgIiIgfSB7CiAgICBzZXQgbm9fYnVmZmVyX3BydW5pbmdfdmFsdWUgWyRub19idWZmZXJfcHJ1bmluZyBnZXRWYWx1ZV0KICAgIHNldCBkaXNhYmxlX2J1ZmZlcl9wcnVuaW5nIFtleHByIHsgJG5vX2J1ZmZlcl9wcnVuaW5nX3ZhbHVlID8gInRydWUiIDogImZhbHNlIiB9XQogIH0KCiAgcHV0cyAiKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiIKICBwdXRzICJPcHRpbWl6YXRpb24gY29uZmlnOiIKICBwdXRzICItbGltaXRfc2l6aW5nX2FyZWE6ICAgICAgICAgICAgICAgICAkYXJlYV9saW1pdF92YWx1ZSIKICBwdXRzICItbGltaXRfc2l6aW5nX2xlYWthZ2U6ICAgICAgICAgICAgICAkbGVha2FnZV9saW1pdF92YWx1ZSIKICBwdXRzICIta2VlcF9zaXppbmdfc2l0ZTogICAgICAgICAgICAgICAgICAka2VlcF9zaXRlX3ZhbHVlIgogIHB1dHMgIi1rZWVwX3NpemluZ192dDogICAgICAgICAgICAgICAgICAgICRrZWVwX3NpemluZ192dCIKICBwdXRzICItc2V0X2Vhcmx5X3NpemluZ19jYXBfcmF0aW86ICAgICAgICAkc2l6aW5nX2NhcF9yYXRpbyIKICBwdXRzICItc2V0X2Vhcmx5X2J1ZmZlcl9zaXppbmdfY2FwX3JhdGlvOiAkYnVmZmVyX2NhcF9yYXRpbyIKICBwdXRzICItZGlzYWJsZV9idWZmZXJfcHJ1bmluZzogICAgICAgICAgICAkZGlzYWJsZV9idWZmZXJfcHJ1bmluZyIKICBwdXRzICIqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIgp9CgpzdGE6OmRlZmluZV9jbWRfYXJncyAicmVwb3J0X2VxdWl2X2NlbGxzIiB7IC1tYXRjaF9jZWxsX2Zvb3RwcmludCAtYWxsIC12dCB9Cgpwcm9jIHJlcG9ydF9lcXVpdl9jZWxscyB7IGFyZ3MgfSB7CiAgc3RhOjpwYXJzZV9rZXlfYXJncyAicmVwb3J0X2VxdWl2X2NlbGxzIiBhcmdzIGtleXMge30gZmxhZ3Mgey1tYXRjaF9jZWxsX2Zvb3RwcmludCAtYWxsIC12dH0KICBzZXQgbWF0Y2hfY2VsbF9mb290cHJpbnQgW2luZm8gZXhpc3RzIGZsYWdzKC1tYXRjaF9jZWxsX2Zvb3RwcmludCldCiAgc2V0IHJlcG9ydF9hbGxfY2VsbHMgW2luZm8gZXhpc3RzIGZsYWdzKC1hbGwpXQogIHN0YTo6Y2hlY2tfYXJnY19lcTEgInJlcG9ydF9lcXVpdl9jZWxscyIgJGFyZ3MKICBzZXQgbGliX2NlbGwgW3N0YTo6Z2V0X2xpYl9jZWxsc19hcmcgInJlcG9ydF9lcXVpdl9jZWxscyIgW2xpbmRleCAkYXJncyAwXSBzdGE6OnN0YV93YXJuXQogIHNldCByZXBvcnRfdnRfZXF1aXYgW2luZm8gZXhpc3RzIGZsYWdzKC12dCldCiAgcnN6OjpyZXBvcnRfZXF1aXZfY2VsbHNfY21kICRsaWJfY2VsbCAkbWF0Y2hfY2VsbF9mb290cHJpbnQgJHJlcG9ydF9hbGxfY2VsbHMgJHJlcG9ydF92dF9lcXVpdgp9CgpzdGE6OmRlZmluZV9jbWRfYXJncyAicmVwbGFjZV9hcml0aF9tb2R1bGVzIiB7IFstcGF0aF9jb3VudCBudW1fY3JpdGljYWxfcGF0aHNdIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLXNsYWNrX3RocmVzaG9sZCBmbG9hdF0gXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFstdGFyZ2V0IG9wdG9fZ29hbF0gfQoKcHJvYyByZXBsYWNlX2FyaXRoX21vZHVsZXMgeyBhcmdzIH0gewogIHN0YTo6cGFyc2Vfa2V5X2FyZ3MgInJlcGxhY2VfYXJpdGhfbW9kdWxlcyIgYXJncyBcCiAgICBrZXlzIHstcGF0aF9jb3VudCAtc2xhY2tfdGhyZXNob2xkIC10YXJnZXR9IFwKICAgIGZsYWdzIHt9CgogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLXBhdGhfY291bnQpXSB9IHsKICAgIHNldCBwYXRoX2NvdW50ICRrZXlzKC1wYXRoX2NvdW50KQogIH0gZWxzZSB7CiAgICBzZXQgcGF0aF9jb3VudCAxMDAwCiAgfQogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLXRhcmdldCldIH0gewogICAgc2V0IHRhcmdldCAka2V5cygtdGFyZ2V0KQogICAgaWYgeyBbbHNlYXJjaCAtZXhhY3Qge3NldHVwIGhvbGQgcG93ZXIgYXJlYX0gJHRhcmdldF0gPT0gLTEgfSB7CiAgICAgIHV0bDo6ZXJyb3IgIlJTWiIgMTY0ICItdGFyZ2V0IG5lZWRzIHRvIGJlIG9uZSBvZiBzZXR1cCwgaG9sZCwgcG93ZXIsIGFyZWEiCiAgICB9CiAgfSBlbHNlIHsKICAgIHNldCB0YXJnZXQgInNldHVwIgogIH0KICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1zbGFja19tYXJnaW4pXSB9IHsKICAgIHNldCBzbGFja19tYXJnaW4gW3Jzejo6cGFyc2VfdGltZV9tYXJnaW5fYXJnICItc2xhY2tfbWFyZ2luIiBrZXlzXQogIH0gZWxzZSB7CiAgICBzZXQgc2xhY2tfbWFyZ2luIDAuMAogIH0KCiAgcHV0cyAicmVwbGFjZV9hcml0aF9tb2R1bGUgLXBhdGhfY291bnQgJHBhdGhfY291bnQgLXRhcmdldCAkdGFyZ2V0IC1zbGFja19tYXJnaW4gJHNsYWNrX21hcmdpbiIKICByc3o6OnN3YXBfYXJpdGhfbW9kdWxlc19jbWQgJHBhdGhfY291bnQgJHRhcmdldCAkc2xhY2tfbWFyZ2luCn0KCnN0YTo6ZGVmaW5lX2NtZF9hcmdzICJyZXBvcnRfYnVmZmVycyIgeyBbLWZpbHRlcmVkXSB9Cgpwcm9jIHJlcG9ydF9idWZmZXJzIHsgYXJncyB9IHsKICBzdGE6OnBhcnNlX2tleV9hcmdzICJyZXBvcnRfYnVmZmVycyIgYXJncyBrZXlzIHt9IGZsYWdzIHstZmlsdGVyZWR9CiAgc2V0IGZpbHRlcmVkIFtpbmZvIGV4aXN0cyBmbGFncygtZmlsdGVyZWQpXQogIHJzejo6cmVwb3J0X2J1ZmZlcnNfY21kICRmaWx0ZXJlZAp9CgpuYW1lc3BhY2UgZXZhbCByc3ogewojIGZvciB0ZXN0aW5nCnByb2MgcmVwYWlyX3NldHVwX3BpbiB7IGVuZF9waW4gfSB7CiAgZXN0OjpjaGVja19wYXJhc2l0aWNzCiAgcmVwYWlyX3NldHVwX3Bpbl9jbWQgJGVuZF9waW4KfQoKcHJvYyBzZXRfZGVidWcgeyBhcmdzIH0gewogIHN0YTo6cGFyc2Vfa2V5X2FyZ3MgInNldF9kZWJ1ZyIgYXJncyBcCiAgICBrZXlzIHsgLW5ldCB9IFwKICAgIGZsYWdzIHsgLXN1YmRpdmlkZV9zdGVwIH0gOyMgY2hlY2tlciBvZmYKCiAgc2V0IG5ldCAiIgogIGlmIHsgW2luZm8gZXhpc3RzIGtleXMoLW5ldCldIH0gewogICAgc2V0IG5ldCAka2V5cygtbmV0KQogIH0KCiAgc2V0IHN1YmRpdmlkZV9zdGVwIFtpbmZvIGV4aXN0cyBmbGFncygtc3ViZGl2aWRlX3N0ZXApXQoKICByc3o6OnNldF9kZWJ1Z19jbWQgJG5ldCAkc3ViZGl2aWRlX3N0ZXAKfQoKcHJvYyByZXBvcnRfc3dhcHBhYmxlX3BpbnMgeyB9IHsKICByZXBvcnRfc3dhcHBhYmxlX3BpbnNfY21kCn0KCnByb2MgcGFyc2VfdGltZV9tYXJnaW5fYXJnIHsga2V5IGtleXNfdmFyIH0gewogIHJldHVybiBbc3RhOjp0aW1lX3VpX3N0YSBbcGFyc2VfbWFyZ2luX2FyZyAka2V5ICRrZXlzX3Zhcl1dCn0KCnByb2MgcGFyc2VfcGVyY2VudF9tYXJnaW5fYXJnIHsga2V5IGtleXNfdmFyIH0gewogIHNldCBtYXJnaW4gW3BhcnNlX21hcmdpbl9hcmcgJGtleSAka2V5c192YXJdCiAgaWYgeyAhKCRtYXJnaW4gPj0gMCAmJiAkbWFyZ2luIDwgMTAwKSB9IHsKICAgIHV0bDo6d2FybiBSU1ogNjcgIiRrZXkgbXVzdCBiZSAgYmV0d2VlbiAwIGFuZCAxMDAgcGVyY2VudC4iCiAgfQogIHJldHVybiAkbWFyZ2luCn0KCnByb2MgcGFyc2VfbWFyZ2luX2FyZyB7IGtleSBrZXlzX3ZhciB9IHsKICB1cHZhciAyICRrZXlzX3ZhciBrZXlzCgogIHNldCBtYXJnaW4gMC4wCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygka2V5KV0gfSB7CiAgICBzZXQgbWFyZ2luICRrZXlzKCRrZXkpCiAgICBzdGE6OmNoZWNrX2Zsb2F0ICRrZXkgJG1hcmdpbgogIH0KICByZXR1cm4gJG1hcmdpbgp9Cgpwcm9jIHBhcnNlX21heF91dGlsIHsga2V5c192YXIgfSB7CiAgdXB2YXIgMSAka2V5c192YXIga2V5cwogIHNldCBtYXhfdXRpbCAwLjAKICBpZiB7IFtpbmZvIGV4aXN0cyBrZXlzKC1tYXhfdXRpbGl6YXRpb24pXSB9IHsKICAgIHNldCBtYXhfdXRpbCAka2V5cygtbWF4X3V0aWxpemF0aW9uKQogICAgaWYgeyAhKFtzdHJpbmcgaXMgZG91YmxlICRtYXhfdXRpbF0gJiYgJG1heF91dGlsID49IDAuMCAmJiAkbWF4X3V0aWwgPD0gMTAwKSB9IHsKICAgICAgdXRsOjplcnJvciBSU1ogNCAiLW1heF91dGlsaXphdGlvbiBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMTAwJS4iCiAgICB9CiAgICBzZXQgbWF4X3V0aWwgW2V4cHIgJG1heF91dGlsIC8gMTAwLjBdCiAgfQogIHJldHVybiAkbWF4X3V0aWwKfQoKcHJvYyBwYXJzZV9tYXhfd2lyZV9sZW5ndGggeyBrZXlzX3ZhciB9IHsKICB1cHZhciAxICRrZXlzX3ZhciBrZXlzCiAgc2V0IG1heF93aXJlX2xlbmd0aCAwCiAgaWYgeyBbaW5mbyBleGlzdHMga2V5cygtbWF4X3dpcmVfbGVuZ3RoKV0gfSB7CiAgICBzZXQgbWF4X3dpcmVfbGVuZ3RoICRrZXlzKC1tYXhfd2lyZV9sZW5ndGgpCiAgICBzdGE6OmNoZWNrX3Bvc2l0aXZlX2Zsb2F0ICItbWF4X3dpcmVfbGVuZ3RoIiAkbWF4X3dpcmVfbGVuZ3RoCiAgICBzZXQgbWF4X3dpcmVfbGVuZ3RoIFtzdGE6OmRpc3RhbmNlX3VpX3N0YSAkbWF4X3dpcmVfbGVuZ3RoXQogIH0KICByZXR1cm4gJG1heF93aXJlX2xlbmd0aAp9Cgpwcm9jIGNoZWNrX21heF93aXJlX2xlbmd0aCB7IG1heF93aXJlX2xlbmd0aCB1c2VfZGVmYXVsdCB9IHsKICBpZiB7IFtlc3Q6OndpcmVfc2lnbmFsX3Jlc2lzdGFuY2UgW3N0YTo6Y21kX2Nvcm5lcl1dID4gMCB9IHsKICAgIHNldCBtaW5fZGVsYXlfbWF4X3dpcmVfbGVuZ3RoIFtyc3o6OmZpbmRfbWF4X3dpcmVfbGVuZ3RoXQogICAgaWYgeyAkbWF4X3dpcmVfbGVuZ3RoID4gMCB9IHsKICAgICAgaWYgeyAkbWF4X3dpcmVfbGVuZ3RoIDwgJG1pbl9kZWxheV9tYXhfd2lyZV9sZW5ndGggfSB7CiAgICAgICAgc2V0IHdpcmVfbGVuZ3RoX2ZtdCBbZm9ybWF0ICUuMGZ1IFtzdGE6OmRpc3RhbmNlX3N0YV91aSAkbWluX2RlbGF5X21heF93aXJlX2xlbmd0aF1dCiAgICAgICAgdXRsOjp3YXJuIFJTWiA2NSAibWF4IHdpcmUgbGVuZ3RoIGxlc3MgdGhhbiAkd2lyZV9sZW5ndGhfZm10IGluY3JlYXNlcyB3aXJlIGRlbGF5cy4iCiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmIHsgJHVzZV9kZWZhdWx0IH0gewogICAgICAgIHNldCBtYXhfd2lyZV9sZW5ndGggJG1pbl9kZWxheV9tYXhfd2lyZV9sZW5ndGgKICAgICAgICBzZXQgbWF4X3dpcmVfbGVuZ3RoX2ZtdCBbZm9ybWF0ICUuMGYgW3N0YTo6ZGlzdGFuY2Vfc3RhX3VpICRtYXhfd2lyZV9sZW5ndGhdXQogICAgICAgIHV0bDo6aW5mbyBSU1ogNTggIlVzaW5nIG1heCB3aXJlIGxlbmd0aCAke21heF93aXJlX2xlbmd0aF9mbXR9dW0uIgogICAgICB9CiAgICB9CiAgfQogIHJldHVybiAkbWF4X3dpcmVfbGVuZ3RoCn0KCiMgbmFtZXNwYWNlCn0K",
nullptr};
} // end namespace rsz
