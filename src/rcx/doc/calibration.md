# Extraction Rules Generation Flow for OpenRCX

This flow generates the RC tech file for OpenRCX. The RC tech file provides
resistance and capcitance tables used for RC extraction for a spesific process
corner.

# The flow involves:

A. Running OpenRCX to generate patterns layout.

  - Input: tech LEF
  - Output: patterns.def, patterns.v
  - Script: generate_patterns.tcl
  - Desc: OpenRCX generates many patterns geometries to model various types
    of capacitance and resistances models.

B. Running your favorite extraction tool (i.e., reference extractor) to extract
    parasitics of the patterns layout.

  - Input: patterns.def, patterns.v (if required), and additional files
    required by the reference extractor.
  - Output: patterns.spef
  - Script: Not provided
  - Desc: Extract parasitics of the patterns generated by OpenRCX using reference
    extractor. This step provides the parasitics of various types of pattern
    geometries as reference for per unit RC calculation.

C. Running OpenRCX to convert patterns.spef to RC tch file.

  - Input: patterns.spef
  - Output: RC tech file
  - Script: generate_rules.tcl
  - Desc: OpenRCX takes the .spef from the reference extractor and performs
    calculation to produce capacitance and resistance table for all kinds of
    wire geometries. The output of this flow is an custom RC tech file for
    OpenRCX.

D. Benchmarking - test the accuracy of OpenRCX on the patterns layout.
  - Input: patterns.def and RC tech file
  - Output: rcx.spef, diff_spef.out
  - Script: ext_patterns.tcl
  - Desc: Perform parasitic extraction on pattern layout for the calibration
    using the generated RC tech file. OpenRCX then compares the extracted
    parasitics with the golden parasitics extracted by the reference extractor.

## How to run:

A. Go to OpenRCX home directory (./OpenROAD/src/rcx).

B. cd calibration.

C. Modify the user_env.tcl scipt in the script directory.

  - TECH_LEF: points to the directory of the tech LEF
  - PROCESS_NODE: the technology node
  - extRules: the name and the location of the OpenRCX tech file

D. Run the executable script run.sh --> run step A through D.

  - source run.sh or
  - ./run.sh

E. The OpenRCX RC tech file can be found in the directory set in the extRules variable.
